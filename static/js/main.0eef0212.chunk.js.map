{"version":3,"sources":["app/chatSlice.js","app/appSlice.js","app/userSlice.js","app/postSlice.js","app/store.js","logo-shadow.png","components/Loader/index.jsx","components/Button/index.jsx","components/Popup/index.jsx","assets/img/forbid.svg","pages/Forbid/index.jsx","assets/img/not-found.svg","pages/NotFound/index.jsx","assets/img/server-error.svg","pages/ServerError/index.jsx","assets/icons/spinner.svg","components/LoadingSpinner/index.jsx","components/Pagination/index.jsx","features/Home/components/SideBar/index.jsx","utils/Constants.js","hooks/useApi.js","hooks/usePostApi.js","assets/img/default-avatar.jpg","components/ImageCircle/index.jsx","assets/icons/image-icon.svg","components/ClickableIcon/index.jsx","assets/icons/reactions/angry.svg","assets/icons/reactions/care.svg","assets/icons/reactions/haha.svg","assets/icons/reactions/like.svg","assets/icons/reactions/love.svg","assets/icons/reactions/sad.svg","assets/icons/reactions/wow.svg","utils/Enums.js","features/Home/components/CreatePost/index.jsx","components/ConfirmModal/index.jsx","assets/icons/send-icon.svg","features/Home/components/CommentInput/index.jsx","features/Home/components/CommentList/index.jsx","components/ImageView/index.jsx","features/Home/components/PhotoList/index.jsx","features/Home/components/ReactionInput/index.jsx","features/Home/components/Post/index.jsx","utils/ExtensionMethod.js","features/Home/index.jsx","hooks/usePostPagination.js","logo-circle.png","hooks/useDarkMode.js","hooks/useChatApi.js","hooks/useUserApi.js","features/Chat/components/CreateChat/index.jsx","features/Chat/components/ChatList/index.jsx","hooks/useNotificationApi.js","features/Header/components/Notification/index.jsx","features/Header/components/NotificationList/index.jsx","hooks/useNotificationPagination.js","utils/config.js","features/Header/index.jsx","features/Chat/index.jsx","App.js","assets/img/login-page.svg","components/Input/index.jsx","pages/Login/index.jsx","pages/Register/index.jsx","index.js"],"names":["chats","createSlice","name","initialState","reducers","addChat","state","action","some","chat","id","payload","push","editChat","updatedChat","index","findIndex","participants","editGroupAvatar","updatedChatId","chatId","groupAvatarUrl","addReadByUserName","readByUserName","readByUserNames","includes","appendMessageToChat","chatToAppend","messagesToAppend","messages","totalRecords","limit","page","pageCount","keyword","concat","refreshChats","addMessage","newMessage","message","SenderUserName","addNotification","numOfUnreadMessages","readChat","selectedIds","addSelectedId","length","shift","reducer","combineReducers","actions","isLoading","setIsLoading","popup","isOpen","content","title","setPopup","notifications","items","loadNotification","notification","readAllNotification","filter","x","isRead","forEach","readNotificationById","refreshNotification","currentUser","setCurrentUser","onlineUserNameList","updateOnlineUserNameList","newPostTotal","addNewPost","resetNewPost","posts","refreshPost","addPost","newPost","post","updatePost","updatedPost","privacy","deletePost","splice","loadPost","addReaction","postId","reaction","reactions","updateReaction","updatedReaction","postIndex","reactionIndex","type","deleteReaction","reactionId","addComment","comment","comments","updateComment","updatedComment","commentIndex","deleteComment","commentId","rootReducer","chatReducer","app","appReducer","users","userReducer","store","configureStore","Loader","className","circleCommonClasses","useState","isEnding","setIsEnding","useEffect","src","Logo","alt","Button","outline","onClick","onBlur","disabled","children","Popup","style","margin","Forbid","ForbidImg","to","NotFound","NotFoundImg","ServerError","ErrorImg","LoadingSpinner","Spinner","Pagination","isHasMore","error","loadMoreContent","loadMoreClassName","SideBar","DefaultLimit","DefaultName","ChatClient","AppClient","useApi","dispatch","useDispatch","history","useHistory","Api","axios","create","baseURL","process","timeout","headers","paramsSerializer","params","queryString","stringify","openPopup","interceptors","request","use","config","a","token","window","localStorage","getItem","newConfig","Authorization","response","data","popupTitle","status","removeItem","errors","obj","str","Object","values","val","toString","substring","objToString","toLowerCase","Promise","reject","baseApiUrl","usePostApi","getAll","url","get","getById","put","delete","addPhoto","deletePhoto","photoId","ImageCircle","onlineSize","avatarSize","DefaultAvatar","size","userName","useSelector","isCurrentUser","isOnline","map","React","memo","ClickableIcon","colorClass","icon","iconClass","colorIconClass","secondMode","reverse","color","ChatType","Gender","MALE","FEMALE","OTHER","NotificationType","PrivacyType","PUBLIC","FRIEND","PRIVATE","PrivacyName","PrivacyIcon","ReactionType","LIKE","LOVE","CARE","WOW","HAHA","SAD","ANGRY","ReactionName","ReactionIcon","LikeIcon","LoveIcon","CareIcon","HahaIcon","WowIcon","SadIcon","AngryIcon","ReactionColor","CreatePost","setContent","setPrivacy","imageFiles","setImageFiles","isOpenPrivacyList","setIsOpenPrivacyList","isValidButton","setIsValidButton","setIsOpen","isOpenEmoji","setIsOpenEmoji","ref","useRef","emojiRef","privacyRef","postApi","escFunction","e","keyCode","checkIfClickedOutside","current","contains","target","document","addEventListener","removeEventListener","trim","avatarUrl","placeholder","firstName","ImageIcon","onSubmit","preventDefault","then","image","FormData","append","fullName","value","onChange","rows","disableAutoFocus","onEmojiClick","event","emojiObject","emoji","hidden","multiple","files","isValid","newImageFiles","file","addFiles","htmlFor","imageFile","URL","createObjectURL","removeImage","ConfirmModal","closeAction","confirmButtonTitle","confirmButtonAction","CommentInput","onSendMessage","SendIconNormal","CommentList","myCommentList","creator","sort","b","dateCreated","otherCommentList","Comment","isMyComment","isOpenMenu","setIsOpenMenu","isOpenConfirm","setIsOpenConfirm","isEditMode","setIsEditMode","editContent","setEditContent","editInputRef","focus","moment","Date","fromNow","replace","ImageView","photos","startIndex","setIndex","imageUrl","caption","PhotoList","setStartIndex","list","OnePhotoList","TwoPhotosList","photo","ThreePhotosList","FourPhotosList","List","remainingPhotos","Reaction","ReactionInput","reacted","Post","isOpenReaction","setIsOpenReaction","isOpenCommentList","setIsOpenCommentList","topThreeType","setTopThreeType","reactionRef","find","group","xs","key","reduce","rv","groupBy","topThree","total","slice","topThreeReaction","preState","onMouseOver","onMouseLeave","Home","setPage","setError","setIsHasMore","catch","usePostPagination","prevPage","useDarkMode","darkMode","setDarkMode","documentElement","classList","add","setItem","remove","useChatApi","sendMessage","patch","sendImage","updateGroupAvatar","createGroupChat","groupName","updateGroupChat","newGroupName","createPrivateChat","useUserApi","login","register","lastName","checkUserNameExists","getFriendList","getCurrentUser","updateUser","CreateChat","selectedMode","setSelectedMode","isOpenFriendList","setIsOpenFriendList","setGroupName","setKeyword","friendList","setFriendList","selectedFriendList","setSelectedFriendList","friendListRef","chatApi","userApi","participantUserNames","participantUserName","result","onFocus","autoComplete","selected","localeCompare","friend","i","handleCreateGroup","ChatList","setChatNotificationNumber","isOpenCreateChat","setIsOpenCreateChat","num","preNum","getCurrentChats","currentUserName","lastMessage","handleClick","href","rel","chatA","chatB","lastMessageA","lastMessageB","sortChat","searchChat","useNotificationApi","readAll","readById","Notification","reactionType","NotificationList","setNotificationNumber","notificationApi","useNotificationPagination","NavList","inactiveIcon","route","Header","refreshPosts","user","location","useLocation","chatNotificationNumber","notificationNumber","isOpenChatList","setIsOpenChatList","isOpenNotificationList","setIsOpenNotificationList","confirmModal","setConfirmModal","logout","search","nav","currentRoute","pathname","isCurrentRoute","scrollTo","top","left","behavior","goTo","openConfirmModal","Chat","connection","setConnection","selectedId","console","fetchData","newConnection","HubConnectionBuilder","withUrl","accessTokenFactory","withAutomaticReconnect","build","connectionStarted","start","on","creatorUserName","stop","App","props","basename","exact","path","component","Input","Login","username","setUsername","password","setPassword","isDirty","setIsDirty","LoginPageImage","Register","isChanged","setIsChanged","isExistsUserName","setIsExistsUserName","INPUT_CLASS","schema","yup","shape","required","dateOfBirth","test","min","max","checkRegex","email","confirmPassword","watch","useForm","resolver","yupResolver","defaultValues","handleSubmit","control","clearErrors","reset","formState","useWatch","isExists","shouldFocus","gender","regex","RegExp","PrivateRoute","Component","rest","isLogin","render","from","ReactDOM","StrictMode","getElementById"],"mappings":"mOAEMA,EAAQC,YAAY,CACxBC,KAAM,QACNC,aAAc,GACdC,SAAU,CACRC,QAAS,SAACC,EAAOC,GACAD,EAAME,MAAK,SAACC,GAAD,OAAUA,EAAKC,KAAOH,EAAOI,QAAQD,OAE7DJ,EAAMM,KAAKL,EAAOI,UAGtBE,SAAU,SAACP,EAAOC,GAChB,IAAMO,EAAcP,EAAOI,QACrBI,EAAQT,EAAMU,WAAU,SAACP,GAC7B,OAAOA,EAAKC,KAAOI,EAAYJ,MAE7BK,GAAS,GACXT,EAAMS,GAAOb,KAAOY,EAAYZ,KAChCI,EAAMS,GAAOE,aAAeH,EAAYG,cAExCX,EAAMM,KAAKE,IAGfI,gBAAiB,SAACZ,EAAOC,GACvB,IAIgB,EAJVY,EAAgBZ,EAAOI,QAAQS,OAC/BL,EAAQT,EAAMU,WAAU,SAACP,GAC7B,OAAOA,EAAKC,KAAOS,KAEjBJ,GAAS,IACXT,EAAMS,GAAOM,eAAb,UAA8Bd,EAAOI,eAArC,aAA8B,EAAgBU,iBAGlDC,kBAAmB,SAAChB,EAAOC,GACzB,MAAmCA,EAAOI,QAAlCS,EAAR,EAAQA,OAAQG,EAAhB,EAAgBA,eACVR,EAAQT,EAAMU,WAAU,SAACP,GAC7B,OAAOA,EAAKC,KAAOU,KAEjBL,GAAS,IACNT,EAAMS,GAAOS,gBAAgBC,SAASF,IACzCjB,EAAMS,GAAOS,gBAAgBZ,KAAKW,KAIxCG,oBAAqB,SAACpB,EAAOC,GAC3B,IAAMoB,EAAepB,EAAOI,QACtBiB,EAAgB,OAAGD,QAAH,IAAGA,OAAH,EAAGA,EAAcE,SACjCd,EAAQT,EAAMU,WAAU,SAACP,GAC7B,OAAOA,EAAKC,KAAOiB,EAAajB,MAE9BK,GAAS,IACXT,EAAMS,GAAOe,aAAeH,EAAaG,aACzCxB,EAAMS,GAAOgB,MAAQJ,EAAaI,MAClCzB,EAAMS,GAAOiB,KAAOL,EAAaK,KACjC1B,EAAMS,GAAOkB,UAAYN,EAAaM,UAClCN,EAAaO,QACf5B,EAAMS,GAAOc,SAAWD,EAExBtB,EAAMS,GAAOc,SACXvB,EAAMS,GAAOc,SAASM,OAAOP,KAIrCQ,aAAc,SAAC9B,EAAOC,GAAY,IAAD,EAE/B,OADK,UAAGA,EAAOI,eAAV,QAAqB,IAG5B0B,WAAY,SAAC/B,EAAOC,GAClB,IAAM+B,EAAa/B,EAAOI,QACpBI,EAAQT,EAAMU,WAAU,SAACP,GAC7B,OAAOA,EAAKC,KAAO4B,EAAWlB,UAE5BL,GAAS,IACXT,EAAMS,GAAOc,SAASjB,KAAtB,OAA2B0B,QAA3B,IAA2BA,OAA3B,EAA2BA,EAAYC,SACvCjC,EAAMS,GAAOS,gBAAkB,QAACc,QAAD,IAACA,OAAD,EAACA,EAAYE,kBAGhDC,gBAAiB,SAACnC,EAAOC,GACvB,IAAMa,EAASb,EAAOI,QAChBI,EAAQT,EAAMU,WAAU,SAACP,GAC7B,OAAOA,EAAKC,KAAOU,KAEjBL,GAAS,IACXT,EAAMS,GAAO2B,qBAAuB,IAGxCC,SAAU,SAACrC,EAAOC,GAChB,IAAMa,EAASb,EAAOI,QAChBI,EAAQT,EAAMU,WAAU,SAACP,GAC7B,OAAOA,EAAKC,KAAOU,KAEjBL,GAAS,IACXT,EAAMS,GAAO2B,oBAAsB,OAMrCE,EAAc3C,YAAY,CAC9BC,KAAM,cACNC,aAAc,GACdC,SAAU,CACRyC,cAAe,SAACvC,EAAOC,GACrB,IAAKD,EAAMmB,SAASlB,EAAOI,UACrBL,EAAMwC,OAAS,EAGjB,OAFAxC,EAAMyC,QACNzC,EAAMM,KAAKL,EAAOI,SACXL,MAOX0C,EAAUC,YAAgB,CAC9BjD,MAAOA,EAAMgD,QACbJ,YAAaA,EAAYI,UAGpB,EAUHhD,EAAMkD,QATR7C,EADK,EACLA,QACAQ,EAFK,EAELA,SACAuB,EAHK,EAGLA,aACAC,EAJK,EAILA,WAEAnB,GANK,EAKLQ,oBALK,EAMLR,iBAEAuB,GARK,EAOLE,SAPK,EAQLF,iBACAnB,EATK,EASLA,kBAEauB,EAAkBD,EAAYM,QAA9BL,cACAG,ICjITG,EAAYlD,YAAY,CAC5BC,KAAM,YACNC,cAAc,EACdC,SAAU,CACRgD,aAAc,SAAC9C,EAAOC,GAEpB,OADQA,EAAOI,YAMf0C,EAAQpD,YAAY,CACxBC,KAAM,QACNC,aAAc,CACZmD,QAAQ,EACRC,QAAS,GACTC,MAAO,gBAETpD,SAAU,CACRqD,SAAU,SAACnD,EAAOC,GAEhB,OADQA,EAAOI,YAMf+C,EAAgBzD,YAAY,CAChCC,KAAM,gBACNC,aAAc,CAAEwD,MAAO,IACvBvD,SAAU,CACRqC,gBAAiB,SAACnC,EAAOC,GAAY,IAAD,EAC7B,OAALD,QAAK,IAALA,GAAA,UAAAA,EAAOqD,aAAP,SAAc/C,KAAKL,EAAOI,UAE5BiD,iBAAkB,SAACtD,EAAOC,GACxB,GAAIA,EAAOI,QAAQqB,KAAO1B,EAAM0B,KAAM,CACpC,IAAM6B,EAAetD,EAAOI,QAC5BL,EAAMwB,aAAe+B,EAAa/B,aAClCxB,EAAMyB,MAAQ8B,EAAa9B,MAC3BzB,EAAM0B,KAAO6B,EAAa7B,KAC1B1B,EAAM2B,UAAY4B,EAAa5B,UAC/B3B,EAAMqD,MAAQrD,EAAMqD,MAAMxB,OAAO0B,EAAaF,SAGlDG,oBAAqB,SAACxD,EAAOC,GAAY,IAAD,IACjC,OAALD,QAAK,IAALA,GAAA,UAAAA,EAAOqD,aAAP,mBAAcI,QAAO,SAACC,GAAD,OAAQA,EAAEC,iBAA/B,SAAwCC,SAAQ,SAACF,GAAD,OAAQA,EAAEC,QAAS,MAErEE,qBAAsB,SAAC7D,EAAOC,GAAY,IAAD,EACjCG,EAAKH,EAAOI,QACZI,EAAK,UAAGT,EAAMqD,aAAT,aAAG,EAAa3C,WAAU,SAAC6C,GACpC,OAAOA,EAAanD,KAAOA,KAEzBK,GAAS,IACXT,EAAMqD,MAAM5C,GAAOkD,QAAS,IAGhCG,oBAAqB,SAAC9D,EAAOC,GAE3B,OADQA,EAAOI,YAMfqC,EAAUC,YAAgB,CAC9BE,UAAWA,EAAUH,QACrBK,MAAOA,EAAML,QACbU,cAAeA,EAAcV,UAGhBI,EAAiBD,EAAUD,QAA3BE,aACAK,EAAaJ,EAAMH,QAAnBO,SACR,EAMHC,EAAcR,QALhBT,EADK,EACLA,gBACA2B,EAFK,EAELA,oBACAN,EAHK,EAGLA,oBACAK,EAJK,EAILA,qBACAP,EALK,EAKLA,iBAEaZ,IC5ETqB,EAAcpE,YAAY,CAC9BC,KAAM,cACNC,aAAc,GACdC,SAAU,CACRkE,eAAgB,SAAChE,EAAOC,GAEtB,OADQA,EAAOI,YAMf4D,EAAqBtE,YAAY,CACrCC,KAAM,qBACNC,aAAc,GACdC,SAAU,CACRoE,yBAA0B,SAAClE,EAAOC,GAEhC,OADQA,EAAOI,YAMfqC,EAAUC,YAAgB,CAC9BoB,YAAaA,EAAYrB,QACzBuB,mBAAoBA,EAAmBvB,UAG1BsB,EAAmBD,EAAYnB,QAA/BoB,eACAE,EAA6BD,EAAmBrB,QAAhDsB,yBACAxB,IC9BTyB,EAAexE,YAAY,CAC/BC,KAAM,eACNC,aAAc,EACdC,SAAU,CACRsE,WAAY,SAACpE,GACX,OAAOA,EAAQ,GAEjBqE,aAAc,WACZ,OAAO,MAIPC,EAAQ3E,YAAY,CACxBC,KAAM,QACNC,aAAc,CAAEwD,MAAO,IACvBvD,SAAU,CACRyE,YAAa,SAACvE,EAAOC,GAEnB,OADQA,EAAOI,SAGjBmE,QAAS,SAACxE,EAAOC,GACf,IAEe,EAFTwE,EAAUxE,EAAOI,QACNL,EAAMqD,MAAMnD,MAAK,SAACwE,GAAD,OAAUA,EAAKtE,KAAOqE,EAAQrE,QAEzD,OAALJ,QAAK,IAALA,GAAA,UAAAA,EAAOqD,aAAP,SAAc/C,KAAKmE,KAGvBE,WAAY,SAAC3E,EAAOC,GAAY,IAAD,EACvB2E,EAAc3E,EAAOI,QAErBI,EAAK,OAAGT,QAAH,IAAGA,GAAH,UAAGA,EAAOqD,aAAV,aAAG,EAAc3C,WAAU,SAACgE,GACrC,OAAOA,EAAKtE,KAAOwE,EAAYxE,MAE7BK,GAAS,GACXT,EAAMqD,MAAM5C,GAAOwC,QAAU2B,EAAY3B,QACzCjD,EAAMqD,MAAM5C,GAAOoE,QAAUD,EAAYC,SAEzC7E,EAAMM,KAAKsE,IAGfE,WAAY,SAAC9E,EAAOC,GAAY,IAAD,EACvBQ,EAAK,OAAGT,QAAH,IAAGA,GAAH,UAAGA,EAAOqD,aAAV,aAAG,EAAc3C,WAAU,SAACgE,GACrC,OAAOA,EAAKtE,KAAOH,EAAOI,WAExBI,GAAS,GACXT,EAAMqD,MAAM0B,OAAOtE,EAAO,IAG9BuE,SAAU,SAAChF,EAAOC,GAChB,GAAIA,EAAOI,QAAQqB,KAAO1B,EAAM0B,KAAM,CACpC,IAAM4C,EAAQrE,EAAOI,QACrBL,EAAMwB,aAAe8C,EAAM9C,aAC3BxB,EAAMyB,MAAQ6C,EAAM7C,MACpBzB,EAAM0B,KAAO4C,EAAM5C,KACnB1B,EAAM2B,UAAY2C,EAAM3C,UACxB3B,EAAMqD,MAAQrD,EAAMqD,MAAMxB,OAAOyC,EAAMjB,SAG3C4B,YAAa,SAACjF,EAAOC,GACnB,IAAMiF,EAASjF,EAAOI,QAAQ6E,OACxBC,EAAWlF,EAAOI,QAAQ8E,SAChC,GAAID,GAAUC,EAAU,CAAC,IAAD,EAChB1E,EAAK,OAAGT,QAAH,IAAGA,GAAH,UAAGA,EAAOqD,aAAV,aAAG,EAAc3C,WAAU,SAACgE,GACrC,OAAOA,EAAKtE,KAAO8E,KAEjBzE,GAAS,GACXT,EAAMqD,MAAM5C,GAAO2E,UAAU9E,KAAK6E,KAIxCE,eAAgB,SAACrF,EAAOC,GACtB,IAAMiF,EAASjF,EAAOI,QAAQ6E,OACxBI,EAAkBrF,EAAOI,QAAQ8E,SAEvC,GAAID,GAAUI,EAAiB,CAAC,IAAD,EACvBC,EAAS,OAAGvF,QAAH,IAAGA,GAAH,UAAGA,EAAOqD,aAAV,aAAG,EAAc3C,WAAU,SAACgE,GACzC,OAAOA,EAAKtE,KAAO8E,KAErB,GAAIK,GAAa,EAAG,CAAC,IAAD,EACZC,EAAa,OAAGxF,QAAH,IAAGA,GAAH,UAAGA,EAAOqD,MAAMkC,GAAWH,iBAA3B,aAAG,EAAmC1E,WACvD,SAACyE,GACC,OAAOA,EAAS/E,KAAOkF,EAAgBlF,MAGvCoF,GAAiB,IACnBxF,EAAMqD,MAAMkC,GAAWH,UAAUI,GAAeC,KAC9CH,EAAgBG,SAK1BC,eAAgB,SAAC1F,EAAOC,GACtB,IAAMiF,EAASjF,EAAOI,QAAQ6E,OACxBS,EAAa1F,EAAOI,QAAQsF,WAElC,GAAIT,GAAUS,EAAY,CAAC,IAAD,EAClBJ,EAAS,OAAGvF,QAAH,IAAGA,GAAH,UAAGA,EAAOqD,aAAV,aAAG,EAAc3C,WAAU,SAACgE,GACzC,OAAOA,EAAKtE,KAAO8E,KAErB,GAAIK,GAAa,EAAG,CAAC,IAAD,EACZC,EAAa,OAAGxF,QAAH,IAAGA,GAAH,UAAGA,EAAOqD,MAAMkC,GAAWH,iBAA3B,aAAG,EAAmC1E,WACvD,SAACyE,GACC,OAAOA,EAAS/E,KAAOuF,KAG3B,GAAIH,GAAiB,EAEnB,OADAxF,EAAMqD,MAAMkC,GAAWH,UAAUL,OAAOS,EAAe,GAChDxF,KAKf4F,WAAY,SAAC5F,EAAOC,GAClB,IAAMiF,EAASjF,EAAOI,QAAQ6E,OACxBW,EAAU5F,EAAOI,QAAQwF,QAC/B,GAAIX,GAAUW,EAAS,CAAC,IAAD,EACfpF,EAAK,OAAGT,QAAH,IAAGA,GAAH,UAAGA,EAAOqD,aAAV,aAAG,EAAc3C,WAAU,SAACgE,GACrC,OAAOA,EAAKtE,KAAO8E,KAEjBzE,GAAS,GACXT,EAAMqD,MAAM5C,GAAOqF,SAASxF,KAAKuF,KAIvCE,cAAe,SAAC/F,EAAOC,GACrB,IAAMiF,EAASjF,EAAOI,QAAQ6E,OACxBc,EAAiB/F,EAAOI,QAAQwF,QAEtC,GAAIX,GAAUc,EAAgB,CAAC,IAAD,EACtBT,EAAS,OAAGvF,QAAH,IAAGA,GAAH,UAAGA,EAAOqD,aAAV,aAAG,EAAc3C,WAAU,SAACgE,GACzC,OAAOA,EAAKtE,KAAO8E,KAErB,GAAIK,GAAa,EAAG,CAAC,IAAD,EACZU,EAAY,OAAGjG,QAAH,IAAGA,GAAH,UAAGA,EAAOqD,MAAMkC,GAAWO,gBAA3B,aAAG,EAAkCpF,WACrD,SAACmF,GACC,OAAOA,EAAQzF,KAAO4F,EAAe5F,MAGrC6F,GAAgB,IAClBjG,EAAMqD,MAAMkC,GAAWO,SAASG,GAAchD,QAC5C+C,EAAe/C,YAKzBiD,cAAe,SAAClG,EAAOC,GACrB,IAAMiF,EAASjF,EAAOI,QAAQ6E,OACxBiB,EAAYlG,EAAOI,QAAQ8F,UAEjC,GAAIjB,GAAUiB,EAAW,CAAC,IAAD,EACjBZ,EAAS,OAAGvF,QAAH,IAAGA,GAAH,UAAGA,EAAOqD,aAAV,aAAG,EAAc3C,WAAU,SAACgE,GACzC,OAAOA,EAAKtE,KAAO8E,KAErB,GAAIK,GAAa,EAAG,CAAC,IAAD,EACZU,EAAY,OAAGjG,QAAH,IAAGA,GAAH,UAAGA,EAAOqD,MAAMkC,GAAWO,gBAA3B,aAAG,EAAkCpF,WACrD,SAACmF,GACC,OAAOA,EAAQzF,KAAO+F,KAG1B,GAAIF,GAAgB,EAElB,OADAjG,EAAMqD,MAAMkC,GAAWO,SAASf,OAAOkB,EAAc,GAC9CjG,QAQb0C,EAAUC,YAAgB,CAC9B2B,MAAOA,EAAM5B,QACbyB,aAAcA,EAAazB,UAGtB,EAYH4B,EAAM1B,QAXR2B,EADK,EACLA,YAEAI,GAHK,EAELH,QAFK,EAGLG,YACAG,EAJK,EAILA,WACAG,EALK,EAKLA,YACAI,GANK,EAMLA,eACAK,GAPK,EAOLA,eACAE,GARK,EAQLA,WACAG,GATK,EASLA,cACAG,GAVK,EAULA,cACAlB,GAXK,EAWLA,SAEK,GAAqCb,EAAavB,QAA1CwB,GAAR,GAAQA,WAAYC,GAApB,GAAoBA,aCvLrB+B,GAAc,CAClB1G,MAAO2G,EACPC,IAAKC,EACLC,MAAOC,EACPnC,MDqLa5B,GC9KAgE,GAJDC,YAAe,CAC3BjE,QAAS0D,K,QCdI,OAA0B,wC,QCoC1BQ,GAjCA,SAAC,GAAkC,IAAD,EAA/BC,EAA+B,EAA/BA,UAA+B,IAApB7D,cAAoB,SAC3C8D,EACF,+EACF,EAAgCC,oBAAS,GAAzC,oBAAOC,EAAP,KAAiBC,EAAjB,KAMA,OALAC,qBAAU,WACR,OAAO,WACLD,GAAY,MAEb,IAEDjE,GACE,qCACE,uBACE6D,UACE,yIACCG,EAAW,UAAY,KADxB,UAEC,IAAMH,SAFP,QAEoB,IAJxB,UAOE,sBAAKM,IAAKC,GAAMP,UAAU,kBAAkBQ,IAAI,SAChD,uBAAKR,UAAU,8BAAf,UACE,sBAAKA,UAAS,UAAKC,EAAL,0BACd,sBACED,UAAS,UAAKC,EAAL,6BAEX,sBAAKD,UAAS,UAAKC,EAAL,iCCaXQ,OAjCf,YAQI,IAAD,IAPDC,eAOC,SANDtE,EAMC,EANDA,QACA4D,EAKC,EALDA,UACAW,EAIC,EAJDA,QACAC,EAGC,EAHDA,OACAC,EAEC,EAFDA,SACAC,EACC,EADDA,SAEA,OACE,qCACE,yBACED,SAAUA,EACVF,QAASA,EACTC,OAAQA,EACRZ,UACE,mJAECU,EACG,+JACA,wGACJ,KALA,OAMCV,QAND,IAMCA,IAAa,IACd,KACEa,EAAgD,iBAArC,oCAbjB,SAgBGzE,GAAoB0E,OCFdC,OAvBf,YAKI,IAAD,IAJD1E,aAIC,MAJO,eAIP,EAHDF,EAGC,EAHDA,OAGC,IAFDC,eAEC,MAFS,8BAET,EADDuE,EACC,EADDA,QAEA,OACExE,GACE,sBAAK6D,UAAU,2BAA2BgB,MAAO,CAAEC,OAAQ,GAA3D,SACE,uBAAKjB,UAAU,+MAAf,UACE,qBAAIA,UAAU,wDAAd,SACG3D,IAEH,uBAAM2D,UAAU,iCAAhB,SAAkD5D,IAClD,sBAAK4D,UAAU,0BAAf,SACE,eAAC,GAAD,CAAQ5D,QAAQ,QAAQuE,QAASA,YCzB9B,OAA0B,mCCuB1BO,OAlBf,YAA8B,IAAZ9F,EAAW,EAAXA,QAChB,OACE,uBAAK4E,UAAU,0GAAf,UACE,sBACEA,UAAU,oCACVM,IAAKa,GACLX,IAAI,UAEN,uBAAMR,UAAU,4CAAhB,gBACG5E,QADH,IACGA,IAAW,uDAEd,eAAC,IAAD,CAAMgG,GAAG,IAAT,SACE,eAAC,GAAD,CAAQhF,QAAQ,2BCjBT,OAA0B,sCCuB1BiF,OAlBf,YAAgC,IAAZjG,EAAW,EAAXA,QAClB,OACE,uBAAK4E,UAAU,0GAAf,UACE,sBACEA,UAAU,oCACVM,IAAKgB,GACLd,IAAI,UAEN,uBAAMR,UAAU,6CAAhB,gBACG5E,QADH,IACGA,IAAW,wBAEd,eAAC,IAAD,CAAMgG,GAAG,IAAT,SACE,eAAC,GAAD,CAAQhF,QAAQ,2BCjBT,OAA0B,yCCuB1BmF,OAlBf,YAAmC,IAAZnG,EAAW,EAAXA,QACrB,OACE,uBAAK4E,UAAU,+GAAf,UACE,sBACEA,UAAU,oCACVM,IAAKkB,GACLhB,IAAI,UAEN,uBAAMR,UAAU,4CAAhB,gBACG5E,QADH,IACGA,IAAW,gCAEd,eAAC,IAAD,CAAMgG,GAAG,IAAT,SACE,eAAC,GAAD,CAAQhF,QAAQ,2B,QCjBT,OAA0B,oCCW1BqF,OARf,WACE,OACE,qCACE,sBAAKnB,IAAKoB,GAASlB,IAAI,UAAUR,UAAU,4BCgClC2B,OAnCf,YAQI,IAPFC,EAOC,EAPDA,UACA5F,EAMC,EANDA,UACA6F,EAKC,EALDA,MACAlB,EAIC,EAJDA,QAIC,IAHDmB,uBAGC,MAHiB,eAGjB,MAFDC,yBAEC,MAFmB,GAEnB,MADD/B,iBACC,MADW,GACX,EACD,OACE,uBAAKA,UAAWA,EAAhB,UACG4B,IAAc5F,GACb,sBAAKgE,UAAU,OAAf,SACE,yBACEA,UACE,sMAEA+B,EAEFpB,QAASA,EANX,SAQGmB,MAIN9F,GACC,sBAAKgE,UAAU,2BAAf,SACE,eAAC,GAAD,MAGH6B,GAAS,sBAAK7B,UAAU,4BAAf,SAA4C6B,QCpB7CG,OARf,YAAiC,IAAdhC,EAAa,EAAbA,UACjB,OACE,qCACE,sBAAKA,UAAWA,EAAhB,yB,4BCNOiC,GACG,GADHA,GAEL,GAGKC,GACI,UADJA,GAEG,UAGHC,GACM,iBADNA,GAEG,cAFHA,GAGW,qBAHXA,GAImB,4BAJnBA,GAKmB,2BALnBA,GAM2B,mCAG3BC,GACG,cADHA,GAEW,qBAFXA,GAGE,aAHFA,GAIM,iBAJNA,GAKc,wBALdA,GAMK,gBANLA,GAOO,kBAPPA,GAQe,yBARfA,GASM,iBATNA,GAUW,sB,wCCzBT,SAASC,KACtB,IAAMC,EAAWC,cACXC,EAAUC,cAEVC,EAAMC,KAAMC,OAAO,CACvBC,QAASC,0CACTC,QAAS,IACTC,QAAS,CACP,eAAgB,oBAElBC,iBAAkB,SAACC,GAAD,OAAYC,KAAYC,UAAUF,MAkEtD,SAASG,EAAUhH,EAAOD,GAMxBkG,EAAShG,EALK,CACZH,QAAQ,EACRE,MAAOA,EACPD,QAASA,KAKb,OAxEAsG,EAAIY,aAAaC,QAAQC,IAAzB,yCAA6B,WAAOC,GAAP,kBAAAC,EAAA,6DACvBC,EAAQC,OAAOC,aAAaC,QAAQ,SAEpCC,EAAYN,EACZE,IACFI,EAAS,2BACJN,GADI,IAEPT,QAAS,CAAEgB,cAAc,UAAD,OAAYL,OAPb,kBAUpBI,GAVoB,2CAA7B,uDAYArB,EAAIY,aAAaW,SAAST,KACxB,SAACS,GAGC,OAFA3B,EAASrG,GAAa,IAElBgI,GAAYA,EAASC,KAChBD,EAASC,KAEXD,KAET,SAACpC,GAAW,IAAD,gBACTS,EAASrG,GAAa,IACtB,IAAIb,EAC8B,kBAAhC,UAAOyG,EAAMoC,gBAAb,aAAO,EAAgBC,MAAvB,UACIrC,EAAMoC,gBADV,aACI,EAAgBC,KAChB,4DAEN,GAAIrC,EAAMoC,SAAU,CAClB,IAAIE,EAAa,eACjB,OAAQtC,EAAMoC,SAASG,QACrB,KAAK,IACHD,EAAa,iBACbP,OAAOC,aAAaQ,WAAW,SACxB,OAAP7B,QAAO,IAAPA,KAAS/I,KAAK,UACd,MACF,KAAK,IACH0K,EAAa,YACN,OAAP3B,QAAO,IAAPA,KAAS/I,KAAK,WACd,MACF,KAAK,IACH0K,EAAa,eACN,OAAP3B,QAAO,IAAPA,KAAS/I,KAAK,gBACd,MACF,QASE,OAPA2B,GAAU,UAAAyG,EAAMoC,gBAAN,mBAAgBC,YAAhB,eAAsBI,QA8B5C,SAAqBC,GAEnB,IADA,IAAIC,EAAM,GACV,MAAkBC,OAAOC,OAAOH,GAAhC,eAAsC,CAAjC,IAAMI,EAAG,KACZH,GAAG,UAAOG,EAAIC,WAAX,MAGL,OADAJ,EAAMA,EAAIK,UAAU,EAAGL,EAAI7I,OAAS,GAlCtBmJ,CAAW,UAACjD,EAAMoC,gBAAP,iBAAC,EAAgBC,YAAjB,aAAC,EAAsBI,QAClClJ,GAES2J,cAAczK,SAAS,yBAClC+I,EAAUc,EAAY/I,GAEjB4J,QAAQC,OAAR,UAAepD,EAAMoC,gBAArB,aAAe,EAAgBC,OAM5C,OAHK9I,EAAQ2J,cAAczK,SAAS,yBAClC+I,EAAUc,EAAY/I,GAEjB4J,QAAQC,OAAR,OAAepD,QAAf,IAAeA,GAAf,UAAeA,EAAOoC,gBAAtB,aAAe,EAAiBC,SAapCxB,ECtFT,IAAMwC,GAAa,SAEJ,SAASC,KACtB,IAAMzC,EAAML,KACNC,EAAWC,cAgFjB,MA9EgB,CACd6C,OAAQ,SAAClC,GAAY,IAAD,EAClBZ,EAASrG,GAAa,KAClB,UAACiH,SAAD,aAAC,EAAQtI,SACXsI,EAAM,2BAAQA,GAAR,IAAgBtI,MAAOqH,MAE/B,IAAMoD,EAAG,UAAMH,IACf,OAAOxC,EAAI4C,IAAID,EAAK,CAAEnC,YAExBqC,QAAS,SAAChM,GACR+I,EAASrG,GAAa,IACtB,IAAMoJ,EAAG,UAAMH,GAAN,YAAoB3L,GAC7B,OAAOmJ,EAAI4C,IAAID,IAEjB1H,QAAS,SAAC4F,GACRjB,EAASrG,GAAa,IACtB,IAAMoJ,EAAG,UAAMH,IACf,OAAOxC,EAAI7E,KAAKwH,EAAK9B,IAEvBzF,WAAY,SAACO,EAAQkF,GACnBjB,EAASrG,GAAa,IACtB,IAAMoJ,EAAG,UAAMH,GAAN,YAAoB7G,GAC7B,OAAOqE,EAAI8C,IAAIH,EAAK9B,IAEtBtF,WAAY,SAACI,GACXiE,EAASrG,GAAa,IACtB,IAAMoJ,EAAG,UAAMH,GAAN,YAAoB7G,GAC7B,OAAOqE,EAAI+C,OAAOJ,IAEpBK,SAAU,SAACrH,EAAQkF,GACjBjB,EAASrG,GAAa,IACtB,IAAMoJ,EAAG,UAAMH,GAAN,YAAoB7G,EAApB,WAeT,OAdAqE,EAAIY,aAAaC,QAAQC,IAAzB,yCAA6B,WAAOC,GAAP,kBAAAC,EAAA,6DACvBC,EAAQC,OAAOC,aAAaC,QAAQ,SACpCC,EAAY,GACZJ,IACFI,EAAS,2BACJN,GADI,IAEPT,QAAS,CACP,eAAgB,sBAChBgB,cAAc,UAAD,OAAYL,OARJ,kBAYpBI,GAZoB,2CAA7B,uDAcOrB,EAAI7E,KAAKwH,EAAK9B,IAEvBoC,YAAa,SAACtH,EAAQuH,GACpBtD,EAASrG,GAAa,IACtB,IAAMoJ,EAAG,UAAMH,GAAN,YAAoB7G,EAApB,mBAAqCuH,GAC9C,OAAOlD,EAAI+C,OAAOJ,IAEpBjH,YAAa,SAACC,EAAQkF,GACpB,IAAM8B,EAAG,UAAMH,GAAN,YAAoB7G,EAApB,cACT,OAAOqE,EAAI7E,KAAKwH,EAAK9B,IAEvB/E,eAAgB,SAACH,EAAQkF,GACvB,IAAM8B,EAAG,UAAMH,GAAN,YAAoB7G,EAApB,cACT,OAAOqE,EAAI8C,IAAIH,EAAK9B,IAEtB1E,eAAgB,SAACR,GACf,IAAMgH,EAAG,UAAMH,GAAN,YAAoB7G,EAApB,cACT,OAAOqE,EAAI+C,OAAOJ,IAEpBtG,WAAY,SAACV,EAAQkF,GACnB,IAAM8B,EAAG,UAAMH,GAAN,YAAoB7G,EAApB,aACT,OAAOqE,EAAI7E,KAAKwH,EAAK9B,IAEvBrE,cAAe,SAACb,EAAQiB,EAAWiE,GACjC,IAAM8B,EAAG,UAAMH,GAAN,YAAoB7G,EAApB,qBAAuCiB,GAChD,OAAOoD,EAAI8C,IAAIH,EAAK9B,IAEtBlE,cAAe,SAAChB,EAAQiB,GACtB,IAAM+F,EAAG,UAAMH,GAAN,YAAoB7G,EAApB,qBAAuCiB,GAChD,OAAOoD,EAAI+C,OAAOJ,KCtFT,WAA0B,2CCYzC,SAASQ,GAAT,GAOI,IAAD,EAoBGC,EAqBAC,EAzCH,IANDzF,WAMC,MANK0F,GAML,MALDhG,iBAKC,MALW,GAKX,MAJDQ,WAIC,MAJK,SAIL,MAHDyF,YAGC,MAHM,KAGN,MAFDC,gBAEC,MAFU,GAEV,EADDpM,EACC,EADDA,aAEMsD,EAAqB+I,aACzB,SAAChN,GAAD,OAAWA,EAAMwG,MAAMvC,sBAEnBF,EAAciJ,aAAY,SAAChN,GAAD,OAAWA,EAAMwG,MAAMzC,eAEjDkJ,EAAgBF,IAAahJ,EAAYgJ,SAE3CG,GAAW,EAaf,OAZKD,IACCF,EACFG,EAAWjJ,EAAmB9C,SAAS4L,GAC9BpM,IACTuM,EAAWvM,EACR8C,QAAO,SAACC,GAAD,OAAOA,EAAEqJ,WAAahJ,EAAYgJ,YACzCI,KAAI,SAACzJ,GAAD,OAAOA,KACXxD,MAAK,SAACwD,GAAD,OAAOO,EAAmB9C,SAASuC,EAAEqJ,eAKzCD,GACN,IAAK,KACHH,EAAa,UACb,MACF,IAAK,KACHA,EAAa,2CACb,MACF,IAAK,KAGL,IAAK,KAGL,IAAK,OACHA,EAAa,mBACb,MACF,QACEA,EAAa,iCAIjB,OAAQG,GACN,IAAK,KACHF,EAAa,wBACb,MACF,IAAK,KACHA,EAAa,wBACb,MACF,IAAK,KACHA,EAAa,4BACb,MACF,IAAK,KACHA,EAAa,4BACb,MACF,IAAK,OACHA,EAAa,gBACb,MACF,QACEA,EAAa,4BAEjB,OACE,uBAAK/F,UAAU,yBAAf,UACE,sBACEA,UAAS,UACP+F,mEAIE/F,SALK,QAKQ,GAEjBM,IAAMA,GAAe,KAARA,EAA6BA,EAAhB0F,GAC1BxF,IAAKA,KAEL4F,GAAiBC,IACjB,uBACErG,UACE,wGAEA8F,OAQGS,WAAMC,KAAKX,IC1GX,OAA0B,uCCuE1BY,I,eAAAA,GA/Df,YAWI,IAVFzG,EAUC,EAVDA,UACA0G,EASC,EATDA,WACAC,EAQC,EARDA,KACAC,EAOC,EAPDA,UACAC,EAMC,EANDA,eACArG,EAKC,EALDA,IACAG,EAIC,EAJDA,QACAC,EAGC,EAHDA,OACAkG,EAEC,EAFDA,WACAC,EACC,EADDA,QAEIC,EAAQF,EACR,uFACA,gJAaJ,OAZAE,EAAQD,EACJ,2IACAC,EAEJN,EAAcA,GAA6B,KAAfA,EAA4BA,EAARM,EAEhDH,EACGA,GAAqC,KAAnBA,EAEfA,EADA,gCAGNA,EAAiBE,EAAU,6BAA+BF,EAExD,qCACE,sBACEjG,OAAQA,EACRD,QAASA,EACTX,UACE,gJAEA0G,EACA,KAHA,OAIC1G,QAJD,IAICA,IAAa,IARlB,SAWG2G,EACC,sBACEnG,IAAG,OAAEA,QAAF,IAAEA,IAAO,iBACZF,IAAKqG,EACLhG,QAASA,EACTX,UAAU,wBAGZ,oBACEA,UACE,sEAEA6G,EACA,IACAD,S,4BC9DC,OAA0B,kCCA1B,OAA0B,iCCA1B,OAA0B,iCCA1B,OAA0B,iCCA1B,OAA0B,iCCA1B,OAA0B,gCCA1B,OAA0B,gCCQ5BK,GACF,EADEA,GAEJ,EAGIC,GAAS,CACpBC,KAAM,EACNC,OAAQ,EACRC,MAAO,GAGIC,GACF,EADEA,GAED,EAFCA,GAGK,EAHLA,GAIc,EAJdA,GAKH,EAGGC,GAAc,CACzBC,OAAQ,EACRC,OAAQ,EACRC,QAAS,GAEEC,IAAW,sBACrBJ,GAAYC,OAAS,UADA,gBAErBD,GAAYE,OAAS,UAFA,gBAGrBF,GAAYG,QAAU,WAHD,IAKXE,IAAW,sBACrBL,GAAYC,OAAS,qBADA,gBAErBD,GAAYE,OAAS,uBAFA,gBAGrBF,GAAYG,QAAU,mBAHD,IAKXG,GAAe,CAC1BC,KAAM,EACNC,KAAM,EACNC,KAAM,EACNC,IAAK,EACLC,KAAM,EACNC,IAAK,EACLC,MAAO,GAEIC,IAAY,sBACtBR,GAAaC,KAAO,QADE,gBAEtBD,GAAaE,KAAO,QAFE,gBAGtBF,GAAaG,KAAO,QAHE,gBAItBH,GAAaK,KAAO,QAJE,gBAKtBL,GAAaI,IAAM,OALG,gBAMtBJ,GAAaM,IAAM,OANG,gBAOtBN,GAAaO,MAAQ,SAPC,IASZE,IAAY,sBACtBT,GAAaC,KAAOS,IADE,gBAEtBV,GAAaE,KAAOS,IAFE,gBAGtBX,GAAaG,KAAOS,IAHE,gBAItBZ,GAAaK,KAAOQ,IAJE,gBAKtBb,GAAaI,IAAMU,IALG,gBAMtBd,GAAaM,IAAMS,IANG,gBAOtBf,GAAaO,MAAQS,IAPC,IASZC,IAAa,sBACvBjB,GAAaC,KAAO,qCADG,gBAEvBD,GAAaE,KAAO,iBAFG,gBAGvBF,GAAaK,KAAO,mBAHG,gBAIvBL,GAAaG,KAAO,mBAJG,gBAKvBH,GAAaI,IAAM,mBALI,gBAMvBJ,GAAaM,IAAM,mBANI,gBAOvBN,GAAaO,MAAQ,mBAPE,ICkQXW,OA1Tf,WACE,IAAM7L,EAAciJ,aAAY,SAAChN,GAAD,OAAWA,EAAMwG,MAAMzC,eAEvD,EAA8BgD,mBAAS,IAAvC,oBAAO9D,EAAP,KAAgB4M,EAAhB,KACA,EAA8B9I,mBAASqH,GAAYC,QAAnD,oBAAOxJ,EAAP,KAAgBiL,EAAhB,KACA,EAAoC/I,mBAAS,IAA7C,oBAAOgJ,EAAP,KAAmBC,EAAnB,KAEA,EAA0BjJ,mBAAS,IAAnC,oBAAOhE,EAAP,KAAcI,EAAd,KACA,EAAkD4D,oBAAS,GAA3D,oBAAOkJ,EAAP,KAA0BC,EAA1B,KACA,EAA0CnJ,oBAAS,GAAnD,oBAAOoJ,EAAP,KAAsBC,EAAtB,KACA,EAA4BrJ,oBAAS,GAArC,oBAAO/D,EAAP,KAAeqN,EAAf,KACA,EAAsCtJ,oBAAS,GAA/C,oBAAOuJ,EAAP,KAAoBC,EAApB,KACMC,EAAMC,mBACNC,EAAWD,mBACXE,EAAaF,mBACbG,EAAU5E,KAqDhB,SAAS6E,EAAYC,GACD,KAAdA,EAAEC,SACJV,GAAU,GAgEd,OApHAnJ,qBAAU,WACR,IAAM8J,EAAwB,SAACF,GAE3BR,GACAI,EAASO,UACRP,EAASO,QAAQC,SAASJ,EAAEK,SAE7BZ,GAAe,IAInB,OADAa,SAASC,iBAAiB,YAAaL,GAChC,WACLI,SAASE,oBAAoB,YAAaN,MAE3C,CAACV,IAOJpJ,qBAAU,WACR,IAAM8J,EAAwB,SAACF,GACzB9N,GAAUwN,EAAIS,UAAYT,EAAIS,QAAQC,SAASJ,EAAEK,SACnDd,GAAU,IAId,OADAe,SAASC,iBAAiB,YAAaL,GAChC,WACLI,SAASE,oBAAoB,YAAaN,MAE3C,CAAChO,IAEJkE,qBAAU,WACR,IAAM8J,EAAwB,SAACF,GAE3Bb,GACAU,EAAWM,UACVN,EAAWM,QAAQC,SAASJ,EAAEK,SAE/BjB,GAAqB,IAIzB,OADAkB,SAASC,iBAAiB,YAAaL,GAChC,WACLI,SAASE,oBAAoB,YAAaN,MAE3C,CAACf,IAQJ/I,qBAAU,WAER,OADAkK,SAASC,iBAAiB,UAAWR,GAAa,GAC3C,WACLO,SAASE,oBAAoB,UAAWT,GAAa,MAEtD,IAgCH3J,qBAAU,WACJjE,EAAQsO,QAAUxB,EAAWvN,OAAS,EACxC4N,GAAiB,GAEjBA,GAAiB,KAElB,CAACnN,EAAS8M,IAmBX,uCACE,uBAAKlJ,UAAU,2HAAf,UACE,uBAAKA,UAAU,qCAAf,UACE,eAAC,IAAD,CACEA,UAAU,qDACVoB,GAAE,0BAAclE,QAAd,IAAcA,OAAd,EAAcA,EAAagJ,UAF/B,SAIE,eAAC,GAAD,CAAa5F,IAAG,OAAEpD,QAAF,IAAEA,OAAF,EAAEA,EAAayN,cAEjC,sBAAKhK,QAAS,kBAAM6I,GAAU,IAAOxJ,UAAU,SAA/C,SACE,wBACEa,UAAQ,EACRjC,KAAK,OACLgM,YAAW,6BACT1N,EAAY2N,UAAY,KAAO3N,EAAY2N,UAAY,GAD9C,KAGX7K,UAAU,+RAIhB,uBAAKA,UAAU,4KAAf,UACE,wBACEA,UAAU,gNACVW,QAAS,kBAAM6I,GAAU,IAF3B,UAIE,sBAAKlJ,IAAKwK,GAAWtK,IAAI,aAAaR,UAAU,YAChD,mDAEF,wBACEA,UAAU,sKACVW,QAAS,kBAAM6I,GAAU,IAF3B,UAIE,oBAAGxJ,UAAU,mFAJf,wBASH7D,GACC,sBACE6D,UAAU,kDACVgB,MAAO,CAAEC,OAAQ,GAFnB,SAIE,uBACEjB,UAAU,wOACV2J,IAAKA,EAFP,UAIGzN,EAAMC,QACL,eAAC,GAAD,CACEE,MAAM,eACNF,OAAQD,EAAMC,OACdC,QAASF,EAAME,QACfuE,QAAS,kBAAMrE,EAAS,CAAEH,QAAQ,OAGtC,uBAAK6D,UAAU,8FAAf,wBAEE,eAAC,GAAD,CACEW,QAAS,kBAAM6I,GAAU,IACzB5C,UAAU,UACV5G,UAAU,mEAGd,wBACE+K,SAhFZ,SAAkBd,GAChBA,EAAEe,iBACFjB,EAAQpM,QAAQ,CAAEvB,UAAS4B,YAAWiN,MAAK,SAAChH,GACtCA,EAAS1K,IACX2P,EAAWnM,SAAQ,SAACmO,GAClB,IAAM3H,EAAU,IAAI4H,SACpB5H,EAAQ6H,OAAO,QAASF,GACxB3H,EAAQ6H,OAAO,UAAW,cAC1BrB,EAAQrE,SAASzB,EAAS1K,GAAIgK,SAIpCiG,GAAU,GACVR,EAAW,IACXG,EAAc,KAmEJnJ,UAAU,uDAFZ,UAIE,uBAAKA,UAAU,iBAAf,UACE,eAAC,IAAD,CACEA,UAAU,uCACVoB,GAAE,mBAAclE,EAAYgJ,UAF9B,SAIE,eAAC,GAAD,CACE5F,IAAKpD,EAAYyN,UACjBzE,SAAUhJ,EAAYgJ,aAG1B,uBAAKlG,UAAU,0CAAf,UACE,eAAC,IAAD,CACEA,UAAU,uDACVoB,GAAE,mBAAclE,EAAYgJ,UAF9B,SAIGhJ,EAAYmO,WAEf,uBAAKrL,UAAU,uBAAf,UACE,uBACEA,UAAU,oFACVW,QAAS,kBAAM0I,GAAqB,IAFtC,UAIE,oBAAGrJ,UAAW4H,GAAY5J,KAC1B,gCAAO2J,GAAY3J,QAEpBoL,GACC,sBACEpJ,UAAU,2HACV2J,IAAKG,EAFP,SAIGrF,OAAOC,OAAO6C,IAAajB,KAAI,SAACtI,GAAD,OAC9B,uBACE2C,QAAS,WACPsI,EAAWjL,GACXqL,GAAqB,IAEvBrJ,UAAU,2GALZ,UAOE,oBAAGA,UAAW4H,GAAY5J,KAC1B,gCAAO2J,GAAY3J,sBAQjC,2BACEsN,MAAOlP,EACPmP,SAAU,SAACtB,GAAD,OAAOjB,EAAWiB,EAAEK,OAAOgB,QACrCE,KAAK,IACLxL,UAAU,kNACV4K,YAAW,6BACT1N,EAAY2N,UAAY,KAAO3N,EAAY2N,UAAY,GAD9C,OAIb,uBAAKlB,IAAKE,EAAU7J,UAAU,mCAA9B,UACE,eAAC,GAAD,CACE8G,YAAU,EACVF,UAAU,eACVC,eAAe,iBACflG,QAAS,kBAAM+I,GAAgBD,MAEhCA,GACC,sBAAKzJ,UAAU,8CAAf,SACE,eAAC,KAAD,CAAayL,kBAAgB,EAACC,aAzO3B,SAACC,EAAOC,IAC3B,OAAIA,QAAJ,IAAIA,OAAJ,EAAIA,EAAaC,QACf7C,EAAW5M,GAAO,OAAGwP,QAAH,IAAGA,OAAH,EAAGA,EAAaC,gBA2O1B,uBAAK7L,UAAU,yDAAf,UACE,wBACE8L,QAAM,EACNvS,GAAG,aACHqF,KAAK,OACLmN,UAAQ,EACRR,SAAU,SAACtB,GAAD,OApM1B,SAAkB+B,GAChB,IAAIC,GAAU,EACRC,EAAa,uBAAOhD,GAAP,aAAsB8C,IACrCE,EAAcvQ,OAAS,KACzBW,EAAS,CACPF,QAAS,mCACTD,QAAQ,IAEV8P,GAAU,GAEZC,EAAcnP,SAAQ,SAACoP,GACjBA,EAAKlG,KfxGe,UeyGtB3J,EAAS,CACPF,QAAS,wCACTD,QAAQ,IAEV8P,GAAU,MAGVA,GACF9C,EAAc+C,GAgLeE,CAASnC,EAAEK,OAAO0B,UAErC,wBACEK,QAAQ,aACRrM,UAAU,qMAFZ,SAIE,oBAAGA,UAAU,gCAEdkJ,EAAWvN,OAAS,GACnBuN,EAAW5C,KAAI,SAACgG,EAAW1S,GAAZ,OACb,uBAEEoG,UAAU,yIAFZ,UAIE,sBAAKM,IAAKiM,IAAIC,gBAAgBF,GAAY9L,IAAI,YAC9C,eAAC,GAAD,CACEG,QAAS,kBA7L/B,SAAqB/G,GACnB,GAAIA,GAAS,GAAKA,EAAQsP,EAAWvN,OAAQ,CAC3C,IAAMuQ,EAAa,aAAOhD,GAC1BgD,EAAchO,OAAOtE,EAAO,GAC5BuP,EAAc+C,IAyLmBO,CAAY7S,IAC3BgN,UAAU,UACVG,SAAO,EACP/G,UAAU,kEARP,aAAepG,SAa5B,eAAC,GAAD,CACEiH,UAAWyI,EACXtJ,UAAU,uBAFZ,8BC9QC0M,OAhCf,YAOI,IANFrQ,EAMC,EANDA,MACAF,EAKC,EALDA,OAKC,IAJDC,eAIC,MAJS,gBAIT,EAHDuQ,EAGC,EAHDA,YACAC,EAEC,EAFDA,mBACAC,EACC,EADDA,oBAEA,OACE1Q,GACE,sBAAK6D,UAAU,4BAA4BgB,MAAO,CAAEC,OAAQ,GAA5D,SACE,uBAAKjB,UAAU,+MAAf,UACE,qBAAIA,UAAU,wDAAd,SACa,KAAV3D,EAAeA,EAAQ,iBAE1B,uBAAM2D,UAAU,iCAAhB,SAAkD5D,IAClD,uBAAK4D,UAAU,oCAAf,UACE,eAAC,GAAD,CAAQU,SAAO,EAACtE,QAAQ,KAAKuE,QAASgM,IACtC,eAAC,GAAD,CACEvQ,QAAO,OAAEwQ,QAAF,IAAEA,IAAsB,KAC/BjM,QAAS,WACPkM,IACAF,gB,oBCjCD,OAA0B,sCC2F1BG,OAnFf,YAAqD,IAA7BzO,EAA4B,EAA5BA,OAA4B,IAApBnB,mBAAoB,MAAN,GAAM,EAClD,EAA8BgD,mBAAS,IAAvC,oBAAO9D,EAAP,KAAgB4M,EAAhB,KAEA,EAAsC9I,oBAAS,GAA/C,oBAAOuJ,EAAP,KAAoBC,EAApB,KACMC,EAAMC,mBAENG,EAAU5E,KANkC,8CAQlD,WAA6B8E,GAA7B,gBAAAvG,EAAA,yDACEuG,EAAEe,iBACG5O,EAFP,wDAKE4M,EAAW,IACPzF,EAAU,CAAEnH,WANlB,SAOQ2N,EAAQhL,WAAWV,EAAQkF,GAPnC,4CARkD,sBAqClD,OAnBAlD,qBAAU,WACR,IAAM8J,EAAwB,SAACF,GAGzBR,GAAeE,EAAIS,UAAYT,EAAIS,QAAQC,SAASJ,EAAEK,SACxDZ,GAAe,IAInB,OADAa,SAASC,iBAAiB,YAAaL,GAChC,WAELI,SAASE,oBAAoB,YAAaN,MAE3C,CAACV,IAOF,uBAAKzJ,UAAU,qCAAf,UACE,eAAC,IAAD,CACEA,UAAU,qDACVoB,GAAE,0BAAclE,QAAd,IAAcA,OAAd,EAAcA,EAAagJ,UAF/B,SAIE,eAAC,GAAD,CAAaD,KAAK,KAAK3F,IAAG,OAAEpD,QAAF,IAAEA,OAAF,EAAEA,EAAayN,cAE3C,wBACEI,SAAU,SAACd,GAAD,OA9CkC,2CA8C3B8C,CAAc9C,IAC/BjK,UAAU,yDAFZ,UAIE,uBAAKA,UAAU,uBAAf,UACE,wBACEsL,MAAOlP,EACPmP,SAAU,SAACtB,GAAD,OAAOjB,EAAWiB,EAAEK,OAAOgB,QACrC1M,KAAK,OACLgM,YAAY,kBACZ5K,UAAU,gLAEZ,uBAAK2J,IAAKA,EAAK3J,UAAU,WAAzB,UACE,eAAC,GAAD,CACEA,UAAU,6BACV4G,UAAU,eACVC,eAAe,iBACflG,QAAS,kBAAM+I,GAAgBD,MAEhCA,GACC,sBAAKzJ,UAAU,8CAAf,SACE,eAAC,KAAD,CAAayL,kBAAgB,EAACC,aAlCvB,SAACC,EAAOC,IAC3B,OAAIA,QAAJ,IAAIA,OAAJ,EAAIA,EAAaC,QACf7C,EAAW5M,GAAO,OAAGwP,QAAH,IAAGA,OAAH,EAAGA,EAAaC,mBAqChC,kCACE,eAAC,GAAD,CACElF,KAAMqG,GACNhN,UAAU,gBACV0G,WAAW,qIC3ER,SAASuG,GAAT,GAKX,IAAD,IAJDhO,gBAIC,MAJU,GAIV,EAHD9C,EAGC,EAHDA,OAGC,IAFDe,mBAEC,MAFa,GAEb,EADDmB,EACC,EADDA,OAEM6O,EAAgB,aAAIjO,GACvBrC,QAAO,SAACC,GAAD,OAAOA,EAAEsQ,QAAQjH,WAAahJ,EAAYgJ,YACjDkH,MAAK,SAAC1J,EAAG2J,GAAJ,OAAW3J,EAAE4J,YAAcD,EAAEC,YAAc,GAAK,KAElDC,EAAmB,aAAItO,GAC1BrC,QAAO,SAACC,GAAD,OAAOA,EAAEsQ,QAAQjH,WAAahJ,EAAYgJ,YACjDkH,MAAK,SAAC1J,EAAG2J,GAAJ,OAAW3J,EAAE4J,YAAcD,EAAEC,YAAc,GAAK,KAExD,OACE,uCACGJ,EAAc5G,KAAI,SAACtH,EAASpF,GAAV,OACjB,eAAC4T,GAAD,CAEExO,QAASA,EACTX,OAAQA,EACRoP,aAAW,GAHNzO,EAAQzF,OAMhB4C,GACCoR,EAAiBjH,KAAI,SAACtH,EAASpF,GAAV,OACnB,eAAC4T,GAAD,CAA0BxO,QAASA,EAASX,OAAQA,GAAtCW,EAAQzF,UAMhC,IAAMiU,GAAUjH,IAAMC,MAAK,YAAuC,IAAD,cAAnCxH,EAAmC,EAAnCA,QAASX,EAA0B,EAA1BA,OAAQoP,EAAkB,EAAlBA,YACvC1D,EAAU5E,KAChB,EAAoCjF,oBAAS,GAA7C,oBAAOwN,EAAP,KAAmBC,EAAnB,KACA,EAA0CzN,oBAAS,GAAnD,oBAAO0N,EAAP,KAAsBC,EAAtB,KAEA,EAAoC3N,oBAAS,GAA7C,oBAAO4N,EAAP,KAAmBC,EAAnB,KACA,EAAsC7N,mBAASlB,EAAQ5C,SAAvD,oBAAO4R,EAAP,KAAoBC,EAApB,KAEMtE,EAAMC,mBACNsE,EAAetE,mBAErBvJ,qBAAU,WACR,IAAM8J,EAAwB,SAACF,GACzByD,GAAc/D,EAAIS,UAAYT,EAAIS,QAAQC,SAASJ,EAAEK,SACvDqD,GAAc,IAIlB,OADApD,SAASC,iBAAiB,YAAaL,GAChC,WAELI,SAASE,oBAAoB,YAAaN,MAE3C,CAACuD,IAgBJ,SAAS1D,EAAYC,GACD,KAAdA,EAAEC,SACJ6D,GAAc,GAelB,OAZA1N,qBAAU,WAER,OADAkK,SAASC,iBAAiB,UAAWR,GAAa,GAC3C,WACLO,SAASE,oBAAoB,UAAWT,GAAa,MAEtD,IACH3J,qBAAU,WACS,IAAD,EAAZyN,IACU,OAAZI,QAAY,IAAZA,GAAA,UAAAA,EAAc9D,eAAd,SAAuB+D,WAExB,CAACL,IAGF,uCACGF,GACC,eAAC,GAAD,CACEzR,OAAQyR,EACRjB,YAAa,kBAAMkB,GAAiB,IACpCxR,MAAM,gBACND,QAAQ,sCACRwQ,mBAAmB,MACnBC,oBAAqB,WAvCvBxO,IAAM,OAAIW,QAAJ,IAAIA,OAAJ,EAAIA,EAASzF,KACrBwQ,EAAQ1K,cAAchB,EAAQW,EAAQzF,OAyCtC,uBAAKyG,UAAW,8BAAgC8N,GAAc,UAA9D,UACE,eAAC,IAAD,CACE9N,UAAU,0DACVoB,GAAE,0BAAcpC,QAAd,IAAcA,GAAd,UAAcA,EAASmO,eAAvB,aAAc,EAAkBjH,UAFpC,SAIE,eAAC,GAAD,CACED,KAAK,KACL3F,IAAG,OAAEtB,QAAF,IAAEA,GAAF,UAAEA,EAASmO,eAAX,aAAE,EAAkBxC,UACvBzE,SAAQ,OAAElH,QAAF,IAAEA,GAAF,UAAEA,EAASmO,eAAX,aAAE,EAAkBjH,aAGhC,uBAAKlG,UAAU,uBAAf,UACE,uBAAKA,UAAU,qGAAf,UACE,sBAAKA,UAAU,gDAAf,SACE,eAAC,IAAD,CACEA,UAAU,uDACVoB,GAAE,0BAAcpC,QAAd,IAAcA,GAAd,UAAcA,EAASmO,eAAvB,aAAc,EAAkBjH,UAFpC,gBAIGlH,QAJH,IAIGA,GAJH,UAIGA,EAASmO,eAJZ,aAIG,EAAkB9B,aAGtByC,EACC,wBAAM/C,SA5DM,SAACd,GACvBA,EAAEe,iBACEgD,IAAgBhP,EAAQ5C,SAC1B2N,EAAQ7K,cAAcb,EAAQW,EAAQzF,GAAI,CAAE6C,QAAS4R,IAEvDD,GAAc,IAuD6B/N,UAAU,gBAA3C,UACE,wBACEpB,KAAK,OACLgM,YAAY,kBACZjB,IAAKuE,EACLlO,UAAU,+CACVuL,SAAU,SAACtB,GAAD,OAAOgE,EAAehE,EAAEK,OAAOgB,QACzCA,MAAO0C,IAET,wBACEhO,UAAU,mBACVW,QAAS,kBAAMoN,GAAc,IAF/B,yBAIe,IACb,uBAAM/N,UAAU,8CAAhB,0BAMJ,sBAAKA,UAAU,6DAAf,gBACGhB,QADH,IACGA,OADH,EACGA,EAAS5C,aAIhB,uBAAM4D,UAAU,gDAAhB,mBACGoO,KAAO,IAAIC,KAAJ,OAASrP,QAAT,IAASA,OAAT,EAASA,EAASsO,aAAc,YACrCgB,iBAFL,iBACG,EAEGC,QAAQ,MAAO,WAHrB,aACG,EAGG7D,YAGR,sBAAKf,IAAKA,EAAK3J,UAAU,4BAAzB,SACGyN,GACC,uCACE,eAAC,GAAD,CACE7G,UAAU,gCACVE,YAAU,EACVnG,QAAS,WACPgN,GAAeD,MAGlBA,GACC,uBAAK1N,UAAU,0MAAf,UACE,0BACEA,UAAU,yLACVW,QAAS,WACPoN,GAAc,GACdJ,GAAc,IAJlB,UAOE,oBAAG3N,UAAU,kHAPf,kBAUA,0BACEA,UAAU,yLACVW,QAAS,WACPkN,GAAiB,GACjBF,GAAc,IAJlB,UAOE,oBAAG3N,UAAU,+GAPf,qCCrHHwO,OA/Df,YAAgE,IAAD,UAA1CC,cAA0C,MAAjC,GAAiC,MAA7BC,kBAA6B,MAAhB,EAAgB,EAAblF,EAAa,EAAbA,UAChD,EAA0BtJ,mBAASwO,GAAnC,oBAAO9U,EAAP,KAAc+U,EAAd,KAaA,SAAS3E,EAAYC,GACD,KAAdA,EAAEC,SACJV,GAAU,GASd,OANAnJ,qBAAU,WAER,OADAkK,SAASC,iBAAiB,UAAWR,GAAa,GAC3C,WACLO,SAASE,oBAAoB,UAAWT,GAAa,MAEtD,IAED,qCACE,uBACEhK,UAAU,sDACVgB,MAAO,CAAEC,OAAQ,GAFnB,UAIE,eAAC,GAAD,CACE8F,SAAO,EACPpG,QAAS,kBAAM6I,GAAU,IACzB5C,UAAU,UACV5G,UAAU,gEAEXpG,EAAQ,GACP,eAAC,GAAD,CACEmN,SAAO,EACPpG,QAhCV,WACM/G,EAAQ,GACV+U,EAAS/U,EAAQ,IA+BXgN,UAAU,sBACV5G,UAAU,+CAGbpG,EAAQ6U,EAAO9S,OAAS,GACvB,eAAC,GAAD,CACEoL,SAAO,EACPpG,QA7CV,WACM/G,EAAQ6U,EAAO9S,OAAS,GAC1BgT,EAAS/U,EAAQ,IA4CXgN,UAAU,uBACV5G,UAAU,iDAGd,sBACEM,IAAG,UAAEmO,EAAO7U,UAAT,aAAE,EAAegV,SACpBpO,IAAG,oBAAEiO,EAAO7U,UAAT,aAAE,EAAeiV,eAAjB,6BAA0CjV,GAC7CoG,UAAU,kGCxDL,SAAS8O,GAAT,GAAqC,IAAD,IAAfL,cAAe,MAAN,GAAM,EACjD,EAA4BvO,oBAAS,GAArC,oBAAO/D,EAAP,KAAeqN,EAAf,KACA,EAAoCtJ,mBAAS,GAA7C,oBAAOwO,EAAP,KAAmBK,EAAnB,KACA,KAAIN,EAAO9S,OAAS,GAApB,CAGA,IAAIqT,EACJ,OAAQP,EAAO9S,QACb,KAAK,EACHqT,EACE,eAAC,GAAD,CACED,cAAeA,EACfvF,UAAWA,EACXiF,OAAQA,IAGZ,MACF,KAAK,EACHO,EACE,eAAC,GAAD,CACED,cAAeA,EACfvF,UAAWA,EACXiF,OAAQA,IAGZ,MACF,KAAK,EACHO,EACE,eAAC,GAAD,CACED,cAAeA,EACfvF,UAAWA,EACXiF,OAAQA,IAGZ,MACF,KAAK,EACHO,EACE,eAAC,GAAD,CACED,cAAeA,EACfvF,UAAWA,EACXiF,OAAQA,IAGZ,MACF,QACEO,EACE,eAAC,GAAD,CACED,cAAeA,EACfvF,UAAWA,EACXiF,OAAQA,IAIhB,OACE,uCACGtS,GACC,eAAC,GAAD,CACEsS,OAAQA,EACRC,WAAYA,EACZlF,UAAWA,IAGdwF,MAKP,IAAMC,GAAe,SAAC,GAAD,UAAGR,cAAH,MAAY,GAAZ,EAAgBjF,EAAhB,EAAgBA,UAAWuF,EAA3B,EAA2BA,cAA3B,OACnB,qCACE,sBACE/O,UAAU,uFACVW,QAAS,WACP6I,GAAU,GACVuF,EAAc,IAJlB,SAOE,sBACE/O,UAAU,kCACVM,IAAKmO,EAAO,GAAGG,SACfpO,IAAG,UAAEiO,EAAO,GAAGI,eAAZ,6BAAqC,UAM1CK,GAAgB,SAAC,GAAD,QAAGT,cAAH,MAAY,GAAZ,EAAgBjF,EAAhB,EAAgBA,UAAWuF,EAA3B,EAA2BA,cAA3B,OACpB,qCACE,sBAAK/O,UAAU,yCAAf,SACGyO,EAAOnI,KAAI,SAAC6I,EAAOvV,GAAR,aACV,sBAEEoG,UAAU,sHACVW,QAAS,WACP6I,GAAU,GACVuF,EAAcnV,IALlB,SAQE,sBACEoG,UAAU,kCACVM,IAAK6O,EAAMP,SACXpO,IAAG,UAAE2O,EAAMN,eAAR,6BAAiCjV,MAVjCuV,EAAM5V,YAiBf6V,GAAkB,SAAC,GAAD,0BAAGX,cAAH,MAAY,GAAZ,EAAgBjF,EAAhB,EAAgBA,UAAWuF,EAA3B,EAA2BA,cAA3B,OACtB,qCACE,uBAAK/O,UAAU,qDAAf,UACE,sBACEA,UAAU,iIACVW,QAAS,WACP6I,GAAU,GACVuF,EAAc,IAJlB,SAOE,sBACE/O,UAAU,kCACVM,IAAG,UAAEmO,EAAO,UAAT,aAAE,EAAWG,SAChBpO,IAAG,oBAAEiO,EAAO,UAAT,aAAE,EAAWI,eAAb,2BAGP,sBACE7O,UAAU,iIACVW,QAAS,WACP6I,GAAU,GACVuF,EAAc,IAJlB,SAOE,sBACE/O,UAAU,6BACVM,IAAG,UAAEmO,EAAO,UAAT,aAAE,EAAWG,SAChBpO,IAAG,oBAAEiO,EAAO,UAAT,aAAE,EAAWI,eAAb,2BAGP,sBACE7O,UAAU,qIACVW,QAAS,WACP6I,GAAU,GACVuF,EAAc,IAJlB,SAOE,sBACE/O,UAAU,6BACVM,IAAG,UAAEmO,EAAO,UAAT,aAAE,EAAWG,SAChBpO,IAAG,oBAAEiO,EAAO,UAAT,aAAE,EAAWI,eAAb,iCAMPQ,GAAiB,SAAC,GAAD,gCAAGZ,cAAH,MAAY,GAAZ,EAAgBjF,EAAhB,EAAgBA,UAAWuF,EAA3B,EAA2BA,cAA3B,OACrB,qCACE,uBAAK/O,UAAU,2DAAf,UACE,sBACEA,UAAU,2GACVW,QAAS,WACP6I,GAAU,GACVuF,EAAc,IAJlB,SAOE,sBACE/O,UAAU,6BACVM,IAAG,UAAEmO,EAAO,UAAT,aAAE,EAAWG,SAChBpO,IAAG,oBAAEiO,EAAO,UAAT,aAAE,EAAWI,eAAb,2BAGP,sBACE7O,UAAU,2GACVW,QAAS,WACP6I,GAAU,GACVuF,EAAc,IAJlB,SAOE,sBACE/O,UAAU,6BACVM,IAAG,UAAEmO,EAAO,UAAT,aAAE,EAAWG,SAChBpO,IAAG,oBAAEiO,EAAO,UAAT,aAAE,EAAWI,eAAb,2BAGP,sBACE7O,UAAU,2GACVW,QAAS,WACP6I,GAAU,GACVuF,EAAc,IAJlB,SAOE,sBACE/O,UAAU,6BACVM,IAAG,UAAEmO,EAAO,UAAT,aAAE,EAAWG,SAChBpO,IAAG,oBAAEiO,EAAO,UAAT,aAAE,EAAWI,eAAb,2BAGP,sBACE7O,UAAU,2GACVW,QAAS,WACP6I,GAAU,GACVuF,EAAc,IAJlB,SAOE,sBACE/O,UAAU,6BACVM,IAAG,UAAEmO,EAAO,UAAT,aAAE,EAAWG,SAChBpO,IAAG,oBAAEiO,EAAO,UAAT,aAAE,EAAWI,eAAb,iCAMPS,GAAO,SAAC,GAA+C,IAAD,kCAA5Cb,cAA4C,MAAnC,GAAmC,EAA/BjF,EAA+B,EAA/BA,UAAWuF,EAAoB,EAApBA,cAChCQ,EAAkBd,EAAO9S,OAAS,EAAI,EAAI8S,EAAO9S,OAAS,EAAI,EACpE,OACE,qCACE,uBAAKqE,UAAU,2DAAf,UACE,sBACEA,UAAU,sHACVW,QAAS,WACP6I,GAAU,GACVuF,EAAc,IAJlB,SAOE,sBACE/O,UAAU,6BACVM,IAAG,UAAEmO,EAAO,UAAT,aAAE,EAAWG,SAChBpO,IAAG,oBAAEiO,EAAO,UAAT,aAAE,EAAWI,eAAb,2BAGP,sBACE7O,UAAU,sHACVW,QAAS,WACP6I,GAAU,GACVuF,EAAc,IAJlB,SAOE,sBACE/O,UAAU,6BACVM,IAAG,UAAEmO,EAAO,UAAT,aAAE,EAAWG,SAChBpO,IAAG,oBAAEiO,EAAO,UAAT,aAAE,EAAWI,eAAb,2BAGP,sBACE7O,UAAU,sHACVW,QAAS,WACP6I,GAAU,GACVuF,EAAc,IAJlB,SAOE,sBACE/O,UAAU,6BACVM,IAAG,UAAEmO,EAAO,UAAT,aAAE,EAAWG,SAChBpO,IAAG,oBAAEiO,EAAO,UAAT,aAAE,EAAWI,eAAb,2BAGP,sBACE7O,UAAU,sHACVW,QAAS,WACP6I,GAAU,GACVuF,EAAc,IAJlB,SAOE,sBACE/O,UAAU,6BACVM,IAAG,UAAEmO,EAAO,UAAT,aAAE,EAAWG,SAChBpO,IAAG,oBAAEiO,EAAO,UAAT,aAAE,EAAWI,eAAb,2BAGP,uBACE7O,UAAU,+HACVW,QAAS,WACP6I,GAAU,GACVuF,EAAc,IAJlB,UAOE,sBACE/O,UAAU,6BACVM,IAAG,UAAEmO,EAAO,UAAT,aAAE,EAAWG,SAChBpO,IAAG,oBAAEiO,EAAO,UAAT,aAAE,EAAWI,eAAb,yBAEJU,EAAkB,GACjB,uBAAKvP,UAAU,gGAAf,cACIuP,cCtPhB,IAAMC,GAAW,SAAC,GAAD,IAAG5Q,EAAH,EAAGA,KAAM0B,EAAT,EAASA,IAAKE,EAAd,EAAcA,IAAKpC,EAAnB,EAAmBA,YAAnB,OACf,uBACEuC,QAAS,kBAAMvC,EAAYQ,IAC3BoB,UAAU,iIAFZ,UAIE,sBAAKA,UAAU,+NAAf,SACGQ,IAEH,sBAAKF,IAAKA,EAAKE,IAAKA,EAAKR,UAAU,sBAIxByP,GA9Cf,YAAwE,IAAD,IAA9CzP,iBAA8C,MAAlC,GAAkC,EAA9B0P,EAA8B,EAA9BA,QAASrR,EAAqB,EAArBA,OAAQmL,EAAa,EAAbA,UAClDO,EAAU5E,KAEV/G,EAAc,SAACQ,GACd8Q,EAEMA,GAAWA,EAAQ9Q,OAASA,GACrCmL,EAAQvL,eAAeH,EAAQ,CAAEO,SAFjCmL,EAAQ3L,YAAYC,EAAQ,CAAEO,SAIhC4K,GAAU,IAEZ,OACE,qCACE,sBACExJ,UACEA,gKAFJ,SAOGyE,OAAOC,OAAOmD,IAAcvB,KAAI,SAAC1H,GAAD,OAC/B,eAAC,GAAD,CAEER,YAAaA,EACbQ,KAAMA,EACN0B,IAAKgI,GAAa1J,GAClB4B,IAAK6H,GAAazJ,IAJb,YAAcA,WCL/B,SAAS+Q,GAAT,GAAyB,IAAD,sBAAR9R,EAAQ,EAARA,KACRX,EAAciJ,aAAY,SAAChN,GAAD,OAAWA,EAAMwG,MAAMzC,eACvD,EAA4CgD,oBAAS,GAArD,oBAAO0P,EAAP,KAAuBC,EAAvB,KACA,EAAkD3P,oBAAS,GAA3D,oBAAO4P,EAAP,KAA0BC,EAA1B,KACA,EAAoC7P,oBAAS,GAA7C,oBAAOwN,EAAP,KAAmBC,EAAnB,KACA,EAA0CzN,oBAAS,GAAnD,oBAAO0N,EAAP,KAAsBC,EAAtB,KACA,EAAwC3N,qBAAxC,oBAAO8P,EAAP,KAAqBC,EAArB,KACMlG,EAAU5E,KACVwE,EAAMC,mBACNsG,EAActG,mBAEd8F,EAAO,OAAG7R,QAAH,IAAGA,GAAH,UAAGA,EAAMU,iBAAT,aAAG,EAAiB4R,MAC/B,SAACtT,GAAD,OAAOA,EAAEsQ,QAAQjH,WAAahJ,EAAYgJ,YA2B5C7F,qBAAU,WACR4P,EAbuB,SAACpS,GACxB,IAAMuS,ECjDa,SAAUC,EAAIC,GACnC,OAAOD,EAAGE,QAAO,SAAUC,EAAI3T,GAE7B,OADC2T,EAAG3T,EAAEyT,IAAQE,EAAG3T,EAAEyT,KAAS,IAAI7W,KAAKoD,GAC9B2T,IACN,ID6CaC,CAAQ5S,EAAKU,UAAW,CAAC,SACnCmS,EAAW,GACf,IAAK,IAAMJ,KAAOF,EAChBM,EAASjX,KAAK,CAAEmF,KAAM0R,EAAKK,MAAOP,EAAME,GAAK3U,SAG/C,OAAO+U,EACJtD,MAAK,SAAC1J,EAAG2J,GAAJ,OAAW3J,EAAEiN,MAAQtD,EAAEsD,MAAQ,GAAK,KACzCC,MAAM,EAAG,GACTtK,KAAI,SAACzJ,GAAD,OAAOA,EAAE+B,QAGAiS,CAAiBhT,MAChC,CAACA,IAEJwC,qBAAU,WACR,IAAM8J,EAAwB,SAACF,GACzByD,GAAc/D,EAAIS,UAAYT,EAAIS,QAAQC,SAASJ,EAAEK,SACvDqD,GAAc,IAIlB,OADApD,SAASC,iBAAiB,YAAaL,GAChC,WACLI,SAASE,oBAAoB,YAAaN,MAE3C,CAACuD,IAOJ,OACE,uCACGE,GACC,eAAC,GAAD,CACEzR,OAAQyR,EACRjB,YAAa,kBAAMkB,GAAiB,IACpCxR,MAAM,gBACND,QAAQ,mCACRwQ,mBAAmB,MACnBC,oBAAqB,WAbvBhP,EAAKtE,IACPwQ,EAAQ9L,WAAWJ,EAAKtE,OAexB,uBAAKyG,UAAU,qJAAf,UACE,uBAAKA,UAAU,2CAAf,UACE,uBAAKA,UAAU,iBAAf,UACE,eAAC,IAAD,CACEA,UAAU,uCACVoB,GAAE,mBAAcvD,EAAKsP,QAAQjH,UAF/B,SAIE,eAAC,GAAD,CACE5F,IAAKzC,EAAKsP,QAAQxC,UAClBzE,SAAQ,OAAErI,QAAF,IAAEA,GAAF,UAAEA,EAAMsP,eAAR,aAAE,EAAejH,aAG7B,uBAAKlG,UAAU,+BAAf,UACE,eAAC,IAAD,CACEA,UAAU,uDACVoB,GAAE,mBAAcvD,EAAKsP,QAAQjH,UAF/B,SAIGrI,EAAKsP,QAAQ9B,WAEhB,gBAAC,IAAD,CACErL,UAAU,qEACVoB,GAAE,gBAAWvD,EAAKtE,IAFpB,UAIE,0CACG6U,KAAO,IAAIC,KAAJ,OAASxQ,QAAT,IAASA,OAAT,EAASA,EAAMyP,aAAc,YAClCgB,iBAFL,iBACG,EAEGC,QAAQ,MAAO,WAHrB,aACG,EAGG7D,SAEN,oBAAG1K,UAAW4H,GAAW,OAAC/J,QAAD,IAACA,OAAD,EAACA,EAAMG,qBAIjC,OAAJH,QAAI,IAAJA,GAAA,UAAAA,EAAMsP,eAAN,eAAejH,aAAf,OAA4BhJ,QAA5B,IAA4BA,OAA5B,EAA4BA,EAAagJ,WACxC,uBAAKlG,UAAU,WAAW2J,IAAKA,EAA/B,UACE,eAAC,GAAD,CACE/C,UAAU,gCACVE,YAAU,EACVnG,QAAS,kBAAMgN,GAAeD,MAE/BA,GACC,uBAAK1N,UAAU,6MAAf,UACE,0BAAQA,UAAU,iLAAlB,UACE,oBAAGA,UAAU,6GACb,iDAEF,0BACEA,UAAU,iLACVW,QAAS,kBAAMkN,GAAiB,IAFlC,UAIE,oBAAG7N,UAAU,0GACb,4DAOZ,uBAAMA,UAAU,mDAAhB,SACGnC,EAAKzB,WAGH,OAAJyB,QAAI,IAAJA,GAAA,UAAAA,EAAM4Q,cAAN,eAAc9S,QAAS,GACtB,uBAAKqE,UAAU,kCAAf,UACE,eAAC8O,GAAD,CAAWL,OAAQ5Q,EAAK4Q,SAAW,OAIvC,uBAAKzO,UAAU,oEAAf,UACE,uBAAKA,UAAU,gCAAf,UACE,sBAAKA,UAAU,OAAf,SACGgQ,GACCA,EAAa1J,KAAI,SAAC1H,EAAMhF,GAAP,OACf,sBAEEoG,UAAW,YAAcpG,EAAQ,EAAI,MAAQ,QAF/C,SAIE,sBACE0G,IAAKgI,GAAa1J,GAClB4B,IAAK6H,GAAazJ,GAClBoB,UACE,gFAECpG,EAAQ,EAAI,2BAA6B,OATzCgF,QAeb,uBAAMoB,UAAU,kDAAhB,UACO,OAAJnC,QAAI,IAAJA,GAAA,UAAAA,EAAMU,iBAAN,eAAiB5C,QAAS,IAA1B,OAA+BkC,QAA/B,IAA+BA,GAA/B,UAA+BA,EAAMU,iBAArC,aAA+B,EAAiB5C,aAGrD,uBACEqE,UAAU,kDACVW,QAAS,kBAAMoP,GAAqB,SAACe,GAAD,OAAeA,MAFrD,UAIO,OAAJjT,QAAI,IAAJA,GAAA,UAAAA,EAAMoB,gBAAN,eAAgBtD,QAAS,IACpB,OAAJkC,QAAI,IAAJA,GAAA,UAAAA,EAAMoB,gBAAN,eAAgBtD,QACd,aACK,OAAJkC,QAAI,IAAJA,GAAA,UAAAA,EAAMoB,gBAAN,eAAgBtD,QAAS,EAAI,IAAM,SAG5C,uBAAKqE,UAAU,oLAAf,UACE,wBACEA,UAAU,kCACV2J,IAAKuG,EACLa,YAAa,kBAAMlB,GAAkB,IACrCmB,aAAc,kBAAMnB,GAAkB,IAJxC,UAMGD,GACC,eAAC,GAAD,CACEpG,UAAWqG,EACXK,YAAaA,EACb7R,OAAQR,EAAKtE,GACbmW,QAASA,EACT1P,UAAU,gCAGb0P,EACC,qCACE,sBACE1P,UAAU,gKACVW,QA7KO,WACjB+O,GACF3F,EAAQlL,eAAehB,EAAKtE,KAyKlB,SAIE,uBAAKyG,UAAU,wBAAf,UACE,sBAAKA,UAAU,MAAf,SACE,sBACEM,IAAKgI,GAAaoH,EAAQ9Q,MAC1B4B,IAAK6H,GAAaqH,EAAQ9Q,MAC1BoB,UAAU,kCAId,uBAAMA,UAAW8I,GAAc4G,EAAQ9Q,MAAvC,SACGyJ,GAAaqH,EAAQ9Q,eAM9B,sBACEoB,UAAU,gKACVW,QAxME,WACT+O,EAEMA,GAAWA,EAAQ9Q,OAASiJ,GAAaC,MAClDiC,EAAQvL,eAAeX,EAAKtE,GAAI,CAAEqF,KAAMiJ,GAAaC,OAFrDiC,EAAQ3L,YAAYP,EAAKtE,GAAI,CAAEqF,KAAMiJ,GAAaC,QAoM1C,SAIE,kCACE,oBAAG9H,UAAU,8CADf,eAON,wBACEA,UAAU,gKACVW,QAAS,kBAAMoP,GAAqB,SAACe,GAAD,OAAeA,MAFrD,UAIE,oBAAG9Q,UAAU,6CAJf,aAOA,wBAAMA,UAAU,iKAAhB,UACE,oBAAGA,UAAU,6DADf,cAKF,eAAC,GAAD,CAAc3B,OAAQR,EAAKtE,GAAI2D,YAAaA,IAC5C,eAAC+P,GAAD,CACE5O,OAAQR,EAAKtE,GACb0F,SAAUpB,EAAKoB,SACf9C,OAAQ2T,EACR5S,YAAaA,UAORqJ,WAAMC,KAAKmJ,IE7NXsB,OAzCf,WAAiB,IAAD,IACd,EAAwB/Q,mBAAS,GAAjC,oBAAOrF,EAAP,KAAaqW,EAAb,KACA,ECJa,WAAsC,IAAXrW,EAAU,uDAAH,EAC/C,EAAkCqF,oBAAS,GAA3C,oBAAOlE,EAAP,KAAkBC,EAAlB,KACA,EAA0BiE,mBAAS,IAAnC,oBAAO2B,EAAP,KAAcsP,EAAd,KACM1T,EAAQ0I,aAAY,SAAChN,GAAD,OAAWA,EAAMsE,MAAMA,SACjD,EAAkCyC,oBAAS,GAA3C,oBAAO0B,EAAP,KAAkBwP,EAAlB,KAEMrH,EAAU5E,KACV7C,EAAWC,cAuBjB,OArBAlC,qBAAU,WACJuB,IACF3F,GAAa,GACbkV,GAAS,GACTpH,EACG3E,OAAO,CAAEvK,SACToQ,MAAK,SAAChH,GAEH3B,EADEzH,EAAO,EACAsD,GAAS8F,GAETvG,EAAYuG,IAEvBmN,EAAavW,EAAOoJ,EAASnJ,WAC7BmB,GAAa,MAEdoV,OAAM,SAACpH,GACNkH,EAASlH,SAGd,CAACpP,IAEG,CAAE4C,QAAOzB,YAAW6F,QAAOD,aD1Ba0P,CAAkBzW,GAAzD4C,EAAR,EAAQA,MAAOmE,EAAf,EAAeA,UAAW5F,EAA1B,EAA0BA,UAAW6F,EAArC,EAAqCA,MAOrC,OACE,qCACE,uBAAK7B,UAAU,6EAAf,UACE,eAAC,GAAD,CAASA,UAAU,gDACnB,uBAAKA,UAAU,uDAAf,UACE,eAAC,GAAD,IADF,8BAEOvC,QAFP,IAEOA,OAFP,EAEOA,EAAOjB,cAFd,iBAEG,EACG4Q,MAAK,SAAC1J,EAAG2J,GAAJ,OAAW3J,EAAE4J,YAAcD,EAAEC,YAAc,GAAK,YAH3D,aAEG,EAEGhH,KAAI,SAACzI,GAAD,OACJ,eAAC,GAAD,CAAoBA,KAAMA,GAAfA,EAAKtE,OAEpB,eAAC,GAAD,CACEwI,kBAAkB,gCAClBpB,QAlBV,WACMiB,GACFsP,GAAQ,SAACK,GAAD,OAAcA,EAAW,MAiB3BvV,UAAWA,EACX6F,MAAOA,EACPD,UAAWA,EACXE,gBAAgB,wBAEZ,OAALrE,QAAK,IAALA,OAAA,EAAAA,EAAO9C,eAAgB,GACtB,sBAAKqF,UAAU,mBAAf,sFAMJ,eAAC,GAAD,CAASA,UAAU,sDE1CZ,OAA0B,wCC2B1BwR,OAzBf,WACE,MAAgCtR,oBAAS,GAAzC,oBAAOuR,EAAP,KAAiBC,EAAjB,KAqBA,OAnBArR,qBAAU,WAGK,SAFFuD,OAAOC,aAAaC,QAAQ,WAGrCF,OAAO2G,SAASoH,gBAAgBC,UAAUC,IAAI,QAC9CH,GAAY,MAEb,IAEHrR,qBAAU,WACJoR,GACF7N,OAAO2G,SAASoH,gBAAgBC,UAAUC,IAAI,QAC9CjO,OAAOC,aAAaiO,QAAQ,QAAS,UAErClO,OAAO2G,SAASoH,gBAAgBC,UAAUG,OAAO,QACjDnO,OAAOC,aAAaiO,QAAQ,QAAS,YAEtC,CAACL,IAEG,CAAEA,WAAUC,gBCpBfxM,GAAa,SAEJ,SAAS8M,KACtB,IAAMtP,EAAML,KACNC,EAAWC,cAiFjB,MA/EgB,CACd6C,OAAQ,WACN9C,EAASrG,GAAa,IACtB,IAAMoJ,EAAG,UAAMH,IACf,OAAOxC,EAAI4C,IAAID,IAEjBE,QAAS,SAACtL,EAAQiJ,GAChBZ,EAASrG,GAAa,IACtB,IAAMoJ,EAAG,UAAMH,GAAN,YAAoBjL,GAC7B,OAAOyI,EAAI4C,IAAID,EAAK,CAAEnC,YAExB+O,YAAa,SAAChY,EAAQmC,GACpB,IAAMiJ,EAAG,UAAMH,GAAN,YAAoBjL,EAApB,SACT,OAAOyI,EAAI7E,KAAKwH,EAAKjJ,IAEvBZ,SAAU,SAACvB,GACT,IAAMoL,EAAG,UAAMH,GAAN,YAAoBjL,EAApB,SACT,OAAOyI,EAAIwP,MAAM7M,IAEnB8M,UAAW,SAAClY,EAAQmC,GAClBkG,EAASrG,GAAa,IACtB,IAAMoJ,EAAG,UAAMH,GAAN,YAAoBjL,EAApB,cAgBT,OAdAyI,EAAIY,aAAaC,QAAQC,IAAzB,yCAA6B,WAAOC,GAAP,kBAAAC,EAAA,6DACvBC,EAAQC,OAAOC,aAAaC,QAAQ,SACpCC,EAAY,GACZJ,IACFI,EAAS,2BACJN,GADI,IAEPT,QAAS,CACP,eAAgB,sBAChBgB,cAAc,UAAD,OAAYL,OARJ,kBAYpBI,GAZoB,2CAA7B,uDAcOrB,EAAI7E,KAAKwH,EAAKjJ,IAEvBgW,kBAAmB,SAACnY,EAAQmC,GAC1BkG,EAASrG,GAAa,IACtB,IAAMoJ,EAAG,UAAMH,GAAN,YAAoBjL,EAApB,WAgBT,OAdAyI,EAAIY,aAAaC,QAAQC,IAAzB,yCAA6B,WAAOC,GAAP,kBAAAC,EAAA,6DACvBC,EAAQC,OAAOC,aAAaC,QAAQ,SACpCC,EAAY,GACZJ,IACFI,EAAS,2BACJN,GADI,IAEPT,QAAS,CACP,eAAgB,sBAChBgB,cAAc,UAAD,OAAYL,OARJ,kBAYpBI,GAZoB,2CAA7B,uDAcOrB,EAAIwP,MAAM7M,EAAKjJ,IAExBiW,gBAAiB,SAACjW,GAAa,IAAD,EAC5BA,EAAQkW,UAAR,OAAoBlW,QAApB,IAAoBA,GAApB,UAAoBA,EAASkW,iBAA7B,aAAoB,EAAoBzN,UAAU,EAAG,IAErDvC,EAASrG,GAAa,IACtB,IAAMoJ,EAAG,UAAMH,GAAN,UACT,OAAOxC,EAAI7E,KAAKwH,EAAKjJ,IAEvBmW,gBAAiB,SAACtY,EAAQmC,GAAa,IAAD,EACpCA,EAAQoW,aAAR,OAAuBpW,QAAvB,IAAuBA,GAAvB,UAAuBA,EAASoW,oBAAhC,aAAuB,EAAuB3N,UAAU,EAAG,IAE3DvC,EAASrG,GAAa,IACtB,IAAMoJ,EAAG,UAAMH,GAAN,YAAoBjL,GAC7B,OAAOyI,EAAIwP,MAAM7M,EAAKjJ,IAExBqW,kBAAmB,SAACrW,GAClBkG,EAASrG,GAAa,IACtB,IAAMoJ,EAAG,UAAMH,GAAN,YACT,OAAOxC,EAAI7E,KAAKwH,EAAKjJ,KClF3B,IAAM8I,GAAa,SAEJ,SAASwN,KACtB,IAAMhQ,EAAML,KACNC,EAAWC,cAmDjB,MAjDgB,CACdoQ,MAAO,SAACvW,GACNkG,EAASrG,GAAa,IACtB,IAAMoJ,EAAG,UAAMH,GAAN,UACT,OAAOxC,EAAI7E,KAAKwH,EAAKjJ,IAEvBwW,SAAU,SAACxW,GAAa,IAAD,IACrBA,EAAQyO,UAAR,OAAoBzO,QAApB,IAAoBA,GAApB,UAAoBA,EAASyO,iBAA7B,aAAoB,EAAoBhG,UAAU,EAAG,IACrDzI,EAAQyW,SAAR,OAAmBzW,QAAnB,IAAmBA,GAAnB,UAAmBA,EAASyW,gBAA5B,aAAmB,EAAmBhO,UAAU,EAAG,IAEnDvC,EAASrG,GAAa,IACtB,IAAMoJ,EAAG,UAAMH,GAAN,aACT,OAAOxC,EAAI7E,KAAKwH,EAAKjJ,IAEvB0W,oBAAqB,SAAC5M,GACpB,GAAIA,EAAU,CACZ,IAAMb,EAAG,UAAMH,GAAN,YAAoBgB,EAApB,aACT,OAAOxD,EAAI4C,IAAID,GAEjB,OAAOL,QAAQC,UAEjB8N,cAAe,WACb,IAAM1N,EAAG,UAAMH,IACf,OAAOxC,EAAI4C,IAAID,IAEjB2N,eAAgB,WACd,IAAM3N,EAAG,UAAMH,GAAN,YACT,OAAOxC,EAAI4C,IAAID,IAEjB4N,WAAY,SAAC7W,GACXkG,EAASrG,GAAa,IACtB,IAAMoJ,EAAG,UAAMH,IAef,OAdAxC,EAAIY,aAAaC,QAAQC,IAAzB,yCAA6B,WAAOC,GAAP,kBAAAC,EAAA,6DACvBC,EAAQC,OAAOC,aAAaC,QAAQ,SACpCC,EAAY,GACZJ,IACFI,EAAS,2BACJN,GADI,IAEPT,QAAS,CACP,eAAgB,sBAChBgB,cAAc,UAAD,OAAYL,OARJ,kBAYpBI,GAZoB,2CAA7B,uDAcOrB,EAAI8C,IAAIH,EAAKjJ,KCwXX8W,OAtaf,YAA4C,IAAtB/W,EAAqB,EAArBA,OAAQqN,EAAa,EAAbA,UAC5B,EAAwCtJ,mBAAS+G,IAAjD,oBAAOkM,EAAP,KAAqBC,EAArB,KACA,EAAgDlT,oBAAS,GAAzD,oBAAOmT,EAAP,KAAyBC,EAAzB,KACA,EAA0CpT,oBAAS,GAAnD,oBAAOoJ,EAAP,KAAsBC,EAAtB,KACA,EAAkCrJ,mBAAS,IAA3C,oBAAOoS,EAAP,KAAkBiB,EAAlB,KACA,EAA8BrT,mBAAS,IAAvC,oBAAOnF,EAAP,KAAgByY,EAAhB,KACA,EAAoCtT,mBAAS,IAA7C,oBAAOuT,EAAP,KAAmBC,EAAnB,KACA,EAAoDxT,mBAAS,IAA7D,oBAAOyT,EAAP,KAA2BC,EAA3B,KAEMjK,EAAMC,mBACNiK,EAAgBjK,mBAChBtH,EAAWC,cAEXuR,EAAU9B,KACV+B,EAAUrB,KAwDhB,SAAS1I,EAAYC,GACD,KAAdA,EAAEC,SACJV,GAAU,GAxE2B,8CAiFzC,+BAAA9F,EAAA,sDACM4F,IACE6J,IAAiBlM,IACb1D,EAAU,CACdyQ,qBAAsBL,EAAmBrN,KAAI,SAACzJ,GAAD,OAAOA,EAAEqJ,YACtDnN,KAAMuZ,GAERwB,EAAQzB,gBAAgB9O,GAAS0H,MAAK,SAAChH,GACjCA,EAAS1K,IACX+I,EAAS5G,EAAcuI,EAAS1K,KAElCqa,EAAsB,IACtBL,EAAa,IACb/J,GAAU,OAEH2J,IAAiBlM,KACpB1D,EAAU,CACd0Q,oBAAqBN,EAClBrN,KAAI,SAACzJ,GAAD,OAAOA,EAAEqJ,YACbtK,SAELkY,EAAQrB,kBAAkBlP,GAAS0H,MAAK,SAAChH,GACnCA,EAAS1K,IACX+I,EAAS5G,EAAcuI,EAAS1K,KAElCqa,EAAsB,IACtBL,EAAa,IACb/J,GAAU,QA3BlB,4CAjFyC,sBAkHzC,OAlGAnJ,qBAAU,WACR,IAAM8J,EAAwB,SAACF,GAGzB9N,GAAUwN,EAAIS,UAAYT,EAAIS,QAAQC,SAASJ,EAAEK,SACnDd,GAAU,IAId,OADAe,SAASC,iBAAiB,YAAaL,GAChC,WAELI,SAASE,oBAAoB,YAAaN,MAE3C,CAAChO,IACJkE,qBAAU,WACR,IAAM8J,EAAwB,SAACF,GAI3BoJ,GACAQ,EAAczJ,UACbyJ,EAAczJ,QAAQC,SAASJ,EAAEK,SAElCgJ,GAAoB,IAIxB,OADA/I,SAASC,iBAAiB,YAAaL,GAChC,WAELI,SAASE,oBAAoB,YAAaN,MAE3C,CAACkJ,IAEJhT,qBAAU,WAMR,OALA0T,EAAQhB,gBAAgB9H,MAAK,SAAChH,GACxBA,GACFyP,EAAczP,MAGX,WACL2P,EAAsB,IACtBL,EAAa,OAEd,IAEHlT,qBAAU,WACR,GAAI8S,IAAiBlM,GAAgB,CACnC,IAAIiN,GAA2B,OAAlBP,QAAkB,IAAlBA,OAAA,EAAAA,EAAoBhY,SAAU,IAA9B,OAAmC2W,QAAnC,IAAmCA,OAAnC,EAAmCA,EAAW5H,QAC3DnB,EAAiB2K,QACRf,IAAiBlM,IAC1BsC,EAAgD,KAAb,OAAlBoK,QAAkB,IAAlBA,OAAA,EAAAA,EAAoBhY,WAEtC,CAACgY,EAAoBrB,EAAWa,IAOnC9S,qBAAU,WAER,OADAkK,SAASC,iBAAiB,UAAWR,GAAa,GAC3C,WACLO,SAASE,oBAAoB,UAAWT,GAAa,MAEtD,IAkCI7N,EACL,sBACE6D,UAAU,kDACVgB,MAAO,CAAEC,OAAQ,GAFnB,SAIE,uBACE0I,IAAKA,EACL3J,UACE,6QAECqT,EAAmB,QAAU,IALlC,UAQE,uBAAKrT,UAAU,qDAAf,UACE,qBAAIA,UAAU,uEAAd,uBAIA,uBAAKA,UAAU,+FAAf,UACE,sBACEA,UACE,oGAECmT,IAAiBlM,GACd,oCACA,aAGR,uBACEjH,UACE,oDAECmT,IAAiBlM,GACd,aACA,uCAENtG,QAAS,kBAAMyS,EAAgBnM,KARjC,qBAYA,uBACEjH,UACE,oDAECmT,IAAiBlM,GACd,aACA,uCAENtG,QAAS,kBAAMyS,EAAgBnM,KARjC,yBAcJ,sBAAKjH,UAAU,yBAAf,SACGmT,IAAiBlM,GAChB,uCACE,uBAAKjH,UAAU,YAAf,UACE,yBACEqM,QAAQ,YACRrM,UAAU,wDAFZ,wBAIa,uBAAMA,UAAU,eAAhB,kBAEb,wBACEzG,GAAG,YACH+R,MAAOgH,EACP/G,SAAU,SAACtB,GAAD,OAAOsJ,EAAatJ,EAAEK,OAAOgB,QACvC1M,KAAK,OACLoB,UAAU,6JAGd,uBAAK2J,IAAKkK,EAAe7T,UAAU,YAAnC,UACE,wBACEqM,QAAQ,SACRrM,UAAU,wDAFZ,0BAMA,uBAAKA,UAAU,WAAf,UACE,wBACEzG,GAAG,SACHqF,KAAK,SACLuV,QAAS,kBAAMb,GAAoB,IACnChI,MAAOvQ,EACPqZ,aAAa,MACb7I,SAAU,SAACtB,GAAD,OAAOuJ,EAAWvJ,EAAEK,OAAOgB,QACrCtL,UAAU,0JAEXqT,GACC,qCACE,uBAAKrT,UAAU,0PAAf,UACE,qBAAIA,UAAU,wCAAd,yBAGCyT,EACE7W,QACC,SAACC,GAAD,gBACG,UAAAA,EAAEwO,gBAAF,eACGtG,cACDzK,SAFF,OAEWS,QAFX,IAEWA,OAFX,EAEWA,EAASgK,kBAFpB,UAGClI,EAAEqJ,gBAHH,aAGC,EACInB,cACDzK,SAFH,OAEYS,QAFZ,IAEYA,OAFZ,EAEYA,EAASgK,mBACtB4O,EAAmBta,MAClB,SAACgb,GAAD,OAAcA,EAASnO,WAAarJ,EAAEqJ,eAG3CkH,MAAK,SAAC1J,EAAG2J,GAAJ,OAAU3J,EAAE2H,SAASiJ,cAAcjH,EAAEhC,aAC1C/E,KAAI,SAACiO,EAAQ3a,GAAT,aACH,uBACE+G,QAAS,WACP,IAAIuT,EAAM,aAAOP,GAEdO,EAAO7a,MACN,SAACwD,GAAD,OAAOA,EAAEqJ,WAAaqO,EAAOrO,cAG/BgO,EAAOza,KAAK8a,GACZX,EAAsBM,KAI1BlU,UAAU,8PAbZ,UAeE,eAAC,GAAD,CACEiG,KAAK,KACL3F,IAAKiU,EAAO5J,UACZzE,SAAQ,OAAEqO,QAAF,IAAEA,OAAF,EAAEA,EAAQrO,WAEpB,uBAAMlG,UAAU,oEAAhB,mBACGuU,EAAOlJ,gBADV,QACsBnJ,OATjBtI,GAAK,OAAG2a,QAAH,IAAGA,OAAH,EAAGA,EAAQrO,yBAkBrC,uBAAKlG,UAAU,YAAf,UACE,yBACEqM,QAAQ,SACRrM,UAAU,wDAFZ,sBAIW,uBAAMA,UAAU,eAAhB,eAAwC,IACjD,uBAAMA,UAAU,wBAAhB,SACG,4CAGL,sBAAKA,UAAU,iMAAf,SACG2T,EACEvG,MAAK,SAAC1J,EAAG2J,GAAJ,OAAU3J,EAAE2H,SAASiJ,cAAcjH,EAAEhC,aAC1C/E,KAAI,SAACiO,EAAQ3a,GAAT,aACH,uBACE+G,QAAS,WACP,IAAIuT,EAAM,aAAOP,GACba,EAAIN,EAAOra,WACb,SAACgD,GAAD,OAAOA,EAAEqJ,WAAaqO,EAAOrO,YAE3BsO,GAAK,IACPN,EAAOhW,OAAOsW,EAAG,GACjBZ,EAAsBM,KAI1BlU,UAAU,0PAZZ,UAcE,eAAC,GAAD,CACEiG,KAAK,KACL3F,IAAKiU,EAAO5J,UACZzE,SAAQ,OAAEqO,QAAF,IAAEA,OAAF,EAAEA,EAAQrO,WAEpB,uBAAMlG,UAAU,oEAAhB,mBACGuU,EAAOlJ,gBADV,QACsBnJ,OATjBtI,GAAK,OAAG2a,QAAH,IAAGA,OAAH,EAAGA,EAAQrO,sBAiBjC,uBAAKyD,IAAKkK,EAAe7T,UAAU,YAAnC,UACE,wBACEqM,QAAQ,eACRrM,UAAU,8CAFZ,4BAMA,uBAAKA,UAAU,WAAf,UACE,wBACEzG,GAAG,eACHqF,KAAK,SACLuV,QAAS,kBAAMb,GAAoB,IACnChI,MAAOvQ,EACPqZ,aAAa,MACb7I,SAAU,SAACtB,GAAD,OAAOuJ,EAAWvJ,EAAEK,OAAOgB,QACrCtL,UAAU,0JAEXqT,GACC,qCACE,uBAAKrT,UAAU,mOAAf,UACE,qBAAIA,UAAU,mDAAd,yBAGCyT,EACErG,MAAK,SAAC1J,EAAG2J,GAAJ,OAAU3J,EAAE2H,SAASiJ,cAAcjH,EAAEhC,aAC1CzO,QACC,SAACC,GAAD,gBACG,UAAAA,EAAEwO,gBAAF,eACGtG,cACDzK,SAFF,OAEWS,QAFX,IAEWA,OAFX,EAEWA,EAASgK,kBAFpB,UAGClI,EAAEqJ,gBAHH,aAGC,EACInB,cACDzK,SAFH,OAEYS,QAFZ,IAEYA,OAFZ,EAEYA,EAASgK,mBACtB4O,EAAmBta,MAClB,SAACgb,GAAD,OAAcA,EAASnO,WAAarJ,EAAEqJ,eAG3CI,KAAI,SAACiO,EAAQ3a,GAAT,aACH,uBACE+G,QAAS,WACP,IAAIuT,EAAS,GACbA,EAAOza,KAAK8a,GACZjB,GAAoB,GACpBM,EAAsBM,IAGxBlU,UAAU,8PARZ,UAUE,eAAC,GAAD,CACEiG,KAAK,KACL3F,IAAKiU,EAAO5J,UACZzE,SAAQ,OAAEqO,QAAF,IAAEA,OAAF,EAAEA,EAAQrO,WAEpB,uBAAMlG,UAAU,oEAAhB,mBACGuU,EAAOlJ,gBADV,QACsBnJ,OATjBtI,GAAK,OAAG2a,QAAH,IAAGA,OAAH,EAAGA,EAAQrO,sBAiBnC,uBAAKlG,UAAU,YAAf,UACE,yBACEqM,QAAQ,SACRrM,UAAU,8CAFZ,sBAIW,uBAAMA,UAAU,eAAhB,eAAwC,IACjD,uBAAMA,UAAU,wBAAhB,SACG,yBAGL,sBAAKA,UAAU,kMAAf,SACG,aAAI2T,GAAoBrN,KAAI,SAACiO,EAAQ3a,GAClB,IAAD,EAAjB,OAAc,IAAVA,EAEA,uBACE+G,QAAS,WACP,IAAIuT,EAAM,aAAOP,GACba,EAAIN,EAAOra,WACb,SAACgD,GAAD,OAAOA,EAAEqJ,WAAaqO,EAAOrO,YAE3BsO,GAAK,IACPN,EAAOhW,OAAOsW,EAAG,GACjBZ,EAAsBM,KAI1BlU,UAAU,0PAZZ,UAcE,eAAC,GAAD,CACEiG,KAAK,KACL3F,IAAKiU,EAAO5J,UACZzE,SAAQ,OAAEqO,QAAF,IAAEA,OAAF,EAAEA,EAAQrO,WAEpB,uBAAMlG,UAAU,oEAAhB,mBACGuU,EAAOlJ,gBADV,QACsBnJ,OATjBtI,GAAK,OAAG2a,QAAH,IAAGA,OAAH,EAAGA,EAAQrO,WAclB,4CAQrB,sBAAKlG,UAAU,kCAAf,SACE,uBAAKA,UAAU,8BAAf,UACE,eAAC,GAAD,CAAQU,SAAO,EAACtE,QAAQ,QAAQuE,QAAS,kBAAM6I,GAAU,MACzD,eAAC,GAAD,CACE3I,UAAWyI,EACXlN,QAAQ,SACRuE,QAAS,kBA3ZoB,0CA2Zd8T,gBAOzB,ICnQWC,OA/Jf,YAA6D,IAAzC1U,EAAwC,EAAxCA,UAAW2U,EAA6B,EAA7BA,0BACvBlZ,EAAc0K,aAAY,SAAChN,GAAD,OAAWA,EAAMN,MAAM4C,eACjDyB,EAAciJ,aAAY,SAAChN,GAAD,OAAWA,EAAMwG,MAAMzC,eACjDoF,EAAWC,cACjB,EAAgDrC,oBAAS,GAAzD,oBAAO0U,EAAP,KAAyBC,EAAzB,KACMhc,EAAQsN,aAAY,SAAChN,GAAD,OAAWA,EAAMN,MAAMA,SAEjD,EAA8BqH,mBAAS,IAAvC,oBAAOnF,EAAP,KAAgByY,EAAhB,KAkBA,OAhBAnT,qBAAU,WACR,GAAIxH,EAAO,CACT,IAAMic,EAAMjc,EAAM0X,QAAO,SAACwE,EAAQlY,GAChC,OAAOkY,IAAW,OAADlY,QAAC,IAADA,OAAA,EAAAA,EAAGtB,qBAAsB,EAAI,EAAI,KACjD,GACHoZ,EAA0BG,MAE3B,CAACjc,IAUF,uCACE,eAAC,GAAD,CAAYsD,OAAQyY,EAAkBpL,UAAWqL,IACjD,uBACE7U,UACEA,uGAFJ,UAOE,uBAAKA,UAAU,YAAf,UACE,uBAAKA,UAAU,oDAAf,UACE,wBACEpB,KAAK,SACLoB,UAAU,8KACV4K,YAAY,kBACZW,SAAU,SAACtB,GAAD,OAAOuJ,EAAWvJ,EAAEK,OAAOgB,UAEvC,eAAC,GAAD,CACE1E,UAAU,cACVjG,QAAS,kBAAMkU,GAAoB,IACnC7U,UAAU,sCAGd,oBAAGA,UAAU,2FAGf,sBAAKA,UAAU,+CAAf,SACGnH,GACCmc,GAAgBnc,EAAOkC,GAASuL,KAAI,SAAChN,EAAMM,GAAW,IAAD,cAC7Cqb,EAAkB/X,EAAYgJ,SAMpC,GAHW,OAAG5M,QAAH,IAAGA,OAAH,EAAGA,EAAMQ,aAAaT,MAC/B,SAACwD,GAAD,OAAOA,EAAEqJ,WAAa+O,KAExB,CAIA,IAOiC,EAP3BV,GACA,OAAJjb,QAAI,IAAJA,OAAA,EAAAA,EAAMQ,aAAa6B,QAAS,EAA5B,OACIrC,QADJ,IACIA,GADJ,UACIA,EAAMQ,oBADV,aACI,EACI8C,QAAO,SAACC,GAAD,OAAOA,EAAEqJ,WAAa+O,KAC9BrZ,QACHsB,EACFgY,EAAc,GAClB,GAA8B,KAA1B,UAAA5b,EAAKoB,gBAAL,eAAeiB,QACjBuZ,EAAW,UAAG5b,EAAKoB,gBAAR,aAAG,EAAe6V,QAAO,SAAC7M,EAAG2J,GAAJ,OACjC,OAAD3J,QAAC,IAADA,OAAA,EAAAA,EAAG4J,cAAH,OAAiBD,QAAjB,IAAiBA,OAAjB,EAAiBA,EAAGC,aAAc5J,EAAI2J,KAG1C,OACE,uBAEErN,UAAU,4KACVW,QAAS,kBA/DzB,SAAqBpH,GACnB,GAAIkC,IAAgBA,EAAYnB,SAASf,GAAK,CAC5C,IAAMH,EAASsC,EAAcnC,GAC7B+I,EAASlJ,IA4DkB+b,CAAY7b,EAAKC,KAHlC,UAKGD,EAAKiC,oBAAsB,GAC1B,uBAAMyE,UAAU,yIAAhB,SACG1G,EAAKiC,oBAAsB,EACxB,KACAjC,EAAKiC,sBAGb,eAAC,GAAD,CACE+E,KACM,OAAJhH,QAAI,IAAJA,OAAA,EAAAA,EAAMsF,QAASqI,GAAf,OACIsN,QADJ,IACIA,OADJ,EACIA,EAAQ5J,UADZ,OAEIrR,QAFJ,IAEIA,OAFJ,EAEIA,EAAMY,eAEZJ,aAAY,OAAER,QAAF,IAAEA,OAAF,EAAEA,EAAMQ,eAGtB,uBAAKkG,UAAU,qFAAf,UACE,uBAAKA,UAAU,6DAAf,UACE,uBACEA,UACE,8CAEC1G,EAAKiC,oBAAsB,EAAI,YAAc,IAJlD,UAOO,OAAJjC,QAAI,IAAJA,OAAA,EAAAA,EAAMsF,QAASqI,GAAf,OACGsN,QADH,IACGA,OADH,EACGA,EAAQlJ,SADX,iBAEG/R,QAFH,IAEGA,OAFH,EAEGA,EAAMP,YAFT,QAEiBmJ,KAEpB,uBAAMlC,UAAU,+CAAhB,mBACGoO,KACC,IAAIC,KAAJ,oBACE6G,SADF,aACE,EAAa5H,mBADf,eAC8BhU,QAD9B,IAC8BA,OAD9B,EAC8BA,EAAMgU,aAEpC,YAECgB,iBAPL,iBACG,EAOGC,QAAQ,MAAO,WARrB,aACG,EAQG7D,YAGR,sBAAK1K,UAAU,OAAf,SACE,uBACEA,UACE,kEAEC1G,EAAKiC,oBAAsB,EACxB,kBACA,IANR,SASG2Z,EAAY9Y,QACT8Y,EAAY9Y,QACZ8Y,EAAYtG,SACZ,oBACA,YA3DLtV,EAAKC,UAmEpB,oBACE6b,KAAMtS,oCACNwH,OAAO,SACP+K,IAAI,aACJrV,UAAU,yKAJZ,wCAeR,SAASgV,GAAgBnc,EAAOkC,GAC9B,IAAImZ,EAKN,SAAkBrb,GAChB,GAAIA,EACF,OAAO,aAAIA,GAAOuU,MAAK,SAACkI,EAAOC,GAAW,IAAD,QAIL,EAOA,EAV9BC,EAAe,GACfC,EAAe,GAEY,KAA3B,UAAAH,EAAM5a,gBAAN,eAAgBiB,QAClB6Z,EAAY,UAAGF,EAAM5a,gBAAT,aAAG,EAAgB6V,QAAO,SAAC7M,EAAG2J,GACxC,OAAQ,OAAD3J,QAAC,IAADA,OAAA,EAAAA,EAAG4J,cAAH,OAAiBD,QAAjB,IAAiBA,OAAjB,EAAiBA,EAAGC,aAAc5J,EAAI2J,KAG/CmI,EAAalI,YAAb,OAA2BgI,QAA3B,IAA2BA,OAA3B,EAA2BA,EAAOhI,YAEL,KAA3B,UAAAiI,EAAM7a,gBAAN,eAAgBiB,QAClB8Z,EAAY,UAAGF,EAAM7a,gBAAT,aAAG,EAAgB6V,QAAO,SAAC7M,EAAG2J,GAAJ,OACnC,OAAD3J,QAAC,IAADA,OAAA,EAAAA,EAAG4J,cAAH,OAAiBD,QAAjB,IAAiBA,OAAjB,EAAiBA,EAAGC,aAAc5J,EAAI2J,KAGxCoI,EAAanI,YAAb,OAA2BiI,QAA3B,IAA2BA,OAA3B,EAA2BA,EAAOjI,YAGpC,OAAmB,QAAZ,EAAAkI,SAAA,eAAclI,cAAd,UAA4BmI,SAA5B,aAA4B,EAAcnI,aAAc,GAAK,KA1B3DoI,CAAS7c,GAEtB,OADAqb,EA8BF,SAAoBrb,EAAOkC,GACzB,GAAIlC,EACF,OAAOA,EAAM+D,QAAO,SAACtD,GAAU,IAAD,EAU5B,OATW,OAAGA,QAAH,IAAGA,OAAH,EAAGA,EAAMQ,aAAaT,MAAK,SAACwD,GACrC,SACEA,EAAEwO,SAAStG,cAAczK,SAASS,EAAQgK,kBAA1C,OACAlI,QADA,IACAA,OADA,EACAA,EAAGqJ,SAASnB,cAAczK,SAASS,EAAQgK,uBAOtC,OAAIzL,QAAJ,IAAIA,GAAJ,UAAIA,EAAMP,YAAV,aAAI,EAAYgM,cAAczK,SAASS,EAAQgK,mBA3CnD4Q,CAAWzB,EAAQnZ,GC1K9B,IAAMmK,GAAa,iBAEJ,SAAS0Q,KACtB,IAAMlT,EAAML,KAmBZ,MAjBwB,CACtB+C,OAAQ,SAAClC,GAAY,IAAD,GACd,UAACA,SAAD,aAAC,EAAQtI,SACXsI,EAAM,2BAAQA,GAAR,IAAgBtI,MAAOqH,MAE/B,IAAMoD,EAAG,UAAMH,IACf,OAAOxC,EAAI4C,IAAID,EAAK,CAAEnC,YAExB2S,QAAS,WACP,IAAMxQ,EAAG,UAAMH,GAAN,SACT,OAAOxC,EAAIwP,MAAM7M,IAEnByQ,SAAU,SAACvc,GACT,IAAM8L,EAAG,UAAMH,GAAN,YAAoB3L,EAApB,SACT,OAAOmJ,EAAIwP,MAAM7M,KCmCR0Q,OApDf,YAAkD,IAAD,EAAzBrZ,EAAyB,EAAzBA,aAAciE,EAAW,EAAXA,QACpC,OACE,qCACE,uBACEX,UAAU,wKACVW,QAAS,kBAAMA,EAAQjE,IAFzB,YAIG,OAACA,QAAD,IAACA,OAAD,EAACA,EAAcI,SACd,uBAAMkD,UAAU,sKAElB,uBAAKA,UAAU,yBAAf,UACE,eAAC,GAAD,CAAaM,IAAG,OAAE5D,QAAF,IAAEA,GAAF,UAAEA,EAAcyQ,eAAhB,aAAE,EAAuBxC,aAC5B,OAAZjO,QAAY,IAAZA,OAAA,EAAAA,EAAckC,QAAS0I,IACtB,sBAAKtH,UAAU,+DAAf,SACE,sBACEM,IAAKgI,GAAa5L,EAAasZ,cAC/BxV,IAAK6H,GAAa3L,EAAasZ,cAC/BhW,UAAU,uBAKlB,sBAAKA,UAAU,kEAAf,SACE,uBAAKA,UAAU,2DAAf,UACE,uBACEA,UACE,wFAEC,OAACtD,QAAD,IAACA,OAAD,EAACA,EAAcI,QAAuB,GAAd,aAJ7B,gBAOGJ,QAPH,IAOGA,OAPH,EAOGA,EAAcN,UAEjB,uBACE4D,UACE,kDAEC,OAACtD,QAAD,IAACA,OAAD,EAACA,EAAcI,QAAuB,GAAd,aAJ7B,SAOGsR,KACC,IAAIC,KAAJ,OAAS3R,QAAT,IAASA,OAAT,EAASA,EAAc4Q,aACvB,YACAgB,uBCuED2H,OA7Gf,YAA4E,IAAD,MAA/CjW,EAA+C,EAA/CA,UAAWwJ,EAAoC,EAApCA,UAAW0M,EAAyB,EAAzBA,sBAC1CC,EAAkBP,KAClBtT,EAAWC,cACXC,EAAUC,cAChB,EAAwBvC,mBAAS,GAAjC,oBAAOrF,EAAP,KAAaqW,EAAb,KACA,ECVa,WAA8C,IAAXrW,EAAU,uDAAH,EACvD,EAAkCqF,oBAAS,GAA3C,oBAAOlE,EAAP,KAAkBC,EAAlB,KACA,EAA0BiE,mBAAS,IAAnC,oBAAO2B,EAAP,KAAcsP,EAAd,KACM5U,EAAgB4J,aAAY,SAAChN,GAAD,OAAWA,EAAMsG,IAAIlD,iBACvD,EAAkC2D,oBAAS,GAA3C,oBAAO0B,EAAP,KAAkBwP,EAAlB,KAEM+E,EAAkBP,KAClBtT,EAAWC,cAwBjB,OAtBAlC,qBAAU,WACR,GAAIuB,EAAW,CACb3F,GAAa,GACbkV,GAAS,GACT,IAAM5N,EAAU,CAAE1I,QAClBsb,EACG/Q,OAAO7B,GACP0H,MAAK,SAAChH,GAEH3B,EADEzH,EAAO,EACA4B,EAAiBwH,GAEjBhH,EAAoBgH,IAE/BmN,EAAavW,EAAOoJ,EAASnJ,WAC7BmB,GAAa,MAEdoV,OAAM,SAACpH,GACNkH,EAASlH,SAGd,CAACpP,IAEG,CAAE0B,gBAAeP,YAAW6F,QAAOD,aDpBxCwU,CAA0Bvb,GADpB0B,EAAR,EAAQA,cAAeqF,EAAvB,EAAuBA,UAAW5F,EAAlC,EAAkCA,UAAW6F,EAA7C,EAA6CA,MAG7C,SAASsT,IAAgC,IAApBzY,EAAmB,uDAAJ,GAKlC,OAJKA,EAAaI,SAChBwF,EAAStF,EAAqBN,EAAanD,KAC3C4c,EAAgBL,SAASpZ,EAAanD,KAEhCmD,EAAakC,MACnB,KAAK0I,GACL,KAAKA,IACH,OAAI5K,QAAJ,IAAIA,OAAJ,EAAIA,EAAc2B,SAChBmE,EAAQ/I,KAAK,kBAAYiD,QAAZ,IAAYA,OAAZ,EAAYA,EAAc2B,SAEzC,MACF,KAAKiJ,GACL,KAAKA,GACL,KAAKA,GACH9E,EAAQ/I,KAAK,YAIjB+P,GAAU,GAsBZ,OAnBAnJ,qBAAU,WACR,GAAI9D,EAAcC,MAAO,CACvB,IAAIsY,EAAMvY,EAAcC,MAAM+T,QAAO,SAACwE,EAAQlY,GAC5C,OAAOkY,IAAW,OAADlY,QAAC,IAADA,OAAA,EAAAA,EAAGC,QAAS,EAAI,KAChC,GACHoZ,EAAsBpB,MAEvB,CAACvY,IAaF,qCACE,uBACEyD,UACEA,sHAFJ,UAOE,uBAAKA,UAAU,oCAAf,UACE,uBAAMA,UAAU,qCAAhB,2BAGA,uBACEA,UAAU,wLACVW,QApBV,WACE2B,EAAS3F,KACTwZ,EAAgBN,WAgBV,iCAOF,uBAAK7V,UAAU,6BAAf,UACGzD,IAAa,UACZ,oBAAIA,QAAJ,IAAIA,OAAJ,EAAIA,EAAeC,OAChBI,QAAO,SAACC,GAAD,OAAQA,EAAEC,UACjBsQ,MAAK,SAAC1J,EAAG2J,GAAJ,OAAY,OAAD3J,QAAC,IAADA,OAAA,EAAAA,EAAG4J,cAAH,OAAiBD,QAAjB,IAAiBA,OAAjB,EAAiBA,EAAGC,aAAc,GAAK,YAH9C,aACZ,EAGIhH,KAAI,SAAC5J,EAAc9C,GAAf,OACJ,eAAC,GAAD,CACE+G,QAASwU,EAETzY,aAAcA,GADTA,EAAanD,QAIzBgD,IAAa,UACZ,oBAAIA,QAAJ,IAAIA,OAAJ,EAAIA,EAAeC,OAChBI,QAAO,SAACC,GAAD,OAAOA,EAAEC,UAChBsQ,MAAK,SAAC1J,EAAG2J,GAAJ,OAAY,OAAD3J,QAAC,IAADA,OAAA,EAAAA,EAAG4J,cAAH,OAAiBD,QAAjB,IAAiBA,OAAjB,EAAiBA,EAAGC,aAAc,GAAK,YAH9C,aACZ,EAGIhH,KAAI,SAAC5J,EAAc9C,GAAf,OACJ,eAAC,GAAD,CACE+G,QAASwU,EAETzY,aAAcA,GADTA,EAAanD,QAI1B,eAAC,GAAD,CACEyG,UAAU,OACVW,QAvDV,WACMiB,GACFsP,GAAQ,SAACK,GAAD,OAAcA,EAAW,MAsD3BvV,UAAWA,EACX6F,MAAOA,EACPD,UAAWA,EACXE,gBAAgB,mCAGN,OAAbvF,QAAa,IAAbA,GAAA,UAAAA,EAAeC,aAAf,eAAsBb,QAAS,GAC9B,uBAAMqE,UAAU,OAAhB,iDEhHGqW,GAAU,CACrB,CACEtd,KAAM,OACN4N,KAAM,cACN2P,aAAc,aACdC,MAAO,KAET,CACExd,KAAM,UACN4N,KAAM,eACN2P,aAAc,cACdC,MAAO,aCmTIC,OA9Sf,YAAkC,EAAhBC,aAAiB,IAC3BjU,EAAUC,cACVH,EAAWC,cAEXmU,EAAOvQ,aAAY,SAAChN,GAAD,OAAWA,EAAMwG,MAAMzC,eAC1CI,EAAe6I,aAAY,SAAChN,GAAD,OAAWA,EAAMsE,MAAMH,gBAClDyW,EAAUrB,KACV3I,EAAU5E,KAEVwR,EAAWC,cAEjB,EAA4D1W,mBAAS,GAArE,oBAAO2W,EAAP,KAA+BlC,EAA/B,KACA,EAAoDzU,mBAAS,GAA7D,oBAAO4W,EAAP,KAA2BZ,EAA3B,KAEA,EAAkC1E,KAA1BC,EAAR,EAAQA,SAAUC,EAAlB,EAAkBA,YAClB,EAA8BxR,mBAAS,IAAvC,oBAAOnF,EAAP,KAAgByY,EAAhB,KAEA,EAA4CtT,oBAAS,GAArD,oBAAO6W,EAAP,KAAuBC,EAAvB,KACA,EAA4D9W,oBAAS,GAArE,oBAAO+W,EAAP,KAA+BC,EAA/B,KACA,EAAoChX,oBAAS,GAA7C,oBAAOwN,EAAP,KAAmBC,EAAnB,KAEA,EAAwCzN,mBAAS,CAC/C/D,QAAQ,EACRE,MAAO,GACPD,QAAS,GACTwQ,mBAAoB,KAJtB,oBAAOuK,EAAP,KAAqBC,EAArB,KAOMzN,EAAMC,mBAyCZ,SAASyN,IACPzT,OAAOC,aAAaQ,WAAW,SAC/BT,OAAO+S,SAASvB,KAAOtS,WAmCzB,OA5EAzC,qBAAU,WACR0T,EAAQf,iBAAiB/H,MAAK,SAAChH,GAC7B3B,EAASnF,EAAe8G,SAEzB,IAEH5D,qBAAU,WACR,IAAM8J,EAAwB,SAACF,GAGzByD,GAAc/D,EAAIS,UAAYT,EAAIS,QAAQC,SAASJ,EAAEK,SACvDqD,GAAc,GAEZoJ,GAAkBpN,EAAIS,UAAYT,EAAIS,QAAQC,SAASJ,EAAEK,SAC3D0M,GAAkB,GAGlBC,GACAtN,EAAIS,UACHT,EAAIS,QAAQC,SAASJ,EAAEK,SAExB4M,GAA0B,IAI9B,OADA3M,SAASC,iBAAiB,YAAaL,GAChC,WAELI,SAASE,oBAAoB,YAAaN,MAE3C,CAACuD,EAAYuJ,EAAwBF,IAgDtC,uCACGI,EAAahb,QACZ,eAAC,GAAD,CACEA,OAAQgb,EAAahb,OACrBwQ,YAAa,kBAAMyK,EAAgB,CAAEjb,QAAQ,KAC7CE,MAAM,gBACND,QAAS+a,EAAa/a,QACtBwQ,mBAAoBuK,EAAavK,mBACjCC,oBAAqBsK,EAAatK,sBAGtC,sBAAK7M,UAAU,uFAAf,SACE,uBAAKA,UAAU,sDAAf,UACE,uBAAKA,UAAU,+BAAf,UACE,eAAC,IAAD,CAAMoB,GAAG,IAAT,SACE,sBAAKd,IAAKC,GAAMC,IAAI,OAAOR,UAAU,+BAEvC,eAAC,GAAD,CAAe4G,UAAU,eAAe5G,UAAU,cAClD,wBACE+K,SAAU,SAACd,GAAD,OAjEP,SAACA,GACdA,EAAEe,iBACFxI,EAAQ/I,KAAK,WAAasB,GA+DCuc,CAAOrN,IACxBjK,UAAU,4BAFZ,UAIE,wBACEpB,KAAK,SACLoB,UAAU,mKACV4K,YAAY,iBACZU,MAAOvQ,EACPwQ,SAAU,SAACtB,GAAD,OAAOuJ,EAAWvJ,EAAEK,OAAOgB,UAEvC,oBAAGtL,UAAU,+GAGjB,sBAAKA,UAAU,+BAAf,SACGqW,GAAQ/P,KAAI,SAACiR,GACZ,IAAMC,EAAeb,EAASc,SACxBC,EAAiBH,EAAIhB,QAAUiB,EAC/B7Q,EAAO+Q,EAAiBH,EAAI5Q,KAAO4Q,EAAIjB,aAC7C,OACE,uBAEEtW,UACE,mBAEC0X,EAAiB,+BAAiC,IAErD/W,QAAS,kBA9DzB,SAAc4V,EAAOmB,GACfA,GACF9T,OAAO+T,SAAS,CACdC,IAAK,EACLC,KAAM,EACNC,SAAU,WAEZxV,EAAS9E,MACTuM,EAAQ3E,SAAS6F,MAAK,SAAChH,GACrB3B,EAAS5E,EAAYuG,QAGvBzB,EAAQ/I,KAAK8c,GAkDcwB,CAAKR,EAAIhB,MAAOmB,IAPjC,UASE,oBACE1X,UAAS,mKAA8J2G,KAEzK,sBAAK3G,UAAU,iPAAf,SACGuX,EAAIxe,OAEqB,SAA3Bwe,EAAIxe,KAAKgM,eAA4BzH,EAAe,GACnD,uBAAM0C,UAAU,yIAfbuX,EAAIhB,YAqBjB,sBAAIvW,UAAU,8BAA8B2J,IAAKA,EAAjD,UACE,sBACE3J,UAAU,wKACVW,QAAS,kBAxGAuF,EAwGkBwQ,EAAKxQ,cAvG1C1D,EAAQ/I,KAAK,YAAcyM,GADT,IAACA,GAsGX,UAIE,eAAC,GAAD,CAAa5F,IAAKoW,EAAK/L,UAAW1E,KAAK,OACvC,uBAAMjG,UAAU,qBAAhB,SAAsC0W,EAAK7L,eAE7C,sBAAI7K,UAAU,WAAd,UACE,eAAC,GAAD,CACEA,UACE,SAEC+W,EACG,wEACA,IAENnQ,UAAU,8BACVF,WACEqQ,EACI,0HACA,GAENlQ,eACEkQ,EAAiB,qCAAuC,GAE1DpW,QAAS,WACPqW,GAAmBD,GACnBpJ,GAAc,GACduJ,GAA0B,MAG7BL,EAAyB,IAAME,GAC9B,uBAAM/W,UAAU,8LAAhB,SACG6W,EAAyB,EAAI,KAAOA,OAI3C,sBAAI7W,UAAU,WAAd,UACE,uBAAMA,UAAU,sBAChB,eAAC,GAAD,CACEA,UAAU,MACV0G,WACEuQ,EACI,0HACA,GAENrQ,UAAU,cACVC,eACEoQ,EACI,qCACA,GAENtW,QAAS,WACPqW,GAAkB,GAClBrJ,GAAc,GACduJ,GAA2BD,MAG9BH,EAAqB,IAAMG,GAC1B,uBAAMjX,UAAU,8LAAhB,SACG8W,EAAqB,EAAI,KAAOA,OAIvC,8BACE,uBAAK9W,UAAU,WAAf,UACE,eAAC,GAAD,CACE4G,UAAU,mBACVF,WACEgH,EACI,0HACA,GAEN7G,eACE6G,EAAa,qCAAuC,GAEtD/M,QAAS,WACPgN,GAAeD,GACfsJ,GAAkB,GAClBE,GAA0B,MAG7BxJ,GACC,uBAAK1N,UAAU,6MAAf,UACE,0BACEA,UAAU,iLACVW,QAAS,kBAAM+Q,GAAaD,IAF9B,UAIE,oBACEzR,UACE,kGAECyR,EAAW,UAAY,cAG5B,gCAAOA,EAAW,aAAe,iBAEnC,0BACEzR,UAAU,iLACVW,QAAS,YAjM7B,SACEvE,EACAyQ,GAWAuK,EAPqB,CACnBjb,QAAQ,EACRE,MAHF,uCAIED,QAASA,EACTwQ,mBALF,uDAFqB,MAQnBC,oBAAqBA,IAuLHmL,CAAiB,0BAA2BX,IAHhD,UAME,oBAAGrX,UAAU,kHACb,kDAIN,eAAC,GAAD,CACE2U,0BAA2BA,EAC3B3U,UACE,8FAEC+W,EAAiB,GAAK,YAG3B,eAAC,GAAD,CACEvN,UAAW0N,EACXlX,UACE,8GAECiX,EAAyB,GAAK,UAEjCf,sBAAuBA,qB,SC9M1B+B,OApFf,WACE,IAAM3V,EAAWC,cAEjB,EAAoCrC,mBAAS,MAA7C,oBAAOgY,EAAP,KAAmBC,EAAnB,KAEMjb,EAAciJ,aAAY,SAAChN,GAAD,OAAWA,EAAMwG,MAAMzC,eACjDkb,EAAajS,aAAY,SAAChN,GAAD,OAAWA,EAAMN,MAAMuf,cAEhDtE,EAAU9B,KAyEhB,OAvEA3R,qBAAU,WAAM,8CACd,uBAAAqD,EAAA,sDACEoQ,EACG1O,SACA6F,MAAK,SAAChH,GACL3B,EAASrH,EAAagJ,EAASC,UAEhCmN,OAAM,SAACxP,GACNwW,QAAQxW,MAAM,sBAAuBA,MAP3C,4CADc,uBAAC,WAAD,wBAWdyW,KACC,IAGHjY,qBAAU,WACR,IAAMkY,GAAgB,IAAIC,MACvBC,QAAQ3V,iDAAoC,CAC3C4V,mBAAoB,kBAAM7U,aAAaC,QAAQ,YAEhD6U,yBACAC,QAEHT,EAAcI,KACb,IAEHlY,qBAAU,WAsCR,OArCI6X,IAAeA,EAAWW,mBAC5BX,EAAWY,QAAQ7N,MAAK,SAACiJ,GACvBgE,EAAWa,GAAG5W,IAA4B,SAAC8B,GACzC,IAAM7K,EAAS8B,EAAW+I,GAC1B3B,EAASlJ,GACL6K,EAAShK,QAAUme,IAAenU,EAAShK,QAC7CqI,EAAShH,EAAgB2I,EAAShK,YAGtCie,EAAWa,GAAG5W,IAAyB,SAAC7I,GACtC,IAAMF,EAASF,EAAQI,GACvBgJ,EAASlJ,GACLE,EAAK0f,kBAAoB9b,EAAYgJ,UACvC5D,EAAS5G,EAAcpC,EAAKC,QAGhC2e,EAAWa,GAAG5W,IAAiC,SAAC7I,GAC9C,IAAMF,EAASM,EAASJ,GACxBgJ,EAASlJ,MAEX8e,EAAWa,GAAG5W,IAAyC,SAAC8B,GACtD,IAAM7K,EAASW,EAAgBkK,GAC/B3B,EAASlJ,MAEX8e,EAAWa,GAAG5W,IAAyC,SAAC8B,GACtD,IAAM7K,EAASe,EAAkB8J,GACjC3B,EAASlJ,MAEX8e,EAAWa,GACT5W,IACA,SAAC8B,GACC,IAAM7K,EAASiE,EAAyB4G,GACxC3B,EAASlJ,SAKV,WACD8e,GAAcA,EAAWW,mBAC3BX,EAAWe,UAGd,CAACf,IAEG,0BCyBMgB,OA9Ff,SAAaC,GACX,IAAMnd,EAAYmK,aAAY,SAAChN,GAAD,OAAWA,EAAMsG,IAAIzD,aAC7CE,EAAQiK,aAAY,SAAChN,GAAD,OAAWA,EAAMsG,IAAIvD,SACzCoG,EAAWC,cAMjB,EAAoCrC,mBAAS,MAA7C,oBAAOgY,EAAP,KAAmBC,EAAnB,KAwDA,OArDA9X,qBAAU,WACR,IAAMkY,GAAgB,IAAIC,MACvBC,QAAQ3V,+CAAmC,CAC1C4V,mBAAoB,kBAAM7U,aAAaC,QAAQ,YAEhD6U,yBACAC,QAEHT,EAAcI,KACb,IAEHlY,qBAAU,WAmCR,OAlCI6X,IAAeA,EAAWW,mBAC5BX,EAAWY,QAAQ7N,MAAK,SAACiJ,GACvBgE,EAAWa,GAAG3W,IAAgC,SAAC6B,GAC7C3B,EAAShH,EAAgB2I,OAE3BiU,EAAWa,GAAG3W,IAAwB,SAAC6B,GACrC3B,EAAS/E,SAEX2a,EAAWa,GAAG3W,IAAgC,SAAC6B,GAC7C3B,EAASxE,EAAWmG,OAEtBiU,EAAWa,GAAG3W,IAAuB,SAAC/D,GACpCiE,EAASrE,EAAWI,OAEtB6Z,EAAWa,GAAG3W,IAA4B,SAAC6B,GACzC3B,EAASlE,EAAY6F,OAEvBiU,EAAWa,GAAG3W,IAAoC,SAAC6B,GACjD3B,EAAS9D,GAAeyF,OAE1BiU,EAAWa,GAAG3W,IAA2B,SAAC/D,EAAQS,GAChDwD,EAASzD,GAAe,CAAER,SAAQS,mBAEpCoZ,EAAWa,GAAG3W,IAA2B,SAAC6B,GACxC3B,EAASvD,GAAWkF,OAEtBiU,EAAWa,GAAG3W,IAAmC,SAAC6B,GAChD3B,EAASpD,GAAc+E,OAEzBiU,EAAWa,GAAG3W,IAA0B,SAAC/D,EAAQiB,GAC/CgD,EAASjD,GAAc,CAAEhB,SAAQiB,qBAIhC,WACD4Y,GAAcA,EAAWW,mBAC3BX,EAAWe,UAGd,CAACf,IAGF,qCACE,gBAAC,IAAD,CAAekB,SAAUtW,UAAzB,UACG9G,GAAa,eAAC,GAAD,CAAQG,OAAQH,EAAWgE,UAAU,SAClD9D,EAAMC,QACL,eAAC,GAAD,CACEE,MAAOH,EAAMG,MACbF,OAAQD,EAAMC,OACdC,QAASF,EAAME,QACfuE,QArEV,WACE2B,EAAShG,EAAS,CAAEH,QAAQ,QAuExB,eAAC,GAAD,IACA,eAAC,GAAD,eAAYgd,IACZ,sBAAKnZ,UAAU,0EAAf,SACE,sBAAKA,UAAU,oBAAf,SACE,gBAAC,IAAD,WACE,eAAC,IAAD,CAAOqZ,OAAK,EAACC,KAAK,UAAUC,UAAWrY,KACvC,eAAC,IAAD,CAAOmY,OAAK,EAACC,KAAK,eAAeC,UAAWhY,KAC5C,eAAC,IAAD,CAAO8X,OAAK,EAACC,KAAK,IAAIC,UAAWtI,KACjC,eAAC,IAAD,CAAOqI,KAAK,IAAIC,UAAWlY,kBClH1B,OAA0B,uCCoB1BmY,OAlBf,YAAwE,IAAD,IAAtDlO,aAAsD,MAA9C,GAA8C,EAA1CC,EAA0C,EAA1CA,SAAUhS,EAAgC,EAAhCA,GAAgC,IAA5BqF,YAA4B,MAArB,OAAqB,EAAboB,EAAa,EAAbA,UACxD,OACE,qCACE,wBACEsL,MAAOA,EACPC,SAAUA,EACVhS,GAAIA,EACJqF,KAAMA,EACNoB,UACE,wNAEAA,OCyFKyZ,OA9Ff,WACE,MAAgCvZ,mBAAS,IAAzC,oBAAOwZ,EAAP,KAAiBC,EAAjB,KACA,EAA0BzZ,mBAAS,IAAnC,oBAAO2B,EAAP,KAAcsP,EAAd,KACA,EAAgCjR,mBAAS,IAAzC,oBAAO0Z,EAAP,KAAiBC,EAAjB,KACA,EAA8B3Z,oBAAS,GAAvC,oBAAO4Z,EAAP,KAAgBC,EAAhB,KAEMhG,EAAUrB,KA6BhB,OA3BArS,qBAAU,WAEN0Z,KADEL,IAAYE,MAKf,CAACF,EAAUE,IAsBZ,uBAAK5Z,UAAU,qJAAf,UACE,sBAAKM,IAAK0Z,GAAgBxZ,IAAI,QAAQR,UAAU,oBAChD,wBACE+K,SAAU,SAACd,GAAD,OAxBhB,SAAeA,GACbA,EAAEe,iBAEF,IAAMzH,EAAU,CAAEmW,WAAUE,YAC5BzI,EAAS,IAET4C,EACGpB,MAAMpP,GACN0H,MAAK,SAAChH,GACLL,OAAOC,aAAaiO,QAAQ,QAAS7N,GACrCL,OAAO+S,SAASvB,KAAOtS,cAExBuO,OAAM,SAACxP,GAKNsP,EAHmB,kBAAVtP,EACHA,EACA,gEAQW8Q,CAAM1I,IACvBjK,UAAU,iEAFZ,UAIE,sBAAKM,IAAKC,GAAMC,IAAI,QAAQR,UAAU,2BACtC,qBAAIA,UAAU,sFAAd,8BAIC6B,GACC,uBAAM7B,UAAU,iEAAhB,gBACG6B,QADH,IACGA,IAAS,sCAGd,uBAAK7B,UAAU,iBAAf,UACE,wBAAOqM,QAAQ,WAAWrM,UAAU,6BAApC,uCAGA,eAAC,GAAD,CACEsL,MAAOoO,EACPnO,SAAU,SAACtB,GAAD,OAAO0P,EAAY1P,EAAEK,OAAOgB,QACtC/R,GAAG,WACHqF,KAAK,YAGT,uBAAKoB,UAAU,iBAAf,UACE,wBAAOqM,QAAQ,WAAWrM,UAAU,6BAApC,sBAGA,eAAC,GAAD,CACEsL,MAAOsO,EACPrO,SAAU,SAACtB,GAAD,OAAO4P,EAAY5P,EAAEK,OAAOgB,QACtC1M,KAAK,WACLrF,GAAG,gBAIP,eAAC,GAAD,CACEsH,UAAWiZ,EACX1d,QAAQ,QACR4D,UAAU,wBAEZ,uBAAKA,UAAU,cAAf,0BACgB,IACd,eAAC,IAAD,CACEoB,GAAG,YACHpB,UAAU,+CAFZ,mC,4BCgSKia,OA/Wf,WAAqB,IAAD,gBAClB,EAAkC/Z,oBAAS,GAA3C,oBAAOga,EAAP,KAAkBC,EAAlB,KACA,EAAgDja,oBAAS,GAAzD,oBAAOka,EAAP,KAAyBC,EAAzB,KACA,EAA0Bna,mBAAS,CACjC/D,QAAQ,EACRC,QAAS,GACTC,MAAO,iBAHT,oBAAOH,EAAP,KAAcI,EAAd,KAMMkG,EAAUC,cACVsR,EAAUrB,KAEV4H,EACJ,uNAGIC,EAASC,OAAaC,MAAM,CAChC5P,UAAW2P,OAAaE,SAAS,0BACjC7H,SAAU2H,OAAaE,SAAS,yBAChCC,YAAaH,OAEVE,SAAS,6BACTE,KAAK,WAAY,2BAA2B,SAACtP,GAE5C,OAAOA,EADK,IAAI+C,QAGpBnI,SAAUsU,OAEPE,SAAS,yBACTG,IAAI,EAAG,oCACPC,IAAI,GAAI,oCACRF,KACC,gBACA,gDACA,SAACtP,GACC,OAAOyP,GACLzP,EACA,mDAILsP,KACC,iBACA,6BACA,SAACtP,GAAD,OAAY8O,KAEhBY,MAAOR,OAEJE,SAAS,qBACTE,KAAK,aAAc,oBAAoB,SAACtP,GACvC,OAAOyP,GACLzP,EACA,uDAGNsO,SAAUY,OAEPE,SAAS,wBACTE,KACC,gBACA,qGACA,SAACtP,GACC,OAAOyP,GACLzP,EACA,iEAIR2P,gBAAiBT,OAEdE,SAAS,gCACTE,KACC,uBACA,iDACA,SAACK,GACC,OAAOA,IAAoBC,EAAMtB,cAMzC,EAQIuB,aAAQ,CACVC,SAAUC,aAAYd,GACtBe,cAAe,KATf1I,EADF,EACEA,SACA2I,EAFF,EAEEA,aACAC,EAHF,EAGEA,QACArK,EAJF,EAIEA,SACAsK,EALF,EAKEA,YACAC,EANF,EAMEA,MACapX,EAPf,EAOEqX,UAAarX,OAKT4W,EAAQU,aAAS,CACrBJ,YAqEF,OAlEAnb,qBAAU,WACR0T,EAAQjB,oBAAoBoI,EAAMhV,UAAU+E,MAAK,SAAChH,GAC5CA,EAAS4X,UACX1K,EACE,WACA,CACEvS,KAAM,WACNxD,QAAQ,aAAD,OAAe8f,EAAMhV,SAArB,uBAET,CAAE4V,aAAa,IAEjBzB,GAAoB,KAEpBoB,EAAY,YACZpB,GAAoB,SAGvB,CAACa,EAAMhV,WAEV7F,qBAAU,YACS,WAAO,IAAD,OAEnB,UAAA6a,EAAMrQ,iBAAN,eAAiBH,UAAjB,UACAwQ,EAAMrI,gBADN,aACA,EAAgBnI,UADhB,UAEAwQ,EAAMhV,gBAFN,aAEA,EAAgBwE,SAChBwQ,EAAMF,OACNE,EAAMa,QACNb,EAAMP,aACNO,EAAMtB,UACNsB,EAAMD,gBAGNd,GAAa,GAGfA,GAAa,GAEf5O,KACC,CAAC2P,IA6BF,uCACGhf,EAAMC,QACL,eAAC,GAAD,CACEE,MAAOH,EAAMG,MACbF,OAAQD,EAAMC,OACdC,QAASF,EAAME,QACfuE,QAAS,WACPrE,EAAS,CAAEH,QAAQ,IACnBqG,EAAQ/I,KAAK,aAInB,uBAAKuG,UAAU,yKAAf,UACE,sBAAKM,IAAK0Z,GAAgBxZ,IAAI,QAAQR,UAAU,oBAChD,wBACE+K,SAAUwQ,GAzCD,SAACnf,GAChB2X,EAAQnB,SAASxW,GAAS6O,MAAK,SAAChH,IAelC,SAAmB5H,EAAOD,GAMxBE,EALc,CACZH,QAAQ,EACRE,MAAOA,EACPD,QAASA,IAlBTiH,CACE,UACA,yEACuC,IACrC,eAAC,IAAD,CAAMrD,UAAU,2BAA2BoB,GAAG,SAA9C,oBAFF,SAQFsa,EAAM,UA8BF1b,UAAU,sCAFZ,UAIE,qBAAIA,UAAU,sFAAd,gCAGA,uBAAKA,UAAU,4DAAf,UACE,uBAAKA,UAAU,sCAAf,UACE,yBAAOqM,QAAQ,WAAWrM,UAAU,yBAApC,wBACa,uBAAMA,UAAU,eAAhB,kBAEb,kDACM4S,EAAS,cADf,IAEEhU,KAAK,OACLoB,UAAWsa,KAEb,sBAAKta,UAAU,uBAAf,mBACGsE,EAAOuG,iBADV,aACG,EAAkBzP,aAGvB,uBAAK4E,UAAU,mDAAf,UACE,yBAAOqM,QAAQ,WAAWrM,UAAU,yBAApC,uBACY,uBAAMA,UAAU,eAAhB,kBAEZ,kDACM4S,EAAS,aADf,IAEEhU,KAAK,OACLoB,UAAWsa,KAEb,sBAAKta,UAAU,uBAAf,mBACGsE,EAAOuO,gBADV,aACG,EAAiBzX,gBAIxB,uBAAK4E,UAAU,iBAAf,UACE,yBAAOqM,QAAQ,WAAWrM,UAAU,yBAApC,sBACW,uBAAMA,UAAU,eAAhB,kBAEX,kDACM4S,EAAS,aADf,IAEEhU,KAAK,OACLoB,UAAWsa,KAEb,sBAAKta,UAAU,uBAAf,mBACGsE,EAAO4B,gBADV,aACG,EAAiB9K,aAGtB,uBAAK4E,UAAU,iBAAf,UACE,yBAAOqM,QAAQ,QAAQrM,UAAU,yBAAjC,mBACQ,uBAAMA,UAAU,eAAhB,kBAER,kDAAW4S,EAAS,UAApB,IAA8BhU,KAAK,OAAOoB,UAAWsa,KACrD,sBAAKta,UAAU,uBAAf,mBAAuCsE,EAAO0W,aAA9C,aAAuC,EAAc5f,aAEvD,uBAAK4E,UAAU,2CAAf,UACE,uBAAKA,UAAU,4CAAf,UACE,yBAAOqM,QAAQ,SAASrM,UAAU,yBAAlC,oBACS,uBAAMA,UAAU,eAAhB,kBAET,uBAAKA,UAAU,0FAAf,UACE,yBACEA,UACE,6DAECkb,EAAMa,SAAW7U,GAAOC,KAAKvC,WAC1B,0BACA,IAENyH,QAAQ,OARV,mBAUG,wBAVH,UAaA,yBACErM,UACE,6DAECkb,EAAMa,SAAW7U,GAAOE,OAAOxC,WAC5B,0BACA,IAENyH,QAAQ,SARV,mBAUG,wBAVH,YAaA,yBACErM,UACE,6DAECkb,EAAMa,SAAW7U,GAAOG,MAAMzC,WAC3B,0BACA,IAENyH,QAAQ,QARV,mBAUG,wBAVH,WAaA,gDACEP,QAAM,GACF8G,EAAS,WAFf,IAGErZ,GAAG,OACHR,KAAK,SACL6F,KAAK,QACL0M,MAAOpE,GAAOC,QAEhB,gDACE2E,QAAM,GACF8G,EAAS,WAFf,IAGErZ,GAAG,SACHR,KAAK,SACL6F,KAAK,QACL0M,MAAOpE,GAAOE,UAEhB,gDACE0E,QAAM,GACF8G,EAAS,WAFf,IAGErZ,GAAG,QACHR,KAAK,SACL6F,KAAK,QACL0M,MAAOpE,GAAOG,YAGlB,sBAAKrH,UAAU,uBAAf,mBACGsE,EAAOyX,cADV,aACG,EAAe3gB,aAGpB,uBAAK4E,UAAU,+EAAf,UACE,yBAAOqM,QAAQ,WAAWrM,UAAU,wBAApC,2BACgB,uBAAMA,UAAU,eAAhB,kBAEhB,kDACM4S,EAAS,gBADf,IAEEhU,KAAK,OACLoB,UAAWsa,EAAc,aAE3B,sBAAKta,UAAU,uBAAf,mBACGsE,EAAOqW,mBADV,aACG,EAAoBvf,gBAI3B,uBAAK4E,UAAU,iBAAf,UACE,yBAAOqM,QAAQ,WAAWrM,UAAU,yBAApC,sBACW,uBAAMA,UAAU,eAAhB,kBAEX,gDACEpB,KAAK,YACDgU,EAAS,aAFf,IAGE5S,UAAWsa,KAEb,sBAAKta,UAAU,uBAAf,mBACGsE,EAAOsV,gBADV,aACG,EAAiBxe,aAGtB,uBAAK4E,UAAU,iBAAf,UACE,yBAAOqM,QAAQ,kBAAkBrM,UAAU,yBAA3C,8BACmB,uBAAMA,UAAU,eAAhB,kBAEnB,gDACEpB,KAAK,YACDgU,EAAS,oBAFf,IAGE5S,UAAWsa,KAEb,sBAAKta,UAAU,uBAAf,mBACGsE,EAAO2W,uBADV,aACG,EAAwB7f,aAG7B,eAAC,GAAD,CACEyF,UAAWqZ,EACX9d,QAAQ,UACR4D,UAAU,wBAEZ,uBAAKA,UAAU,cAAf,8BACoB,IAClB,eAAC,IAAD,CACEoB,GAAG,SACHpB,UAAU,+CAFZ,iCAeZ,SAAS+a,GAAWzP,EAAO0Q,GACzB,GAAI1Q,GAAS0Q,EAGX,OAFc,IAAIC,OAAOD,GACPpB,KAAKtP,G,0CClW3B,SAAS4Q,GAAT,GAA0D,IAAvBC,EAAsB,EAAjC5C,UAAyB6C,EAAQ,kBACnDC,IAAUzY,OAAOC,aAAaC,QAAQ,SAC1C,OACE,eAAC,IAAD,2BACMsY,GADN,IAEEE,OAAQ,SAACnD,GAAD,OACM,IAAZkD,EACE,eAACF,EAAD,eAAehD,IAEf,eAAC,IAAD,CACE/X,GAAI,CAAEqW,SAAU,SAAUte,MAAO,CAAEojB,KAAMpD,EAAMxC,iBAzB3D6F,IAASF,OACP,eAAC,IAAMG,WAAP,UACE,eAAC,IAAD,CAAU5c,MAAOA,GAAjB,SACE,eAAC,IAAD,CAAeuZ,SAAUtW,UAAzB,SACE,gBAAC,IAAD,WACE,eAAC,IAAD,CAAOuW,OAAK,EAACC,KAAK,SAASC,UAAWE,KACtC,eAAC,IAAD,CAAOJ,OAAK,EAACC,KAAK,YAAYC,UAAWU,KACzC,eAACiC,GAAD,CAAc5C,KAAK,IAAIC,UAAWL,cAK1C3O,SAASmS,eAAe,W","file":"static/js/main.0eef0212.chunk.js","sourcesContent":["import { combineReducers, createSlice } from \"@reduxjs/toolkit\";\r\n\r\nconst chats = createSlice({\r\n  name: \"chats\",\r\n  initialState: [],\r\n  reducers: {\r\n    addChat: (state, action) => {\r\n      var isExists = state.some((chat) => chat.id === action.payload.id);\r\n      if (!isExists) {\r\n        state.push(action.payload);\r\n      }\r\n    },\r\n    editChat: (state, action) => {\r\n      const updatedChat = action.payload;\r\n      const index = state.findIndex((chat) => {\r\n        return chat.id === updatedChat.id;\r\n      });\r\n      if (index >= 0) {\r\n        state[index].name = updatedChat.name;\r\n        state[index].participants = updatedChat.participants;\r\n      } else {\r\n        state.push(updatedChat);\r\n      }\r\n    },\r\n    editGroupAvatar: (state, action) => {\r\n      const updatedChatId = action.payload.chatId;\r\n      const index = state.findIndex((chat) => {\r\n        return chat.id === updatedChatId;\r\n      });\r\n      if (index >= 0) {\r\n        state[index].groupAvatarUrl = action.payload?.groupAvatarUrl;\r\n      }\r\n    },\r\n    addReadByUserName: (state, action) => {\r\n      const { chatId, readByUserName } = action.payload;\r\n      const index = state.findIndex((chat) => {\r\n        return chat.id === chatId;\r\n      });\r\n      if (index >= 0) {\r\n        if (!state[index].readByUserNames.includes(readByUserName)) {\r\n          state[index].readByUserNames.push(readByUserName);\r\n        }\r\n      }\r\n    },\r\n    appendMessageToChat: (state, action) => {\r\n      const chatToAppend = action.payload;\r\n      const messagesToAppend = chatToAppend?.messages;\r\n      const index = state.findIndex((chat) => {\r\n        return chat.id === chatToAppend.id;\r\n      });\r\n      if (index >= 0) {\r\n        state[index].totalRecords = chatToAppend.totalRecords;\r\n        state[index].limit = chatToAppend.limit;\r\n        state[index].page = chatToAppend.page;\r\n        state[index].pageCount = chatToAppend.pageCount;\r\n        if (chatToAppend.keyword) {\r\n          state[index].messages = messagesToAppend;\r\n        } else {\r\n          state[index].messages =\r\n            state[index].messages.concat(messagesToAppend);\r\n        }\r\n      }\r\n    },\r\n    refreshChats: (state, action) => {\r\n      state = action.payload ?? [];\r\n      return state;\r\n    },\r\n    addMessage: (state, action) => {\r\n      const newMessage = action.payload;\r\n      const index = state.findIndex((chat) => {\r\n        return chat.id === newMessage.chatId;\r\n      });\r\n      if (index >= 0) {\r\n        state[index].messages.push(newMessage?.message);\r\n        state[index].readByUserNames = [newMessage?.SenderUserName];\r\n      }\r\n    },\r\n    addNotification: (state, action) => {\r\n      const chatId = action.payload;\r\n      const index = state.findIndex((chat) => {\r\n        return chat.id === chatId;\r\n      });\r\n      if (index >= 0) {\r\n        state[index].numOfUnreadMessages += 1;\r\n      }\r\n    },\r\n    readChat: (state, action) => {\r\n      const chatId = action.payload;\r\n      const index = state.findIndex((chat) => {\r\n        return chat.id === chatId;\r\n      });\r\n      if (index >= 0) {\r\n        state[index].numOfUnreadMessages = 0;\r\n      }\r\n    },\r\n  },\r\n});\r\n\r\nconst selectedIds = createSlice({\r\n  name: \"selectedIds\",\r\n  initialState: [],\r\n  reducers: {\r\n    addSelectedId: (state, action) => {\r\n      if (!state.includes(action.payload)) {\r\n        if (state.length > 3) {\r\n          state.shift();\r\n          state.push(action.payload);\r\n          return state;\r\n        }\r\n      }\r\n    },\r\n  },\r\n});\r\n\r\nconst reducer = combineReducers({\r\n  chats: chats.reducer,\r\n  selectedIds: selectedIds.reducer,\r\n});\r\n\r\nexport const {\r\n  addChat,\r\n  editChat,\r\n  refreshChats,\r\n  addMessage,\r\n  appendMessageToChat,\r\n  editGroupAvatar,\r\n  readChat,\r\n  addNotification,\r\n  addReadByUserName,\r\n} = chats.actions;\r\nexport const { addSelectedId } = selectedIds.actions;\r\nexport default reducer;\r\n","import { combineReducers, createSlice } from \"@reduxjs/toolkit\";\r\n\r\nconst isLoading = createSlice({\r\n  name: \"isLoading\",\r\n  initialState: false,\r\n  reducers: {\r\n    setIsLoading: (state, action) => {\r\n      state = action.payload;\r\n      return state;\r\n    },\r\n  },\r\n});\r\n\r\nconst popup = createSlice({\r\n  name: \"popup\",\r\n  initialState: {\r\n    isOpen: false,\r\n    content: \"\",\r\n    title: \"Notification\",\r\n  },\r\n  reducers: {\r\n    setPopup: (state, action) => {\r\n      state = action.payload;\r\n      return state;\r\n    },\r\n  },\r\n});\r\n\r\nconst notifications = createSlice({\r\n  name: \"notifications\",\r\n  initialState: { items: [] },\r\n  reducers: {\r\n    addNotification: (state, action) => {\r\n      state?.items?.push(action.payload);\r\n    },\r\n    loadNotification: (state, action) => {\r\n      if (action.payload.page > state.page) {\r\n        const notification = action.payload;\r\n        state.totalRecords = notification.totalRecords;\r\n        state.limit = notification.limit;\r\n        state.page = notification.page;\r\n        state.pageCount = notification.pageCount;\r\n        state.items = state.items.concat(notification.items);\r\n      }\r\n    },\r\n    readAllNotification: (state, action) => {\r\n      state?.items?.filter((x) => !x.isRead)?.forEach((x) => (x.isRead = true));\r\n    },\r\n    readNotificationById: (state, action) => {\r\n      const id = action.payload;\r\n      const index = state.items?.findIndex((notification) => {\r\n        return notification.id === id;\r\n      });\r\n      if (index >= 0) {\r\n        state.items[index].isRead = true;\r\n      }\r\n    },\r\n    refreshNotification: (state, action) => {\r\n      state = action.payload;\r\n      return state;\r\n    },\r\n  },\r\n});\r\n\r\nconst reducer = combineReducers({\r\n  isLoading: isLoading.reducer,\r\n  popup: popup.reducer,\r\n  notifications: notifications.reducer,\r\n});\r\n\r\nexport const { setIsLoading } = isLoading.actions;\r\nexport const { setPopup } = popup.actions;\r\nexport const {\r\n  addNotification,\r\n  refreshNotification,\r\n  readAllNotification,\r\n  readNotificationById,\r\n  loadNotification,\r\n} = notifications.actions;\r\nexport default reducer;\r\n","import { combineReducers, createSlice } from \"@reduxjs/toolkit\";\r\n//import jwt from \"jwt-decode\";\r\n\r\nconst currentUser = createSlice({\r\n  name: \"currentUser\",\r\n  initialState: {},\r\n  reducers: {\r\n    setCurrentUser: (state, action) => {\r\n      state = action.payload;\r\n      return state;\r\n    },\r\n  },\r\n});\r\n\r\nconst onlineUserNameList = createSlice({\r\n  name: \"onlineUserNameList\",\r\n  initialState: [],\r\n  reducers: {\r\n    updateOnlineUserNameList: (state, action) => {\r\n      state = action.payload;\r\n      return state;\r\n    },\r\n  },\r\n});\r\n\r\nconst reducer = combineReducers({\r\n  currentUser: currentUser.reducer,\r\n  onlineUserNameList: onlineUserNameList.reducer,\r\n});\r\n\r\nexport const { setCurrentUser } = currentUser.actions;\r\nexport const { updateOnlineUserNameList } = onlineUserNameList.actions;\r\nexport default reducer;\r\n\r\n// function decodeCurrentUser() {\r\n//   var token = window.localStorage.getItem(\"token\");\r\n//   if (token) {\r\n//     const user = jwt(token);\r\n//     return user;\r\n//   }\r\n//   return false;\r\n// }\r\n","import { combineReducers, createSlice } from \"@reduxjs/toolkit\";\r\n\r\nconst newPostTotal = createSlice({\r\n  name: \"newPostTotal\",\r\n  initialState: 0,\r\n  reducers: {\r\n    addNewPost: (state) => {\r\n      return state + 1;\r\n    },\r\n    resetNewPost: () => {\r\n      return 0;\r\n    },\r\n  },\r\n});\r\nconst posts = createSlice({\r\n  name: \"posts\",\r\n  initialState: { items: [] },\r\n  reducers: {\r\n    refreshPost: (state, action) => {\r\n      state = action.payload;\r\n      return state;\r\n    },\r\n    addPost: (state, action) => {\r\n      const newPost = action.payload;\r\n      const isExists = state.items.some((post) => post.id === newPost.id);\r\n      if (!isExists) {\r\n        state?.items?.push(newPost);\r\n      }\r\n    },\r\n    updatePost: (state, action) => {\r\n      const updatedPost = action.payload;\r\n\r\n      const index = state?.items?.findIndex((post) => {\r\n        return post.id === updatedPost.id;\r\n      });\r\n      if (index >= 0) {\r\n        state.items[index].content = updatedPost.content;\r\n        state.items[index].privacy = updatedPost.privacy;\r\n      } else {\r\n        state.push(updatedPost);\r\n      }\r\n    },\r\n    deletePost: (state, action) => {\r\n      const index = state?.items?.findIndex((post) => {\r\n        return post.id === action.payload;\r\n      });\r\n      if (index >= 0) {\r\n        state.items.splice(index, 1);\r\n      }\r\n    },\r\n    loadPost: (state, action) => {\r\n      if (action.payload.page > state.page) {\r\n        const posts = action.payload;\r\n        state.totalRecords = posts.totalRecords;\r\n        state.limit = posts.limit;\r\n        state.page = posts.page;\r\n        state.pageCount = posts.pageCount;\r\n        state.items = state.items.concat(posts.items);\r\n      }\r\n    },\r\n    addReaction: (state, action) => {\r\n      const postId = action.payload.postId;\r\n      const reaction = action.payload.reaction;\r\n      if (postId && reaction) {\r\n        const index = state?.items?.findIndex((post) => {\r\n          return post.id === postId;\r\n        });\r\n        if (index >= 0) {\r\n          state.items[index].reactions.push(reaction);\r\n        }\r\n      }\r\n    },\r\n    updateReaction: (state, action) => {\r\n      const postId = action.payload.postId;\r\n      const updatedReaction = action.payload.reaction;\r\n\r\n      if (postId && updatedReaction) {\r\n        const postIndex = state?.items?.findIndex((post) => {\r\n          return post.id === postId;\r\n        });\r\n        if (postIndex >= 0) {\r\n          const reactionIndex = state?.items[postIndex].reactions?.findIndex(\r\n            (reaction) => {\r\n              return reaction.id === updatedReaction.id;\r\n            },\r\n          );\r\n          if (reactionIndex >= 0) {\r\n            state.items[postIndex].reactions[reactionIndex].type =\r\n              updatedReaction.type;\r\n          }\r\n        }\r\n      }\r\n    },\r\n    deleteReaction: (state, action) => {\r\n      const postId = action.payload.postId;\r\n      const reactionId = action.payload.reactionId;\r\n\r\n      if (postId && reactionId) {\r\n        const postIndex = state?.items?.findIndex((post) => {\r\n          return post.id === postId;\r\n        });\r\n        if (postIndex >= 0) {\r\n          const reactionIndex = state?.items[postIndex].reactions?.findIndex(\r\n            (reaction) => {\r\n              return reaction.id === reactionId;\r\n            },\r\n          );\r\n          if (reactionIndex >= 0) {\r\n            state.items[postIndex].reactions.splice(reactionIndex, 1);\r\n            return state;\r\n          }\r\n        }\r\n      }\r\n    },\r\n    addComment: (state, action) => {\r\n      const postId = action.payload.postId;\r\n      const comment = action.payload.comment;\r\n      if (postId && comment) {\r\n        const index = state?.items?.findIndex((post) => {\r\n          return post.id === postId;\r\n        });\r\n        if (index >= 0) {\r\n          state.items[index].comments.push(comment);\r\n        }\r\n      }\r\n    },\r\n    updateComment: (state, action) => {\r\n      const postId = action.payload.postId;\r\n      const updatedComment = action.payload.comment;\r\n\r\n      if (postId && updatedComment) {\r\n        const postIndex = state?.items?.findIndex((post) => {\r\n          return post.id === postId;\r\n        });\r\n        if (postIndex >= 0) {\r\n          const commentIndex = state?.items[postIndex].comments?.findIndex(\r\n            (comment) => {\r\n              return comment.id === updatedComment.id;\r\n            },\r\n          );\r\n          if (commentIndex >= 0) {\r\n            state.items[postIndex].comments[commentIndex].content =\r\n              updatedComment.content;\r\n          }\r\n        }\r\n      }\r\n    },\r\n    deleteComment: (state, action) => {\r\n      const postId = action.payload.postId;\r\n      const commentId = action.payload.commentId;\r\n\r\n      if (postId && commentId) {\r\n        const postIndex = state?.items?.findIndex((post) => {\r\n          return post.id === postId;\r\n        });\r\n        if (postIndex >= 0) {\r\n          const commentIndex = state?.items[postIndex].comments?.findIndex(\r\n            (comment) => {\r\n              return comment.id === commentId;\r\n            },\r\n          );\r\n          if (commentIndex >= 0) {\r\n            state.items[postIndex].comments.splice(commentIndex, 1);\r\n            return state;\r\n          }\r\n        }\r\n      }\r\n    },\r\n  },\r\n});\r\n\r\nconst reducer = combineReducers({\r\n  posts: posts.reducer,\r\n  newPostTotal: newPostTotal.reducer,\r\n});\r\n\r\nexport const {\r\n  refreshPost,\r\n  addPost,\r\n  updatePost,\r\n  deletePost,\r\n  addReaction,\r\n  updateReaction,\r\n  deleteReaction,\r\n  addComment,\r\n  updateComment,\r\n  deleteComment,\r\n  loadPost,\r\n} = posts.actions;\r\nexport const { addNewPost, resetNewPost } = newPostTotal.actions;\r\n\r\nexport default reducer;\r\n","import { configureStore } from \"@reduxjs/toolkit\";\r\nimport chatReducer from \"app/chatSlice\";\r\nimport appReducer from \"app/appSlice\";\r\nimport userReducer from \"app/userSlice\";\r\nimport postSlice from \"app/postSlice\";\r\n\r\nconst rootReducer = {\r\n  chats: chatReducer,\r\n  app: appReducer,\r\n  users: userReducer,\r\n  posts: postSlice,\r\n};\r\n\r\nconst store = configureStore({\r\n  reducer: rootReducer,\r\n});\r\n\r\nexport default store;\r\n","export default __webpack_public_path__ + \"static/media/logo-shadow.3faacd46.png\";","import { useEffect, useState } from \"react\";\r\nimport Logo from \"logo-shadow.png\";\r\n\r\nconst Loader = ({ className, isOpen = true }) => {\r\n  let circleCommonClasses =\r\n    \"h-3 w-3 bg-gradient-to-br from-green-300 to-green-600 shadow-md rounded-full\";\r\n  const [isEnding, setIsEnding] = useState(false);\r\n  useEffect(() => {\r\n    return () => {\r\n      setIsEnding(true);\r\n    };\r\n  }, []);\r\n  return (\r\n    isOpen && (\r\n      <>\r\n        <div\r\n          className={\r\n            \"z-50 animate-fadeIn flex flex-col h-screen w-screen justify-center items-center fixed transition-base bg-white dark:bg-dark-secondary\" +\r\n            (isEnding ? \" hidden\" : \"\") +\r\n            (\" \" + className ?? \"\")\r\n          }\r\n        >\r\n          <img src={Logo} className=\"w-20 h-20 mb-10\" alt=\"logo\" />\r\n          <div className=\"flex-center transition-base\">\r\n            <div className={`${circleCommonClasses} mr-3 animate-bounce`}></div>\r\n            <div\r\n              className={`${circleCommonClasses} mr-3 animate-bounce200`}\r\n            ></div>\r\n            <div className={`${circleCommonClasses} animate-bounce400`}></div>\r\n          </div>\r\n        </div>\r\n      </>\r\n    )\r\n  );\r\n};\r\n\r\nexport default Loader;\r\n","import React from \"react\";\r\nimport PropTypes from \"prop-types\";\r\n\r\nButton.propTypes = {\r\n  content: PropTypes.string,\r\n  className: PropTypes.string,\r\n};\r\n\r\nfunction Button({\r\n  outline = false,\r\n  content,\r\n  className,\r\n  onClick,\r\n  onBlur,\r\n  disabled,\r\n  children,\r\n}) {\r\n  return (\r\n    <>\r\n      <button\r\n        disabled={disabled}\r\n        onClick={onClick}\r\n        onBlur={onBlur}\r\n        className={\r\n          \"px-4 py-2 rounded-lg transition-base text-sm md:text-base duration-200 disabled:opacity-50 outline-none z-0 select-none min-w-70 font-semibold\" +\r\n          \" \" +\r\n          (outline\r\n            ? \"ring-inset ring-1 ring-green-500 bg-white dark:bg-transparent dark:hover:bg-green-500 text-green-500 hover:text-white hover:bg-green-400 active:bg-green-500\"\r\n            : \"bg-gradient-to-br from-green-400 to-green-600 text-white active:from-green-500 active:to-green-600  \") +\r\n          \" \" +\r\n          (className ?? \"\") +\r\n          \" \" +\r\n          (!disabled ? \"active:scale-95 active:transform\" : \"cursor-default\")\r\n        }\r\n      >\r\n        {content ? content : children}\r\n      </button>\r\n    </>\r\n  );\r\n}\r\n\r\nexport default Button;\r\n","import Button from \"components/Button\";\r\nimport React from \"react\";\r\nimport PropTypes from \"prop-types\";\r\n\r\nPopup.propTypes = {\r\n  title: PropTypes.string,\r\n  isOpen: PropTypes.bool,\r\n  onClick: PropTypes.func,\r\n};\r\n\r\nfunction Popup({\r\n  title = \"Notification\",\r\n  isOpen,\r\n  content = \"Oops! Something went wrong!\",\r\n  onClick,\r\n}) {\r\n  return (\r\n    isOpen && (\r\n      <div className=\"px-4 flex-center overlay\" style={{ margin: 0 }}>\r\n        <div className=\"animate-swipeDown bg-white dark:bg-dark-secondary py-8 px-8 w-full md:w-2/3 lg:w-1/2 flex flex-col justify-between items-start rounded-xl space-y-6 shadow-2xl border border-gray-300 dark:border-dark-third\">\r\n          <h3 className=\"font-semibold text-2xl break-words dark:text-dark-txt\">\r\n            {title}\r\n          </h3>\r\n          <span className=\"break-words dark:text-dark-txt\">{content}</span>\r\n          <div className=\"w-full flex justify-end\">\r\n            <Button content=\"Close\" onClick={onClick} />\r\n          </div>\r\n        </div>\r\n      </div>\r\n    )\r\n  );\r\n}\r\n\r\nexport default Popup;\r\n","export default __webpack_public_path__ + \"static/media/forbid.e276990e.svg\";","import React from \"react\";\r\nimport ForbidImg from \"assets/img/forbid.svg\";\r\nimport Button from \"components/Button\";\r\nimport { Link } from \"react-router-dom\";\r\n\r\nfunction Forbid({ message }) {\r\n  return (\r\n    <div className=\"fixed inset-0 h-screen animate-fadeIn w-screen flex flex-col justify-center items-center space-y-8 px-2\">\r\n      <img\r\n        className=\"md:max-w-xl max-w-xs object-cover\"\r\n        src={ForbidImg}\r\n        alt=\"Error\"\r\n      />\r\n      <span className=\"font-bold text-xl md:text-2xl text-center\">\r\n        {message ?? \"You don't have permission to access this resources\"}\r\n      </span>\r\n      <Link to=\"/\">\r\n        <Button content=\"Return home page\" />\r\n      </Link>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Forbid;\r\n","export default __webpack_public_path__ + \"static/media/not-found.efbefd9e.svg\";","import React from \"react\";\r\nimport NotFoundImg from \"assets/img/not-found.svg\";\r\nimport Button from \"components/Button\";\r\nimport { Link } from \"react-router-dom\";\r\n\r\nfunction NotFound({ message }) {\r\n  return (\r\n    <div className=\"fixed inset-0 h-screen animate-fadeIn w-screen flex flex-col justify-center items-center space-y-8 px-2\">\r\n      <img\r\n        className=\"md:max-w-xl max-w-xs object-cover\"\r\n        src={NotFoundImg}\r\n        alt=\"Error\"\r\n      />\r\n      <span className=\" font-bold text-xl md:text-3xl text-center\">\r\n        {message ?? \"Not found resources\"}\r\n      </span>\r\n      <Link to=\"/\">\r\n        <Button content=\"Return home page\" />\r\n      </Link>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default NotFound;\r\n","export default __webpack_public_path__ + \"static/media/server-error.0bee07d2.svg\";","import React from \"react\";\r\nimport ErrorImg from \"assets/img/server-error.svg\";\r\nimport Button from \"components/Button\";\r\nimport { Link } from \"react-router-dom\";\r\n\r\nfunction ServerError({ message }) {\r\n  return (\r\n    <div className=\"z-10 fixed inset-0 h-screen animate-fadeIn w-screen flex flex-col justify-center items-center space-y-8 px-2\">\r\n      <img\r\n        className=\"md:max-w-xl max-w-xs object-cover\"\r\n        src={ErrorImg}\r\n        alt=\"Error\"\r\n      />\r\n      <span className=\"font-bold text-xl md:text-2xl text-center\">\r\n        {message ?? \"Oops! Something went wrong!\"}\r\n      </span>\r\n      <Link to=\"/\">\r\n        <Button content=\"Return home page\" />\r\n      </Link>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default ServerError;\r\n","export default __webpack_public_path__ + \"static/media/spinner.5952382b.svg\";","import React from \"react\";\r\nimport Spinner from \"assets/icons/spinner.svg\";\r\n\r\nfunction LoadingSpinner() {\r\n  return (\r\n    <>\r\n      <img src={Spinner} alt=\"spinner\" className=\"animate-spin w-7 h-7\" />\r\n    </>\r\n  );\r\n}\r\n\r\nexport default LoadingSpinner;\r\n","import LoadingSpinner from \"components/LoadingSpinner\";\r\nimport React from \"react\";\r\n\r\nfunction Pagination({\r\n  isHasMore,\r\n  isLoading,\r\n  error,\r\n  onClick,\r\n  loadMoreContent = \"Load more...\",\r\n  loadMoreClassName = \"\",\r\n  className = \"\",\r\n}) {\r\n  return (\r\n    <div className={className}>\r\n      {isHasMore && !isLoading && (\r\n        <div className=\"flex\">\r\n          <button\r\n            className={\r\n              \"mx-auto px-4 bg-gray-100 py-2 rounded-lg transform active:scale-95 hover:bg-gray-200 dark:hover:bg-dark-hover dark:bg-dark-third dark:text-gray-300 text-xs md:text-sm transition-all duration-200\" +\r\n              \" \" +\r\n              loadMoreClassName\r\n            }\r\n            onClick={onClick}\r\n          >\r\n            {loadMoreContent}\r\n          </button>\r\n        </div>\r\n      )}\r\n      {isLoading && (\r\n        <div className=\"flex justify-center mt-2\">\r\n          <LoadingSpinner />\r\n        </div>\r\n      )}\r\n      {error && <div className=\"text-red-500 text-center \">{error}</div>}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Pagination;\r\n","import React from \"react\";\r\nimport PropTypes from \"prop-types\";\r\n\r\nSideBar.propTypes = {};\r\n\r\nfunction SideBar({ className }) {\r\n  return (\r\n    <>\r\n      <div className={className}>Side bar</div>\r\n    </>\r\n  );\r\n}\r\n\r\nexport default SideBar;\r\n","export const MAX_IMAGE_SIZE = 1 * 1024 * 1024;\r\n\r\nexport const DefaultLimit = {\r\n  NOTIFICATION: 50,\r\n  POST: 50,\r\n};\r\n\r\nexport const DefaultName = {\r\n  NO_NAME_GROUP: \"No name\",\r\n  NO_NAME_USER: \"Unknown\",\r\n};\r\n\r\nexport const ChatClient = {\r\n  RECEIVE_MESSAGE: \"ReceiveMessage\",\r\n  RECEIVE_CHAT: \"ReceiveChat\",\r\n  RECEIVE_UPDATED_CHAT: \"ReceiveUpdatedChat\",\r\n  RECEIVE_UPDATED_GROUP_AVATAR: \"ReceiveUpdatedGroupAvatar\",\r\n  RECEIVE_ADD_READ_BY_USERNAME: \"ReceiveAddReadByUserName\",\r\n  RECEIVE_UPDATED_ONLINE_USERNAME_LIST: \"ReceiveUpdatedOnlineUserNameList\",\r\n};\r\n\r\nexport const AppClient = {\r\n  RECEIVE_POST: \"ReceivePost\",\r\n  RECEIVE_UPDATED_POST: \"ReceiveUpdatedPost\",\r\n  DELETE_POST: \"DeletePost\",\r\n  RECEIVE_COMMENT: \"ReceiveComment\",\r\n  RECEIVE_UPDATED_COMMENT: \"ReceiveUpdatedComment\",\r\n  DELETE_COMMENT: \"DeleteComment\",\r\n  RECEIVE_REACTION: \"ReceiveReaction\",\r\n  RECEIVE_UPDATED_REACTION: \"ReceiveUpdatedReaction\",\r\n  DELETE_REACTION: \"DeleteReaction\",\r\n  RECEIVE_NOTIFICATION: \"ReceiveNotification\",\r\n};\r\n","import { setIsLoading, setPopup } from \"app/appSlice\";\r\nimport axios from \"axios\";\r\nimport queryString from \"query-string\";\r\nimport { useDispatch } from \"react-redux\";\r\nimport { useHistory } from \"react-router-dom\";\r\n\r\nexport default function useApi() {\r\n  const dispatch = useDispatch();\r\n  const history = useHistory();\r\n\r\n  const Api = axios.create({\r\n    baseURL: process.env.REACT_APP_API_URL,\r\n    timeout: 300000,\r\n    headers: {\r\n      \"Content-Type\": \"application/json\",\r\n    },\r\n    paramsSerializer: (params) => queryString.stringify(params),\r\n  });\r\n\r\n  Api.interceptors.request.use(async (config) => {\r\n    var token = window.localStorage.getItem(\"token\");\r\n\r\n    var newConfig = config;\r\n    if (token) {\r\n      newConfig = {\r\n        ...config,\r\n        headers: { Authorization: `Bearer ${token}` },\r\n      };\r\n    }\r\n    return newConfig;\r\n  });\r\n  Api.interceptors.response.use(\r\n    (response) => {\r\n      dispatch(setIsLoading(false));\r\n\r\n      if (response && response.data) {\r\n        return response.data;\r\n      }\r\n      return response;\r\n    },\r\n    (error) => {\r\n      dispatch(setIsLoading(false));\r\n      var message =\r\n        typeof error.response?.data === \"string\"\r\n          ? error.response?.data\r\n          : \"Oops, something went wrong! Please contact administrator.\";\r\n\r\n      if (error.response) {\r\n        var popupTitle = \"Notification\";\r\n        switch (error.response.status) {\r\n          case 401:\r\n            popupTitle = \"Login required\";\r\n            window.localStorage.removeItem(\"token\");\r\n            history?.push(\"/login\");\r\n            break;\r\n          case 403:\r\n            popupTitle = \"Forbidden\";\r\n            history?.push(\"/ForBid\");\r\n            break;\r\n          case 500:\r\n            popupTitle = \"Server error\";\r\n            history?.push(\"/ServerError\");\r\n            break;\r\n          default:\r\n            // for model binding error\r\n            message = error.response?.data?.errors\r\n              ? objToString(error.response?.data?.errors)\r\n              : message;\r\n\r\n            if (!message.toLowerCase().includes(\"username or password\")) {\r\n              openPopup(popupTitle, message);\r\n            }\r\n            return Promise.reject(error.response?.data);\r\n        }\r\n      }\r\n      if (!message.toLowerCase().includes(\"username or password\")) {\r\n        openPopup(popupTitle, message);\r\n      }\r\n      return Promise.reject(error?.response?.data);\r\n    },\r\n  );\r\n\r\n  function openPopup(title, content) {\r\n    const popup = {\r\n      isOpen: true,\r\n      title: title,\r\n      content: content,\r\n    };\r\n    dispatch(setPopup(popup));\r\n  }\r\n\r\n  return Api;\r\n}\r\n\r\n// utils function for model binding convert\r\nfunction objToString(obj) {\r\n  let str = \"\";\r\n  for (const val of Object.values(obj)) {\r\n    str += `${val.toString()}, `;\r\n  }\r\n  str = str.substring(0, str.length - 2);\r\n  return str;\r\n}\r\n","import { setIsLoading } from \"app/appSlice.js\";\r\nimport { useDispatch } from \"react-redux\";\r\nimport { DefaultLimit } from \"utils/Constants.js\";\r\nimport useApi from \"./useApi.js\";\r\n\r\nconst baseApiUrl = \"/posts\";\r\n\r\nexport default function usePostApi() {\r\n  const Api = useApi();\r\n  const dispatch = useDispatch();\r\n\r\n  const postApi = {\r\n    getAll: (params) => {\r\n      dispatch(setIsLoading(true));\r\n      if (!params?.limit) {\r\n        params = { ...params, limit: DefaultLimit.POST };\r\n      }\r\n      const url = `${baseApiUrl}`;\r\n      return Api.get(url, { params });\r\n    },\r\n    getById: (id) => {\r\n      dispatch(setIsLoading(true));\r\n      const url = `${baseApiUrl}/${id}`;\r\n      return Api.get(url);\r\n    },\r\n    addPost: (request) => {\r\n      dispatch(setIsLoading(true));\r\n      const url = `${baseApiUrl}`;\r\n      return Api.post(url, request);\r\n    },\r\n    updatePost: (postId, request) => {\r\n      dispatch(setIsLoading(true));\r\n      const url = `${baseApiUrl}/${postId}`;\r\n      return Api.put(url, request);\r\n    },\r\n    deletePost: (postId) => {\r\n      dispatch(setIsLoading(true));\r\n      const url = `${baseApiUrl}/${postId}`;\r\n      return Api.delete(url);\r\n    },\r\n    addPhoto: (postId, request) => {\r\n      dispatch(setIsLoading(true));\r\n      const url = `${baseApiUrl}/${postId}/photos`;\r\n      Api.interceptors.request.use(async (config) => {\r\n        var token = window.localStorage.getItem(\"token\");\r\n        var newConfig = {};\r\n        if (token) {\r\n          newConfig = {\r\n            ...config,\r\n            headers: {\r\n              \"content-type\": \"multipart/form-data\",\r\n              Authorization: `Bearer ${token}`,\r\n            },\r\n          };\r\n        }\r\n        return newConfig;\r\n      });\r\n      return Api.post(url, request);\r\n    },\r\n    deletePhoto: (postId, photoId) => {\r\n      dispatch(setIsLoading(true));\r\n      const url = `${baseApiUrl}/${postId}/photos/${photoId}`;\r\n      return Api.delete(url);\r\n    },\r\n    addReaction: (postId, request) => {\r\n      const url = `${baseApiUrl}/${postId}/reactions`;\r\n      return Api.post(url, request);\r\n    },\r\n    updateReaction: (postId, request) => {\r\n      const url = `${baseApiUrl}/${postId}/reactions`;\r\n      return Api.put(url, request);\r\n    },\r\n    deleteReaction: (postId) => {\r\n      const url = `${baseApiUrl}/${postId}/reactions`;\r\n      return Api.delete(url);\r\n    },\r\n    addComment: (postId, request) => {\r\n      const url = `${baseApiUrl}/${postId}/comments`;\r\n      return Api.post(url, request);\r\n    },\r\n    updateComment: (postId, commentId, request) => {\r\n      const url = `${baseApiUrl}/${postId}/comments/${commentId}`;\r\n      return Api.put(url, request);\r\n    },\r\n    deleteComment: (postId, commentId) => {\r\n      const url = `${baseApiUrl}/${postId}/comments/${commentId}`;\r\n      return Api.delete(url);\r\n    },\r\n  };\r\n  return postApi;\r\n}\r\n","export default __webpack_public_path__ + \"static/media/default-avatar.ae67bd1e.jpg\";","import DefaultAvatar from \"assets/img/default-avatar.jpg\";\r\nimport PropTypes from \"prop-types\";\r\nimport React from \"react\";\r\nimport { useSelector } from \"react-redux\";\r\n\r\nImageCircle.propTypes = {\r\n  src: PropTypes.string,\r\n  className: PropTypes.string,\r\n  alt: PropTypes.string,\r\n  size: PropTypes.string,\r\n};\r\n\r\nfunction ImageCircle({\r\n  src = DefaultAvatar,\r\n  className = \"\",\r\n  alt = \"Avatar\",\r\n  size = \"md\",\r\n  userName = \"\",\r\n  participants,\r\n}) {\r\n  const onlineUserNameList = useSelector(\r\n    (state) => state.users.onlineUserNameList,\r\n  );\r\n  const currentUser = useSelector((state) => state.users.currentUser);\r\n\r\n  const isCurrentUser = userName === currentUser.userName;\r\n\r\n  var isOnline = false;\r\n  if (!isCurrentUser) {\r\n    if (userName) {\r\n      isOnline = onlineUserNameList.includes(userName);\r\n    } else if (participants) {\r\n      isOnline = participants\r\n        .filter((x) => x.userName !== currentUser.userName)\r\n        .map((x) => x)\r\n        .some((x) => onlineUserNameList.includes(x.userName));\r\n    }\r\n  }\r\n\r\n  var onlineSize;\r\n  switch (size) {\r\n    case \"xs\":\r\n      onlineSize = \"w-2 h-2\";\r\n      break;\r\n    case \"sm\":\r\n      onlineSize = \"md:w-3 md:h-3 w-2 h-2 md:border-2 border\";\r\n      break;\r\n    case \"lg\":\r\n      onlineSize = \"border-2 w-4 h-4\";\r\n      break;\r\n    case \"xl\":\r\n      onlineSize = \"border-2 w-4 h-4\";\r\n      break;\r\n    case \"full\":\r\n      onlineSize = \"border-2 w-4 h-4\";\r\n      break;\r\n    default:\r\n      onlineSize = \"border-2 md:w-4 md:h-4 h-3 w-3\";\r\n  }\r\n\r\n  var avatarSize;\r\n  switch (size) {\r\n    case \"xs\":\r\n      avatarSize = \"h-5 w-5 md:h-6 md:w-6\";\r\n      break;\r\n    case \"sm\":\r\n      avatarSize = \"h-6 w-6 md:h-8 md:w-8\";\r\n      break;\r\n    case \"lg\":\r\n      avatarSize = \"h-14 w-14 md:h-16 md:w-16\";\r\n      break;\r\n    case \"xl\":\r\n      avatarSize = \"h-20 w-20 md:h-24 md:w-24\";\r\n      break;\r\n    case \"full\":\r\n      avatarSize = \"h-full w-full\";\r\n      break;\r\n    default:\r\n      avatarSize = \"h-10 w-10 md:h-12 md:w-12\";\r\n  }\r\n  return (\r\n    <div className=\"relative flex-shrink-0\">\r\n      <img\r\n        className={\r\n          avatarSize +\r\n            \" \" +\r\n            \"select-none bg-white rounded-full object-cover flex-shrink-0\" +\r\n            \" \" +\r\n            className ?? \"\"\r\n        }\r\n        src={!src || src === \"\" ? DefaultAvatar : src}\r\n        alt={alt}\r\n      />\r\n      {(isCurrentUser || isOnline) && (\r\n        <span\r\n          className={\r\n            \"absolute bg-green-500 dark:bg-green-400 bottom-0 right-0 rounded-full border-white dark:border-black\" +\r\n            \" \" +\r\n            onlineSize\r\n          }\r\n        ></span>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default React.memo(ImageCircle);\r\n","export default __webpack_public_path__ + \"static/media/image-icon.c8ad9f46.svg\";","import React from \"react\";\r\nimport PropTypes from \"prop-types\";\r\n\r\nClickableIcon.propTypes = {\r\n  className: PropTypes.string,\r\n  alt: PropTypes.string,\r\n};\r\n\r\nfunction ClickableIcon({\r\n  className,\r\n  colorClass,\r\n  icon,\r\n  iconClass,\r\n  colorIconClass,\r\n  alt,\r\n  onClick,\r\n  onBlur,\r\n  secondMode,\r\n  reverse,\r\n}) {\r\n  var color = secondMode\r\n    ? \"hover:bg-gray-100 active:bg-gray-200 dark:hover:bg-dark-third dark:border-dark-third\"\r\n    : \"bg-gray-100 hover:bg-gray-200 active:bg-gray-300 dark:bg-dark-third dark:hover:bg-dark-hover dark:border-dark-third dark:active:bg-dark-third\";\r\n  color = reverse\r\n    ? \"dark:bg-gray-100 dark:hover:bg-gray-200 dark:active:bg-gray-300 bg-dark-third hover:bg-dark-hover border-dark-third active:bg-dark-third\"\r\n    : color;\r\n\r\n  colorClass = !colorClass || colorClass === \"\" ? color : colorClass;\r\n\r\n  colorIconClass =\r\n    !colorIconClass || colorIconClass === \"\"\r\n      ? \"text-black dark:text-dark-txt\"\r\n      : colorIconClass;\r\n\r\n  colorIconClass = reverse ? \"dark:text-black text-white\" : colorIconClass;\r\n  return (\r\n    <>\r\n      <div\r\n        onBlur={onBlur}\r\n        onClick={onClick}\r\n        className={\r\n          \"p-1 flex items-center justify-center rounded-full transition-base cursor-pointer active:scale-90 active:transform select-none flex-shrink-0 \" +\r\n          \" \" +\r\n          colorClass +\r\n          \" \" +\r\n          (className ?? \"\")\r\n        }\r\n      >\r\n        {icon ? (\r\n          <img\r\n            alt={alt ?? \"Clickable Icon\"}\r\n            src={icon}\r\n            onClick={onClick}\r\n            className=\"w-full align-middle\"\r\n          />\r\n        ) : (\r\n          <i\r\n            className={\r\n              \"text-center align-middle items text-xl w-7 h-7 text-center-middle \" +\r\n              \" \" +\r\n              colorIconClass +\r\n              \" \" +\r\n              iconClass\r\n            }\r\n          ></i>\r\n        )}\r\n      </div>\r\n    </>\r\n  );\r\n}\r\n\r\nexport default ClickableIcon;\r\n","export default __webpack_public_path__ + \"static/media/angry.5d2c62b0.svg\";","export default __webpack_public_path__ + \"static/media/care.d36c2862.svg\";","export default __webpack_public_path__ + \"static/media/haha.e568dfbb.svg\";","export default __webpack_public_path__ + \"static/media/like.3708582e.svg\";","export default __webpack_public_path__ + \"static/media/love.12a18842.svg\";","export default __webpack_public_path__ + \"static/media/sad.c7d5223e.svg\";","export default __webpack_public_path__ + \"static/media/wow.df119310.svg\";","import AngryIcon from \"assets/icons/reactions/angry.svg\";\r\nimport CareIcon from \"assets/icons/reactions/care.svg\";\r\nimport HahaIcon from \"assets/icons/reactions/haha.svg\";\r\nimport LikeIcon from \"assets/icons/reactions/like.svg\";\r\nimport LoveIcon from \"assets/icons/reactions/love.svg\";\r\nimport SadIcon from \"assets/icons/reactions/sad.svg\";\r\nimport WowIcon from \"assets/icons/reactions/wow.svg\";\r\n\r\nexport const ChatType = {\r\n  PRIVATE: 1,\r\n  GROUP: 2,\r\n};\r\n\r\nexport const Gender = {\r\n  MALE: 0,\r\n  FEMALE: 1,\r\n  OTHER: 2,\r\n};\r\n\r\nexport const NotificationType = {\r\n  COMMENT: 0,\r\n  REACTION: 1,\r\n  FRIEND_REQUEST: 2,\r\n  ACCEPTED_FRIEND_REQUEST: 3,\r\n  FOLLOW: 4,\r\n};\r\n\r\nexport const PrivacyType = {\r\n  PUBLIC: 0,\r\n  FRIEND: 2,\r\n  PRIVATE: 1,\r\n};\r\nexport const PrivacyName = {\r\n  [PrivacyType.PUBLIC]: \"Public\",\r\n  [PrivacyType.FRIEND]: \"Friend\",\r\n  [PrivacyType.PRIVATE]: \"Private\",\r\n};\r\nexport const PrivacyIcon = {\r\n  [PrivacyType.PUBLIC]: \"fas fa-globe-asia\",\r\n  [PrivacyType.FRIEND]: \"fas fa-user-friends\",\r\n  [PrivacyType.PRIVATE]: \"bx bxs-lock-alt\",\r\n};\r\nexport const ReactionType = {\r\n  LIKE: 0,\r\n  LOVE: 1,\r\n  CARE: 2,\r\n  WOW: 3,\r\n  HAHA: 4,\r\n  SAD: 5,\r\n  ANGRY: 6,\r\n};\r\nexport const ReactionName = {\r\n  [ReactionType.LIKE]: \"Like\",\r\n  [ReactionType.LOVE]: \"Love\",\r\n  [ReactionType.CARE]: \"Care\",\r\n  [ReactionType.HAHA]: \"Haha\",\r\n  [ReactionType.WOW]: \"Wow\",\r\n  [ReactionType.SAD]: \"Sad\",\r\n  [ReactionType.ANGRY]: \"Angry\",\r\n};\r\nexport const ReactionIcon = {\r\n  [ReactionType.LIKE]: LikeIcon,\r\n  [ReactionType.LOVE]: LoveIcon,\r\n  [ReactionType.CARE]: CareIcon,\r\n  [ReactionType.HAHA]: HahaIcon,\r\n  [ReactionType.WOW]: WowIcon,\r\n  [ReactionType.SAD]: SadIcon,\r\n  [ReactionType.ANGRY]: AngryIcon,\r\n};\r\nexport const ReactionColor = {\r\n  [ReactionType.LIKE]: \"text-blue-600 dark:text-blue-400 \",\r\n  [ReactionType.LOVE]: \"text-pink-600\",\r\n  [ReactionType.HAHA]: \"text-yellow-500\",\r\n  [ReactionType.CARE]: \"text-yellow-500\",\r\n  [ReactionType.WOW]: \"text-yellow-500\",\r\n  [ReactionType.SAD]: \"text-yellow-500\",\r\n  [ReactionType.ANGRY]: \"text-yellow-600\",\r\n};\r\n","import ImageCircle from \"components/ImageCircle\";\r\nimport ImageIcon from \"assets/icons/image-icon.svg\";\r\nimport React, { useEffect, useRef, useState } from \"react\";\r\nimport { useSelector } from \"react-redux\";\r\nimport { Link } from \"react-router-dom\";\r\nimport ClickableIcon from \"components/ClickableIcon\";\r\nimport EmojiPicker from \"emoji-picker-react\";\r\nimport Button from \"components/Button\";\r\nimport usePostApi from \"hooks/usePostApi\";\r\nimport { PrivacyIcon, PrivacyName, PrivacyType } from \"utils/Enums\";\r\nimport Popup from \"components/Popup\";\r\nimport { MAX_IMAGE_SIZE } from \"utils/Constants\";\r\n\r\nfunction CreatePost() {\r\n  const currentUser = useSelector((state) => state.users.currentUser);\r\n\r\n  const [content, setContent] = useState(\"\");\r\n  const [privacy, setPrivacy] = useState(PrivacyType.PUBLIC);\r\n  const [imageFiles, setImageFiles] = useState([]);\r\n\r\n  const [popup, setPopup] = useState({});\r\n  const [isOpenPrivacyList, setIsOpenPrivacyList] = useState(false);\r\n  const [isValidButton, setIsValidButton] = useState(false);\r\n  const [isOpen, setIsOpen] = useState(false);\r\n  const [isOpenEmoji, setIsOpenEmoji] = useState(false);\r\n  const ref = useRef();\r\n  const emojiRef = useRef();\r\n  const privacyRef = useRef();\r\n  const postApi = usePostApi();\r\n\r\n  // Check click outside emoji\r\n  useEffect(() => {\r\n    const checkIfClickedOutside = (e) => {\r\n      if (\r\n        isOpenEmoji &&\r\n        emojiRef.current &&\r\n        !emojiRef.current.contains(e.target)\r\n      ) {\r\n        setIsOpenEmoji(false);\r\n      }\r\n    };\r\n    document.addEventListener(\"mousedown\", checkIfClickedOutside);\r\n    return () => {\r\n      document.removeEventListener(\"mousedown\", checkIfClickedOutside);\r\n    };\r\n  }, [isOpenEmoji]);\r\n  const onEmojiClick = (event, emojiObject) => {\r\n    if (emojiObject?.emoji) {\r\n      setContent(content + emojiObject?.emoji);\r\n    }\r\n  };\r\n  // Check click outside create post\r\n  useEffect(() => {\r\n    const checkIfClickedOutside = (e) => {\r\n      if (isOpen && ref.current && !ref.current.contains(e.target)) {\r\n        setIsOpen(false);\r\n      }\r\n    };\r\n    document.addEventListener(\"mousedown\", checkIfClickedOutside);\r\n    return () => {\r\n      document.removeEventListener(\"mousedown\", checkIfClickedOutside);\r\n    };\r\n  }, [isOpen]);\r\n  // Check click outside privacy\r\n  useEffect(() => {\r\n    const checkIfClickedOutside = (e) => {\r\n      if (\r\n        isOpenPrivacyList &&\r\n        privacyRef.current &&\r\n        !privacyRef.current.contains(e.target)\r\n      ) {\r\n        setIsOpenPrivacyList(false);\r\n      }\r\n    };\r\n    document.addEventListener(\"mousedown\", checkIfClickedOutside);\r\n    return () => {\r\n      document.removeEventListener(\"mousedown\", checkIfClickedOutside);\r\n    };\r\n  }, [isOpenPrivacyList]);\r\n\r\n  // Esc to cancel view\r\n  function escFunction(e) {\r\n    if (e.keyCode === 27) {\r\n      setIsOpen(false);\r\n    }\r\n  }\r\n  useEffect(() => {\r\n    document.addEventListener(\"keydown\", escFunction, false);\r\n    return () => {\r\n      document.removeEventListener(\"keydown\", escFunction, false);\r\n    };\r\n  }, []);\r\n\r\n  function addFiles(files) {\r\n    var isValid = true;\r\n    const newImageFiles = [...imageFiles, ...files];\r\n    if (newImageFiles.length > 10) {\r\n      setPopup({\r\n        content: \"Please select maximum 10 images!\",\r\n        isOpen: true,\r\n      });\r\n      isValid = false;\r\n    }\r\n    newImageFiles.forEach((file) => {\r\n      if (file.size > MAX_IMAGE_SIZE) {\r\n        setPopup({\r\n          content: \"Please upload less than 1MB per file!\",\r\n          isOpen: true,\r\n        });\r\n        isValid = false;\r\n      }\r\n    });\r\n    if (isValid) {\r\n      setImageFiles(newImageFiles);\r\n    }\r\n  }\r\n  function removeImage(index) {\r\n    if (index >= 0 && index < imageFiles.length) {\r\n      const newImageFiles = [...imageFiles];\r\n      newImageFiles.splice(index, 1);\r\n      setImageFiles(newImageFiles);\r\n    }\r\n  }\r\n  useEffect(() => {\r\n    if (content.trim() || imageFiles.length > 0) {\r\n      setIsValidButton(true);\r\n    } else {\r\n      setIsValidButton(false);\r\n    }\r\n  }, [content, imageFiles]);\r\n\r\n  function onSubmit(e) {\r\n    e.preventDefault();\r\n    postApi.addPost({ content, privacy }).then((response) => {\r\n      if (response.id) {\r\n        imageFiles.forEach((image) => {\r\n          const request = new FormData();\r\n          request.append(\"Image\", image);\r\n          request.append(\"Caption\", \"Post photo\");\r\n          postApi.addPhoto(response.id, request);\r\n        });\r\n      }\r\n    });\r\n    setIsOpen(false);\r\n    setContent(\"\");\r\n    setImageFiles([]);\r\n  }\r\n  return (\r\n    <>\r\n      <div className=\"bg-white dark:bg-dark-secondary border dark:border-dark-hover w-full rounded-xl shadow px-4 pt-3 pb-1 space-y-3 divide-y\">\r\n        <div className=\"flex space-x-2 w-full items-center\">\r\n          <Link\r\n            className=\"font-semibold text-sm cursor-pointer flex-shrink-0\"\r\n            to={`/profile/${currentUser?.userName}`}\r\n          >\r\n            <ImageCircle src={currentUser?.avatarUrl} />\r\n          </Link>\r\n          <div onClick={() => setIsOpen(true)} className=\"w-full\">\r\n            <input\r\n              disabled\r\n              type=\"text\"\r\n              placeholder={`What's on your mind${\r\n                currentUser.firstName ? \", \" + currentUser.firstName : \"\"\r\n              }?`}\r\n              className=\"bg-gray-100 dark:bg-dark-third rounded-3xl w-full py-2 px-4 pr-12 focus:ring-2 focus:ring-green-500 focus:ring-opacity-50 outline-none transition-all duration-200 relative placeholder-gray-500 dark:placeholder-dark-txt hover:bg-gray-200 dark:hover:bg-dark-hover cursor-pointer \"\r\n            />\r\n          </div>\r\n        </div>\r\n        <div className=\"w-full text-center flex justify-between select-none cursor-pointer py-1 border-t border-b dark:border-dark-third space-x-1 text-gray-600 dark:text-dark-txt font-semibold\">\r\n          <span\r\n            className=\"flex-1 p-1 py-2 bg-white hover:bg-gray-100 active:bg-gray-200 dark:bg-dark-secondary dark:hover:bg-dark-third dark:active:bg-dark-hover rounded-lg transition-base flex items-center justify-center space-x-2\"\r\n            onClick={() => setIsOpen(true)}\r\n          >\r\n            <img src={ImageIcon} alt=\"Image icon\" className=\"w-6 h-6\" />\r\n            <span>Your Photos</span>\r\n          </span>\r\n          <span\r\n            className=\"flex-1 p-1 py-2 bg-white hover:bg-gray-100 active:bg-gray-200 dark:bg-dark-secondary dark:hover:bg-dark-third dark:active:bg-dark-hover rounded-lg transition-base \"\r\n            onClick={() => setIsOpen(true)}\r\n          >\r\n            <i className=\"far fa-smile-beam mr-2 text-xl align-middle text-green-500 dark:text-green-400\"></i>\r\n            Your Feeling\r\n          </span>\r\n        </div>\r\n      </div>\r\n      {isOpen && (\r\n        <div\r\n          className=\"overlay px-4 py-10 z-30 grid place-items-center\"\r\n          style={{ margin: 0 }}\r\n        >\r\n          <div\r\n            className=\"flex-center flex-col bg-white dark:bg-dark-secondary dark:border-dark-third rounded-xl shadow-xl border border-gray-300 w-full md:w-5/6 lg:w-2/5 transition-all duration-300 ease-in-out max-h-full animate-swipeDown overflow-x-auto\"\r\n            ref={ref}\r\n          >\r\n            {popup.isOpen && (\r\n              <Popup\r\n                title=\"Notification\"\r\n                isOpen={popup.isOpen}\r\n                content={popup.content}\r\n                onClick={() => setPopup({ isOpen: false })}\r\n              />\r\n            )}\r\n            <div className=\"relative font-bold text-center text-lg md:text-xl py-4 border-b dark:border-gray-600 w-full\">\r\n              Create post\r\n              <ClickableIcon\r\n                onClick={() => setIsOpen(false)}\r\n                iconClass=\"bx bx-x\"\r\n                className=\"absolute bg-white md:right-10 right-8 top-3 animate-swipeUp\"\r\n              />\r\n            </div>\r\n            <form\r\n              onSubmit={onSubmit}\r\n              className=\"flex flex-col items-start w-full px-6 space-y-4 py-4\"\r\n            >\r\n              <div className=\"flex space-x-2\">\r\n                <Link\r\n                  className=\"font-semibold text-sm cursor-pointer\"\r\n                  to={`/profile/${currentUser.userName}`}\r\n                >\r\n                  <ImageCircle\r\n                    src={currentUser.avatarUrl}\r\n                    userName={currentUser.userName}\r\n                  />\r\n                </Link>\r\n                <div className=\"flex flex-col justify-between space-y-1\">\r\n                  <Link\r\n                    className=\"font-semibold text-sm cursor-pointer hover:underline\"\r\n                    to={`/profile/${currentUser.userName}`}\r\n                  >\r\n                    {currentUser.fullName}\r\n                  </Link>\r\n                  <div className=\"relative select-none\">\r\n                    <div\r\n                      className=\"p-1 px-2 text-xs bg-gray-200 dark:bg-dark-hover rounded space-x-2 cursor-pointer \"\r\n                      onClick={() => setIsOpenPrivacyList(true)}\r\n                    >\r\n                      <i className={PrivacyIcon[privacy]}></i>\r\n                      <span>{PrivacyName[privacy]}</span>\r\n                    </div>\r\n                    {isOpenPrivacyList && (\r\n                      <div\r\n                        className=\"animate-fadeIn absolute w-28 top-full transform translate-y-1 -left-2 bg-gray-100 dark:bg-dark-third rounded p-1 text-sm\"\r\n                        ref={privacyRef}\r\n                      >\r\n                        {Object.values(PrivacyType).map((privacy) => (\r\n                          <div\r\n                            onClick={() => {\r\n                              setPrivacy(privacy);\r\n                              setIsOpenPrivacyList(false);\r\n                            }}\r\n                            className=\"cursor-pointer hover:bg-gray-200 dark:hover:bg-dark-hover p-1 px-2 rounded duration-150 w-full space-x-2\"\r\n                          >\r\n                            <i className={PrivacyIcon[privacy]}></i>\r\n                            <span>{PrivacyName[privacy]}</span>\r\n                          </div>\r\n                        ))}\r\n                      </div>\r\n                    )}\r\n                  </div>\r\n                </div>\r\n              </div>\r\n              <textarea\r\n                value={content}\r\n                onChange={(e) => setContent(e.target.value)}\r\n                rows=\"3\"\r\n                className=\"w-full text-lg md:text-2xl placeholder-gray-500 dark:placeholder-dark-txt focus:placeholder-gray-300 dark:focus:placeholder-dark-hover outline-none transition-base bg-white dark:bg-dark-secondary resize-none\"\r\n                placeholder={`What's on your mind${\r\n                  currentUser.firstName ? \", \" + currentUser.firstName : \"\"\r\n                }?`}\r\n              ></textarea>\r\n              <div ref={emojiRef} className=\"relative w-full flex justify-end\">\r\n                <ClickableIcon\r\n                  secondMode\r\n                  iconClass=\"bx bxs-smile\"\r\n                  colorIconClass=\"text-green-500\"\r\n                  onClick={() => setIsOpenEmoji(!isOpenEmoji)}\r\n                />\r\n                {isOpenEmoji && (\r\n                  <div className=\"animate-fadeIn absolute right-0 bottom-full\">\r\n                    <EmojiPicker disableAutoFocus onEmojiClick={onEmojiClick} />\r\n                  </div>\r\n                )}\r\n              </div>\r\n              <div className=\"w-full overflow-x-auto flex space-x-2 select-none pb-2\">\r\n                <input\r\n                  hidden\r\n                  id=\"imageFiles\"\r\n                  type=\"file\"\r\n                  multiple\r\n                  onChange={(e) => addFiles(e.target.files)}\r\n                />\r\n                <label\r\n                  htmlFor=\"imageFiles\"\r\n                  className=\"cursor-pointer h-28 w-28 bg-gray-100 hover:bg-gray-200 active:bg-gray-300 dark:bg-dark-third dark:hover:bg-dark-hover dark:active:bg-gray-700 rounded-xl flex-center transition-base flex-shrink-0\"\r\n                >\r\n                  <i className=\"bx bxs-image-add text-4xl\"></i>\r\n                </label>\r\n                {imageFiles.length > 0 &&\r\n                  imageFiles.map((imageFile, index) => (\r\n                    <div\r\n                      key={\"imageFiles\" + index}\r\n                      className=\"relative cursor-pointer h-28 w-28 bg-gray-100 dark:bg-dark-third rounded-xl flex-center transition-base overflow-hidden flex-shrink-0 \"\r\n                    >\r\n                      <img src={URL.createObjectURL(imageFile)} alt=\"Preview\" />\r\n                      <ClickableIcon\r\n                        onClick={() => removeImage(index)}\r\n                        iconClass=\"bx bx-x\"\r\n                        reverse\r\n                        className=\"absolute right-1 top-1 animate-swipeUp w-6 h-6 object-cover\"\r\n                      />\r\n                    </div>\r\n                  ))}\r\n              </div>\r\n              <Button\r\n                disabled={!isValidButton}\r\n                className=\"w-full font-semibold\"\r\n              >\r\n                Post\r\n              </Button>\r\n            </form>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </>\r\n  );\r\n}\r\n\r\nexport default CreatePost;\r\n","import Button from \"components/Button\";\r\nimport React from \"react\";\r\nimport PropTypes from \"prop-types\";\r\n\r\nConfirmModal.propTypes = {\r\n  title: PropTypes.string,\r\n  isOpen: PropTypes.bool,\r\n  confirmButtonTitle: PropTypes.string,\r\n  confirmButtonAction: PropTypes.func,\r\n};\r\n\r\nfunction ConfirmModal({\r\n  title,\r\n  isOpen,\r\n  content = \"Are you sure?\",\r\n  closeAction,\r\n  confirmButtonTitle,\r\n  confirmButtonAction,\r\n}) {\r\n  return (\r\n    isOpen && (\r\n      <div className=\"px-4 overlay flex-center \" style={{ margin: 0 }}>\r\n        <div className=\"animate-swipeDown bg-white dark:bg-dark-secondary dark:border-dark-third py-8 px-8 w-full md:w-2/3 lg:w-1/2 flex flex-col justify-between items-start rounded-xl space-y-6 shadow-2xl border border-gray-300\">\r\n          <h3 className=\"font-semibold text-2xl break-words dark:text-dark-txt\">\r\n            {title !== \"\" ? title : \"Notification\"}\r\n          </h3>\r\n          <span className=\"break-words dark:text-dark-txt\">{content}</span>\r\n          <div className=\"w-full flex justify-end space-x-2\">\r\n            <Button outline content=\"No\" onClick={closeAction} />\r\n            <Button\r\n              content={confirmButtonTitle ?? \"Ok\"}\r\n              onClick={() => {\r\n                confirmButtonAction();\r\n                closeAction();\r\n              }}\r\n            />\r\n          </div>\r\n        </div>\r\n      </div>\r\n    )\r\n  );\r\n}\r\n\r\nexport default ConfirmModal;\r\n","export default __webpack_public_path__ + \"static/media/send-icon.666dadc9.svg\";","import SendIconNormal from \"assets/icons/send-icon.svg\";\r\nimport ClickableIcon from \"components/ClickableIcon\";\r\nimport ImageCircle from \"components/ImageCircle\";\r\nimport EmojiPicker from \"emoji-picker-react\";\r\nimport usePostApi from \"hooks/usePostApi\";\r\nimport React, { useEffect, useRef, useState } from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\n\r\nfunction CommentInput({ postId, currentUser = {} }) {\r\n  const [content, setContent] = useState(\"\");\r\n\r\n  const [isOpenEmoji, setIsOpenEmoji] = useState(false);\r\n  const ref = useRef();\r\n\r\n  const postApi = usePostApi();\r\n\r\n  async function onSendMessage(e) {\r\n    e.preventDefault();\r\n    if (!content) {\r\n      return;\r\n    }\r\n    setContent(\"\");\r\n    var request = { content };\r\n    await postApi.addComment(postId, request);\r\n  }\r\n\r\n  useEffect(() => {\r\n    const checkIfClickedOutside = (e) => {\r\n      // If the menu is open and the clicked target is not within the menu,\r\n      // then close the menu\r\n      if (isOpenEmoji && ref.current && !ref.current.contains(e.target)) {\r\n        setIsOpenEmoji(false);\r\n      }\r\n    };\r\n    document.addEventListener(\"mousedown\", checkIfClickedOutside);\r\n    return () => {\r\n      // Cleanup the event listener\r\n      document.removeEventListener(\"mousedown\", checkIfClickedOutside);\r\n    };\r\n  }, [isOpenEmoji]);\r\n  const onEmojiClick = (event, emojiObject) => {\r\n    if (emojiObject?.emoji) {\r\n      setContent(content + emojiObject?.emoji);\r\n    }\r\n  };\r\n  return (\r\n    <div className=\"flex space-x-2 w-full items-center\">\r\n      <Link\r\n        className=\"font-semibold text-sm cursor-pointer flex-shrink-0\"\r\n        to={`/profile/${currentUser?.userName}`}\r\n      >\r\n        <ImageCircle size=\"sm\" src={currentUser?.avatarUrl} />\r\n      </Link>\r\n      <form\r\n        onSubmit={(e) => onSendMessage(e)}\r\n        className=\"flex justify-between items-center space-x-1 z-0 w-full\"\r\n      >\r\n        <div className=\"relative w-full flex\">\r\n          <input\r\n            value={content}\r\n            onChange={(e) => setContent(e.target.value)}\r\n            type=\"text\"\r\n            placeholder=\"Write a comment\"\r\n            className=\"bg-gray-100 dark:bg-dark-third rounded-3xl w-full py-2 px-4 pr-12 focus:ring-2 focus:ring-green-500 focus:ring-opacity-50 outline-none transition-all duration-200 relative\"\r\n          />\r\n          <div ref={ref} className=\"relative\">\r\n            <ClickableIcon\r\n              className=\"absolute h-10 w-10 right-1\"\r\n              iconClass=\"bx bxs-smile\"\r\n              colorIconClass=\"text-green-500\"\r\n              onClick={() => setIsOpenEmoji(!isOpenEmoji)}\r\n            />\r\n            {isOpenEmoji && (\r\n              <div className=\"animate-fadeIn absolute right-0 bottom-full\">\r\n                <EmojiPicker disableAutoFocus onEmojiClick={onEmojiClick} />\r\n              </div>\r\n            )}\r\n          </div>\r\n        </div>\r\n        <button>\r\n          <ClickableIcon\r\n            icon={SendIconNormal}\r\n            className=\"w-10 h-10 p-2\"\r\n            colorClass=\"bg-white hover:bg-gray-100 active:bg-gray-200 dark:bg-dark-secondary hover:dark:bg-dark-third active:dark:bg-dark-hover\"\r\n          />\r\n        </button>\r\n      </form>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default CommentInput;\r\n","import ClickableIcon from \"components/ClickableIcon\";\r\nimport ConfirmModal from \"components/ConfirmModal\";\r\nimport ImageCircle from \"components/ImageCircle\";\r\nimport usePostApi from \"hooks/usePostApi\";\r\nimport moment from \"moment\";\r\nimport React, { useEffect, useRef, useState } from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\n\r\nexport default function CommentList({\r\n  comments = [],\r\n  isOpen,\r\n  currentUser = {},\r\n  postId,\r\n}) {\r\n  const myCommentList = [...comments]\r\n    .filter((x) => x.creator.userName === currentUser.userName)\r\n    .sort((a, b) => (a.dateCreated < b.dateCreated ? 1 : -1));\r\n\r\n  const otherCommentList = [...comments]\r\n    .filter((x) => x.creator.userName !== currentUser.userName)\r\n    .sort((a, b) => (a.dateCreated < b.dateCreated ? 1 : -1));\r\n\r\n  return (\r\n    <>\r\n      {myCommentList.map((comment, index) => (\r\n        <Comment\r\n          key={comment.id}\r\n          comment={comment}\r\n          postId={postId}\r\n          isMyComment\r\n        />\r\n      ))}\r\n      {isOpen &&\r\n        otherCommentList.map((comment, index) => (\r\n          <Comment key={comment.id} comment={comment} postId={postId} />\r\n        ))}\r\n    </>\r\n  );\r\n}\r\n\r\nconst Comment = React.memo(({ comment, postId, isMyComment }) => {\r\n  const postApi = usePostApi();\r\n  const [isOpenMenu, setIsOpenMenu] = useState(false);\r\n  const [isOpenConfirm, setIsOpenConfirm] = useState(false);\r\n\r\n  const [isEditMode, setIsEditMode] = useState(false);\r\n  const [editContent, setEditContent] = useState(comment.content);\r\n\r\n  const ref = useRef();\r\n  const editInputRef = useRef();\r\n\r\n  useEffect(() => {\r\n    const checkIfClickedOutside = (e) => {\r\n      if (isOpenMenu && ref.current && !ref.current.contains(e.target)) {\r\n        setIsOpenMenu(false);\r\n      }\r\n    };\r\n    document.addEventListener(\"mousedown\", checkIfClickedOutside);\r\n    return () => {\r\n      // Cleanup the event listener\r\n      document.removeEventListener(\"mousedown\", checkIfClickedOutside);\r\n    };\r\n  }, [isOpenMenu]);\r\n\r\n  const deleteComment = () => {\r\n    if (postId && comment?.id) {\r\n      postApi.deleteComment(postId, comment.id);\r\n    }\r\n  };\r\n  const onUpdateComment = (e) => {\r\n    e.preventDefault();\r\n    if (editContent !== comment.content) {\r\n      postApi.updateComment(postId, comment.id, { content: editContent });\r\n    }\r\n    setIsEditMode(false);\r\n  };\r\n\r\n  // Esc to cancel edit\r\n  function escFunction(e) {\r\n    if (e.keyCode === 27) {\r\n      setIsEditMode(false);\r\n    }\r\n  }\r\n  useEffect(() => {\r\n    document.addEventListener(\"keydown\", escFunction, false);\r\n    return () => {\r\n      document.removeEventListener(\"keydown\", escFunction, false);\r\n    };\r\n  }, []);\r\n  useEffect(() => {\r\n    if (isEditMode) {\r\n      editInputRef?.current?.focus();\r\n    }\r\n  }, [isEditMode]);\r\n\r\n  return (\r\n    <>\r\n      {isOpenConfirm && (\r\n        <ConfirmModal\r\n          isOpen={isOpenConfirm}\r\n          closeAction={() => setIsOpenConfirm(false)}\r\n          title=\"Are you sure?\"\r\n          content=\"Do you want to delete this comment?\"\r\n          confirmButtonTitle=\"Yes\"\r\n          confirmButtonAction={() => deleteComment()}\r\n        />\r\n      )}\r\n      <div className={\"flex space-x-2 max-w-full \" + (isEditMode && \"w-full\")}>\r\n        <Link\r\n          className=\"font-semibold text-sm cursor-pointer flex-shrink-0 mt-2\"\r\n          to={`/profile/${comment?.creator?.userName}`}\r\n        >\r\n          <ImageCircle\r\n            size=\"sm\"\r\n            src={comment?.creator?.avatarUrl}\r\n            userName={comment?.creator?.userName}\r\n          />\r\n        </Link>\r\n        <div className=\"flex flex-col w-full\">\r\n          <div className=\"flex flex-col space-y-1 justify-evenly w-full bg-gray-100 dark:bg-dark-third rounded-2xl px-3 py-3\">\r\n            <div className=\"w-full flex justify-between items-center mr-9\">\r\n              <Link\r\n                className=\"font-semibold text-sm cursor-pointer hover:underline\"\r\n                to={`/profile/${comment?.creator?.userName}`}\r\n              >\r\n                {comment?.creator?.fullName}\r\n              </Link>\r\n            </div>\r\n            {isEditMode ? (\r\n              <form onSubmit={onUpdateComment} className=\"flex flex-col\">\r\n                <input\r\n                  type=\"text\"\r\n                  placeholder=\"Write a comment\"\r\n                  ref={editInputRef}\r\n                  className=\"bg-gray-100 dark:bg-dark-third outline-none \"\r\n                  onChange={(e) => setEditContent(e.target.value)}\r\n                  value={editContent}\r\n                />\r\n                <span\r\n                  className=\"text-xs self-end\"\r\n                  onClick={() => setIsEditMode(false)}\r\n                >\r\n                  Press Esc to{\" \"}\r\n                  <span className=\"font-semibold text-green-500 cursor-pointer\">\r\n                    Cancel\r\n                  </span>\r\n                </span>\r\n              </form>\r\n            ) : (\r\n              <div className=\"break-words overflow-x-auto text-sm max-w-350 md:max-w-450\">\r\n                {comment?.content}\r\n              </div>\r\n            )}\r\n          </div>\r\n          <span className=\"ml-2 text-xs text-gray-500 dark:text-dark-txt\">\r\n            {moment(new Date(comment?.dateCreated), \"YYYYMMDD\")\r\n              .fromNow()\r\n              ?.replace(\"ago\", \"\")\r\n              ?.trim()}\r\n          </span>\r\n        </div>\r\n        <div ref={ref} className=\"relative self-center mb-5\">\r\n          {isMyComment && (\r\n            <>\r\n              <ClickableIcon\r\n                iconClass=\"bx bx-dots-horizontal-rounded\"\r\n                secondMode\r\n                onClick={() => {\r\n                  setIsOpenMenu(!isOpenMenu);\r\n                }}\r\n              />\r\n              {isOpenMenu && (\r\n                <div className=\"animate-fadeIn transition-base absolute top-7 p-2 w-48 right-3 border border-gray-200 bg-white rounded-lg shadow-lg overflow-hidden dark:bg-dark-secondary dark:border-dark-hover mt-2 select-none z-30\">\r\n                  <button\r\n                    className=\"flex items-center space-x-3 w-full pl-2 pr-4 py-2 rounded-md text-left hover:bg-gray-100 active:bg-gray-200 transition-base transform active:scale-95 dark:hover:bg-dark-hover text-sm\"\r\n                    onClick={() => {\r\n                      setIsEditMode(true);\r\n                      setIsOpenMenu(false);\r\n                    }}\r\n                  >\r\n                    <i className=\"text-center-middle bx bx-edit-alt text-center text-xl align-middle text-black dark:text-dark-txt w-7 h-7 mr-2\"></i>\r\n                    Edit comment\r\n                  </button>\r\n                  <button\r\n                    className=\"flex items-center space-x-3 w-full pl-2 pr-4 py-2 rounded-md text-left hover:bg-gray-100 active:bg-gray-200 transition-base transform active:scale-95 dark:hover:bg-dark-hover text-sm\"\r\n                    onClick={() => {\r\n                      setIsOpenConfirm(true);\r\n                      setIsOpenMenu(false);\r\n                    }}\r\n                  >\r\n                    <i className=\"text-center-middle bx bx-trash text-center text-xl align-middle text-black dark:text-dark-txt w-7 h-7 mr-2\"></i>\r\n                    Delete comment\r\n                  </button>\r\n                </div>\r\n              )}\r\n            </>\r\n          )}\r\n        </div>\r\n      </div>\r\n    </>\r\n  );\r\n});\r\n","import ClickableIcon from \"components/ClickableIcon\";\r\nimport React, { useEffect, useState } from \"react\";\r\n\r\nfunction ImageView({ photos = [], startIndex = 0, setIsOpen }) {\r\n  const [index, setIndex] = useState(startIndex);\r\n\r\n  function nextImage() {\r\n    if (index < photos.length - 1) {\r\n      setIndex(index + 1);\r\n    }\r\n  }\r\n  function previousImage() {\r\n    if (index > 0) {\r\n      setIndex(index - 1);\r\n    }\r\n  }\r\n  // Esc to cancel view\r\n  function escFunction(e) {\r\n    if (e.keyCode === 27) {\r\n      setIsOpen(false);\r\n    }\r\n  }\r\n  useEffect(() => {\r\n    document.addEventListener(\"keydown\", escFunction, false);\r\n    return () => {\r\n      document.removeEventListener(\"keydown\", escFunction, false);\r\n    };\r\n  }, []);\r\n  return (\r\n    <>\r\n      <div\r\n        className=\"px-4 flex-center overlay cursor-default select-none\"\r\n        style={{ margin: 0 }}\r\n      >\r\n        <ClickableIcon\r\n          reverse\r\n          onClick={() => setIsOpen(false)}\r\n          iconClass=\"bx bx-x\"\r\n          className=\"absolute bg-white md:right-10 right-8 top-8 animate-swipeUp\"\r\n        />\r\n        {index > 0 && (\r\n          <ClickableIcon\r\n            reverse\r\n            onClick={previousImage}\r\n            iconClass=\"bx bxs-chevron-left\"\r\n            className=\"absolute md:left-10 left-5 animate-swipeUp\"\r\n          />\r\n        )}\r\n        {index < photos.length - 1 && (\r\n          <ClickableIcon\r\n            reverse\r\n            onClick={nextImage}\r\n            iconClass=\"bx bxs-chevron-right\"\r\n            className=\"absolute md:right-10 right-5 animate-swipeUp\"\r\n          />\r\n        )}\r\n        <img\r\n          src={photos[index]?.imageUrl}\r\n          alt={photos[index]?.caption ?? `Post photo ${index}`}\r\n          className=\"animate-swipeDown max-h-11/12 max-w-full md:max-w-3/4 min-w-2/12 object-contain rounded\"\r\n        />\r\n      </div>\r\n    </>\r\n  );\r\n}\r\n\r\nexport default ImageView;\r\n","import ImageView from \"components/ImageView\";\r\nimport React, { useState } from \"react\";\r\n\r\nexport default function PhotoList({ photos = [] }) {\r\n  const [isOpen, setIsOpen] = useState(false);\r\n  const [startIndex, setStartIndex] = useState(0);\r\n  if (photos.length < 1) {\r\n    return;\r\n  }\r\n  let list;\r\n  switch (photos.length) {\r\n    case 1:\r\n      list = (\r\n        <OnePhotoList\r\n          setStartIndex={setStartIndex}\r\n          setIsOpen={setIsOpen}\r\n          photos={photos}\r\n        />\r\n      );\r\n      break;\r\n    case 2:\r\n      list = (\r\n        <TwoPhotosList\r\n          setStartIndex={setStartIndex}\r\n          setIsOpen={setIsOpen}\r\n          photos={photos}\r\n        />\r\n      );\r\n      break;\r\n    case 3:\r\n      list = (\r\n        <ThreePhotosList\r\n          setStartIndex={setStartIndex}\r\n          setIsOpen={setIsOpen}\r\n          photos={photos}\r\n        />\r\n      );\r\n      break;\r\n    case 4:\r\n      list = (\r\n        <FourPhotosList\r\n          setStartIndex={setStartIndex}\r\n          setIsOpen={setIsOpen}\r\n          photos={photos}\r\n        />\r\n      );\r\n      break;\r\n    default:\r\n      list = (\r\n        <List\r\n          setStartIndex={setStartIndex}\r\n          setIsOpen={setIsOpen}\r\n          photos={photos}\r\n        />\r\n      );\r\n  }\r\n  return (\r\n    <>\r\n      {isOpen && (\r\n        <ImageView\r\n          photos={photos}\r\n          startIndex={startIndex}\r\n          setIsOpen={setIsOpen}\r\n        />\r\n      )}\r\n      {list}\r\n    </>\r\n  );\r\n}\r\n\r\nconst OnePhotoList = ({ photos = [], setIsOpen, setStartIndex }) => (\r\n  <>\r\n    <div\r\n      className=\"w-full max-h-500 bg-gray-100 dark:bg-dark-third rounded-xl shadow-lg overflow-hidden\"\r\n      onClick={() => {\r\n        setIsOpen(true);\r\n        setStartIndex(0);\r\n      }}\r\n    >\r\n      <img\r\n        className=\"object-contain max-h-128 w-full\"\r\n        src={photos[0].imageUrl}\r\n        alt={photos[0].caption ?? `Post photo ${1}`}\r\n      />\r\n    </div>\r\n  </>\r\n);\r\n\r\nconst TwoPhotosList = ({ photos = [], setIsOpen, setStartIndex }) => (\r\n  <>\r\n    <div className=\"grid grid-cols-2 gap-2 overflow-hidden\">\r\n      {photos.map((photo, index) => (\r\n        <div\r\n          key={photo.id}\r\n          className=\"col-span-1 w-full flex justify-center max-h-500 bg-gray-100 dark:bg-dark-third rounded-xl shadow-lg overflow-hidden\"\r\n          onClick={() => {\r\n            setIsOpen(true);\r\n            setStartIndex(index);\r\n          }}\r\n        >\r\n          <img\r\n            className=\"object-contain max-h-128 w-full\"\r\n            src={photo.imageUrl}\r\n            alt={photo.caption ?? `Post photo ${index}`}\r\n          />\r\n        </div>\r\n      ))}\r\n    </div>\r\n  </>\r\n);\r\nconst ThreePhotosList = ({ photos = [], setIsOpen, setStartIndex }) => (\r\n  <>\r\n    <div className=\"grid grid-cols-3 grid-rows-2 gap-2 overflow-hidden\">\r\n      <div\r\n        className=\"col-span-2 row-span-2 w-full flex justify-center max-h-500 bg-gray-100 dark:bg-dark-third rounded-xl shadow-lg overflow-hidden\"\r\n        onClick={() => {\r\n          setIsOpen(true);\r\n          setStartIndex(0);\r\n        }}\r\n      >\r\n        <img\r\n          className=\"object-contain max-h-128 w-full\"\r\n          src={photos[0]?.imageUrl}\r\n          alt={photos[0]?.caption ?? `Post photo 1`}\r\n        />\r\n      </div>\r\n      <div\r\n        className=\"col-span-1 row-span-1 w-full flex justify-center max-h-500 bg-gray-100 dark:bg-dark-third rounded-xl shadow-lg overflow-hidden\"\r\n        onClick={() => {\r\n          setIsOpen(true);\r\n          setStartIndex(1);\r\n        }}\r\n      >\r\n        <img\r\n          className=\"object-cover h-full w-full\"\r\n          src={photos[1]?.imageUrl}\r\n          alt={photos[1]?.caption ?? `Post photo 2`}\r\n        />\r\n      </div>\r\n      <div\r\n        className=\"col-span-1 row-span-1 w-full flex justify-center max-h-500 bg-gray-100 dark:bg-dark-secondary rounded-xl shadow-lg overflow-hidden\"\r\n        onClick={() => {\r\n          setIsOpen(true);\r\n          setStartIndex(2);\r\n        }}\r\n      >\r\n        <img\r\n          className=\"object-cover h-full w-full\"\r\n          src={photos[2]?.imageUrl}\r\n          alt={photos[2]?.caption ?? `Post photo 3`}\r\n        />\r\n      </div>\r\n    </div>\r\n  </>\r\n);\r\nconst FourPhotosList = ({ photos = [], setIsOpen, setStartIndex }) => (\r\n  <>\r\n    <div className=\"grid grid-cols-2 grid-rows-2 gap-2 overflow-hidden h-128\">\r\n      <div\r\n        className=\"w-full flex justify-center max-h-500 bg-gray-100 dark:bg-dark-third rounded-xl shadow-lg overflow-hidden\"\r\n        onClick={() => {\r\n          setIsOpen(true);\r\n          setStartIndex(0);\r\n        }}\r\n      >\r\n        <img\r\n          className=\"object-cover h-full w-full\"\r\n          src={photos[0]?.imageUrl}\r\n          alt={photos[0]?.caption ?? `Post photo 1`}\r\n        />\r\n      </div>\r\n      <div\r\n        className=\"w-full flex justify-center max-h-500 bg-gray-100 dark:bg-dark-third rounded-xl shadow-lg overflow-hidden\"\r\n        onClick={() => {\r\n          setIsOpen(true);\r\n          setStartIndex(1);\r\n        }}\r\n      >\r\n        <img\r\n          className=\"object-cover h-full w-full\"\r\n          src={photos[1]?.imageUrl}\r\n          alt={photos[1]?.caption ?? `Post photo 2`}\r\n        />\r\n      </div>\r\n      <div\r\n        className=\"w-full flex justify-center max-h-500 bg-gray-100 dark:bg-dark-third rounded-xl shadow-lg overflow-hidden\"\r\n        onClick={() => {\r\n          setIsOpen(true);\r\n          setStartIndex(2);\r\n        }}\r\n      >\r\n        <img\r\n          className=\"object-cover h-full w-full\"\r\n          src={photos[2]?.imageUrl}\r\n          alt={photos[2]?.caption ?? `Post photo 3`}\r\n        />\r\n      </div>\r\n      <div\r\n        className=\"w-full flex justify-center max-h-500 bg-gray-100 dark:bg-dark-third rounded-xl shadow-lg overflow-hidden\"\r\n        onClick={() => {\r\n          setIsOpen(true);\r\n          setStartIndex(3);\r\n        }}\r\n      >\r\n        <img\r\n          className=\"object-cover h-full w-full\"\r\n          src={photos[3]?.imageUrl}\r\n          alt={photos[3]?.caption ?? `Post photo 4`}\r\n        />\r\n      </div>\r\n    </div>\r\n  </>\r\n);\r\nconst List = ({ photos = [], setIsOpen, setStartIndex }) => {\r\n  const remainingPhotos = photos.length - 5 > 0 ? photos.length - 5 : 0;\r\n  return (\r\n    <>\r\n      <div className=\"grid grid-cols-6 grid-rows-2 gap-2 h-128 overflow-hidden\">\r\n        <div\r\n          className=\"col-span-3 w-full flex justify-center max-h-500 bg-gray-100 dark:bg-dark-third rounded-xl shadow-lg overflow-hidden\"\r\n          onClick={() => {\r\n            setIsOpen(true);\r\n            setStartIndex(0);\r\n          }}\r\n        >\r\n          <img\r\n            className=\"object-cover h-full w-full\"\r\n            src={photos[0]?.imageUrl}\r\n            alt={photos[0]?.caption ?? `Post photo 1`}\r\n          />\r\n        </div>\r\n        <div\r\n          className=\"col-span-3 w-full flex justify-center max-h-500 bg-gray-100 dark:bg-dark-third rounded-xl shadow-lg overflow-hidden\"\r\n          onClick={() => {\r\n            setIsOpen(true);\r\n            setStartIndex(1);\r\n          }}\r\n        >\r\n          <img\r\n            className=\"object-cover h-full w-full\"\r\n            src={photos[1]?.imageUrl}\r\n            alt={photos[1]?.caption ?? `Post photo 2`}\r\n          />\r\n        </div>\r\n        <div\r\n          className=\"col-span-2 w-full flex justify-center max-h-500 bg-gray-100 dark:bg-dark-third rounded-xl shadow-lg overflow-hidden\"\r\n          onClick={() => {\r\n            setIsOpen(true);\r\n            setStartIndex(2);\r\n          }}\r\n        >\r\n          <img\r\n            className=\"object-cover h-full w-full\"\r\n            src={photos[2]?.imageUrl}\r\n            alt={photos[2]?.caption ?? `Post photo 3`}\r\n          />\r\n        </div>\r\n        <div\r\n          className=\"col-span-2 w-full flex justify-center max-h-500 bg-gray-100 dark:bg-dark-third rounded-xl shadow-lg overflow-hidden\"\r\n          onClick={() => {\r\n            setIsOpen(true);\r\n            setStartIndex(3);\r\n          }}\r\n        >\r\n          <img\r\n            className=\"object-cover h-full w-full\"\r\n            src={photos[3]?.imageUrl}\r\n            alt={photos[3]?.caption ?? `Post photo 4`}\r\n          />\r\n        </div>\r\n        <div\r\n          className=\"relative col-span-2 w-full flex justify-center max-h-500 bg-gray-100 dark:bg-dark-third rounded-xl shadow-lg overflow-hidden\"\r\n          onClick={() => {\r\n            setIsOpen(true);\r\n            setStartIndex(4);\r\n          }}\r\n        >\r\n          <img\r\n            className=\"object-cover h-full w-full\"\r\n            src={photos[4]?.imageUrl}\r\n            alt={photos[4]?.caption ?? `Post photo 5`}\r\n          />\r\n          {remainingPhotos > 0 && (\r\n            <div className=\"absolute inset-0 bg-black bg-opacity-40 grid place-items-center text-xl md:text-2xl font-bold\">\r\n              +{remainingPhotos}\r\n            </div>\r\n          )}\r\n        </div>\r\n      </div>\r\n    </>\r\n  );\r\n};\r\n","import usePostApi from \"hooks/usePostApi\";\r\nimport React from \"react\";\r\nimport { ReactionIcon, ReactionName, ReactionType } from \"utils/Enums\";\r\n\r\nfunction ReactionInput({ className = \"\", reacted, postId, setIsOpen }) {\r\n  const postApi = usePostApi();\r\n\r\n  const addReaction = (type) => {\r\n    if (!reacted) {\r\n      postApi.addReaction(postId, { type });\r\n    } else if (reacted && reacted.type !== type) {\r\n      postApi.updateReaction(postId, { type });\r\n    }\r\n    setIsOpen(false);\r\n  };\r\n  return (\r\n    <>\r\n      <div\r\n        className={\r\n          className +\r\n          \" \" +\r\n          \"flex animate-swipeUp space-x-2 rounded-3xl bg-white dark:bg-dark-secondary shadow border-2 border-gray-100 dark:border-dark-third p-1 transition-base z-50\"\r\n        }\r\n      >\r\n        {Object.values(ReactionType).map((type) => (\r\n          <Reaction\r\n            key={\"Reaction \" + type}\r\n            addReaction={addReaction}\r\n            type={type}\r\n            src={ReactionIcon[type]}\r\n            alt={ReactionName[type]}\r\n          />\r\n        ))}\r\n      </div>\r\n    </>\r\n  );\r\n}\r\n\r\nconst Reaction = ({ type, src, alt, addReaction }) => (\r\n  <div\r\n    onClick={() => addReaction(type)}\r\n    className=\"group relative w-10 hover:scale-125 hover:-translate-y-2 hover:transform origin-bottom transition-all duration-300 ease-in-out\"\r\n  >\r\n    <div className=\"animate-fadeIn group-hover:block absolute bottom-full left-1/2 hidden bg-black dark:bg-white dark:bg-opacity-80 bg-opacity-60 px-1 rounded-xl transform -translate-y-1 -translate-x-1/2 text-white dark:text-black text-tiny\">\r\n      {alt}\r\n    </div>\r\n    <img src={src} alt={alt} className=\"w-full h-full\" />\r\n  </div>\r\n);\r\n\r\nexport default ReactionInput;\r\n","import ClickableIcon from \"components/ClickableIcon\";\r\nimport ConfirmModal from \"components/ConfirmModal\";\r\nimport ImageCircle from \"components/ImageCircle\";\r\nimport usePostApi from \"hooks/usePostApi\";\r\nimport moment from \"moment\";\r\nimport React, { useEffect, useRef, useState } from \"react\";\r\nimport { useSelector } from \"react-redux\";\r\nimport { Link } from \"react-router-dom\";\r\nimport {\r\n  PrivacyIcon,\r\n  ReactionColor,\r\n  ReactionIcon,\r\n  ReactionName,\r\n  ReactionType,\r\n} from \"utils/Enums\";\r\nimport { groupBy } from \"utils/ExtensionMethod\";\r\nimport CommentInput from \"../CommentInput\";\r\nimport CommentList from \"../CommentList\";\r\nimport PhotoList from \"../PhotoList\";\r\nimport ReactionInput from \"../ReactionInput\";\r\n\r\nfunction Post({ post }) {\r\n  const currentUser = useSelector((state) => state.users.currentUser);\r\n  const [isOpenReaction, setIsOpenReaction] = useState(false);\r\n  const [isOpenCommentList, setIsOpenCommentList] = useState(false);\r\n  const [isOpenMenu, setIsOpenMenu] = useState(false);\r\n  const [isOpenConfirm, setIsOpenConfirm] = useState(false);\r\n  const [topThreeType, setTopThreeType] = useState();\r\n  const postApi = usePostApi();\r\n  const ref = useRef();\r\n  const reactionRef = useRef();\r\n\r\n  const reacted = post?.reactions?.find(\r\n    (x) => x.creator.userName === currentUser.userName,\r\n  );\r\n\r\n  const addLike = () => {\r\n    if (!reacted) {\r\n      postApi.addReaction(post.id, { type: ReactionType.LIKE });\r\n    } else if (reacted && reacted.type !== ReactionType.LIKE) {\r\n      postApi.updateReaction(post.id, { type: ReactionType.LIKE });\r\n    }\r\n  };\r\n  const deleteReaction = () => {\r\n    if (reacted) {\r\n      postApi.deleteReaction(post.id);\r\n    }\r\n  };\r\n  const topThreeReaction = (post) => {\r\n    const group = groupBy(post.reactions, [\"type\"]);\r\n    var topThree = [];\r\n    for (const key in group) {\r\n      topThree.push({ type: key, total: group[key].length });\r\n    }\r\n\r\n    return topThree\r\n      .sort((a, b) => (a.total > b.total ? 1 : -1))\r\n      .slice(0, 3)\r\n      .map((x) => x.type);\r\n  };\r\n  useEffect(() => {\r\n    setTopThreeType(topThreeReaction(post));\r\n  }, [post]);\r\n\r\n  useEffect(() => {\r\n    const checkIfClickedOutside = (e) => {\r\n      if (isOpenMenu && ref.current && !ref.current.contains(e.target)) {\r\n        setIsOpenMenu(false);\r\n      }\r\n    };\r\n    document.addEventListener(\"mousedown\", checkIfClickedOutside);\r\n    return () => {\r\n      document.removeEventListener(\"mousedown\", checkIfClickedOutside);\r\n    };\r\n  }, [isOpenMenu]);\r\n\r\n  const deletePost = () => {\r\n    if (post.id) {\r\n      postApi.deletePost(post.id);\r\n    }\r\n  };\r\n  return (\r\n    <>\r\n      {isOpenConfirm && (\r\n        <ConfirmModal\r\n          isOpen={isOpenConfirm}\r\n          closeAction={() => setIsOpenConfirm(false)}\r\n          title=\"Are you sure?\"\r\n          content=\"Do you want to delete this post?\"\r\n          confirmButtonTitle=\"Yes\"\r\n          confirmButtonAction={() => deletePost()}\r\n        />\r\n      )}\r\n      <div className=\"py-4 px-5 bg-white dark:bg-dark-secondary border dark:border-dark-hover w-full flex flex-col justify-start items-start space-y-4 rounded-xl shadow\">\r\n        <div className=\"flex justify-between items-center w-full\">\r\n          <div className=\"flex space-x-2\">\r\n            <Link\r\n              className=\"font-semibold text-sm cursor-pointer\"\r\n              to={`/profile/${post.creator.userName}`}\r\n            >\r\n              <ImageCircle\r\n                src={post.creator.avatarUrl}\r\n                userName={post?.creator?.userName}\r\n              />\r\n            </Link>\r\n            <div className=\"flex flex-col justify-evenly\">\r\n              <Link\r\n                className=\"font-semibold text-sm cursor-pointer hover:underline\"\r\n                to={`/profile/${post.creator.userName}`}\r\n              >\r\n                {post.creator.fullName}\r\n              </Link>\r\n              <Link\r\n                className=\"text-xs text-gray-500 dark:text-dark-txt hover:underline space-x-2\"\r\n                to={`/post/${post.id}`}\r\n              >\r\n                <span>\r\n                  {moment(new Date(post?.dateCreated), \"YYYYMMDD\")\r\n                    .fromNow()\r\n                    ?.replace(\"ago\", \"\")\r\n                    ?.trim()}\r\n                </span>\r\n                <i className={PrivacyIcon[post?.privacy]}></i>\r\n              </Link>\r\n            </div>\r\n          </div>\r\n          {post?.creator?.userName === currentUser?.userName && (\r\n            <div className=\"relative\" ref={ref}>\r\n              <ClickableIcon\r\n                iconClass=\"bx bx-dots-horizontal-rounded\"\r\n                secondMode\r\n                onClick={() => setIsOpenMenu(!isOpenMenu)}\r\n              />\r\n              {isOpenMenu && (\r\n                <div className=\"animate-fadeIn transition-base absolute top-full right-0 border border-gray-200 bg-white w-48 rounded-lg shadow-lg overflow-hidden p-2 dark:bg-dark-secondary dark:border-dark-hover mt-2 select-none z-10\">\r\n                  <button className=\"flex items-center space-x-3 w-full pl-2 pr-4 py-2 rounded-md text-left hover:bg-gray-100 active:bg-gray-200 transition-base transform active:scale-95 dark:hover:bg-dark-third\">\r\n                    <i className=\"text-center-middle bx bx-edit-alt text-center text-xl align-middle text-black dark:text-dark-txt w-7 h-7\"></i>\r\n                    <span>Edit post</span>\r\n                  </button>\r\n                  <button\r\n                    className=\"flex items-center space-x-3 w-full pl-2 pr-4 py-2 rounded-md text-left hover:bg-gray-100 active:bg-gray-200 transition-base transform active:scale-95 dark:hover:bg-dark-third\"\r\n                    onClick={() => setIsOpenConfirm(true)}\r\n                  >\r\n                    <i className=\"text-center-middle bx bx-trash text-center text-xl align-middle text-black dark:text-dark-txt w-7 h-7\"></i>\r\n                    <span>Delete post</span>\r\n                  </button>\r\n                </div>\r\n              )}\r\n            </div>\r\n          )}\r\n        </div>\r\n        <span className=\"text-sm break-words overflow-ellipsis max-w-full\">\r\n          {post.content}\r\n        </span>\r\n\r\n        {post?.photos?.length > 0 && (\r\n          <div className=\"w-full max-h-500 cursor-pointer\">\r\n            <PhotoList photos={post.photos} />{\" \"}\r\n          </div>\r\n        )}\r\n\r\n        <div className=\"flex justify-between w-full text-xs text-gray-500 hover:underline\">\r\n          <div className=\"cursor-pointer flex space-x-1\">\r\n            <div className=\"flex\">\r\n              {topThreeType &&\r\n                topThreeType.map((type, index) => (\r\n                  <div\r\n                    key={type}\r\n                    className={\"w-5 h-5 \" + (index > 0 ? \"z-0\" : \"z-10\")}\r\n                  >\r\n                    <img\r\n                      src={ReactionIcon[type]}\r\n                      alt={ReactionName[type]}\r\n                      className={\r\n                        \"w-full h-full border-2 border-white dark:border-dark-secondary rounded-full\" +\r\n                        \" \" +\r\n                        (index > 0 ? \"transform -translate-x-1\" : \"\")\r\n                      }\r\n                    />\r\n                  </div>\r\n                ))}\r\n            </div>\r\n            <span className=\"cursor-pointer text-gray-500 dark:text-dark-txt\">\r\n              {post?.reactions?.length > 0 && post?.reactions?.length}\r\n            </span>\r\n          </div>\r\n          <span\r\n            className=\"cursor-pointer text-gray-500 dark:text-dark-txt\"\r\n            onClick={() => setIsOpenCommentList((preState) => !preState)}\r\n          >\r\n            {post?.comments?.length > 0 &&\r\n              post?.comments?.length +\r\n                \" comment\" +\r\n                (post?.comments?.length > 1 ? \"s\" : \"\")}\r\n          </span>\r\n        </div>\r\n        <div className=\"w-full text-center flex justify-between select-none cursor-pointer py-1 border-t border-b dark:border-dark-third space-x-1 text-gray-600 dark:text-dark-txt font-semibold text-sm\">\r\n          <span\r\n            className=\"relative flex-1 transition-base\"\r\n            ref={reactionRef}\r\n            onMouseOver={() => setIsOpenReaction(true)}\r\n            onMouseLeave={() => setIsOpenReaction(false)}\r\n          >\r\n            {isOpenReaction && (\r\n              <ReactionInput\r\n                setIsOpen={setIsOpenReaction}\r\n                reactionRef={reactionRef}\r\n                postId={post.id}\r\n                reacted={reacted}\r\n                className=\"absolute bottom-full left-0\"\r\n              />\r\n            )}\r\n            {reacted ? (\r\n              <>\r\n                <div\r\n                  className=\"w-full p-1 bg-white hover:bg-gray-100 active:bg-gray-200 dark:bg-dark-secondary dark:hover:bg-dark-third dark:active:bg-dark-hover rounded-lg transition-base\"\r\n                  onClick={deleteReaction}\r\n                >\r\n                  <div className=\"flex-center space-x-2\">\r\n                    <div className=\"w-5\">\r\n                      <img\r\n                        src={ReactionIcon[reacted.type]}\r\n                        alt={ReactionName[reacted.type]}\r\n                        className=\"animate-popup w-full h-full\"\r\n                      />\r\n                    </div>\r\n\r\n                    <span className={ReactionColor[reacted.type]}>\r\n                      {ReactionName[reacted.type]}\r\n                    </span>\r\n                  </div>\r\n                </div>\r\n              </>\r\n            ) : (\r\n              <div\r\n                className=\"w-full p-1 bg-white hover:bg-gray-100 active:bg-gray-200 dark:bg-dark-secondary dark:hover:bg-dark-third dark:active:bg-dark-hover rounded-lg transition-base\"\r\n                onClick={addLike}\r\n              >\r\n                <span>\r\n                  <i className=\"bx bx-like mr-2 text-lg align-middle mb-1\"></i>\r\n                  Like\r\n                </span>\r\n              </div>\r\n            )}\r\n          </span>\r\n          <span\r\n            className=\"flex-1 p-1 bg-white hover:bg-gray-100 active:bg-gray-200 dark:bg-dark-secondary dark:hover:bg-dark-third dark:active:bg-dark-hover rounded-lg transition-base\"\r\n            onClick={() => setIsOpenCommentList((preState) => !preState)}\r\n          >\r\n            <i className=\"bx bx-comment mr-2 text-lg align-middle \"></i>\r\n            Comment\r\n          </span>\r\n          <span className=\"flex-1 p-1 bg-white hover:bg-gray-100 active:bg-gray-200 dark:bg-dark-secondary dark:hover:bg-dark-third dark:active:bg-dark-hover rounded-lg transition-base \">\r\n            <i className=\"bx bx-share bx-flip-horizontal mr-2 text-lg align-middle\"></i>\r\n            Share\r\n          </span>\r\n        </div>\r\n        <CommentInput postId={post.id} currentUser={currentUser} />\r\n        <CommentList\r\n          postId={post.id}\r\n          comments={post.comments}\r\n          isOpen={isOpenCommentList}\r\n          currentUser={currentUser}\r\n        />\r\n      </div>\r\n    </>\r\n  );\r\n}\r\n\r\nexport default React.memo(Post);\r\n","export const groupBy = function (xs, key) {\r\n  return xs.reduce(function (rv, x) {\r\n    (rv[x[key]] = rv[x[key]] || []).push(x);\r\n    return rv;\r\n  }, {});\r\n};\r\n","import Pagination from \"components/Pagination\";\r\nimport SideBar from \"features/Home/components/SideBar\";\r\nimport usePostPagination from \"hooks/usePostPagination\";\r\nimport React, { useState } from \"react\";\r\nimport CreatePost from \"./components/CreatePost\";\r\nimport Post from \"./components/Post\";\r\n\r\nfunction Home() {\r\n  const [page, setPage] = useState(1);\r\n  const { posts, isHasMore, isLoading, error } = usePostPagination(page);\r\n\r\n  function loadMore() {\r\n    if (isHasMore) {\r\n      setPage((prevPage) => prevPage + 1);\r\n    }\r\n  }\r\n  return (\r\n    <>\r\n      <div className=\"container grid md:grid-cols-12 xl:gap-16 lg:gap-10 md:gap-6 animate-fadeIn\">\r\n        <SideBar className=\"hidden md:block md:col-span-3 sticky top-20\" />\r\n        <div className=\"md:col-span-9 lg:col-span-6 w-full mx-auto space-y-4\">\r\n          <CreatePost />\r\n          {[...posts?.items]\r\n            ?.sort((a, b) => (a.dateCreated < b.dateCreated ? 1 : -1))\r\n            ?.map((post) => (\r\n              <Post key={post.id} post={post} />\r\n            ))}\r\n          <Pagination\r\n            loadMoreClassName=\"bg-gray-200 hover:bg-gray-300\"\r\n            onClick={loadMore}\r\n            isLoading={isLoading}\r\n            error={error}\r\n            isHasMore={isHasMore}\r\n            loadMoreContent=\"Load more posts...\"\r\n          />\r\n          {posts?.totalRecords <= 0 && (\r\n            <div className=\"text-center py-3\">\r\n              Not found any posts. You should create first post or add more\r\n              friends\r\n            </div>\r\n          )}\r\n        </div>\r\n        <SideBar className=\"hidden lg:block md:col-span-3 sticky top-20\" />\r\n      </div>\r\n    </>\r\n  );\r\n}\r\n\r\nexport default Home;\r\n","import { useEffect, useState } from \"react\";\r\nimport usePostApi from \"hooks/usePostApi\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { loadPost, refreshPost } from \"app/postSlice\";\r\n\r\nexport default function usePostPagination(page = 1) {\r\n  const [isLoading, setIsLoading] = useState(false);\r\n  const [error, setError] = useState(\"\");\r\n  const posts = useSelector((state) => state.posts.posts);\r\n  const [isHasMore, setIsHasMore] = useState(true);\r\n\r\n  const postApi = usePostApi();\r\n  const dispatch = useDispatch();\r\n\r\n  useEffect(() => {\r\n    if (isHasMore) {\r\n      setIsLoading(true);\r\n      setError(false);\r\n      postApi\r\n        .getAll({ page })\r\n        .then((response) => {\r\n          if (page > 1) {\r\n            dispatch(loadPost(response));\r\n          } else {\r\n            dispatch(refreshPost(response));\r\n          }\r\n          setIsHasMore(page < response.pageCount);\r\n          setIsLoading(false);\r\n        })\r\n        .catch((e) => {\r\n          setError(e);\r\n        });\r\n    }\r\n  }, [page]);\r\n\r\n  return { posts, isLoading, error, isHasMore };\r\n}\r\n","export default __webpack_public_path__ + \"static/media/logo-circle.97246462.png\";","import { useEffect, useState } from \"react\";\r\n\r\nfunction useDarkMode() {\r\n  const [darkMode, setDarkMode] = useState(false);\r\n\r\n  useEffect(() => {\r\n    var mode = window.localStorage.getItem(\"theme\");\r\n\r\n    if (mode === \"dark\") {\r\n      window.document.documentElement.classList.add(\"dark\");\r\n      setDarkMode(true);\r\n    }\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    if (darkMode) {\r\n      window.document.documentElement.classList.add(\"dark\");\r\n      window.localStorage.setItem(\"theme\", \"dark\");\r\n    } else {\r\n      window.document.documentElement.classList.remove(\"dark\");\r\n      window.localStorage.setItem(\"theme\", \"light\");\r\n    }\r\n  }, [darkMode]);\r\n\r\n  return { darkMode, setDarkMode };\r\n}\r\n\r\nexport default useDarkMode;\r\n","import { setIsLoading } from \"app/appSlice.js\";\r\nimport { useDispatch } from \"react-redux\";\r\nimport useApi from \"./useApi.js\";\r\n\r\nconst baseApiUrl = \"/chats\";\r\n\r\nexport default function useChatApi() {\r\n  const Api = useApi();\r\n  const dispatch = useDispatch();\r\n\r\n  const chatApi = {\r\n    getAll: () => {\r\n      dispatch(setIsLoading(true));\r\n      const url = `${baseApiUrl}`;\r\n      return Api.get(url);\r\n    },\r\n    getById: (chatId, params) => {\r\n      dispatch(setIsLoading(true));\r\n      const url = `${baseApiUrl}/${chatId}`;\r\n      return Api.get(url, { params });\r\n    },\r\n    sendMessage: (chatId, content) => {\r\n      const url = `${baseApiUrl}/${chatId}/send`;\r\n      return Api.post(url, content);\r\n    },\r\n    readChat: (chatId) => {\r\n      const url = `${baseApiUrl}/${chatId}/read`;\r\n      return Api.patch(url);\r\n    },\r\n    sendImage: (chatId, content) => {\r\n      dispatch(setIsLoading(true));\r\n      const url = `${baseApiUrl}/${chatId}/sendImage`;\r\n\r\n      Api.interceptors.request.use(async (config) => {\r\n        var token = window.localStorage.getItem(\"token\");\r\n        var newConfig = {};\r\n        if (token) {\r\n          newConfig = {\r\n            ...config,\r\n            headers: {\r\n              \"content-type\": \"multipart/form-data\",\r\n              Authorization: `Bearer ${token}`,\r\n            },\r\n          };\r\n        }\r\n        return newConfig;\r\n      });\r\n      return Api.post(url, content);\r\n    },\r\n    updateGroupAvatar: (chatId, content) => {\r\n      dispatch(setIsLoading(true));\r\n      const url = `${baseApiUrl}/${chatId}/avatar`;\r\n\r\n      Api.interceptors.request.use(async (config) => {\r\n        var token = window.localStorage.getItem(\"token\");\r\n        var newConfig = {};\r\n        if (token) {\r\n          newConfig = {\r\n            ...config,\r\n            headers: {\r\n              \"content-type\": \"multipart/form-data\",\r\n              Authorization: `Bearer ${token}`,\r\n            },\r\n          };\r\n        }\r\n        return newConfig;\r\n      });\r\n      return Api.patch(url, content);\r\n    },\r\n    createGroupChat: (content) => {\r\n      content.groupName = content?.groupName?.substring(0, 99);\r\n\r\n      dispatch(setIsLoading(true));\r\n      const url = `${baseApiUrl}/group`;\r\n      return Api.post(url, content);\r\n    },\r\n    updateGroupChat: (chatId, content) => {\r\n      content.newGroupName = content?.newGroupName?.substring(0, 99);\r\n\r\n      dispatch(setIsLoading(true));\r\n      const url = `${baseApiUrl}/${chatId}`;\r\n      return Api.patch(url, content);\r\n    },\r\n    createPrivateChat: (content) => {\r\n      dispatch(setIsLoading(true));\r\n      const url = `${baseApiUrl}/private`;\r\n      return Api.post(url, content);\r\n    },\r\n  };\r\n  return chatApi;\r\n}\r\n","import { setIsLoading } from \"app/appSlice.js\";\r\nimport { useDispatch } from \"react-redux\";\r\nimport useApi from \"./useApi.js\";\r\n\r\nconst baseApiUrl = \"/users\";\r\n\r\nexport default function useUserApi() {\r\n  const Api = useApi();\r\n  const dispatch = useDispatch();\r\n\r\n  const userApi = {\r\n    login: (content) => {\r\n      dispatch(setIsLoading(true));\r\n      const url = `${baseApiUrl}/login`;\r\n      return Api.post(url, content);\r\n    },\r\n    register: (content) => {\r\n      content.firstName = content?.firstName?.substring(0, 49);\r\n      content.lastName = content?.lastName?.substring(0, 49);\r\n\r\n      dispatch(setIsLoading(true));\r\n      const url = `${baseApiUrl}/register`;\r\n      return Api.post(url, content);\r\n    },\r\n    checkUserNameExists: (userName) => {\r\n      if (userName) {\r\n        const url = `${baseApiUrl}/${userName}/isExists`;\r\n        return Api.get(url);\r\n      }\r\n      return Promise.reject();\r\n    },\r\n    getFriendList: () => {\r\n      const url = `${baseApiUrl}`;\r\n      return Api.get(url);\r\n    },\r\n    getCurrentUser: () => {\r\n      const url = `${baseApiUrl}/current`;\r\n      return Api.get(url);\r\n    },\r\n    updateUser: (content) => {\r\n      dispatch(setIsLoading(true));\r\n      const url = `${baseApiUrl}`;\r\n      Api.interceptors.request.use(async (config) => {\r\n        var token = window.localStorage.getItem(\"token\");\r\n        var newConfig = {};\r\n        if (token) {\r\n          newConfig = {\r\n            ...config,\r\n            headers: {\r\n              \"content-type\": \"multipart/form-data\",\r\n              Authorization: `Bearer ${token}`,\r\n            },\r\n          };\r\n        }\r\n        return newConfig;\r\n      });\r\n      return Api.put(url, content);\r\n    },\r\n  };\r\n  return userApi;\r\n}\r\n","import { addSelectedId } from \"app/chatSlice\";\r\nimport Button from \"components/Button\";\r\nimport ImageCircle from \"components/ImageCircle\";\r\nimport useChatApi from \"hooks/useChatApi\";\r\nimport useUserApi from \"hooks/useUserApi\";\r\nimport React, { useEffect, useRef, useState } from \"react\";\r\nimport { useDispatch } from \"react-redux\";\r\nimport { DefaultName } from \"utils/Constants\";\r\nimport { ChatType } from \"utils/Enums\";\r\n\r\nfunction CreateChat({ isOpen, setIsOpen }) {\r\n  const [selectedMode, setSelectedMode] = useState(ChatType.PRIVATE);\r\n  const [isOpenFriendList, setIsOpenFriendList] = useState(false);\r\n  const [isValidButton, setIsValidButton] = useState(false);\r\n  const [groupName, setGroupName] = useState(\"\");\r\n  const [keyword, setKeyword] = useState(\"\");\r\n  const [friendList, setFriendList] = useState([]);\r\n  const [selectedFriendList, setSelectedFriendList] = useState([]);\r\n\r\n  const ref = useRef();\r\n  const friendListRef = useRef();\r\n  const dispatch = useDispatch();\r\n\r\n  const chatApi = useChatApi();\r\n  const userApi = useUserApi();\r\n\r\n  useEffect(() => {\r\n    const checkIfClickedOutside = (e) => {\r\n      // If the menu is open and the clicked target is not within the menu,\r\n      // then close the menu\r\n      if (isOpen && ref.current && !ref.current.contains(e.target)) {\r\n        setIsOpen(false);\r\n      }\r\n    };\r\n    document.addEventListener(\"mousedown\", checkIfClickedOutside);\r\n    return () => {\r\n      // Cleanup the event listener\r\n      document.removeEventListener(\"mousedown\", checkIfClickedOutside);\r\n    };\r\n  }, [isOpen]);\r\n  useEffect(() => {\r\n    const checkIfClickedOutside = (e) => {\r\n      // If the menu is open and the clicked target is not within the menu,\r\n      // then close the menu\r\n      if (\r\n        isOpenFriendList &&\r\n        friendListRef.current &&\r\n        !friendListRef.current.contains(e.target)\r\n      ) {\r\n        setIsOpenFriendList(false);\r\n      }\r\n    };\r\n    document.addEventListener(\"mousedown\", checkIfClickedOutside);\r\n    return () => {\r\n      // Cleanup the event listener\r\n      document.removeEventListener(\"mousedown\", checkIfClickedOutside);\r\n    };\r\n  }, [isOpenFriendList]);\r\n\r\n  useEffect(() => {\r\n    userApi.getFriendList().then((response) => {\r\n      if (response) {\r\n        setFriendList(response);\r\n      }\r\n    });\r\n    return () => {\r\n      setSelectedFriendList([]);\r\n      setGroupName(\"\");\r\n    };\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    if (selectedMode === ChatType.GROUP) {\r\n      var result = selectedFriendList?.length >= 2 && groupName?.trim();\r\n      setIsValidButton(result);\r\n    } else if (selectedMode === ChatType.PRIVATE) {\r\n      setIsValidButton(selectedFriendList?.length !== 0 ? true : false);\r\n    }\r\n  }, [selectedFriendList, groupName, selectedMode]);\r\n  // Esc to cancel view\r\n  function escFunction(e) {\r\n    if (e.keyCode === 27) {\r\n      setIsOpen(false);\r\n    }\r\n  }\r\n  useEffect(() => {\r\n    document.addEventListener(\"keydown\", escFunction, false);\r\n    return () => {\r\n      document.removeEventListener(\"keydown\", escFunction, false);\r\n    };\r\n  }, []);\r\n  async function handleCreateGroup() {\r\n    if (isValidButton) {\r\n      if (selectedMode === ChatType.GROUP) {\r\n        const request = {\r\n          participantUserNames: selectedFriendList.map((x) => x.userName),\r\n          name: groupName,\r\n        };\r\n        chatApi.createGroupChat(request).then((response) => {\r\n          if (response.id) {\r\n            dispatch(addSelectedId(response.id));\r\n          }\r\n          setSelectedFriendList([]);\r\n          setGroupName(\"\");\r\n          setIsOpen(false);\r\n        });\r\n      } else if (selectedMode === ChatType.PRIVATE) {\r\n        const request = {\r\n          participantUserName: selectedFriendList\r\n            .map((x) => x.userName)\r\n            .shift(),\r\n        };\r\n        chatApi.createPrivateChat(request).then((response) => {\r\n          if (response.id) {\r\n            dispatch(addSelectedId(response.id));\r\n          }\r\n          setSelectedFriendList([]);\r\n          setGroupName(\"\");\r\n          setIsOpen(false);\r\n        });\r\n      }\r\n    }\r\n  }\r\n\r\n  return isOpen ? (\r\n    <div\r\n      className=\"overlay grid place-items-center px-4 py-10 z-30\"\r\n      style={{ margin: 0 }}\r\n    >\r\n      <div\r\n        ref={ref}\r\n        className={\r\n          \"animate-swipeDown px-6 md:px-14 md:py-6 flex flex-col bg-white dark:bg-dark-secondary dark:border-dark-third rounded-xl shadow-xl border border-gray-300 w-full md:w-5/6 lg:w-2/5 transition-all duration-300 ease-in-out max-h-full overflow-y-auto md:overflow-visible\" +\r\n          \" \" +\r\n          (isOpenFriendList ? \"mb-16\" : \"\")\r\n        }\r\n      >\r\n        <div className=\"flex pt-6 pb-5 justify-between h-full items-center\">\r\n          <h3 className=\"font-semibold text-lg md:text-2xl text-green-600 dark:text-green-400\">\r\n            New chat!\r\n          </h3>\r\n\r\n          <div className=\"relative flex rounded-lg items-center border border-green-500 cursor-pointer overflow-hidden\">\r\n            <div\r\n              className={\r\n                \"absolute bg-gradient-to-br from-green-400 to-green-600 w-1/2 h-full rounded transition-base z-0\" +\r\n                \" \" +\r\n                (selectedMode === ChatType.GROUP\r\n                  ? \"transform translate-x-full left-0\"\r\n                  : \"left-0 \")\r\n              }\r\n            ></div>\r\n            <span\r\n              className={\r\n                \" px-3 py-2 z-10 text-xs md:text-sm select-none \" +\r\n                \" \" +\r\n                (selectedMode === ChatType.PRIVATE\r\n                  ? \"text-white\"\r\n                  : \" text-green-600 dark:text-green-400\")\r\n              }\r\n              onClick={() => setSelectedMode(ChatType.PRIVATE)}\r\n            >\r\n              Private\r\n            </span>\r\n            <span\r\n              className={\r\n                \" px-3 py-2 z-10 text-xs md:text-sm select-none \" +\r\n                \" \" +\r\n                (selectedMode === ChatType.GROUP\r\n                  ? \"text-white\"\r\n                  : \" text-green-600 dark:text-green-400\")\r\n              }\r\n              onClick={() => setSelectedMode(ChatType.GROUP)}\r\n            >\r\n              Group\r\n            </span>\r\n          </div>\r\n        </div>\r\n        <div className=\"space-y-2 md:space-y-4\">\r\n          {selectedMode === ChatType.GROUP ? (\r\n            <>\r\n              <div className=\"space-y-2\">\r\n                <label\r\n                  htmlFor=\"groupName\"\r\n                  className=\"font-semibold text-base md:text-lg dark:text-gray-200\"\r\n                >\r\n                  Group name <span className=\"text-red-500\">*</span>\r\n                </label>\r\n                <input\r\n                  id=\"groupName\"\r\n                  value={groupName}\r\n                  onChange={(e) => setGroupName(e.target.value)}\r\n                  type=\"text\"\r\n                  className=\"dark:bg-dark-third bg-gray-100 rounded-lg w-full py-2 px-3 focus:ring-2 focus:ring-green-500 focus:ring-opacity-50 outline-none transition-base mb-2 \"\r\n                />\r\n              </div>\r\n              <div ref={friendListRef} className=\"space-y-2\">\r\n                <label\r\n                  htmlFor=\"search\"\r\n                  className=\"font-semibold text-base md:text-lg dark:text-gray-200\"\r\n                >\r\n                  Find Friends\r\n                </label>\r\n                <div className=\"relative\">\r\n                  <input\r\n                    id=\"search\"\r\n                    type=\"search\"\r\n                    onFocus={() => setIsOpenFriendList(true)}\r\n                    value={keyword}\r\n                    autoComplete=\"off\"\r\n                    onChange={(e) => setKeyword(e.target.value)}\r\n                    className=\"dark:bg-dark-third bg-gray-100 rounded-lg w-full py-2 px-3 focus:ring-2 focus:ring-green-500 focus:ring-opacity-50 outline-none transition-base mb-2 \"\r\n                  />\r\n                  {isOpenFriendList && (\r\n                    <>\r\n                      <div className=\"animate-fadeIn absolute top-full bg-white dark:bg-dark-secondary dark:border-dark-hover border border-gray-300 border-opacity-50 rounded-lg w-full py-2 md:py-4 md:px-8 px-6 space-y-1 max-h-36 md:max-h-72 overflow-y-auto select-none z-10 shadow-2xl\">\r\n                        <h4 className=\"font-semibold mb-2 dark:text-gray-200\">\r\n                          Friend list\r\n                        </h4>\r\n                        {friendList\r\n                          .filter(\r\n                            (x) =>\r\n                              (x.fullName\r\n                                ?.toLowerCase()\r\n                                .includes(keyword?.toLowerCase()) ||\r\n                                x.userName\r\n                                  ?.toLowerCase()\r\n                                  .includes(keyword?.toLowerCase())) &&\r\n                              !selectedFriendList.some(\r\n                                (selected) => selected.userName === x.userName,\r\n                              ),\r\n                          )\r\n                          .sort((a, b) => a.fullName.localeCompare(b.fullName))\r\n                          .map((friend, index) => (\r\n                            <div\r\n                              onClick={() => {\r\n                                var result = [...selectedFriendList];\r\n                                if (\r\n                                  !result.some(\r\n                                    (x) => x.userName === friend.userName,\r\n                                  )\r\n                                ) {\r\n                                  result.push(friend);\r\n                                  setSelectedFriendList(result);\r\n                                }\r\n                              }}\r\n                              key={index + friend?.userName}\r\n                              className=\"h-full w-full rounded-lg px-3 py-2 flex items-center space-x-2  dark:bg-dark-third bg-gray-100 hover:bg-green-200 dark:hover:bg-green-600 cursor-pointer transform active:scale-100 hover:scale-105 hover:shadow-xl transition-all duration-300 ease-in-out\"\r\n                            >\r\n                              <ImageCircle\r\n                                size=\"xs\"\r\n                                src={friend.avatarUrl}\r\n                                userName={friend?.userName}\r\n                              />\r\n                              <span className=\"break-full w-full overflow-ellipsis truncate md:text-base text-sm\">\r\n                                {friend.fullName ?? DefaultName.NO_NAME_USER}\r\n                              </span>\r\n                            </div>\r\n                          ))}\r\n                      </div>\r\n                    </>\r\n                  )}\r\n                </div>\r\n              </div>\r\n              <div className=\"space-y-2\">\r\n                <label\r\n                  htmlFor=\"search\"\r\n                  className=\"font-semibold text-base md:text-lg dark:text-gray-200\"\r\n                >\r\n                  Selected <span className=\"text-red-500\">*</span>{\" \"}\r\n                  <span className=\"text-sm text-gray-400\">\r\n                    {\"(At least 2 people. Click to remove)\"}\r\n                  </span>\r\n                </label>\r\n                <div className=\"bg-white dark:bg-dark-secondary border dark:border-dark-hover border-gray-400 border-opacity-50 rounded-lg w-full py-4 md:px-8 px-6 space-y-1 max-h-48 md:max-h-72 overflow-y-auto select-none\">\r\n                  {selectedFriendList\r\n                    .sort((a, b) => a.fullName.localeCompare(b.fullName))\r\n                    .map((friend, index) => (\r\n                      <div\r\n                        onClick={() => {\r\n                          var result = [...selectedFriendList];\r\n                          var i = result.findIndex(\r\n                            (x) => x.userName === friend.userName,\r\n                          );\r\n                          if (i >= 0) {\r\n                            result.splice(i, 1);\r\n                            setSelectedFriendList(result);\r\n                          }\r\n                        }}\r\n                        key={index + friend?.userName}\r\n                        className=\"h-full w-full rounded-lg px-3 py-2 flex items-center space-x-2  dark:bg-dark-third bg-gray-100 hover:bg-red-200 dark:hover:bg-red-500 cursor-pointer transform active:scale-100 hover:scale-105 hover:shadow-xl transition-all duration-300 ease-in-out\"\r\n                      >\r\n                        <ImageCircle\r\n                          size=\"xs\"\r\n                          src={friend.avatarUrl}\r\n                          userName={friend?.userName}\r\n                        />\r\n                        <span className=\"break-full w-full overflow-ellipsis truncate md:text-base text-sm\">\r\n                          {friend.fullName ?? DefaultName.NO_NAME_USER}\r\n                        </span>\r\n                      </div>\r\n                    ))}\r\n                </div>\r\n              </div>\r\n            </>\r\n          ) : (\r\n            <div ref={friendListRef} className=\"space-y-2\">\r\n              <label\r\n                htmlFor=\"selectFriend\"\r\n                className=\"font-semibold md:text-lg dark:text-gray-200\"\r\n              >\r\n                Select Friends\r\n              </label>\r\n              <div className=\"relative\">\r\n                <input\r\n                  id=\"selectFriend\"\r\n                  type=\"search\"\r\n                  onFocus={() => setIsOpenFriendList(true)}\r\n                  value={keyword}\r\n                  autoComplete=\"off\"\r\n                  onChange={(e) => setKeyword(e.target.value)}\r\n                  className=\"dark:bg-dark-third bg-gray-100 rounded-lg w-full py-2 px-3 focus:ring-2 focus:ring-green-500 focus:ring-opacity-50 outline-none transition-base mb-2 \"\r\n                />\r\n                {isOpenFriendList && (\r\n                  <>\r\n                    <div className=\"animate-fadeIn absolute top-full bg-white dark:bg-dark-secondary border border-gray-400 border-opacity-50 rounded-lg w-full space-y-1 max-h-36 md:max-h-72 overflow-y-auto select-none z-10 shadow-2xl py-2 md:py-4 md:px-8 px-6\">\r\n                      <h4 className=\"font-semibold mb-2 text-start dark:text-gray-200\">\r\n                        Friend list\r\n                      </h4>\r\n                      {friendList\r\n                        .sort((a, b) => a.fullName.localeCompare(b.fullName))\r\n                        .filter(\r\n                          (x) =>\r\n                            (x.fullName\r\n                              ?.toLowerCase()\r\n                              .includes(keyword?.toLowerCase()) ||\r\n                              x.userName\r\n                                ?.toLowerCase()\r\n                                .includes(keyword?.toLowerCase())) &&\r\n                            !selectedFriendList.some(\r\n                              (selected) => selected.userName === x.userName,\r\n                            ),\r\n                        )\r\n                        .map((friend, index) => (\r\n                          <div\r\n                            onClick={() => {\r\n                              var result = [];\r\n                              result.push(friend);\r\n                              setIsOpenFriendList(false);\r\n                              setSelectedFriendList(result);\r\n                            }}\r\n                            key={index + friend?.userName}\r\n                            className=\"h-full w-full rounded-lg px-3 py-2 flex items-center space-x-2  dark:bg-dark-third bg-gray-100 hover:bg-green-200 dark:hover:bg-green-600 cursor-pointer transform active:scale-100 hover:scale-105 hover:shadow-xl transition-all duration-300 ease-in-out\"\r\n                          >\r\n                            <ImageCircle\r\n                              size=\"xs\"\r\n                              src={friend.avatarUrl}\r\n                              userName={friend?.userName}\r\n                            />\r\n                            <span className=\"break-full w-full overflow-ellipsis truncate text-sm md:text-base\">\r\n                              {friend.fullName ?? DefaultName.NO_NAME_USER}\r\n                            </span>\r\n                          </div>\r\n                        ))}\r\n                    </div>\r\n                  </>\r\n                )}\r\n              </div>\r\n              <div className=\"space-y-2\">\r\n                <label\r\n                  htmlFor=\"search\"\r\n                  className=\"font-semibold md:text-lg dark:text-gray-200\"\r\n                >\r\n                  Selected <span className=\"text-red-500\">*</span>{\" \"}\r\n                  <span className=\"text-sm text-gray-400\">\r\n                    {\"(Click to remove)\"}\r\n                  </span>\r\n                </label>\r\n                <div className=\"bg-white dark:bg-dark-secondary border dark:border-dark-hover border-gray-400 border-opacity-50 rounded-lg w-full py-4 md:px-8 px-6 space-y-1 max-h-48 md:max-h-72 overflow-y-auto select-none \">\r\n                  {[...selectedFriendList].map((friend, index) => {\r\n                    if (index === 0) {\r\n                      return (\r\n                        <div\r\n                          onClick={() => {\r\n                            var result = [...selectedFriendList];\r\n                            var i = result.findIndex(\r\n                              (x) => x.userName === friend.userName,\r\n                            );\r\n                            if (i >= 0) {\r\n                              result.splice(i, 1);\r\n                              setSelectedFriendList(result);\r\n                            }\r\n                          }}\r\n                          key={index + friend?.userName}\r\n                          className=\"h-full w-full rounded-lg px-3 py-2 flex items-center space-x-2  dark:bg-dark-third bg-gray-100 hover:bg-red-200 cursor-pointer transform active:scale-100 hover:scale-105 hover:shadow-xl transition-all duration-300 ease-in-out dark:hover:bg-red-500\"\r\n                        >\r\n                          <ImageCircle\r\n                            size=\"xs\"\r\n                            src={friend.avatarUrl}\r\n                            userName={friend?.userName}\r\n                          />\r\n                          <span className=\"break-full w-full overflow-ellipsis truncate md:text-base text-sm\">\r\n                            {friend.fullName ?? DefaultName.NO_NAME_USER}\r\n                          </span>\r\n                        </div>\r\n                      );\r\n                    } else {\r\n                      return <></>;\r\n                    }\r\n                  })}\r\n                </div>\r\n              </div>\r\n            </div>\r\n          )}\r\n        </div>\r\n        <div className=\"flex justify-end py-6 space-x-4\">\r\n          <div className=\"space-x-2 flex items-center\">\r\n            <Button outline content=\"Close\" onClick={() => setIsOpen(false)} />\r\n            <Button\r\n              disabled={!isValidButton}\r\n              content=\"Create\"\r\n              onClick={() => handleCreateGroup()}\r\n            />\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  ) : (\r\n    \"\"\r\n  );\r\n}\r\n\r\nexport default CreateChat;\r\n","import { addSelectedId } from \"app/chatSlice\";\r\nimport ClickableIcon from \"components/ClickableIcon\";\r\nimport ImageCircle from \"components/ImageCircle\";\r\nimport moment from \"moment\";\r\nimport React, { useEffect, useState } from \"react\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { DefaultName } from \"utils/Constants\";\r\nimport { ChatType } from \"utils/Enums\";\r\nimport CreateChat from \"../CreateChat\";\r\n\r\nfunction ChatList({ className, setChatNotificationNumber }) {\r\n  const selectedIds = useSelector((state) => state.chats.selectedIds);\r\n  const currentUser = useSelector((state) => state.users.currentUser);\r\n  const dispatch = useDispatch();\r\n  const [isOpenCreateChat, setIsOpenCreateChat] = useState(false);\r\n  const chats = useSelector((state) => state.chats.chats);\r\n\r\n  const [keyword, setKeyword] = useState(\"\");\r\n\r\n  useEffect(() => {\r\n    if (chats) {\r\n      const num = chats.reduce((preNum, x) => {\r\n        return preNum + (x?.numOfUnreadMessages > 0 ? 1 : 0);\r\n      }, 0);\r\n      setChatNotificationNumber(num);\r\n    }\r\n  }, [chats]);\r\n\r\n  function handleClick(id) {\r\n    if (selectedIds && !selectedIds.includes(id)) {\r\n      const action = addSelectedId(id);\r\n      dispatch(action);\r\n    }\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <CreateChat isOpen={isOpenCreateChat} setIsOpen={setIsOpenCreateChat} />\r\n      <div\r\n        className={\r\n          className +\r\n          \" \" +\r\n          \"bg-white dark:bg-dark-secondary shadow-lg rounded-xl px-4 pt-4 pb-2 border dark:border-dark-hover\"\r\n        }\r\n      >\r\n        <div className=\"relative \">\r\n          <div className=\"flex space-x-2 justify-between items-center mb-3 \">\r\n            <input\r\n              type=\"search\"\r\n              className=\"rounded-3xl bg-gray-100 px-4 pl-10 pr-3 py-2 focus:ring-2 focus:ring-green-400 focus:ring-opacity-50 outline-none transition-base w-full dark:bg-dark-third dark:text-white\"\r\n              placeholder=\"Search TeeChat!\"\r\n              onChange={(e) => setKeyword(e.target.value)}\r\n            />\r\n            <ClickableIcon\r\n              iconClass=\"bx bxs-edit\"\r\n              onClick={() => setIsOpenCreateChat(true)}\r\n              className=\"dark:bg-dark-third bg-gray-100\"\r\n            />\r\n          </div>\r\n          <i className=\"bx bx-search absolute text-xl top-1/4 left-3 transform text-gray-400 cursor-pointer\"></i>\r\n        </div>\r\n\r\n        <div className=\"max-h-500 overflow-y-auto pr-2 pb-48 md:pb-0\">\r\n          {chats &&\r\n            getCurrentChats(chats, keyword).map((chat, index) => {\r\n              const currentUserName = currentUser.userName;\r\n\r\n              // check current user still exist in chat (remove participant case)\r\n              var isValid = chat?.participants.some(\r\n                (x) => x.userName === currentUserName,\r\n              );\r\n              if (!isValid) {\r\n                return;\r\n              }\r\n\r\n              const friend =\r\n                chat?.participants.length > 1\r\n                  ? chat?.participants\r\n                      ?.filter((x) => x.userName !== currentUserName)\r\n                      .shift()\r\n                  : currentUser;\r\n              let lastMessage = {};\r\n              if (chat.messages?.length !== 0) {\r\n                lastMessage = chat.messages?.reduce((a, b) =>\r\n                  a?.dateCreated > b?.dateCreated ? a : b,\r\n                );\r\n              }\r\n              return (\r\n                <div\r\n                  key={chat.id}\r\n                  className=\"relative select-none w-full h-16 flex flex-start items-center cursor-pointer hover:bg-gray-100 p-2 rounded-lg transition-base dark:hover:bg-dark-third dark:text-dark-txt\"\r\n                  onClick={() => handleClick(chat.id)}\r\n                >\r\n                  {chat.numOfUnreadMessages > 0 && (\r\n                    <span className=\"w-6 h-6 absolute right-2 top-1/2 text-xs font-bold p-1 bg-green-500 dark:bg-green-600 text-white rounded-full text-center align-middle\">\r\n                      {chat.numOfUnreadMessages > 9\r\n                        ? \"9+\"\r\n                        : chat.numOfUnreadMessages}\r\n                    </span>\r\n                  )}\r\n                  <ImageCircle\r\n                    src={\r\n                      chat?.type === ChatType.PRIVATE\r\n                        ? friend?.avatarUrl\r\n                        : chat?.groupAvatarUrl\r\n                    }\r\n                    participants={chat?.participants}\r\n                  />\r\n\r\n                  <div className=\"font-primary flex flex-col pl-3 justify-between items-start h-full truncate w-full\">\r\n                    <div className=\"flex justify-between items-center w-full min-w-0 space-x-3\">\r\n                      <span\r\n                        className={\r\n                          \"text-gray-800 truncate dark:text-dark-txt\" +\r\n                          \" \" +\r\n                          (chat.numOfUnreadMessages > 0 ? \"font-bold\" : \"\")\r\n                        }\r\n                      >\r\n                        {chat?.type === ChatType.PRIVATE\r\n                          ? friend?.fullName\r\n                          : chat?.name ?? DefaultName.NO_NAME_GROUP}\r\n                      </span>\r\n                      <span className=\"text-sm text-gray-500 truncate flex-shrink-0\">\r\n                        {moment(\r\n                          new Date(\r\n                            lastMessage?.dateCreated ?? chat?.dateCreated,\r\n                          ),\r\n                          \"YYYYMMDD\",\r\n                        )\r\n                          .fromNow()\r\n                          ?.replace(\"ago\", \"\")\r\n                          ?.trim()}\r\n                      </span>\r\n                    </div>\r\n                    <div className=\"flex\">\r\n                      <span\r\n                        className={\r\n                          \"mr-2 text-sm text-gray-500 truncate overflow-hidden flex-grow\" +\r\n                          \" \" +\r\n                          (chat.numOfUnreadMessages > 0\r\n                            ? \"font-bold mr-10\"\r\n                            : \"\")\r\n                        }\r\n                      >\r\n                        {lastMessage.content\r\n                          ? lastMessage.content\r\n                          : lastMessage.imageUrl\r\n                          ? \"Sent you an image\"\r\n                          : \"\"}\r\n                      </span>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              );\r\n            })}\r\n        </div>\r\n        <a\r\n          href={process.env.REACT_APP_CHAT_APP_URL}\r\n          target=\"_blank\"\r\n          rel=\"noreferrer\"\r\n          className=\"font-semibold text-center text-sm text-green-500 hover:text-green-600 cursor-pointer block pt-2 mt-3 border-t-2 border-gray-100 dark:border-dark-third transition-base\"\r\n        >\r\n          See all in TeeChat!\r\n        </a>\r\n      </div>\r\n    </>\r\n  );\r\n}\r\n\r\nexport default ChatList;\r\n\r\nfunction getCurrentChats(chats, keyword) {\r\n  var result = sortChat(chats);\r\n  result = searchChat(result, keyword);\r\n  return result;\r\n}\r\n\r\nfunction sortChat(chats) {\r\n  if (chats) {\r\n    return [...chats].sort((chatA, chatB) => {\r\n      let lastMessageA = {};\r\n      let lastMessageB = {};\r\n      // check if chat no message => return date created of chat\r\n      if (chatA.messages?.length !== 0) {\r\n        lastMessageA = chatA.messages?.reduce((a, b) => {\r\n          return a?.dateCreated > b?.dateCreated ? a : b;\r\n        });\r\n      } else {\r\n        lastMessageA.dateCreated = chatA?.dateCreated;\r\n      }\r\n      if (chatB.messages?.length !== 0) {\r\n        lastMessageB = chatB.messages?.reduce((a, b) =>\r\n          a?.dateCreated > b?.dateCreated ? a : b,\r\n        );\r\n      } else {\r\n        lastMessageB.dateCreated = chatB?.dateCreated;\r\n      }\r\n\r\n      return lastMessageA?.dateCreated < lastMessageB?.dateCreated ? 1 : -1;\r\n    });\r\n  }\r\n}\r\n\r\nfunction searchChat(chats, keyword) {\r\n  if (chats) {\r\n    return chats.filter((chat) => {\r\n      let isValid = chat?.participants.some((x) => {\r\n        if (\r\n          x.fullName.toLowerCase().includes(keyword.toLowerCase()) ||\r\n          x?.userName.toLowerCase().includes(keyword.toLowerCase())\r\n        ) {\r\n          return true;\r\n        }\r\n        return false;\r\n      });\r\n      return (\r\n        isValid || chat?.name?.toLowerCase().includes(keyword.toLowerCase())\r\n      );\r\n    });\r\n  }\r\n}\r\n","import { DefaultLimit } from \"utils/Constants.js\";\r\nimport useApi from \"./useApi.js\";\r\n\r\nconst baseApiUrl = \"/notifications\";\r\n\r\nexport default function useNotificationApi() {\r\n  const Api = useApi();\r\n\r\n  const notificationApi = {\r\n    getAll: (params) => {\r\n      if (!params?.limit) {\r\n        params = { ...params, limit: DefaultLimit.NOTIFICATION };\r\n      }\r\n      const url = `${baseApiUrl}`;\r\n      return Api.get(url, { params });\r\n    },\r\n    readAll: () => {\r\n      const url = `${baseApiUrl}/read`;\r\n      return Api.patch(url);\r\n    },\r\n    readById: (id) => {\r\n      const url = `${baseApiUrl}/${id}/read`;\r\n      return Api.patch(url);\r\n    },\r\n  };\r\n  return notificationApi;\r\n}\r\n","import React from \"react\";\r\nimport ImageCircle from \"components/ImageCircle\";\r\nimport moment from \"moment\";\r\nimport { NotificationType, ReactionIcon, ReactionName } from \"utils/Enums\";\r\n\r\nfunction Notification({ notification, onClick }) {\r\n  return (\r\n    <>\r\n      <div\r\n        className=\"relative select-none w-full flex flex-start items-center cursor-pointer hover:bg-gray-100 p-2  rounded-lg transition-base dark:hover:bg-dark-third dark:text-dark-txt\"\r\n        onClick={() => onClick(notification)}\r\n      >\r\n        {!notification?.isRead && (\r\n          <span className=\"w-3 h-3 absolute right-2 top-1/2 transform -translate-y-1/2 text-xs font-bold p-1 bg-green-500 dark:bg-green-600 text-white rounded-full text-center align-middle\"></span>\r\n        )}\r\n        <div className=\"relative flex-shrink-0\">\r\n          <ImageCircle src={notification?.creator?.avatarUrl} />\r\n          {notification?.type === NotificationType.REACTION && (\r\n            <div className=\"h-5 w-5 absolute -right-1 top-full transform -translate-y-4 \">\r\n              <img\r\n                src={ReactionIcon[notification.reactionType]}\r\n                alt={ReactionName[notification.reactionType]}\r\n                className=\"w-full h-full\"\r\n              />\r\n            </div>\r\n          )}\r\n        </div>\r\n        <div className=\"font-primary flex flex-col pl-3 justify-between w-full max-w-lg\">\r\n          <div className=\"flex flex-col justify-between items-start w-full min-w-0\">\r\n            <span\r\n              className={\r\n                \"text-gray-800 dark:text-dark-txt max-w-full overflow-ellipsis break-word max-row-2\" +\r\n                \" \" +\r\n                (!notification?.isRead ? \"font-bold\" : \"\")\r\n              }\r\n            >\r\n              {notification?.content}\r\n            </span>\r\n            <span\r\n              className={\r\n                \"text-sm text-gray-500 truncate flex-shrink-0\" +\r\n                \" \" +\r\n                (!notification?.isRead ? \"font-bold\" : \"\")\r\n              }\r\n            >\r\n              {moment(\r\n                new Date(notification?.dateCreated),\r\n                \"YYYYMMDD\",\r\n              ).fromNow()}\r\n            </span>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </>\r\n  );\r\n}\r\n\r\nexport default Notification;\r\n","import { readAllNotification, readNotificationById } from \"app/appSlice\";\r\nimport Pagination from \"components/Pagination\";\r\nimport useNotificationApi from \"hooks/useNotificationApi\";\r\nimport useNotificationPagination from \"hooks/useNotificationPagination\";\r\nimport React, { useEffect, useState } from \"react\";\r\nimport { useDispatch } from \"react-redux\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport { NotificationType } from \"utils/Enums\";\r\nimport Notification from \"../Notification\";\r\n\r\nfunction NotificationList({ className, setIsOpen, setNotificationNumber }) {\r\n  const notificationApi = useNotificationApi();\r\n  const dispatch = useDispatch();\r\n  const history = useHistory();\r\n  const [page, setPage] = useState(1);\r\n  const { notifications, isHasMore, isLoading, error } =\r\n    useNotificationPagination(page);\r\n\r\n  function handleClick(notification = {}) {\r\n    if (!notification.isRead) {\r\n      dispatch(readNotificationById(notification.id));\r\n      notificationApi.readById(notification.id);\r\n    }\r\n    switch (notification.type) {\r\n      case NotificationType.COMMENT:\r\n      case NotificationType.REACTION:\r\n        if (notification?.postId) {\r\n          history.push(\"/posts/\" + notification?.postId);\r\n        }\r\n        break;\r\n      case NotificationType.FRIEND_REQUEST:\r\n      case NotificationType.ACCEPTED_FRIEND_REQUEST:\r\n      case NotificationType.FOLLOW:\r\n        history.push(\"/friends\");\r\n        break;\r\n      default:\r\n    }\r\n    setIsOpen(false);\r\n  }\r\n\r\n  useEffect(() => {\r\n    if (notifications.items) {\r\n      var num = notifications.items.reduce((preNum, x) => {\r\n        return preNum + (x?.isRead ? 0 : 1);\r\n      }, 0);\r\n      setNotificationNumber(num);\r\n    }\r\n  }, [notifications]);\r\n\r\n  function loadMore() {\r\n    if (isHasMore) {\r\n      setPage((prevPage) => prevPage + 1);\r\n    }\r\n  }\r\n  function readAll() {\r\n    dispatch(readAllNotification());\r\n    notificationApi.readAll();\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <div\r\n        className={\r\n          className +\r\n          \" \" +\r\n          \"flex flex-col bg-white dark:bg-dark-secondary shadow-lg rounded-xl px-5 py-4 pb-3 border dark:border-dark-hover \"\r\n        }\r\n      >\r\n        <div className=\"flex justify-between items-center\">\r\n          <span className=\"text-lg md:text-2xl font-bold mb-2\">\r\n            Notifications\r\n          </span>\r\n          <span\r\n            className=\"text-green-600 hover:text-green-700 active:text-green-800 dark:text-green-400 dark:hover:text-green-300 dark:active:text-green-200 cursor-pointer select-none transition-base text-sm\"\r\n            onClick={readAll}\r\n          >\r\n            Mark all as read\r\n          </span>\r\n        </div>\r\n        <div className=\"overflow-y-auto max-h-full\">\r\n          {notifications &&\r\n            [...notifications?.items]\r\n              .filter((x) => !x.isRead)\r\n              .sort((a, b) => (a?.dateCreated < b?.dateCreated ? 1 : -1))\r\n              ?.map((notification, index) => (\r\n                <Notification\r\n                  onClick={handleClick}\r\n                  key={notification.id}\r\n                  notification={notification}\r\n                />\r\n              ))}\r\n          {notifications &&\r\n            [...notifications?.items]\r\n              .filter((x) => x.isRead)\r\n              .sort((a, b) => (a?.dateCreated < b?.dateCreated ? 1 : -1))\r\n              ?.map((notification, index) => (\r\n                <Notification\r\n                  onClick={handleClick}\r\n                  key={notification.id}\r\n                  notification={notification}\r\n                />\r\n              ))}\r\n          <Pagination\r\n            className=\"mt-2\"\r\n            onClick={loadMore}\r\n            isLoading={isLoading}\r\n            error={error}\r\n            isHasMore={isHasMore}\r\n            loadMoreContent=\"Load more notifications...\"\r\n          />\r\n        </div>\r\n        {notifications?.items?.length < 1 && (\r\n          <span className=\"mt-2\">Do not have any notifications</span>\r\n        )}\r\n      </div>\r\n    </>\r\n  );\r\n}\r\n\r\nexport default NotificationList;\r\n","import { useEffect, useState } from \"react\";\r\nimport useNotificationApi from \"hooks/useNotificationApi\";\r\nimport { loadNotification, refreshNotification } from \"app/appSlice\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\n\r\nexport default function useNotificationPagination(page = 1) {\r\n  const [isLoading, setIsLoading] = useState(false);\r\n  const [error, setError] = useState(\"\");\r\n  const notifications = useSelector((state) => state.app.notifications);\r\n  const [isHasMore, setIsHasMore] = useState(true);\r\n\r\n  const notificationApi = useNotificationApi();\r\n  const dispatch = useDispatch();\r\n\r\n  useEffect(() => {\r\n    if (isHasMore) {\r\n      setIsLoading(true);\r\n      setError(false);\r\n      const request = { page };\r\n      notificationApi\r\n        .getAll(request)\r\n        .then((response) => {\r\n          if (page > 1) {\r\n            dispatch(loadNotification(response));\r\n          } else {\r\n            dispatch(refreshNotification(response));\r\n          }\r\n          setIsHasMore(page < response.pageCount);\r\n          setIsLoading(false);\r\n        })\r\n        .catch((e) => {\r\n          setError(e);\r\n        });\r\n    }\r\n  }, [page]);\r\n\r\n  return { notifications, isLoading, error, isHasMore };\r\n}\r\n","export const NavList = [\r\n  {\r\n    name: \"Home\",\r\n    icon: \"bx bxs-home\",\r\n    inactiveIcon: \"bx bx-home\",\r\n    route: \"/\",\r\n  },\r\n  {\r\n    name: \"Friends\",\r\n    icon: \"bx bxs-group\",\r\n    inactiveIcon: \"bx bx-group\",\r\n    route: \"/friends\",\r\n  },\r\n];\r\n","import React, { useEffect, useRef, useState } from \"react\";\r\nimport Logo from \"logo-circle.png\";\r\nimport ClickableIcon from \"components/ClickableIcon\";\r\nimport ImageCircle from \"components/ImageCircle\";\r\nimport { Link, useHistory, useLocation } from \"react-router-dom\";\r\nimport useDarkMode from \"hooks/useDarkMode\";\r\nimport ConfirmModal from \"components/ConfirmModal\";\r\nimport { setCurrentUser } from \"app/userSlice\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport ChatList from \"features/Chat/components/ChatList\";\r\nimport NotificationList from \"features/Header/components/NotificationList\";\r\nimport useUserApi from \"hooks/useUserApi\";\r\nimport { NavList } from \"utils/config\";\r\nimport { refreshPost, resetNewPost } from \"app/postSlice\";\r\nimport usePostApi from \"hooks/usePostApi\";\r\n\r\nfunction Header({ refreshPosts }) {\r\n  const history = useHistory();\r\n  const dispatch = useDispatch();\r\n\r\n  const user = useSelector((state) => state.users.currentUser);\r\n  const newPostTotal = useSelector((state) => state.posts.newPostTotal);\r\n  const userApi = useUserApi();\r\n  const postApi = usePostApi();\r\n\r\n  const location = useLocation();\r\n\r\n  const [chatNotificationNumber, setChatNotificationNumber] = useState(0);\r\n  const [notificationNumber, setNotificationNumber] = useState(0);\r\n\r\n  const { darkMode, setDarkMode } = useDarkMode();\r\n  const [keyword, setKeyword] = useState(\"\");\r\n\r\n  const [isOpenChatList, setIsOpenChatList] = useState(false);\r\n  const [isOpenNotificationList, setIsOpenNotificationList] = useState(false);\r\n  const [isOpenMenu, setIsOpenMenu] = useState(false);\r\n\r\n  const [confirmModal, setConfirmModal] = useState({\r\n    isOpen: false,\r\n    title: \"\",\r\n    content: \"\",\r\n    confirmButtonTitle: \"\",\r\n  });\r\n\r\n  const ref = useRef();\r\n\r\n  useEffect(() => {\r\n    userApi.getCurrentUser().then((response) => {\r\n      dispatch(setCurrentUser(response));\r\n    });\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    const checkIfClickedOutside = (e) => {\r\n      // If the menu is open and the clicked target is not within the menu,\r\n      // then close the menu\r\n      if (isOpenMenu && ref.current && !ref.current.contains(e.target)) {\r\n        setIsOpenMenu(false);\r\n      }\r\n      if (isOpenChatList && ref.current && !ref.current.contains(e.target)) {\r\n        setIsOpenChatList(false);\r\n      }\r\n      if (\r\n        isOpenNotificationList &&\r\n        ref.current &&\r\n        !ref.current.contains(e.target)\r\n      ) {\r\n        setIsOpenNotificationList(false);\r\n      }\r\n    };\r\n    document.addEventListener(\"mousedown\", checkIfClickedOutside);\r\n    return () => {\r\n      // Cleanup the event listener\r\n      document.removeEventListener(\"mousedown\", checkIfClickedOutside);\r\n    };\r\n  }, [isOpenMenu, isOpenNotificationList, isOpenChatList]);\r\n\r\n  const search = (e) => {\r\n    e.preventDefault();\r\n    history.push(\"/search/\" + keyword);\r\n  };\r\n\r\n  const goToProfile = (userName) => {\r\n    history.push(\"/profile/\" + userName);\r\n  };\r\n  function logout() {\r\n    window.localStorage.removeItem(\"token\");\r\n    window.location.href = process.env.PUBLIC_URL + \"/\";\r\n  }\r\n\r\n  function openConfirmModal(\r\n    content,\r\n    confirmButtonAction,\r\n    confirmButtonTitle = \"Yes\",\r\n    title,\r\n  ) {\r\n    const confirmModal = {\r\n      isOpen: true,\r\n      title: title,\r\n      content: content,\r\n      confirmButtonTitle: confirmButtonTitle,\r\n      confirmButtonAction: confirmButtonAction,\r\n    };\r\n    setConfirmModal(confirmModal);\r\n  }\r\n\r\n  function goTo(route, isCurrentRoute) {\r\n    if (isCurrentRoute) {\r\n      window.scrollTo({\r\n        top: 0,\r\n        left: 0,\r\n        behavior: \"smooth\",\r\n      });\r\n      dispatch(resetNewPost());\r\n      postApi.getAll().then((response) => {\r\n        dispatch(refreshPost(response));\r\n      });\r\n    } else {\r\n      history.push(route);\r\n    }\r\n  }\r\n\r\n  return (\r\n    <>\r\n      {confirmModal.isOpen && (\r\n        <ConfirmModal\r\n          isOpen={confirmModal.isOpen}\r\n          closeAction={() => setConfirmModal({ isOpen: false })}\r\n          title=\"Are you sure?\"\r\n          content={confirmModal.content}\r\n          confirmButtonTitle={confirmModal.confirmButtonTitle}\r\n          confirmButtonAction={confirmModal.confirmButtonAction}\r\n        />\r\n      )}\r\n      <div className=\"fixed top-0 bg-white dark:bg-dark-secondary dark:text-white w-screen p-2 shadow z-20\">\r\n        <div className=\"container mx-auto flex justify-between items-center\">\r\n          <div className=\"flex space-x-4 flex-shrink-0\">\r\n            <Link to=\"/\">\r\n              <img src={Logo} alt=\"Logo\" className=\"h-10 w-10 cursor-pointer\" />\r\n            </Link>\r\n            <ClickableIcon iconClass=\"bx bx-search\" className=\"md:hidden\" />\r\n            <form\r\n              onSubmit={(e) => search(e)}\r\n              className=\"relative  md:block hidden\"\r\n            >\r\n              <input\r\n                type=\"search\"\r\n                className=\"bg-gray-100 dark:bg-dark-third dark:text-white rounded-full outline-none pl-10 pr-3 py-2 focus:ring-2 ring-green-400 ring-opacity-50 transition-base select-none\"\r\n                placeholder=\"Search TeeApp!\"\r\n                value={keyword}\r\n                onChange={(e) => setKeyword(e.target.value)}\r\n              />\r\n              <i className=\"bx bx-search absolute text-xl top-1/2 left-3 transform text-gray-400 -translate-y-1/2 cursor-pointer\"></i>\r\n            </form>\r\n          </div>\r\n          <div className=\"flex text-3xl text-green-500\">\r\n            {NavList.map((nav) => {\r\n              const currentRoute = location.pathname;\r\n              const isCurrentRoute = nav.route === currentRoute;\r\n              const icon = isCurrentRoute ? nav.icon : nav.inactiveIcon;\r\n              return (\r\n                <div\r\n                  key={nav.route}\r\n                  className={\r\n                    \"relative group\" +\r\n                    \" \" +\r\n                    (isCurrentRoute ? \" border-b-4 border-green-500\" : \"\")\r\n                  }\r\n                  onClick={() => goTo(nav.route, isCurrentRoute)}\r\n                >\r\n                  <i\r\n                    className={`select-none py-2 px-6 rounded-lg hover:bg-gray-100 active:bg-gray-200 dark:hover:bg-dark-third dark:active:bg-dark-hover transition-base cursor-pointer  ${icon}`}\r\n                  ></i>\r\n                  <div className=\"select-none animate-fadeIn group-hover:block absolute top-full left-1/2 hidden bg-black dark:bg-white dark:bg-opacity-80 bg-opacity-60 px-1 rounded transform -translate-x-1/2 translate-y-2 text-white dark:text-black text-sm font-title p-1\">\r\n                    {nav.name}\r\n                  </div>\r\n                  {nav.name.toLowerCase() === \"home\" && newPostTotal > 0 && (\r\n                    <span className=\"animate-fadeIn absolute top-1 right-1 bg-green-500 dark:bg-green-600 text-white rounded-full select-none text-xs font-bold w-3 h-3\"></span>\r\n                  )}\r\n                </div>\r\n              );\r\n            })}\r\n          </div>\r\n          <ul className=\"flex items-center space-x-2\" ref={ref}>\r\n            <li\r\n              className=\"active:transform active:scale-95 p-1 h-full rounded-full flex items-center dark:hover:bg-dark-third hover:bg-gray-200 transition-base cursor-pointer select-none mr-3\"\r\n              onClick={() => goToProfile(user.userName)}\r\n            >\r\n              <ImageCircle src={user.avatarUrl} size=\"sm\" />\r\n              <span className=\"px-2 font-semibold\">{user.firstName}</span>\r\n            </li>\r\n            <li className=\"relative\">\r\n              <ClickableIcon\r\n                className={\r\n                  \"p-2 \" +\r\n                  \" \" +\r\n                  (isOpenChatList\r\n                    ? \"bg-green-100 hover:bg-green-200 active:bg-green-300 dark:bg-green-100\"\r\n                    : \"\")\r\n                }\r\n                iconClass=\"bx bxs-message-rounded-dots\"\r\n                colorClass={\r\n                  isOpenChatList\r\n                    ? \"bg-green-100 hover:bg-green-200 active:bg-green-300 dark:bg-green-900 dark:hover:bg-green-800 dark:active:bg-green-700 \"\r\n                    : \"\"\r\n                }\r\n                colorIconClass={\r\n                  isOpenChatList ? \"text-green-600 dark:text-green-400\" : \"\"\r\n                }\r\n                onClick={() => {\r\n                  setIsOpenChatList(!isOpenChatList);\r\n                  setIsOpenMenu(false);\r\n                  setIsOpenNotificationList(false);\r\n                }}\r\n              />\r\n              {chatNotificationNumber > 0 && !isOpenChatList && (\r\n                <span className=\"animate-fadeIn w-4 h-4 absolute right-0 top-full transform -translate-y-3/4 text-tiny font-bold bg-green-500 dark:bg-green-600 text-white rounded-full text-center align-middle select-none\">\r\n                  {chatNotificationNumber > 9 ? \"9+\" : chatNotificationNumber}\r\n                </span>\r\n              )}\r\n            </li>\r\n            <li className=\"relative\">\r\n              <span className=\"dark:bg-green-600\"></span>\r\n              <ClickableIcon\r\n                className=\"p-2\"\r\n                colorClass={\r\n                  isOpenNotificationList\r\n                    ? \"bg-green-100 hover:bg-green-200 active:bg-green-300 dark:bg-green-900 dark:hover:bg-green-800 dark:active:bg-green-700 \"\r\n                    : \"\"\r\n                }\r\n                iconClass=\"bx bxs-bell\"\r\n                colorIconClass={\r\n                  isOpenNotificationList\r\n                    ? \"text-green-600 dark:text-green-400\"\r\n                    : \"\"\r\n                }\r\n                onClick={() => {\r\n                  setIsOpenChatList(false);\r\n                  setIsOpenMenu(false);\r\n                  setIsOpenNotificationList(!isOpenNotificationList);\r\n                }}\r\n              />\r\n              {notificationNumber > 0 && !isOpenNotificationList && (\r\n                <span className=\"animate-fadeIn w-4 h-4 absolute right-0 top-full transform -translate-y-3/4 text-tiny font-bold bg-green-500 dark:bg-green-600 text-white rounded-full text-center align-middle select-none\">\r\n                  {notificationNumber > 9 ? \"9+\" : notificationNumber}\r\n                </span>\r\n              )}\r\n            </li>\r\n            <li>\r\n              <div className=\"relative\">\r\n                <ClickableIcon\r\n                  iconClass=\"bx bx-caret-down\"\r\n                  colorClass={\r\n                    isOpenMenu\r\n                      ? \"bg-green-100 hover:bg-green-200 active:bg-green-300 dark:bg-green-900 dark:hover:bg-green-800 dark:active:bg-green-700 \"\r\n                      : \"\"\r\n                  }\r\n                  colorIconClass={\r\n                    isOpenMenu ? \"text-green-600 dark:text-green-400\" : \"\"\r\n                  }\r\n                  onClick={() => {\r\n                    setIsOpenMenu(!isOpenMenu);\r\n                    setIsOpenChatList(false);\r\n                    setIsOpenNotificationList(false);\r\n                  }}\r\n                />\r\n                {isOpenMenu && (\r\n                  <div className=\"animate-fadeIn transition-base absolute top-full right-0 border border-gray-200 bg-white w-60 rounded-lg shadow-lg overflow-hidden p-2 dark:bg-dark-secondary dark:border-dark-hover mt-2 select-none z-30\">\r\n                    <button\r\n                      className=\"flex items-center space-x-3 w-full pl-2 pr-4 py-2 rounded-md text-left hover:bg-gray-100 active:bg-gray-200 transition-base transform active:scale-95 dark:hover:bg-dark-third\"\r\n                      onClick={() => setDarkMode(!darkMode)}\r\n                    >\r\n                      <i\r\n                        className={\r\n                          \"text-center-middle text-center text-xl align-middle text-black dark:text-dark-txt w-7 h-7 bx \" +\r\n                          \" \" +\r\n                          (darkMode ? \" bx-sun\" : \" bx-moon\")\r\n                        }\r\n                      ></i>\r\n                      <span>{darkMode ? \"Light Mode\" : \"Dark Mode\"}</span>\r\n                    </button>\r\n                    <button\r\n                      className=\"flex items-center space-x-3 w-full pl-2 pr-4 py-2 rounded-md text-left hover:bg-gray-100 active:bg-gray-200 transition-base transform active:scale-95 dark:hover:bg-dark-third\"\r\n                      onClick={() => {\r\n                        openConfirmModal(\"Do you want to log out?\", logout);\r\n                      }}\r\n                    >\r\n                      <i className=\"text-center-middle bx bx-log-in-circle text-center text-xl align-middle text-black dark:text-dark-txt w-7 h-7\"></i>\r\n                      <span>Log Out</span>\r\n                    </button>\r\n                  </div>\r\n                )}\r\n                <ChatList\r\n                  setChatNotificationNumber={setChatNotificationNumber}\r\n                  className={\r\n                    \"absolute animate-fadeIn top-full transform translate-y-3 right-0 lg:w-112 w-96 max-h-600 \" +\r\n                    \" \" +\r\n                    (isOpenChatList ? \"\" : \"hidden\")\r\n                  }\r\n                />\r\n                <NotificationList\r\n                  setIsOpen={setIsOpenNotificationList}\r\n                  className={\r\n                    \"absolute animate-fadeIn top-full transform translate-y-3 right-0 lg:w-112 w-96 max-h-600 overflow-y-auto \" +\r\n                    \" \" +\r\n                    (isOpenNotificationList ? \"\" : \"hidden\")\r\n                  }\r\n                  setNotificationNumber={setNotificationNumber}\r\n                />\r\n              </div>\r\n            </li>\r\n          </ul>\r\n        </div>\r\n      </div>\r\n    </>\r\n  );\r\n}\r\n\r\nexport default Header;\r\n","import { HubConnectionBuilder } from \"@microsoft/signalr\";\r\nimport {\r\n  addChat,\r\n  addMessage,\r\n  addNotification,\r\n  addReadByUserName,\r\n  addSelectedId,\r\n  editChat,\r\n  editGroupAvatar,\r\n  refreshChats,\r\n} from \"app/chatSlice\";\r\nimport { updateOnlineUserNameList } from \"app/userSlice\";\r\nimport useChatApi from \"hooks/useChatApi\";\r\nimport React, { useEffect, useState } from \"react\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { ChatClient } from \"utils/Constants\";\r\n\r\nfunction Chat() {\r\n  const dispatch = useDispatch();\r\n\r\n  const [connection, setConnection] = useState(null);\r\n\r\n  const currentUser = useSelector((state) => state.users.currentUser);\r\n  const selectedId = useSelector((state) => state.chats.selectedId);\r\n\r\n  const chatApi = useChatApi();\r\n\r\n  useEffect(() => {\r\n    async function fetchData() {\r\n      chatApi\r\n        .getAll()\r\n        .then((response) => {\r\n          dispatch(refreshChats(response.data));\r\n        })\r\n        .catch((error) => {\r\n          console.error(\"Connection failed: \", error);\r\n        });\r\n    }\r\n    fetchData();\r\n  }, []);\r\n\r\n  // for realtime\r\n  useEffect(() => {\r\n    const newConnection = new HubConnectionBuilder()\r\n      .withUrl(process.env.REACT_APP_CHAT_HUB_URL, {\r\n        accessTokenFactory: () => localStorage.getItem(\"token\"),\r\n      })\r\n      .withAutomaticReconnect()\r\n      .build();\r\n\r\n    setConnection(newConnection);\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    if (connection && !connection.connectionStarted) {\r\n      connection.start().then((result) => {\r\n        connection.on(ChatClient.RECEIVE_MESSAGE, (response) => {\r\n          const action = addMessage(response);\r\n          dispatch(action);\r\n          if (response.chatId && selectedId !== response.chatId) {\r\n            dispatch(addNotification(response.chatId));\r\n          }\r\n        });\r\n        connection.on(ChatClient.RECEIVE_CHAT, (chat) => {\r\n          const action = addChat(chat);\r\n          dispatch(action);\r\n          if (chat.creatorUserName === currentUser.userName) {\r\n            dispatch(addSelectedId(chat.id));\r\n          }\r\n        });\r\n        connection.on(ChatClient.RECEIVE_UPDATED_CHAT, (chat) => {\r\n          const action = editChat(chat);\r\n          dispatch(action);\r\n        });\r\n        connection.on(ChatClient.RECEIVE_UPDATED_GROUP_AVATAR, (response) => {\r\n          const action = editGroupAvatar(response);\r\n          dispatch(action);\r\n        });\r\n        connection.on(ChatClient.RECEIVE_ADD_READ_BY_USERNAME, (response) => {\r\n          const action = addReadByUserName(response);\r\n          dispatch(action);\r\n        });\r\n        connection.on(\r\n          ChatClient.RECEIVE_UPDATED_ONLINE_USERNAME_LIST,\r\n          (response) => {\r\n            const action = updateOnlineUserNameList(response);\r\n            dispatch(action);\r\n          },\r\n        );\r\n      });\r\n    }\r\n    return () => {\r\n      if (connection && connection.connectionStarted) {\r\n        connection.stop();\r\n      }\r\n    };\r\n  }, [connection]);\r\n\r\n  return <div></div>;\r\n}\r\n\r\nexport default Chat;\r\n","import React, { useEffect, useState } from \"react\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { BrowserRouter, Route, Switch } from \"react-router-dom\";\r\n\r\nimport { addNotification, setPopup } from \"app/appSlice\";\r\nimport Loader from \"components/Loader\";\r\nimport Popup from \"components/Popup\";\r\nimport Forbid from \"pages/Forbid\";\r\nimport NotFound from \"pages/NotFound\";\r\nimport ServerError from \"pages/ServerError\";\r\n\r\nimport Home from \"features/Home\";\r\nimport Header from \"features/Header\";\r\n\r\nimport Chat from \"features/Chat\";\r\nimport { AppClient } from \"utils/Constants\";\r\nimport { HubConnectionBuilder } from \"@microsoft/signalr\";\r\nimport {\r\n  addComment,\r\n  updateComment,\r\n  deleteComment,\r\n  deleteReaction,\r\n  updateReaction,\r\n  addReaction,\r\n  updatePost,\r\n  deletePost,\r\n  addNewPost,\r\n} from \"app/postSlice\";\r\n\r\nfunction App(props) {\r\n  const isLoading = useSelector((state) => state.app.isLoading);\r\n  const popup = useSelector((state) => state.app.popup);\r\n  const dispatch = useDispatch();\r\n\r\n  function closePopup() {\r\n    dispatch(setPopup({ isOpen: false }));\r\n  }\r\n\r\n  const [connection, setConnection] = useState(null);\r\n\r\n  // for realtime\r\n  useEffect(() => {\r\n    const newConnection = new HubConnectionBuilder()\r\n      .withUrl(process.env.REACT_APP_APP_HUB_URL, {\r\n        accessTokenFactory: () => localStorage.getItem(\"token\"),\r\n      })\r\n      .withAutomaticReconnect()\r\n      .build();\r\n\r\n    setConnection(newConnection);\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    if (connection && !connection.connectionStarted) {\r\n      connection.start().then((result) => {\r\n        connection.on(AppClient.RECEIVE_NOTIFICATION, (response) => {\r\n          dispatch(addNotification(response));\r\n        });\r\n        connection.on(AppClient.RECEIVE_POST, (response) => {\r\n          dispatch(addNewPost());\r\n        });\r\n        connection.on(AppClient.RECEIVE_UPDATED_POST, (response) => {\r\n          dispatch(updatePost(response));\r\n        });\r\n        connection.on(AppClient.DELETE_POST, (postId) => {\r\n          dispatch(deletePost(postId));\r\n        });\r\n        connection.on(AppClient.RECEIVE_REACTION, (response) => {\r\n          dispatch(addReaction(response));\r\n        });\r\n        connection.on(AppClient.RECEIVE_UPDATED_REACTION, (response) => {\r\n          dispatch(updateReaction(response));\r\n        });\r\n        connection.on(AppClient.DELETE_REACTION, (postId, reactionId) => {\r\n          dispatch(deleteReaction({ postId, reactionId }));\r\n        });\r\n        connection.on(AppClient.RECEIVE_COMMENT, (response) => {\r\n          dispatch(addComment(response));\r\n        });\r\n        connection.on(AppClient.RECEIVE_UPDATED_COMMENT, (response) => {\r\n          dispatch(updateComment(response));\r\n        });\r\n        connection.on(AppClient.DELETE_COMMENT, (postId, commentId) => {\r\n          dispatch(deleteComment({ postId, commentId }));\r\n        });\r\n      });\r\n    }\r\n    return () => {\r\n      if (connection && connection.connectionStarted) {\r\n        connection.stop();\r\n      }\r\n    };\r\n  }, [connection]);\r\n\r\n  return (\r\n    <>\r\n      <BrowserRouter basename={process.env.PUBLIC_URL}>\r\n        {isLoading && <Loader isOpen={isLoading} className=\"z-50\" />}\r\n        {popup.isOpen && (\r\n          <Popup\r\n            title={popup.title}\r\n            isOpen={popup.isOpen}\r\n            content={popup.content}\r\n            onClick={closePopup}\r\n          />\r\n        )}\r\n        <Chat />\r\n        <Header {...props} />\r\n        <div className=\"p-2 bg-gray-100 dark:bg-dark-primary dark:text-white min-h-screen pt-20\">\r\n          <div className=\"container mx-auto\">\r\n            <Switch>\r\n              <Route exact path=\"/Forbid\" component={Forbid} />\r\n              <Route exact path=\"/ServerError\" component={ServerError} />\r\n              <Route exact path=\"/\" component={Home} />\r\n              <Route path=\"*\" component={NotFound} />\r\n            </Switch>\r\n          </div>\r\n        </div>\r\n      </BrowserRouter>\r\n    </>\r\n  );\r\n}\r\n\r\nexport default App;\r\n","export default __webpack_public_path__ + \"static/media/login-page.0d15c2c6.svg\";","import React from \"react\";\r\n\r\nfunction Input({ value = \"\", onChange, id, type = \"text\", className }) {\r\n  return (\r\n    <>\r\n      <input\r\n        value={value}\r\n        onChange={onChange}\r\n        id={id}\r\n        type={type}\r\n        className={\r\n          \"bg-gray-100 dark:bg-dark-hover dark:text-white rounded-lg w-full py-2 px-3 focus:ring-2 focus:ring-green-500 dark:focus:ring-green-400 focus:ring-opacity-80 dark:focus:ring-opacity-80 outline-none transition-base\" +\r\n          \" \" +\r\n          className\r\n        }\r\n      />\r\n    </>\r\n  );\r\n}\r\n\r\nexport default Input;\r\n","import LoginPageImage from \"assets/img/login-page.svg\";\r\nimport Button from \"components/Button\";\r\nimport Input from \"components/Input\";\r\nimport useUserApi from \"hooks/useUserApi\";\r\nimport Logo from \"logo-shadow.png\";\r\nimport React, { useEffect, useState } from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\n\r\nfunction Login() {\r\n  const [username, setUsername] = useState(\"\");\r\n  const [error, setError] = useState(\"\");\r\n  const [password, setPassword] = useState(\"\");\r\n  const [isDirty, setIsDirty] = useState(false);\r\n\r\n  const userApi = useUserApi();\r\n\r\n  useEffect(() => {\r\n    if (username && password) {\r\n      setIsDirty(true);\r\n    } else {\r\n      setIsDirty(false);\r\n    }\r\n  }, [username, password]);\r\n  function login(e) {\r\n    e.preventDefault();\r\n\r\n    const request = { username, password };\r\n    setError(\"\");\r\n\r\n    userApi\r\n      .login(request)\r\n      .then((response) => {\r\n        window.localStorage.setItem(\"token\", response);\r\n        window.location.href = process.env.PUBLIC_URL + \"/\";\r\n      })\r\n      .catch((error) => {\r\n        var message =\r\n          typeof error === \"string\"\r\n            ? error\r\n            : \"Oops, something went wrong! Please contact administrator.\";\r\n        setError(message);\r\n      });\r\n  }\r\n  return (\r\n    <div className=\"animate-fadeIn fixed inset-0 bg-white dark:bg-dark-primary z-10 h-screen grid lg:grid-cols-2 place-items-center gap-32 md:px-32 px-6 overflow-auto\">\r\n      <img src={LoginPageImage} alt=\"login\" className=\"lg:block hidden\" />\r\n      <form\r\n        onSubmit={(e) => login(e)}\r\n        className=\"container rounded-2xl flex flex-col lg:px-10 md:px-16 xl:px-16\"\r\n      >\r\n        <img src={Logo} alt=\"login\" className=\"h-20 w-20 mx-auto mb-3\" />\r\n        <h1 className=\"text-3xl font-bold text-primary text-green-600 dark:text-green-400 text-center mb-8\">\r\n          Login to TeeApp!\r\n        </h1>\r\n\r\n        {error && (\r\n          <span className=\"bg-red-500 rounded-md text-white text-lg mb-2 py-2 text-center\">\r\n            {error ?? \"Username or password is incorrect\"}\r\n          </span>\r\n        )}\r\n        <div className=\"space-y-2 mb-3\">\r\n          <label htmlFor=\"username\" className=\"text-lg font-semibold px-1\">\r\n            Username or email address\r\n          </label>\r\n          <Input\r\n            value={username}\r\n            onChange={(e) => setUsername(e.target.value)}\r\n            id=\"username\"\r\n            type=\"text\"\r\n          />\r\n        </div>\r\n        <div className=\"space-y-2 mb-2\">\r\n          <label htmlFor=\"password\" className=\"text-lg font-semibold px-1\">\r\n            Password\r\n          </label>\r\n          <Input\r\n            value={password}\r\n            onChange={(e) => setPassword(e.target.value)}\r\n            type=\"password\"\r\n            id=\"password\"\r\n          />\r\n        </div>\r\n\r\n        <Button\r\n          disabled={!isDirty}\r\n          content=\"Login\"\r\n          className=\"mb-4 mt-2 font-bold\"\r\n        />\r\n        <div className=\"text-center\">\r\n          Not a member?{\" \"}\r\n          <Link\r\n            to=\"/register\"\r\n            className=\"text-green-600 dark:text-green-400 font-bold\"\r\n          >\r\n            Sign up now\r\n          </Link>\r\n        </div>\r\n      </form>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Login;\r\n","import { yupResolver } from \"@hookform/resolvers/yup\";\r\nimport LoginPageImage from \"assets/img/login-page.svg\";\r\nimport Button from \"components/Button\";\r\nimport Popup from \"components/Popup\";\r\nimport useUserApi from \"hooks/useUserApi\";\r\nimport React, { useEffect, useState } from \"react\";\r\nimport { useForm, useWatch } from \"react-hook-form\";\r\nimport { Link, useHistory } from \"react-router-dom\";\r\nimport { Gender } from \"utils/Enums\";\r\nimport * as yup from \"yup\";\r\n\r\nfunction Register() {\r\n  const [isChanged, setIsChanged] = useState(false);\r\n  const [isExistsUserName, setIsExistsUserName] = useState(true);\r\n  const [popup, setPopup] = useState({\r\n    isOpen: false,\r\n    content: \"\",\r\n    title: \"Notification\",\r\n  });\r\n\r\n  const history = useHistory();\r\n  const userApi = useUserApi();\r\n\r\n  const INPUT_CLASS =\r\n    \"bg-gray-100 dark:bg-dark-hover dark:text-white rounded-lg w-full py-2 px-3 focus:ring-2 focus:ring-green-500 dark:focus:ring-green-400 focus:ring-opacity-80 dark:focus:ring-opacity-80 outline-none transition-base\";\r\n\r\n  // yup validation\r\n  const schema = yup.object().shape({\r\n    firstName: yup.string().required(\"First Name is required\"),\r\n    lastName: yup.string().required(\"Last Name is required\"),\r\n    dateOfBirth: yup\r\n      .date()\r\n      .required(\"Date of Birth is required\")\r\n      .test(\"checkAge\", \"Must be less than today\", (value) => {\r\n        var today = new Date();\r\n        return value < today;\r\n      }),\r\n    userName: yup\r\n      .string()\r\n      .required(\"User Name is required\")\r\n      .min(6, \"Username must be 6-20 characters\")\r\n      .max(20, \"Username must be 6-20 characters\")\r\n      .test(\r\n        \"checkUsername\",\r\n        \"Username does not contain special characters\",\r\n        (value) => {\r\n          return checkRegex(\r\n            value,\r\n            \"^(?=[a-zA-Z0-9._])(?!.*[_.]{2})[^_.].*[^_.]$\",\r\n          );\r\n        },\r\n      )\r\n      .test(\r\n        \"existsUsername\",\r\n        \"Username is already taken\",\r\n        (value) => !isExistsUserName,\r\n      ),\r\n    email: yup\r\n      .string()\r\n      .required(\"Email is required\")\r\n      .test(\"checkEmail\", \"Email is invalid\", (value) => {\r\n        return checkRegex(\r\n          value,\r\n          /^[a-zA-Z0-9_.+-]+@[a-zA-Z0-9-]+\\.[a-zA-Z0-9-.]+$/,\r\n        );\r\n      }),\r\n    password: yup\r\n      .string()\r\n      .required(\"Password is required\")\r\n      .test(\r\n        \"checkPassword\",\r\n        \"Passwords must be at least 8 characters, one digit, one uppercase, one non alphanumeric character\",\r\n        (value) => {\r\n          return checkRegex(\r\n            value,\r\n            \"^(?=.*[a-z])(?=.*[A-Z])(?=.*\\\\d)(?=.*[#$^+=!*()@%&]).{8,}$\",\r\n          );\r\n        },\r\n      ),\r\n    confirmPassword: yup\r\n      .string()\r\n      .required(\"Confirm Password is required\")\r\n      .test(\r\n        \"ConfirmPasswordMatch\",\r\n        \"Password and Confirmation Password must match\",\r\n        (confirmPassword) => {\r\n          return confirmPassword === watch.password;\r\n        },\r\n      ),\r\n  });\r\n\r\n  // react hook form\r\n  const {\r\n    register,\r\n    handleSubmit,\r\n    control,\r\n    setError,\r\n    clearErrors,\r\n    reset,\r\n    formState: { errors },\r\n  } = useForm({\r\n    resolver: yupResolver(schema),\r\n    defaultValues: {},\r\n  });\r\n  const watch = useWatch({\r\n    control,\r\n  });\r\n\r\n  useEffect(() => {\r\n    userApi.checkUserNameExists(watch.userName).then((response) => {\r\n      if (response.isExists) {\r\n        setError(\r\n          \"userName\",\r\n          {\r\n            type: \"required\",\r\n            message: `Username '${watch.userName}' is already taken`,\r\n          },\r\n          { shouldFocus: true },\r\n        );\r\n        setIsExistsUserName(true);\r\n      } else {\r\n        clearErrors(\"userName\");\r\n        setIsExistsUserName(false);\r\n      }\r\n    });\r\n  }, [watch.userName]);\r\n\r\n  useEffect(() => {\r\n    const onChange = () => {\r\n      var isValid =\r\n        watch.firstName?.trim() &&\r\n        watch.lastName?.trim() &&\r\n        watch.userName?.trim() &&\r\n        watch.email &&\r\n        watch.gender &&\r\n        watch.dateOfBirth &&\r\n        watch.password &&\r\n        watch.confirmPassword;\r\n\r\n      if (isValid) {\r\n        setIsChanged(true);\r\n        return;\r\n      }\r\n      setIsChanged(false);\r\n    };\r\n    onChange();\r\n  }, [watch]);\r\n\r\n  // handle submit\r\n  const onSubmit = (content) => {\r\n    userApi.register(content).then((response) => {\r\n      openPopup(\r\n        \"Success\",\r\n        <span>\r\n          \"Create account successfully! Please{\" \"}\r\n          <Link className=\"font-bold text-green-600\" to=\"/login\">\r\n            log in\r\n          </Link>\r\n          !\"\r\n        </span>,\r\n      );\r\n      reset({});\r\n    });\r\n  };\r\n\r\n  function openPopup(title, content) {\r\n    const popup = {\r\n      isOpen: true,\r\n      title: title,\r\n      content: content,\r\n    };\r\n    setPopup(popup);\r\n  }\r\n\r\n  return (\r\n    <>\r\n      {popup.isOpen && (\r\n        <Popup\r\n          title={popup.title}\r\n          isOpen={popup.isOpen}\r\n          content={popup.content}\r\n          onClick={() => {\r\n            setPopup({ isOpen: false });\r\n            history.push(\"/login\");\r\n          }}\r\n        />\r\n      )}\r\n      <div className=\"animate-fadeIn fixed inset-0 bg-white dark:bg-dark-primary z-10 h-screen grid lg:grid-cols-2 place-items-center gap-32 md:px-32 px-6 overflow-auto pt-10 pb-20 md:py-0\">\r\n        <img src={LoginPageImage} alt=\"login\" className=\"lg:block hidden\" />\r\n        <form\r\n          onSubmit={handleSubmit(onSubmit)}\r\n          className=\"container rounded-2xl flex flex-col\"\r\n        >\r\n          <h1 className=\"text-3xl font-bold text-primary text-green-600 dark:text-green-400 text-center mb-8\">\r\n            Sign up to TeeApp!\r\n          </h1>\r\n          <div className=\"mb-3 grid md:grid-cols-4 md:col-span-5 place-items-start \">\r\n            <div className=\"col-span-2 space-y-2 md:mr-2 w-full\">\r\n              <label htmlFor=\"fistName\" className=\"text-lg font-semibold \">\r\n                First Name <span className=\"text-red-500\">*</span>\r\n              </label>\r\n              <input\r\n                {...register(\"firstName\")}\r\n                type=\"text\"\r\n                className={INPUT_CLASS}\r\n              />\r\n              <div className=\"text-red-500 text-sm\">\r\n                {errors.firstName?.message}\r\n              </div>\r\n            </div>\r\n            <div className=\"col-span-2 space-y-2 md:ml-2 mt-2 md:mt-0 w-full\">\r\n              <label htmlFor=\"lastName\" className=\"text-lg font-semibold \">\r\n                Last Name <span className=\"text-red-500\">*</span>\r\n              </label>\r\n              <input\r\n                {...register(\"lastName\")}\r\n                type=\"text\"\r\n                className={INPUT_CLASS}\r\n              />\r\n              <div className=\"text-red-500 text-sm\">\r\n                {errors.lastName?.message}\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div className=\"space-y-2 mb-3\">\r\n            <label htmlFor=\"userName\" className=\"text-lg font-semibold \">\r\n              Username <span className=\"text-red-500\">*</span>\r\n            </label>\r\n            <input\r\n              {...register(\"userName\")}\r\n              type=\"text\"\r\n              className={INPUT_CLASS}\r\n            />\r\n            <div className=\"text-red-500 text-sm\">\r\n              {errors.userName?.message}\r\n            </div>\r\n          </div>\r\n          <div className=\"space-y-2 mb-3\">\r\n            <label htmlFor=\"email\" className=\"text-lg font-semibold \">\r\n              Email <span className=\"text-red-500\">*</span>\r\n            </label>\r\n            <input {...register(\"email\")} type=\"text\" className={INPUT_CLASS} />\r\n            <div className=\"text-red-500 text-sm\">{errors.email?.message}</div>\r\n          </div>\r\n          <div className=\"mb-3 grid grid-cols-2 place-items-start \">\r\n            <div className=\"col-span-2 md:col-span-1 space-y-2 w-full\">\r\n              <label htmlFor=\"gender\" className=\"text-lg font-semibold \">\r\n                Gender <span className=\"text-red-500\">*</span>\r\n              </label>\r\n              <div className=\"flex justify-evenly items-center text-center space-x-1 px-5 select-none relative h-full\">\r\n                <label\r\n                  className={\r\n                    \"w-16 cursor-pointer z-20 rounded-lg px-3 transition-base\" +\r\n                    \" \" +\r\n                    (watch.gender === Gender.MALE.toString()\r\n                      ? \"bg-green-500 text-white\"\r\n                      : \"\")\r\n                  }\r\n                  htmlFor=\"male\"\r\n                >\r\n                  ♂<br />\r\n                  Male\r\n                </label>\r\n                <label\r\n                  className={\r\n                    \"w-16 cursor-pointer z-20 rounded-lg px-1 transition-base\" +\r\n                    \" \" +\r\n                    (watch.gender === Gender.FEMALE.toString()\r\n                      ? \"bg-green-500 text-white\"\r\n                      : \"\")\r\n                  }\r\n                  htmlFor=\"female\"\r\n                >\r\n                  ♀<br />\r\n                  Female\r\n                </label>\r\n                <label\r\n                  className={\r\n                    \"w-16 cursor-pointer z-20 rounded-lg px-3 transition-base\" +\r\n                    \" \" +\r\n                    (watch.gender === Gender.OTHER.toString()\r\n                      ? \"bg-green-500 text-white\"\r\n                      : \"\")\r\n                  }\r\n                  htmlFor=\"other\"\r\n                >\r\n                  ⚥<br />\r\n                  Other\r\n                </label>\r\n                <input\r\n                  hidden\r\n                  {...register(\"gender\")}\r\n                  id=\"male\"\r\n                  name=\"gender\"\r\n                  type=\"radio\"\r\n                  value={Gender.MALE}\r\n                />\r\n                <input\r\n                  hidden\r\n                  {...register(\"gender\")}\r\n                  id=\"female\"\r\n                  name=\"gender\"\r\n                  type=\"radio\"\r\n                  value={Gender.FEMALE}\r\n                />\r\n                <input\r\n                  hidden\r\n                  {...register(\"gender\")}\r\n                  id=\"other\"\r\n                  name=\"gender\"\r\n                  type=\"radio\"\r\n                  value={Gender.OTHER}\r\n                />\r\n              </div>\r\n              <div className=\"text-red-500 text-sm\">\r\n                {errors.gender?.message}\r\n              </div>\r\n            </div>\r\n            <div className=\"col-span-2 md:col-span-1 flex flex-col space-y-2 md:ml-2 mt-2 md:mt-0 w-full\">\r\n              <label htmlFor=\"lastName\" className=\"text-lg font-semibold\">\r\n                Date of Birth <span className=\"text-red-500\">*</span>\r\n              </label>\r\n              <input\r\n                {...register(\"dateOfBirth\")}\r\n                type=\"date\"\r\n                className={INPUT_CLASS + \" w-full\"}\r\n              />\r\n              <div className=\"text-red-500 text-sm\">\r\n                {errors.dateOfBirth?.message}\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div className=\"space-y-2 mb-2\">\r\n            <label htmlFor=\"password\" className=\"text-lg font-semibold \">\r\n              Password <span className=\"text-red-500\">*</span>\r\n            </label>\r\n            <input\r\n              type=\"password\"\r\n              {...register(\"password\")}\r\n              className={INPUT_CLASS}\r\n            />\r\n            <div className=\"text-red-500 text-sm\">\r\n              {errors.password?.message}\r\n            </div>\r\n          </div>\r\n          <div className=\"space-y-2 mb-2\">\r\n            <label htmlFor=\"confirmPassword\" className=\"text-lg font-semibold \">\r\n              Confirm Password <span className=\"text-red-500\">*</span>\r\n            </label>\r\n            <input\r\n              type=\"password\"\r\n              {...register(\"confirmPassword\")}\r\n              className={INPUT_CLASS}\r\n            />\r\n            <div className=\"text-red-500 text-sm\">\r\n              {errors.confirmPassword?.message}\r\n            </div>\r\n          </div>\r\n          <Button\r\n            disabled={!isChanged}\r\n            content=\"Sign Up\"\r\n            className=\"mb-4 mt-2 font-bold\"\r\n          />\r\n          <div className=\"text-center\">\r\n            Already a member?{\" \"}\r\n            <Link\r\n              to=\"/login\"\r\n              className=\"text-green-600 dark:text-green-400 font-bold\"\r\n            >\r\n              Log in\r\n            </Link>\r\n          </div>\r\n        </form>\r\n      </div>\r\n    </>\r\n  );\r\n}\r\n\r\nexport default Register;\r\n\r\nfunction checkRegex(value, regex) {\r\n  if (value && regex) {\r\n    var pattern = new RegExp(regex);\r\n    var res = pattern.test(value);\r\n    return res;\r\n  }\r\n}\r\n","import React from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport { Switch, BrowserRouter, Route, Redirect } from \"react-router-dom\";\r\nimport { Provider } from \"react-redux\";\r\nimport store from \"app/store\";\r\n\r\nimport App from \"./App\";\r\n\r\nimport Login from \"pages/Login\";\r\nimport Register from \"pages/Register\";\r\nimport \"./index.css\";\r\nimport \"boxicons/css/boxicons.min.css\";\r\nimport \"@fortawesome/fontawesome-free/css/all.min.css\";\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <Provider store={store}>\r\n      <BrowserRouter basename={process.env.PUBLIC_URL}>\r\n        <Switch>\r\n          <Route exact path=\"/login\" component={Login} />\r\n          <Route exact path=\"/register\" component={Register} />\r\n          <PrivateRoute path=\"*\" component={App} />\r\n        </Switch>\r\n      </BrowserRouter>\r\n    </Provider>\r\n  </React.StrictMode>,\r\n  document.getElementById(\"root\"),\r\n);\r\n\r\nfunction PrivateRoute({ component: Component, ...rest }) {\r\n  var isLogin = window.localStorage.getItem(\"token\") ? true : false;\r\n  return (\r\n    <Route\r\n      {...rest}\r\n      render={(props) =>\r\n        isLogin === true ? (\r\n          <Component {...props} />\r\n        ) : (\r\n          <Redirect\r\n            to={{ pathname: \"/login\", state: { from: props.location } }}\r\n          />\r\n        )\r\n      }\r\n    />\r\n  );\r\n}\r\n"],"sourceRoot":""}