{"version":3,"sources":["app/chatSlice.js","app/appSlice.js","app/userSlice.js","app/postSlice.js","app/store.js","logo-shadow.png","components/Loader/index.jsx","components/Button/index.jsx","hooks/utils/useDisableBodyScroll.js","components/Popup/index.jsx","assets/img/forbid.svg","pages/Forbid/index.jsx","assets/img/not-found.svg","pages/NotFound/index.jsx","assets/img/server-error.svg","pages/ServerError/index.jsx","assets/img/default-avatar.jpg","components/ImageCircle/index.jsx","assets/icons/spinner.svg","components/LoadingSpinner/index.jsx","components/Pagination/index.jsx","assets/img/default-cover.jpg","utils/Constants.js","hooks/api/useApi.js","hooks/api/usePostApi.js","hooks/pagination/usePostPagination.js","assets/icons/image-icon.svg","components/ClickableIcon/index.jsx","hooks/utils/useCloseOnClickOutside.js","hooks/utils/useEscToClose.js","assets/icons/reactions/angry.svg","assets/icons/reactions/care.svg","assets/icons/reactions/haha.svg","assets/icons/reactions/like.svg","assets/icons/reactions/love.svg","assets/icons/reactions/sad.svg","assets/icons/reactions/wow.svg","utils/Enums.js","features/Home/components/CreatePost/index.jsx","components/ConfirmModal/index.jsx","utils/UtilityMethods.js","assets/icons/send-icon.svg","features/Home/components/CommentInput/index.jsx","features/Home/components/CommentList/index.jsx","features/Home/components/EditPost/index.jsx","components/ImageView/index.jsx","assets/img/default-image.jpg","features/Home/components/PhotoList/index.jsx","features/Home/components/ReactionInput/index.jsx","features/Home/components/Post/index.jsx","hooks/api/useChatApi.js","hooks/api/useUserApi.js","features/Home/components/OnlineUserList/index.jsx","features/Home/index.jsx","features/Chat/components/CreateChat/index.jsx","features/Chat/components/ChatList/index.jsx","hooks/api/useNotificationApi.js","features/Header/components/Notification/index.jsx","features/Header/components/NotificationList/index.jsx","hooks/pagination/useNotificationPagination.js","features/Header/utils/config.js","hooks/api/useAccountApi.js","hooks/utils/useDarkMode.js","logo-circle.png","features/Header/index.jsx","hooks/api/useFriendApi.js","features/Profile/components/ChangePassword/index.jsx","components/Input/index.jsx","features/Profile/components/EditUser/index.jsx","features/Profile/components/UserInfo/index.jsx","features/Profile/index.jsx","assets/icons/emoji-icon.svg","features/Chat/components/ChatInput/index.jsx","features/Chat/components/EditChat/index.jsx","features/Chat/components/ChatWindow/index.jsx","hooks/pagination/useMessagePagination.js","features/Chat/index.jsx","pages/PostDetail/index.jsx","features/Friends/utils/Constants.js","features/Friends/components/BlockedList/index.jsx","features/Friends/components/FollowerList/index.jsx","features/Friends/components/FollowingList/index.jsx","features/Friends/components/FriendList/index.jsx","features/Friends/components/FriendRequestList/index.jsx","features/Friends/components/AllUserList/index.jsx","features/Friends/index.jsx","pages/Search/index.jsx","hooks/pagination/useAllPostPagination.js","App.js","assets/img/login-page.svg","pages/Login/index.jsx","pages/Register/index.jsx","index.js"],"names":["chats","createSlice","name","initialState","reducers","addChat","state","action","some","chat","id","payload","push","editChat","updatedChat","index","findIndex","participants","editGroupAvatar","updatedChatId","chatId","groupAvatarUrl","addReadByUserName","readByUserName","readByUserNames","includes","appendMessageToChat","chatToAppend","messagesToAppend","messages","totalRecords","limit","page","pageCount","keyword","concat","refreshChats","addMessage","newMessage","message","SenderUserName","addNotification","numOfUnreadMessages","readChat","selectedIds","addSelectedId","length","splice","removeSelectedId","indexOf","reducer","combineReducers","actions","isLoading","setIsLoading","popup","isOpen","content","title","setPopup","notifications","items","loadNotification","notification","readAllNotification","filter","x","isRead","forEach","readNotificationById","refreshNotification","currentUser","setCurrentUser","onlineUserNameList","updateOnlineUserNameList","newPostTotal","addNewPost","resetNewPost","posts","refreshPost","addPost","newPost","post","updatePost","updatedPost","photos","privacy","deletePost","loadPost","addReaction","postId","reaction","reactions","updateReaction","updatedReaction","postIndex","reactionIndex","type","deleteReaction","reactionId","addComment","comment","comments","updateComment","updatedComment","commentIndex","deleteComment","commentId","rootReducer","chatReducer","app","appReducer","users","userReducer","store","configureStore","Loader","className","circleCommonClasses","useState","isEnding","setIsEnding","useEffect","src","Logo","alt","Button","outline","onClick","onBlur","disabled","children","secondary","small","colorClass","outlineClass","useDisableBodyScroll","document","body","style","overflowY","Popup","margin","Forbid","ForbidImg","to","NotFound","NotFoundImg","ServerError","ErrorImg","ImageCircle","onlineSize","avatarSize","DefaultAvatar","parentClassName","size","userName","useSelector","isCurrentUser","isOnline","map","React","memo","LoadingSpinner","Spinner","Pagination","isHasMore","error","loadMoreContent","loadMoreClassName","MAX_IMAGE_SIZE","MAX_IMAGE_SIZE_NUMBER","DefaultLimit","DefaultName","ChatClient","AppClient","useApi","dispatch","useDispatch","history","useHistory","Api","axios","create","baseURL","process","timeout","headers","paramsSerializer","params","queryString","stringify","openPopup","interceptors","request","use","config","a","token","window","localStorage","getItem","newConfig","Authorization","response","data","popupTitle","status","removeItem","location","href","errors","obj","str","Object","values","val","toString","substring","objToString","Promise","reject","toLowerCase","baseApiUrl","usePostApi","getAll","url","get","getNewsFeed","getByUserName","getById","put","delete","addPhoto","deletePhoto","photoId","usePostPagination","pagination","setError","setIsHasMore","postApi","then","catch","e","ClickableIcon","icon","iconClass","colorIconClass","secondMode","reverse","innerRef","color","ref","useCloseOnClickOutside","setIsOpen","checkIfClickedOutside","current","contains","target","addEventListener","removeEventListener","useEscToClose","escFunction","keyCode","ChatType","RelationType","Gender","MALE","FEMALE","OTHER","GenderName","NotificationType","PrivacyType","PUBLIC","FRIEND","PRIVATE","PrivacyName","PrivacyIcon","ReactionType","LIKE","LOVE","CARE","HAHA","WOW","SAD","ANGRY","ReactionName","ReactionIcon","LikeIcon","LoveIcon","CareIcon","HahaIcon","WowIcon","SadIcon","AngryIcon","ReactionColor","CreatePost","setContent","setPrivacy","imageFiles","setImageFiles","isOpenPrivacyList","setIsOpenPrivacyList","isValidButton","setIsValidButton","isOpenEmoji","setIsOpenEmoji","useRef","emojiRef","privacyRef","trim","avatarUrl","placeholder","firstName","ImageIcon","onSubmit","preventDefault","image","FormData","append","fullName","value","onChange","rows","disableAutoFocus","onEmojiClick","event","emojiObject","emoji","hidden","multiple","files","isValid","newImageFiles","file","addFiles","accept","htmlFor","imageFile","URL","createObjectURL","removeImage","ConfirmModal","closeAction","confirmButtonTitle","confirmButtonAction","formatDate","d","date","Date","isNaN","isValidDate","now","moment","dateToFormat","diff","fromNow","format","CommentInput","onSendMessage","SendIconNormal","CommentList","myCommentList","creator","sort","b","dateCreated","otherCommentList","Comment","isMyComment","isOpenMenu","setIsOpenMenu","isOpenConfirm","setIsOpenConfirm","isEditMode","setIsEditMode","editContent","setEditContent","editInputRef","focus","EditPost","oldPhotoIds","setOldPhotoIds","photo","imageUrl","result","removeOldPhoto","ImageView","startIndex","setIndex","imageRef","closeRef","leftRef","rightRef","caption","PhotoList","setStartIndex","list","OnePhotoList","TwoPhotosList","ThreePhotosList","FourPhotosList","List","remainingPhotos","Reaction","ReactionInput","reacted","Post","isOpenComment","isOpenEdit","setIsOpenEdit","isOpenReaction","setIsOpenReaction","isOpenCommentList","setIsOpenCommentList","topThreeType","setTopThreeType","reactionRef","find","group","xs","key","reduce","rv","groupBy","topThree","total","slice","topThreeReaction","preState","onMouseOver","onMouseLeave","useChatApi","sendMessage","patch","sendImage","updateGroupAvatar","createGroupChat","groupName","updateGroupChat","newGroupName","createPrivateChat","useUserApi","getUserList","getCurrentUser","updateInformation","updateAvatar","updateCover","OnlineUserList","userApi","chatApi","useLocation","setUsers","onlineUsers","setOnlineUsers","participantUserName","pathname","online","user","handleCreateChat","Home","setPagination","coverUrl","DefaultCover","nickName","aboutMe","CreateChat","selectedMode","setSelectedMode","isOpenUserList","setIsOpenUserList","setGroupName","setKeyword","userList","setUserList","selectedUsers","setSelectedUsers","userListRef","participantUserNames","shift","onFocus","autoComplete","selected","localeCompare","friend","i","handleCreateGroup","ChatList","setChatNotificationNumber","isOpenCreateChat","setIsOpenCreateChat","num","preNum","getCurrentChats","currentUserName","lastMessage","handleClick","rel","chatA","chatB","lastMessageA","lastMessageB","sortChat","searchChat","useNotificationApi","readAll","readById","Notification","reactionType","NotificationList","setNotificationNumber","setPage","notificationApi","useNotificationPagination","prevPage","NavList","inactiveIcon","route","isMobile","useAccountApi","login","changePassword","logout","register","lastName","checkUserNameExists","useDarkMode","darkMode","setDarkMode","documentElement","classList","add","setItem","remove","Header","accountApi","chatNotificationNumber","notificationNumber","isOpenNavBar","setIsOpenNavBar","isOpenChatList","setIsOpenChatList","isOpenNotificationList","setIsOpenNotificationList","confirmModal","setConfirmModal","navBarRef","openConfirmModal","goTo","isCurrentRoute","scrollTo","top","left","behavior","search","nav","currentRoute","class","useFriendApi","getFriends","getFriendRequests","getMyRequests","getFollowers","getFollowing","getBlocked","getRelationByUserName","addFriend","unfriend","block","unblock","follow","unfollow","ChangePassword","isChanged","setIsChanged","INPUT_CLASS","schema","yup","shape","currentPassword","required","newPassword","test","regex","RegExp","checkRegex","confirmPassword","watch","useForm","resolver","yupResolver","defaultValues","handleSubmit","control","reset","formState","useWatch","Input","EditUser","setFirstName","setLastName","phoneNumber","setPhoneNumber","email","setEmail","setNickName","setAboutMe","gender","setGender","dateOfBirth","setDateOfBirth","toDateInputValue","submit","prototype","local","this","setMinutes","getMinutes","getTimezoneOffset","toJSON","UserInfo","getFullYear","Profile","useParams","friendApi","setUser","isOpenChangePassword","setIsOpenChangePassword","relation","setRelation","relationButton","setRelationButton","photoView","setPhotoView","menuRef","openPhotoView","formData","fetchRelation","relationType","isFollowing","openUnfriendModal","openDeclineModal","pre","ChatInput","EmojiIcon","EditChat","isOpenModal","setIsOpenModal","modalContent","setModalContent","avatar","setAvatar","friendList","setFriendList","isOpenFriendList","setIsOpenFriendList","selectedFriendList","setSelectedFriendList","friendListRef","currentParticipantUserNames","selectedParticipantUserNames","participantFullNamesToAdd","participantFullNamesToRemove","participantUserNamesToRemove","openModal","submitEditChat","participantUserNamesToAdd","closeModal","creatorFullName","handleEditChat","ChatWindow","showTimeIndexes","setShowTimeIndexes","isOpenInfoPopup","setIsOpenInfoPopup","setFriend","seenBy","setSeenBy","handleMessageClick","currentChat","useMessagePagination","appendChat","endMessageRef","res","newFriend","newSeenBy","firstNameList","join","scrollIntoView","scrollToBottom","messageA","messageB","senderUserName","senderFullName","Chat","connection","setConnection","selectedChats","setSelectedChats","console","fetchData","newConnection","HubConnectionBuilder","withUrl","accessTokenFactory","withAutomaticReconnect","build","connectionStarted","start","on","creatorUserName","stop","PostDetail","setPost","findPost","FriendOptionType","FriendOption","BlockedList","setList","Friend","FollowerList","FollowingList","setIsFollowing","handleFollow","FriendList","friendship","isFriend","setIsFriend","respondedDate","FriendRequestList","isAccepted","setIsAccepted","decline","requestedDate","AllUserList","Friends","activeTabType","setActiveTabType","tab","Search","searchKeyword","setSearchKeyword","useAllPostPagination","App","props","basename","path","component","exact","Login","username","setUsername","password","setPassword","isDirty","setIsDirty","LoginPageImage","Register","isExistsUserName","setIsExistsUserName","min","max","clearErrors","isExists","shouldFocus","PrivateRoute","Component","rest","isLogin","render","from","ReactDOM","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.3eaa76f2.chunk.js","sourcesContent":["import { combineReducers, createSlice } from \"@reduxjs/toolkit\";\r\n\r\nconst chats = createSlice({\r\n  name: \"chats\",\r\n  initialState: [],\r\n  reducers: {\r\n    addChat: (state, action) => {\r\n      var isExists = state.some((chat) => chat.id === action.payload.id);\r\n      if (!isExists) {\r\n        state.push(action.payload);\r\n      }\r\n    },\r\n    editChat: (state, action) => {\r\n      const updatedChat = action.payload;\r\n      const index = state.findIndex((chat) => {\r\n        return chat.id === updatedChat.id;\r\n      });\r\n      if (index >= 0) {\r\n        state[index].name = updatedChat.name;\r\n        state[index].participants = updatedChat.participants;\r\n      } else {\r\n        state.push(updatedChat);\r\n      }\r\n    },\r\n    editGroupAvatar: (state, action) => {\r\n      const updatedChatId = action.payload.chatId;\r\n      const index = state.findIndex((chat) => {\r\n        return chat.id === updatedChatId;\r\n      });\r\n      if (index >= 0) {\r\n        state[index].groupAvatarUrl = action.payload?.groupAvatarUrl;\r\n      }\r\n    },\r\n    addReadByUserName: (state, action) => {\r\n      const { chatId, readByUserName } = action.payload;\r\n      const index = state.findIndex((chat) => {\r\n        return chat.id === chatId;\r\n      });\r\n      if (index >= 0) {\r\n        if (!state[index].readByUserNames.includes(readByUserName)) {\r\n          state[index].readByUserNames.push(readByUserName);\r\n        }\r\n      }\r\n    },\r\n    appendMessageToChat: (state, action) => {\r\n      const chatToAppend = action.payload;\r\n      const messagesToAppend = chatToAppend?.messages;\r\n      if (chatToAppend && messagesToAppend) {\r\n        const index = state.findIndex((chat) => {\r\n          return chat.id === chatToAppend.id;\r\n        });\r\n        if (index >= 0) {\r\n          state[index].totalRecords = chatToAppend.totalRecords;\r\n          state[index].limit = chatToAppend.limit;\r\n          state[index].page = chatToAppend.page;\r\n          state[index].pageCount = chatToAppend.pageCount;\r\n          if (chatToAppend.keyword) {\r\n            state[index].messages = messagesToAppend;\r\n          } else {\r\n            state[index].messages =\r\n              state[index].messages.concat(messagesToAppend);\r\n          }\r\n        }\r\n      }\r\n    },\r\n    refreshChats: (state, action) => {\r\n      state = action.payload ?? [];\r\n      return state;\r\n    },\r\n    addMessage: (state, action) => {\r\n      const newMessage = action.payload;\r\n      const index = state.findIndex((chat) => {\r\n        return chat.id === newMessage.chatId;\r\n      });\r\n      if (index >= 0) {\r\n        state[index].messages.push(newMessage?.message);\r\n        state[index].readByUserNames = [newMessage?.SenderUserName];\r\n      }\r\n    },\r\n    addNotification: (state, action) => {\r\n      const chatId = action.payload;\r\n      const index = state.findIndex((chat) => {\r\n        return chat.id === chatId;\r\n      });\r\n      if (index >= 0) {\r\n        state[index].numOfUnreadMessages += 1;\r\n      }\r\n    },\r\n    readChat: (state, action) => {\r\n      const chatId = action.payload;\r\n      const index = state.findIndex((chat) => {\r\n        return chat.id === chatId;\r\n      });\r\n      if (index >= 0) {\r\n        state[index].numOfUnreadMessages = 0;\r\n      }\r\n    },\r\n  },\r\n});\r\n\r\nconst selectedIds = createSlice({\r\n  name: \"selectedIds\",\r\n  initialState: [],\r\n  reducers: {\r\n    addSelectedId: (state, action) => {\r\n      if (!state.includes(action.payload)) {\r\n        // maximum 2 chat windows\r\n        if (state.length >= 2) {\r\n          state.splice(0, 1);\r\n        }\r\n        state.push(action.payload);\r\n      }\r\n    },\r\n    removeSelectedId: (state, action) => {\r\n      const index = state.indexOf(action.payload);\r\n      if (index >= 0) {\r\n        state.splice(index, 1);\r\n      }\r\n    },\r\n  },\r\n});\r\n\r\nconst reducer = combineReducers({\r\n  chats: chats.reducer,\r\n  selectedIds: selectedIds.reducer,\r\n});\r\n\r\nexport const {\r\n  addChat,\r\n  editChat,\r\n  refreshChats,\r\n  addMessage,\r\n  appendMessageToChat,\r\n  editGroupAvatar,\r\n  readChat,\r\n  addNotification,\r\n  addReadByUserName,\r\n} = chats.actions;\r\n\r\nexport const { addSelectedId, removeSelectedId } = selectedIds.actions;\r\nexport default reducer;\r\n","import { combineReducers, createSlice } from \"@reduxjs/toolkit\";\r\n\r\nconst isLoading = createSlice({\r\n  name: \"isLoading\",\r\n  initialState: false,\r\n  reducers: {\r\n    setIsLoading: (state, action) => {\r\n      state = action.payload;\r\n      return state;\r\n    },\r\n  },\r\n});\r\n\r\nconst popup = createSlice({\r\n  name: \"popup\",\r\n  initialState: {\r\n    isOpen: false,\r\n    content: \"\",\r\n    title: \"Notification\",\r\n  },\r\n  reducers: {\r\n    setPopup: (state, action) => {\r\n      state = action.payload;\r\n      return state;\r\n    },\r\n  },\r\n});\r\n\r\nconst notifications = createSlice({\r\n  name: \"notifications\",\r\n  initialState: { items: [] },\r\n  reducers: {\r\n    addNotification: (state, action) => {\r\n      state?.items?.push(action.payload);\r\n    },\r\n    loadNotification: (state, action) => {\r\n      if (action.payload.page > state.page) {\r\n        const notification = action.payload;\r\n        state.totalRecords = notification.totalRecords;\r\n        state.limit = notification.limit;\r\n        state.page = notification.page;\r\n        state.pageCount = notification.pageCount;\r\n        state.items = state.items.concat(notification.items);\r\n      }\r\n    },\r\n    readAllNotification: (state, action) => {\r\n      state?.items?.filter((x) => !x.isRead)?.forEach((x) => (x.isRead = true));\r\n    },\r\n    readNotificationById: (state, action) => {\r\n      const id = action.payload;\r\n      const index = state.items?.findIndex((notification) => {\r\n        return notification.id === id;\r\n      });\r\n      if (index >= 0) {\r\n        state.items[index].isRead = true;\r\n      }\r\n    },\r\n    refreshNotification: (state, action) => {\r\n      state = action.payload;\r\n      return state;\r\n    },\r\n  },\r\n});\r\n\r\nconst reducer = combineReducers({\r\n  isLoading: isLoading.reducer,\r\n  popup: popup.reducer,\r\n  notifications: notifications.reducer,\r\n});\r\n\r\nexport const { setIsLoading } = isLoading.actions;\r\nexport const { setPopup } = popup.actions;\r\nexport const {\r\n  addNotification,\r\n  refreshNotification,\r\n  readAllNotification,\r\n  readNotificationById,\r\n  loadNotification,\r\n} = notifications.actions;\r\nexport default reducer;\r\n","import { combineReducers, createSlice } from \"@reduxjs/toolkit\";\r\n//import jwt from \"jwt-decode\";\r\n\r\nconst currentUser = createSlice({\r\n  name: \"currentUser\",\r\n  initialState: {},\r\n  reducers: {\r\n    setCurrentUser: (state, action) => {\r\n      state = action.payload;\r\n      return state;\r\n    },\r\n  },\r\n});\r\n\r\nconst onlineUserNameList = createSlice({\r\n  name: \"onlineUserNameList\",\r\n  initialState: [],\r\n  reducers: {\r\n    updateOnlineUserNameList: (state, action) => {\r\n      state = action.payload;\r\n      return state;\r\n    },\r\n  },\r\n});\r\n\r\nconst reducer = combineReducers({\r\n  currentUser: currentUser.reducer,\r\n  onlineUserNameList: onlineUserNameList.reducer,\r\n});\r\n\r\nexport const { setCurrentUser } = currentUser.actions;\r\nexport const { updateOnlineUserNameList } = onlineUserNameList.actions;\r\nexport default reducer;\r\n\r\n// function decodeCurrentUser() {\r\n//   var token = window.localStorage.getItem(\"token\");\r\n//   if (token) {\r\n//     const user = jwt(token);\r\n//     return user;\r\n//   }\r\n//   return false;\r\n// }\r\n","import { combineReducers, createSlice } from \"@reduxjs/toolkit\";\r\n\r\nconst newPostTotal = createSlice({\r\n  name: \"newPostTotal\",\r\n  initialState: 0,\r\n  reducers: {\r\n    addNewPost: (state) => {\r\n      return state + 1;\r\n    },\r\n    resetNewPost: () => {\r\n      return 0;\r\n    },\r\n  },\r\n});\r\nconst posts = createSlice({\r\n  name: \"posts\",\r\n  initialState: { items: [] },\r\n  reducers: {\r\n    refreshPost: (state, action) => {\r\n      state = action.payload;\r\n      return state;\r\n    },\r\n    addPost: (state, action) => {\r\n      const newPost = action.payload;\r\n      const isExists = state.items.some((post) => post.id === newPost.id);\r\n      if (!isExists) {\r\n        state?.items?.push(newPost);\r\n      }\r\n    },\r\n    updatePost: (state, action) => {\r\n      const updatedPost = action.payload;\r\n\r\n      const index = state?.items?.findIndex((post) => {\r\n        return post.id === updatedPost.id;\r\n      });\r\n      if (index >= 0) {\r\n        state.items[index].photos = updatedPost.photos;\r\n        state.items[index].content = updatedPost.content;\r\n        state.items[index].privacy = updatedPost.privacy;\r\n      } else {\r\n        state.push(updatedPost);\r\n      }\r\n    },\r\n    deletePost: (state, action) => {\r\n      const index = state?.items?.findIndex((post) => {\r\n        return post.id === action.payload;\r\n      });\r\n      if (index >= 0) {\r\n        state.items.splice(index, 1);\r\n      }\r\n    },\r\n    loadPost: (state, action) => {\r\n      if (action.payload.page > state.page) {\r\n        const posts = action.payload;\r\n        state.totalRecords = posts.totalRecords;\r\n        state.limit = posts.limit;\r\n        state.page = posts.page;\r\n        state.pageCount = posts.pageCount;\r\n        state.items = state.items.concat(posts.items);\r\n      }\r\n    },\r\n    addReaction: (state, action) => {\r\n      const postId = action.payload.postId;\r\n      const reaction = action.payload.reaction;\r\n      if (postId && reaction) {\r\n        const index = state?.items?.findIndex((post) => {\r\n          return post.id === postId;\r\n        });\r\n        if (index >= 0) {\r\n          state.items[index].reactions.push(reaction);\r\n        }\r\n      }\r\n    },\r\n    updateReaction: (state, action) => {\r\n      const postId = action.payload.postId;\r\n      const updatedReaction = action.payload.reaction;\r\n\r\n      if (postId && updatedReaction) {\r\n        const postIndex = state?.items?.findIndex((post) => {\r\n          return post.id === postId;\r\n        });\r\n        if (postIndex >= 0) {\r\n          const reactionIndex = state?.items[postIndex].reactions?.findIndex(\r\n            (reaction) => {\r\n              return reaction.id === updatedReaction.id;\r\n            },\r\n          );\r\n          if (reactionIndex >= 0) {\r\n            state.items[postIndex].reactions[reactionIndex].type =\r\n              updatedReaction.type;\r\n          }\r\n        }\r\n      }\r\n    },\r\n    deleteReaction: (state, action) => {\r\n      const postId = action.payload.postId;\r\n      const reactionId = action.payload.reactionId;\r\n\r\n      if (postId && reactionId) {\r\n        const postIndex = state?.items?.findIndex((post) => {\r\n          return post.id === postId;\r\n        });\r\n        if (postIndex >= 0) {\r\n          const reactionIndex = state?.items[postIndex].reactions?.findIndex(\r\n            (reaction) => {\r\n              return reaction.id === reactionId;\r\n            },\r\n          );\r\n          if (reactionIndex >= 0) {\r\n            state.items[postIndex].reactions.splice(reactionIndex, 1);\r\n            return state;\r\n          }\r\n        }\r\n      }\r\n    },\r\n    addComment: (state, action) => {\r\n      const postId = action.payload.postId;\r\n      const comment = action.payload.comment;\r\n      if (postId && comment) {\r\n        const index = state?.items?.findIndex((post) => {\r\n          return post.id === postId;\r\n        });\r\n        if (index >= 0) {\r\n          state.items[index].comments.push(comment);\r\n        }\r\n      }\r\n    },\r\n    updateComment: (state, action) => {\r\n      const postId = action.payload.postId;\r\n      const updatedComment = action.payload.comment;\r\n\r\n      if (postId && updatedComment) {\r\n        const postIndex = state?.items?.findIndex((post) => {\r\n          return post.id === postId;\r\n        });\r\n        if (postIndex >= 0) {\r\n          const commentIndex = state?.items[postIndex].comments?.findIndex(\r\n            (comment) => {\r\n              return comment.id === updatedComment.id;\r\n            },\r\n          );\r\n          if (commentIndex >= 0) {\r\n            state.items[postIndex].comments[commentIndex].content =\r\n              updatedComment.content;\r\n          }\r\n        }\r\n      }\r\n    },\r\n    deleteComment: (state, action) => {\r\n      const postId = action.payload.postId;\r\n      const commentId = action.payload.commentId;\r\n\r\n      if (postId && commentId) {\r\n        const postIndex = state?.items?.findIndex((post) => {\r\n          return post.id === postId;\r\n        });\r\n        if (postIndex >= 0) {\r\n          const commentIndex = state?.items[postIndex].comments?.findIndex(\r\n            (comment) => {\r\n              return comment.id === commentId;\r\n            },\r\n          );\r\n          if (commentIndex >= 0) {\r\n            state.items[postIndex].comments.splice(commentIndex, 1);\r\n            return state;\r\n          }\r\n        }\r\n      }\r\n    },\r\n  },\r\n});\r\n\r\nconst reducer = combineReducers({\r\n  posts: posts.reducer,\r\n  newPostTotal: newPostTotal.reducer,\r\n});\r\n\r\nexport const {\r\n  refreshPost,\r\n  addPost,\r\n  updatePost,\r\n  deletePost,\r\n  addReaction,\r\n  updateReaction,\r\n  deleteReaction,\r\n  addComment,\r\n  updateComment,\r\n  deleteComment,\r\n  loadPost,\r\n} = posts.actions;\r\nexport const { addNewPost, resetNewPost } = newPostTotal.actions;\r\n\r\nexport default reducer;\r\n","import { configureStore } from \"@reduxjs/toolkit\";\r\nimport chatReducer from \"app/chatSlice\";\r\nimport appReducer from \"app/appSlice\";\r\nimport userReducer from \"app/userSlice\";\r\nimport postSlice from \"app/postSlice\";\r\n\r\nconst rootReducer = {\r\n  chats: chatReducer,\r\n  app: appReducer,\r\n  users: userReducer,\r\n  posts: postSlice,\r\n};\r\n\r\nconst store = configureStore({\r\n  reducer: rootReducer,\r\n});\r\n\r\nexport default store;\r\n","export default __webpack_public_path__ + \"static/media/logo-shadow.3faacd46.png\";","import { useEffect, useState } from \"react\";\r\nimport Logo from \"logo-shadow.png\";\r\n\r\nconst Loader = ({ className, isOpen = true }) => {\r\n  let circleCommonClasses =\r\n    \"h-3 w-3 bg-gradient-to-br from-green-300 to-green-600 shadow-md rounded-full\";\r\n  const [isEnding, setIsEnding] = useState(false);\r\n  useEffect(() => {\r\n    return () => {\r\n      setIsEnding(true);\r\n    };\r\n  }, []);\r\n  return (\r\n    isOpen && (\r\n      <>\r\n        <div\r\n          className={\r\n            \"z-50 animate-fadeIn flex flex-col h-screen w-screen justify-center items-center fixed transition-base bg-white dark:bg-dark-secondary\" +\r\n            (isEnding ? \" hidden\" : \"\") +\r\n            (\" \" + className ?? \"\")\r\n          }\r\n        >\r\n          <img src={Logo} className=\"w-20 h-20 mb-10\" alt=\"logo\" />\r\n          <div className=\"flex-center transition-base\">\r\n            <div className={`${circleCommonClasses} mr-3 animate-bounce`}></div>\r\n            <div\r\n              className={`${circleCommonClasses} mr-3 animate-bounce200`}\r\n            ></div>\r\n            <div className={`${circleCommonClasses} animate-bounce400`}></div>\r\n          </div>\r\n        </div>\r\n      </>\r\n    )\r\n  );\r\n};\r\n\r\nexport default Loader;\r\n","import React from \"react\";\r\nimport PropTypes from \"prop-types\";\r\n\r\nButton.propTypes = {\r\n  content: PropTypes.string,\r\n  className: PropTypes.string,\r\n};\r\n\r\nfunction Button({\r\n  outline = false,\r\n  content,\r\n  className,\r\n  onClick,\r\n  onBlur,\r\n  disabled,\r\n  children,\r\n  secondary,\r\n  small,\r\n}) {\r\n  const colorClass = secondary\r\n    ? \"bg-gray-200 hover:bg-gray-300 active:bg-gray-400 dark:bg-dark-third dark:hover:bg-dark-hover\"\r\n    : \"bg-gradient-to-br from-green-400 to-green-600 text-white active:from-green-500 active:to-green-600\";\r\n\r\n  const outlineClass = secondary\r\n    ? \"\"\r\n    : \"ring-inset ring-1 ring-green-500 bg-white dark:bg-transparent dark:hover:bg-green-500 text-green-500 hover:text-white hover:bg-green-400 active:bg-green-500\";\r\n  return (\r\n    <>\r\n      <button\r\n        disabled={disabled}\r\n        onClick={onClick}\r\n        onBlur={onBlur}\r\n        className={\r\n          \" transition-base text-sm rounded-lg md:text-base duration-200 disabled:opacity-50 outline-none z-0 select-none font-semibold\" +\r\n          \" \" +\r\n          (outline ? outlineClass : colorClass) +\r\n          \" \" +\r\n          (className ?? \"\") +\r\n          \" \" +\r\n          (small ? \"px-3 py-1\" : \"px-4 py-2 min-w-70\") +\r\n          \" \" +\r\n          (!disabled ? \"active:scale-95 active:transform\" : \"cursor-default\")\r\n        }\r\n      >\r\n        {content ? content : children}\r\n      </button>\r\n    </>\r\n  );\r\n}\r\n\r\nexport default Button;\r\n","import { useEffect } from \"react\";\r\n\r\nexport const useDisableBodyScroll = (isOpen) => {\r\n  useEffect(() => {\r\n    if (isOpen) {\r\n      document.body.style.overflowY = \"hidden\";\r\n    } else {\r\n      document.body.style.overflowY = \"unset\";\r\n    }\r\n    return () => {\r\n      document.body.style.overflowY = \"unset\";\r\n    };\r\n  }, [isOpen]);\r\n};\r\n","import Button from \"components/Button\";\r\nimport { useDisableBodyScroll } from \"hooks/utils/useDisableBodyScroll\";\r\nimport PropTypes from \"prop-types\";\r\nimport React from \"react\";\r\n\r\nPopup.propTypes = {\r\n  title: PropTypes.string,\r\n  isOpen: PropTypes.bool,\r\n  onClick: PropTypes.func,\r\n};\r\n\r\nfunction Popup({\r\n  title = \"Notification\",\r\n  isOpen,\r\n  content = \"Oops! Something went wrong!\",\r\n  onClick,\r\n}) {\r\n  useDisableBodyScroll(isOpen);\r\n  return (\r\n    isOpen && (\r\n      <div className=\"px-4 flex-center overlay\" style={{ margin: 0 }}>\r\n        <div className=\"animate-swipeDown bg-white dark:bg-dark-secondary md:py-8 md:px-8 py-4 px-5  w-full md:w-2/3 lg:w-1/2 flex flex-col justify-between items-start rounded-xl space-y-8 shadow-2xl border border-gray-300 dark:border-dark-third md:max-w-700\">\r\n          <h3 className=\"font-semibold text-2xl break-words dark:text-dark-txt\">\r\n            {title}\r\n          </h3>\r\n          <span className=\"break-words dark:text-dark-txt\">{content}</span>\r\n          <div className=\"w-full flex justify-end\">\r\n            <Button content=\"Close\" onClick={onClick} />\r\n          </div>\r\n        </div>\r\n      </div>\r\n    )\r\n  );\r\n}\r\n\r\nexport default Popup;\r\n","export default __webpack_public_path__ + \"static/media/forbid.e276990e.svg\";","import React from \"react\";\r\nimport ForbidImg from \"assets/img/forbid.svg\";\r\nimport Button from \"components/Button\";\r\nimport { Link } from \"react-router-dom\";\r\n\r\nfunction Forbid({ message }) {\r\n  return (\r\n    <div className=\"fixed inset-0 h-screen animate-fadeIn w-screen flex flex-col justify-center items-center space-y-8 px-2\">\r\n      <img\r\n        className=\"md:max-w-xl max-w-xs object-cover\"\r\n        src={ForbidImg}\r\n        alt=\"Error\"\r\n      />\r\n      <span className=\"font-bold text-xl md:text-2xl text-center\">\r\n        {message ?? \"You don't have permission to access this resources\"}\r\n      </span>\r\n      <Link to=\"/\">\r\n        <Button content=\"Return home page\" />\r\n      </Link>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Forbid;\r\n","export default __webpack_public_path__ + \"static/media/not-found.efbefd9e.svg\";","import React from \"react\";\r\nimport NotFoundImg from \"assets/img/not-found.svg\";\r\nimport Button from \"components/Button\";\r\nimport { Link } from \"react-router-dom\";\r\n\r\nfunction NotFound({ message }) {\r\n  return (\r\n    <div className=\"fixed inset-0 h-screen animate-fadeIn w-screen flex flex-col justify-center items-center space-y-8 px-2\">\r\n      <img\r\n        className=\"md:max-w-xl max-w-xs object-cover\"\r\n        src={NotFoundImg}\r\n        alt=\"Error\"\r\n      />\r\n      <span className=\" font-bold text-xl md:text-3xl text-center\">\r\n        {message ?? \"Not found resources\"}\r\n      </span>\r\n      <Link to=\"/\">\r\n        <Button content=\"Return home page\" />\r\n      </Link>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default NotFound;\r\n","export default __webpack_public_path__ + \"static/media/server-error.0bee07d2.svg\";","import React from \"react\";\r\nimport ErrorImg from \"assets/img/server-error.svg\";\r\nimport Button from \"components/Button\";\r\nimport { Link } from \"react-router-dom\";\r\n\r\nfunction ServerError({ message }) {\r\n  return (\r\n    <div className=\"z-10 fixed inset-0 h-screen animate-fadeIn w-screen flex flex-col justify-center items-center space-y-8 px-2\">\r\n      <img\r\n        className=\"md:max-w-xl max-w-xs object-cover\"\r\n        src={ErrorImg}\r\n        alt=\"Error\"\r\n      />\r\n      <span className=\"font-bold text-xl md:text-2xl text-center\">\r\n        {message ?? \"Oops! Something went wrong!\"}\r\n      </span>\r\n      <Link to=\"/\">\r\n        <Button content=\"Return home page\" />\r\n      </Link>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default ServerError;\r\n","export default __webpack_public_path__ + \"static/media/default-avatar.ae67bd1e.jpg\";","import DefaultAvatar from \"assets/img/default-avatar.jpg\";\r\nimport PropTypes from \"prop-types\";\r\nimport React from \"react\";\r\nimport { useSelector } from \"react-redux\";\r\n\r\nImageCircle.propTypes = {\r\n  src: PropTypes.string,\r\n  className: PropTypes.string,\r\n  alt: PropTypes.string,\r\n  size: PropTypes.string,\r\n};\r\n\r\nfunction ImageCircle({\r\n  src = DefaultAvatar,\r\n  className = \"\",\r\n  parentClassName = \"\",\r\n  alt = \"Avatar\",\r\n  size = \"md\",\r\n  userName = \"\",\r\n  participants,\r\n  onClick,\r\n}) {\r\n  const onlineUserNameList = useSelector(\r\n    (state) => state.users.onlineUserNameList,\r\n  );\r\n  const currentUser = useSelector((state) => state.users.currentUser);\r\n\r\n  const isCurrentUser = userName === currentUser.userName;\r\n\r\n  var isOnline = false;\r\n  if (!isCurrentUser) {\r\n    if (userName) {\r\n      isOnline = onlineUserNameList.includes(userName);\r\n    } else if (participants) {\r\n      isOnline = participants\r\n        .filter((x) => x.userName !== currentUser.userName)\r\n        .map((x) => x)\r\n        .some((x) => onlineUserNameList.includes(x.userName));\r\n    }\r\n  }\r\n\r\n  var onlineSize;\r\n  switch (size) {\r\n    case \"xs\":\r\n      onlineSize = \"w-2 h-2\";\r\n      break;\r\n    case \"sm\":\r\n      onlineSize = \"md:w-3 md:h-3 w-2 h-2 md:border-2 border\";\r\n      break;\r\n    case \"lg\":\r\n      onlineSize = \"border-2 w-4 h-4\";\r\n      break;\r\n    case \"xl\":\r\n      onlineSize = \"border-2 w-5 h-5\";\r\n      break;\r\n    case \"full\":\r\n      onlineSize = \"border-4 w-1/5 h-1/5\";\r\n      break;\r\n    default:\r\n      onlineSize = \"border-2 md:w-4 md:h-4 h-3 w-3\";\r\n  }\r\n\r\n  var avatarSize;\r\n  switch (size) {\r\n    case \"xs\":\r\n      avatarSize = \"h-5 w-5 md:h-6 md:w-6\";\r\n      break;\r\n    case \"sm\":\r\n      avatarSize = \"h-6 w-6 md:h-8 md:w-8\";\r\n      break;\r\n    case \"lg\":\r\n      avatarSize = \"h-14 w-14 md:h-16 md:w-16\";\r\n      break;\r\n    case \"xl\":\r\n      avatarSize = \"h-20 w-20 md:h-24 md:w-24\";\r\n      break;\r\n    case \"full\":\r\n      avatarSize = \"h-full w-full\";\r\n      break;\r\n    default:\r\n      avatarSize = \"h-10 w-10 md:h-12 md:w-12\";\r\n  }\r\n  return (\r\n    <div className={`relative flex-shrink-0 ${parentClassName}`}>\r\n      <img\r\n        onClick={onClick}\r\n        className={\r\n          avatarSize +\r\n            \" \" +\r\n            \"select-none bg-white rounded-full object-cover flex-shrink-0\" +\r\n            \" \" +\r\n            className ?? \"\"\r\n        }\r\n        src={!src || src === \"\" ? DefaultAvatar : src}\r\n        alt={alt}\r\n      />\r\n      {(isCurrentUser || isOnline) && (\r\n        <span\r\n          className={\r\n            \"absolute bg-green-500 dark:bg-green-400 bottom-0 right-0 rounded-full border-white dark:border-black\" +\r\n            \" \" +\r\n            onlineSize\r\n          }\r\n        ></span>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default React.memo(ImageCircle);\r\n","export default __webpack_public_path__ + \"static/media/spinner.5952382b.svg\";","import React from \"react\";\r\nimport Spinner from \"assets/icons/spinner.svg\";\r\n\r\nfunction LoadingSpinner() {\r\n  return (\r\n    <>\r\n      <img src={Spinner} alt=\"spinner\" className=\"animate-spin w-7 h-7\" />\r\n    </>\r\n  );\r\n}\r\n\r\nexport default LoadingSpinner;\r\n","import LoadingSpinner from \"components/LoadingSpinner\";\r\nimport React from \"react\";\r\n\r\nfunction Pagination({\r\n  isHasMore,\r\n  isLoading,\r\n  error,\r\n  onClick,\r\n  loadMoreContent = \"Load more...\",\r\n  loadMoreClassName = \"\",\r\n  className = \"\",\r\n}) {\r\n  return (\r\n    <div className={className}>\r\n      {isHasMore && !isLoading && (\r\n        <div className=\"flex\">\r\n          <button\r\n            className={\r\n              \"mx-auto px-4 bg-gray-100 py-2 rounded-lg transform active:scale-95 hover:bg-gray-200 dark:hover:bg-dark-hover dark:bg-dark-third dark:text-gray-300 text-xs md:text-sm transition-all duration-200\" +\r\n              \" \" +\r\n              loadMoreClassName\r\n            }\r\n            onClick={onClick}\r\n          >\r\n            {loadMoreContent}\r\n          </button>\r\n        </div>\r\n      )}\r\n      {isLoading && (\r\n        <div className=\"flex justify-center mt-2\">\r\n          <LoadingSpinner />\r\n        </div>\r\n      )}\r\n      {error && <div className=\"text-red-500 text-center \">{error}</div>}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Pagination;\r\n","export default __webpack_public_path__ + \"static/media/default-cover.1aa0fb86.jpg\";","export const MAX_IMAGE_SIZE_NUMBER = 3;\r\nexport const MAX_IMAGE_SIZE = MAX_IMAGE_SIZE_NUMBER * 1024 * 1024;\r\n\r\nexport const DefaultLimit = {\r\n  NOTIFICATION: 50,\r\n  POST: 50,\r\n  FRIEND: 50,\r\n};\r\n\r\nexport const DefaultName = {\r\n  NO_NAME_GROUP: \"No name\",\r\n  NO_NAME_USER: \"Unknown\",\r\n};\r\n\r\nexport const ChatClient = {\r\n  RECEIVE_MESSAGE: \"ReceiveMessage\",\r\n  RECEIVE_CHAT: \"ReceiveChat\",\r\n  RECEIVE_UPDATED_CHAT: \"ReceiveUpdatedChat\",\r\n  RECEIVE_UPDATED_GROUP_AVATAR: \"ReceiveUpdatedGroupAvatar\",\r\n  RECEIVE_ADD_READ_BY_USERNAME: \"ReceiveAddReadByUserName\",\r\n  RECEIVE_UPDATED_ONLINE_USERNAME_LIST: \"ReceiveUpdatedOnlineUserNameList\",\r\n};\r\n\r\nexport const AppClient = {\r\n  RECEIVE_POST: \"ReceivePost\",\r\n  RECEIVE_UPDATED_POST: \"ReceiveUpdatedPost\",\r\n  DELETE_POST: \"DeletePost\",\r\n  RECEIVE_COMMENT: \"ReceiveComment\",\r\n  RECEIVE_UPDATED_COMMENT: \"ReceiveUpdatedComment\",\r\n  DELETE_COMMENT: \"DeleteComment\",\r\n  RECEIVE_REACTION: \"ReceiveReaction\",\r\n  RECEIVE_UPDATED_REACTION: \"ReceiveUpdatedReaction\",\r\n  DELETE_REACTION: \"DeleteReaction\",\r\n  RECEIVE_NOTIFICATION: \"ReceiveNotification\",\r\n};\r\n","import { setIsLoading, setPopup } from \"app/appSlice\";\r\nimport axios from \"axios\";\r\nimport queryString from \"query-string\";\r\nimport { useDispatch } from \"react-redux\";\r\nimport { useHistory } from \"react-router-dom\";\r\n\r\nexport default function useApi() {\r\n  const dispatch = useDispatch();\r\n  const history = useHistory();\r\n\r\n  const Api = axios.create({\r\n    baseURL: process.env.REACT_APP_API_URL,\r\n    timeout: 300000,\r\n    headers: {\r\n      \"Content-Type\": \"application/json\",\r\n    },\r\n    paramsSerializer: (params) => queryString.stringify(params),\r\n  });\r\n\r\n  Api.interceptors.request.use(async (config) => {\r\n    var token = window.localStorage.getItem(\"token\");\r\n\r\n    var newConfig = config;\r\n    if (token) {\r\n      newConfig = {\r\n        ...config,\r\n        headers: { Authorization: `Bearer ${token}` },\r\n      };\r\n    }\r\n    return newConfig;\r\n  });\r\n  Api.interceptors.response.use(\r\n    (response) => {\r\n      dispatch(setIsLoading(false));\r\n\r\n      if (response && response.data) {\r\n        return response.data;\r\n      }\r\n      return response;\r\n    },\r\n    (error) => {\r\n      dispatch(setIsLoading(false));\r\n      var message =\r\n        typeof error.response?.data === \"string\"\r\n          ? error.response?.data\r\n          : \"Oops, something went wrong! Please contact administrator.\";\r\n\r\n      if (error.response) {\r\n        var popupTitle = \"Notification\";\r\n        switch (error.response.status) {\r\n          case 401:\r\n            popupTitle = \"Login required\";\r\n            window.localStorage.removeItem(\"token\");\r\n            window.location.href = process.env.PUBLIC_URL + \"/\";\r\n            break;\r\n          case 403:\r\n            popupTitle = \"Forbidden\";\r\n            history?.push(\"/ForBid\");\r\n            break;\r\n          case 500:\r\n            popupTitle = \"Server error\";\r\n            history?.push(\"/ServerError\");\r\n            break;\r\n          default:\r\n            // for model binding error\r\n            message = error.response?.data?.errors\r\n              ? objToString(error.response?.data?.errors)\r\n              : message;\r\n\r\n            openPopup(popupTitle, message);\r\n            return Promise.reject(error.response?.data);\r\n        }\r\n      }\r\n\r\n      if (message.toLowerCase().includes(\"Unable to identify user\")) {\r\n        openPopup(popupTitle, message);\r\n        window.localStorage.removeItem(\"token\");\r\n        window.location.href = process.env.PUBLIC_URL + \"/\";\r\n      }\r\n      history?.push(\"/ServerError\");\r\n\r\n      return Promise.reject(error?.response?.data);\r\n    },\r\n  );\r\n\r\n  function openPopup(title, content) {\r\n    const popup = {\r\n      isOpen: true,\r\n      title: title,\r\n      content: content,\r\n    };\r\n    dispatch(setPopup(popup));\r\n  }\r\n\r\n  return Api;\r\n}\r\n\r\n// utils function for model binding convert\r\nfunction objToString(obj) {\r\n  let str = \"\";\r\n  for (const val of Object.values(obj)) {\r\n    str += `${val.toString()}, `;\r\n  }\r\n  str = str.substring(0, str.length - 2);\r\n  return str;\r\n}\r\n","import { setIsLoading } from \"app/appSlice.js\";\r\nimport { useDispatch } from \"react-redux\";\r\nimport { DefaultLimit } from \"utils/Constants.js\";\r\nimport useApi from \"./useApi.js\";\r\n\r\nconst baseApiUrl = \"/posts\";\r\n\r\nexport default function usePostApi() {\r\n  const Api = useApi();\r\n  const dispatch = useDispatch();\r\n\r\n  const postApi = {\r\n    getAll: (params) => {\r\n      if (!params?.limit) {\r\n        params = { ...params, limit: DefaultLimit.POST };\r\n      }\r\n      const url = `${baseApiUrl}`;\r\n      return Api.get(url, { params });\r\n    },\r\n    getNewsFeed: (params) => {\r\n      if (!params?.limit) {\r\n        params = { ...params, limit: DefaultLimit.POST };\r\n      }\r\n      const url = `${baseApiUrl}/newsFeed`;\r\n      return Api.get(url, { params });\r\n    },\r\n    getByUserName: (userName, params) => {\r\n      if (!params?.limit) {\r\n        params = { ...params, limit: DefaultLimit.POST };\r\n      }\r\n      const url = `users/${userName}/posts`;\r\n      return Api.get(url, { params });\r\n    },\r\n    getById: (id) => {\r\n      dispatch(setIsLoading(true));\r\n      const url = `${baseApiUrl}/${id}`;\r\n      return Api.get(url);\r\n    },\r\n    addPost: (request) => {\r\n      dispatch(setIsLoading(true));\r\n      const url = `${baseApiUrl}`;\r\n      return Api.post(url, request);\r\n    },\r\n    updatePost: (postId, request) => {\r\n      dispatch(setIsLoading(true));\r\n      const url = `${baseApiUrl}/${postId}`;\r\n      return Api.put(url, request);\r\n    },\r\n    deletePost: (postId) => {\r\n      dispatch(setIsLoading(true));\r\n      const url = `${baseApiUrl}/${postId}`;\r\n      return Api.delete(url);\r\n    },\r\n    addPhoto: (postId, request) => {\r\n      dispatch(setIsLoading(true));\r\n      const url = `${baseApiUrl}/${postId}/photos`;\r\n      Api.interceptors.request.use(async (config) => {\r\n        var token = window.localStorage.getItem(\"token\");\r\n        var newConfig = {};\r\n        if (token) {\r\n          newConfig = {\r\n            ...config,\r\n            headers: {\r\n              \"content-type\": \"multipart/form-data\",\r\n              Authorization: `Bearer ${token}`,\r\n            },\r\n          };\r\n        }\r\n        return newConfig;\r\n      });\r\n      return Api.post(url, request);\r\n    },\r\n    deletePhoto: (postId, photoId) => {\r\n      dispatch(setIsLoading(true));\r\n      const url = `${baseApiUrl}/${postId}/photos/${photoId}`;\r\n      return Api.delete(url);\r\n    },\r\n    addReaction: (postId, request) => {\r\n      const url = `${baseApiUrl}/${postId}/reactions`;\r\n      return Api.post(url, request);\r\n    },\r\n    updateReaction: (postId, request) => {\r\n      const url = `${baseApiUrl}/${postId}/reactions`;\r\n      return Api.put(url, request);\r\n    },\r\n    deleteReaction: (postId) => {\r\n      const url = `${baseApiUrl}/${postId}/reactions`;\r\n      return Api.delete(url);\r\n    },\r\n    addComment: (postId, request) => {\r\n      const url = `${baseApiUrl}/${postId}/comments`;\r\n      return Api.post(url, request);\r\n    },\r\n    updateComment: (postId, commentId, request) => {\r\n      const url = `${baseApiUrl}/${postId}/comments/${commentId}`;\r\n      return Api.put(url, request);\r\n    },\r\n    deleteComment: (postId, commentId) => {\r\n      const url = `${baseApiUrl}/${postId}/comments/${commentId}`;\r\n      return Api.delete(url);\r\n    },\r\n  };\r\n  return postApi;\r\n}\r\n","import { useEffect, useState } from \"react\";\r\nimport usePostApi from \"hooks/api/usePostApi\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { loadPost, refreshPost } from \"app/postSlice\";\r\n\r\nexport default function usePostPagination(pagination, userName = \"\") {\r\n  const [isLoading, setIsLoading] = useState(false);\r\n  const [error, setError] = useState(\"\");\r\n  const posts = useSelector((state) => state.posts.posts);\r\n  const [isHasMore, setIsHasMore] = useState(true);\r\n\r\n  const postApi = usePostApi();\r\n  const dispatch = useDispatch();\r\n\r\n  useEffect(() => {\r\n    // auto fetch data when page = 1\r\n    if ((isHasMore && pagination) || pagination.page === 1) {\r\n      setIsLoading(true);\r\n      setError(false);\r\n      if (userName) {\r\n        postApi\r\n          .getByUserName(userName, { page: pagination.page })\r\n          .then((response) => {\r\n            if (pagination.page > 1) {\r\n              dispatch(loadPost(response));\r\n            } else {\r\n              dispatch(refreshPost(response));\r\n            }\r\n            setIsHasMore(pagination.page < response.pageCount);\r\n            setIsLoading(false);\r\n          })\r\n          .catch((e) => {\r\n            setError(e);\r\n          });\r\n      } else {\r\n        postApi\r\n          .getNewsFeed({ page: pagination.page })\r\n          .then((response) => {\r\n            if (pagination.page > 1) {\r\n              dispatch(loadPost(response));\r\n            } else {\r\n              dispatch(refreshPost(response));\r\n            }\r\n            setIsHasMore(pagination.page < response.pageCount);\r\n            setIsLoading(false);\r\n          })\r\n          .catch((e) => {\r\n            setError(e);\r\n          });\r\n      }\r\n    }\r\n  }, [pagination]);\r\n\r\n  return { posts, isLoading, error, isHasMore };\r\n}\r\n","export default __webpack_public_path__ + \"static/media/image-icon.c8ad9f46.svg\";","import React from \"react\";\r\nimport PropTypes from \"prop-types\";\r\n\r\nClickableIcon.propTypes = {\r\n  className: PropTypes.string,\r\n  alt: PropTypes.string,\r\n};\r\n\r\nfunction ClickableIcon({\r\n  className,\r\n  colorClass,\r\n  icon,\r\n  iconClass,\r\n  colorIconClass,\r\n  alt,\r\n  onClick,\r\n  onBlur,\r\n  secondMode,\r\n  reverse,\r\n  innerRef,\r\n}) {\r\n  var color = secondMode\r\n    ? \"clickable dark:border-dark-third\"\r\n    : \"clickable-secondary bg-gray-100 dark:bg-dark-third \";\r\n  color = reverse\r\n    ? \"dark:bg-gray-100 dark:hover:bg-gray-200 dark:active:bg-gray-300 bg-dark-third hover:bg-dark-hover border-dark-third active:bg-dark-third\"\r\n    : color;\r\n\r\n  colorClass = !colorClass || colorClass === \"\" ? color : colorClass;\r\n\r\n  colorIconClass =\r\n    !colorIconClass || colorIconClass === \"\"\r\n      ? \"text-black dark:text-dark-txt\"\r\n      : colorIconClass;\r\n\r\n  colorIconClass = reverse ? \"dark:text-black text-white\" : colorIconClass;\r\n  return (\r\n    <>\r\n      <div\r\n        ref={innerRef}\r\n        onBlur={onBlur}\r\n        onClick={onClick}\r\n        className={\r\n          \"p-1 flex items-center justify-center rounded-full transition-base cursor-pointer active:scale-90 active:transform select-none flex-shrink-0 \" +\r\n          \" \" +\r\n          colorClass +\r\n          \" \" +\r\n          (className ?? \"\")\r\n        }\r\n      >\r\n        {icon ? (\r\n          <img\r\n            alt={alt ?? \"Clickable Icon\"}\r\n            src={icon}\r\n            onClick={onClick}\r\n            className=\"w-full align-middle\"\r\n          />\r\n        ) : (\r\n          <i\r\n            className={\r\n              \"text-center align-middle text-xl w-7 h-7 \" +\r\n              \" \" +\r\n              colorIconClass +\r\n              \" \" +\r\n              iconClass\r\n            }\r\n          ></i>\r\n        )}\r\n      </div>\r\n    </>\r\n  );\r\n}\r\n\r\nexport default ClickableIcon;\r\n","import { useEffect } from \"react\";\r\n\r\nexport const useCloseOnClickOutside = (isOpen, setIsOpen, ref) => {\r\n  useEffect(() => {\r\n    const checkIfClickedOutside = (e) => {\r\n      if (isOpen && ref.current && !ref.current.contains(e.target)) {\r\n        setIsOpen(false);\r\n      }\r\n    };\r\n    document.addEventListener(\"mousedown\", checkIfClickedOutside);\r\n    return () => {\r\n      document.removeEventListener(\"mousedown\", checkIfClickedOutside);\r\n    };\r\n  }, [isOpen]);\r\n};\r\n","import { useEffect } from \"react\";\r\n\r\nexport const useEscToClose = (setIsOpen) => {\r\n  // Esc to cancel view\r\n  function escFunction(e) {\r\n    if (e.keyCode === 27) {\r\n      setIsOpen(false);\r\n    }\r\n  }\r\n  useEffect(() => {\r\n    document.addEventListener(\"keydown\", escFunction, false);\r\n    return () => {\r\n      document.removeEventListener(\"keydown\", escFunction, false);\r\n    };\r\n  }, []);\r\n};\r\n","export default __webpack_public_path__ + \"static/media/angry.5d2c62b0.svg\";","export default __webpack_public_path__ + \"static/media/care.d36c2862.svg\";","export default __webpack_public_path__ + \"static/media/haha.e568dfbb.svg\";","export default __webpack_public_path__ + \"static/media/like.3708582e.svg\";","export default __webpack_public_path__ + \"static/media/love.12a18842.svg\";","export default __webpack_public_path__ + \"static/media/sad.c7d5223e.svg\";","export default __webpack_public_path__ + \"static/media/wow.df119310.svg\";","import AngryIcon from \"assets/icons/reactions/angry.svg\";\r\nimport CareIcon from \"assets/icons/reactions/care.svg\";\r\nimport HahaIcon from \"assets/icons/reactions/haha.svg\";\r\nimport LikeIcon from \"assets/icons/reactions/like.svg\";\r\nimport LoveIcon from \"assets/icons/reactions/love.svg\";\r\nimport SadIcon from \"assets/icons/reactions/sad.svg\";\r\nimport WowIcon from \"assets/icons/reactions/wow.svg\";\r\n\r\nexport const ChatType = {\r\n  PRIVATE: 1,\r\n  GROUP: 2,\r\n};\r\nexport const FriendshipType = {\r\n  PENDING: 0,\r\n  ACCEPTED: 1,\r\n};\r\nexport const RelationType = {\r\n  FRIEND_REQUEST_TO_ME: 0,\r\n  FRIEND: 1,\r\n  FRIEND_REQUEST_BY_ME: 2,\r\n  NOT_FRIEND: 3,\r\n};\r\nexport const Gender = {\r\n  MALE: 0,\r\n  FEMALE: 1,\r\n  OTHER: 2,\r\n};\r\nexport const GenderName = {\r\n  [Gender.MALE]: \"Male\",\r\n  [Gender.FEMALE]: \"Female\",\r\n  [Gender.OTHER]: \"Other\",\r\n};\r\n\r\nexport const NotificationType = {\r\n  COMMENT: 0,\r\n  REACTION: 1,\r\n  FRIEND_REQUEST: 2,\r\n  ACCEPTED_FRIEND_REQUEST: 3,\r\n  FOLLOW: 4,\r\n};\r\n\r\nexport const PrivacyType = {\r\n  PUBLIC: 0,\r\n  FRIEND: 2,\r\n  PRIVATE: 1,\r\n};\r\nexport const PrivacyName = {\r\n  [PrivacyType.PUBLIC]: \"Public\",\r\n  [PrivacyType.FRIEND]: \"Friend\",\r\n  [PrivacyType.PRIVATE]: \"Private\",\r\n};\r\nexport const PrivacyIcon = {\r\n  [PrivacyType.PUBLIC]: \"fas fa-globe-asia\",\r\n  [PrivacyType.FRIEND]: \"fas fa-user-friends\",\r\n  [PrivacyType.PRIVATE]: \"bx bxs-lock-alt\",\r\n};\r\nexport const ReactionType = {\r\n  LIKE: 0,\r\n  LOVE: 1,\r\n  CARE: 2,\r\n  HAHA: 4,\r\n  WOW: 3,\r\n  SAD: 5,\r\n  ANGRY: 6,\r\n};\r\nexport const ReactionName = {\r\n  [ReactionType.LIKE]: \"Like\",\r\n  [ReactionType.LOVE]: \"Love\",\r\n  [ReactionType.CARE]: \"Care\",\r\n  [ReactionType.HAHA]: \"Haha\",\r\n  [ReactionType.WOW]: \"Wow\",\r\n  [ReactionType.SAD]: \"Sad\",\r\n  [ReactionType.ANGRY]: \"Angry\",\r\n};\r\nexport const ReactionIcon = {\r\n  [ReactionType.LIKE]: LikeIcon,\r\n  [ReactionType.LOVE]: LoveIcon,\r\n  [ReactionType.CARE]: CareIcon,\r\n  [ReactionType.HAHA]: HahaIcon,\r\n  [ReactionType.WOW]: WowIcon,\r\n  [ReactionType.SAD]: SadIcon,\r\n  [ReactionType.ANGRY]: AngryIcon,\r\n};\r\nexport const ReactionColor = {\r\n  [ReactionType.LIKE]: \"text-blue-600 dark:text-blue-400 \",\r\n  [ReactionType.LOVE]: \"text-pink-600\",\r\n  [ReactionType.HAHA]: \"text-yellow-500\",\r\n  [ReactionType.CARE]: \"text-yellow-500\",\r\n  [ReactionType.WOW]: \"text-yellow-500\",\r\n  [ReactionType.SAD]: \"text-yellow-500\",\r\n  [ReactionType.ANGRY]: \"text-yellow-600\",\r\n};\r\n","import ImageIcon from \"assets/icons/image-icon.svg\";\r\nimport Button from \"components/Button\";\r\nimport ClickableIcon from \"components/ClickableIcon\";\r\nimport ImageCircle from \"components/ImageCircle\";\r\nimport Popup from \"components/Popup\";\r\nimport EmojiPicker from \"emoji-picker-react\";\r\nimport { useCloseOnClickOutside } from \"hooks/utils/useCloseOnClickOutside\";\r\nimport { useDisableBodyScroll } from \"hooks/utils/useDisableBodyScroll\";\r\nimport { useEscToClose } from \"hooks/utils/useEscToClose\";\r\nimport usePostApi from \"hooks/api/usePostApi\";\r\nimport React, { useEffect, useRef, useState } from \"react\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { MAX_IMAGE_SIZE, MAX_IMAGE_SIZE_NUMBER } from \"utils/Constants\";\r\nimport { PrivacyIcon, PrivacyName, PrivacyType } from \"utils/Enums\";\r\nimport { addPost } from \"app/postSlice\";\r\n\r\nfunction CreatePost() {\r\n  const currentUser = useSelector((state) => state.users.currentUser);\r\n\r\n  const [content, setContent] = useState(\"\");\r\n  const [privacy, setPrivacy] = useState(PrivacyType.PUBLIC);\r\n  const [imageFiles, setImageFiles] = useState([]);\r\n\r\n  const [popup, setPopup] = useState({});\r\n  const [isOpenPrivacyList, setIsOpenPrivacyList] = useState(false);\r\n  const [isValidButton, setIsValidButton] = useState(false);\r\n  const [isOpen, setIsOpen] = useState(false);\r\n  const [isOpenEmoji, setIsOpenEmoji] = useState(false);\r\n\r\n  const ref = useRef();\r\n  const emojiRef = useRef();\r\n  const privacyRef = useRef();\r\n  const postApi = usePostApi();\r\n  const dispatch = useDispatch();\r\n\r\n  useDisableBodyScroll(isOpen);\r\n\r\n  // Check click outside emoji\r\n  useCloseOnClickOutside(isOpenEmoji, setIsOpenEmoji, emojiRef);\r\n  // Check click outside create post\r\n  useCloseOnClickOutside(isOpen, setIsOpen, ref);\r\n  // Check click outside privacy\r\n  useCloseOnClickOutside(isOpenPrivacyList, setIsOpenPrivacyList, privacyRef);\r\n\r\n  // Check click esc to close\r\n  useEscToClose(setIsOpen);\r\n\r\n  const onEmojiClick = (event, emojiObject) => {\r\n    if (emojiObject?.emoji) {\r\n      setContent(content + emojiObject?.emoji);\r\n    }\r\n  };\r\n\r\n  function addFiles(files) {\r\n    var isValid = true;\r\n    const newImageFiles = [...imageFiles, ...files];\r\n    if (newImageFiles.length > 10) {\r\n      setPopup({\r\n        content: \"Please select maximum 10 images!\",\r\n        isOpen: true,\r\n      });\r\n      isValid = false;\r\n    }\r\n    newImageFiles.forEach((file) => {\r\n      if (file.size > MAX_IMAGE_SIZE) {\r\n        setPopup({\r\n          content: `Please upload less than ${MAX_IMAGE_SIZE_NUMBER}MB for each file!`,\r\n          isOpen: true,\r\n        });\r\n        isValid = false;\r\n      }\r\n    });\r\n    if (isValid) {\r\n      setImageFiles(newImageFiles);\r\n    }\r\n  }\r\n  function removeImage(index) {\r\n    if (index >= 0 && index < imageFiles.length) {\r\n      const newImageFiles = [...imageFiles];\r\n      newImageFiles.splice(index, 1);\r\n      setImageFiles(newImageFiles);\r\n    }\r\n  }\r\n  useEffect(() => {\r\n    if (content.trim() || imageFiles.length > 0) {\r\n      setIsValidButton(true);\r\n    } else {\r\n      setIsValidButton(false);\r\n    }\r\n  }, [content, imageFiles]);\r\n\r\n  function onSubmit(e) {\r\n    e.preventDefault();\r\n    postApi.addPost({ content, privacy }).then((response) => {\r\n      if (response.id) {\r\n        imageFiles.forEach((image) => {\r\n          const request = new FormData();\r\n          request.append(\"Image\", image);\r\n          request.append(\"Caption\", \"Post photo\");\r\n          postApi.addPhoto(response.id, request);\r\n        });\r\n      }\r\n      postApi.getById(response.id).then((response) => {\r\n        dispatch(addPost(response));\r\n      });\r\n    });\r\n\r\n    setIsOpen(false);\r\n    setContent(\"\");\r\n    setImageFiles([]);\r\n  }\r\n  return (\r\n    <>\r\n      <div className=\"max-w-xl md:min-w-500 min-w-200 w-full bg-white dark:bg-dark-secondary rounded-xl shadow px-4 pt-3 pb-1 space-y-3 divide-y\">\r\n        <div className=\"flex space-x-2 w-full items-center\">\r\n          <Link\r\n            className=\"font-semibold text-sm cursor-pointer flex-shrink-0\"\r\n            to={`/profile/${currentUser?.userName}`}\r\n          >\r\n            <ImageCircle src={currentUser?.avatarUrl} />\r\n          </Link>\r\n          <div onClick={() => setIsOpen(true)} className=\"w-full\">\r\n            <input\r\n              disabled\r\n              type=\"text\"\r\n              placeholder={`What's on your mind${\r\n                currentUser.firstName ? \", \" + currentUser.firstName : \"\"\r\n              }?`}\r\n              className=\"bg-gray-100 dark:bg-dark-third rounded-3xl w-full py-2 px-4 pr-12 focus:ring-2 focus:ring-green-500 focus:ring-opacity-50 outline-none transition-all duration-200 relative placeholder-gray-500 dark:placeholder-dark-txt hover:bg-gray-200 dark:hover:bg-dark-hover cursor-pointer text-sm md:text-base\"\r\n            />\r\n          </div>\r\n        </div>\r\n        <div className=\"w-full text-center flex justify-between select-none cursor-pointer py-1 border-t border-b dark:border-dark-third space-x-1 text-gray-600 dark:text-dark-txt font-semibold\">\r\n          <span\r\n            className=\"flex-1 p-1 md:py-2 bg-white hover:bg-gray-100 active:bg-gray-200 dark:bg-dark-secondary dark:hover:bg-dark-third dark:active:bg-dark-hover rounded-lg transition-base flex items-center justify-center space-x-2 text-sm md:text-base\"\r\n            onClick={() => setIsOpen(true)}\r\n          >\r\n            <img src={ImageIcon} alt=\"icon\" className=\"md:w-6 md:h-6 w-4 h-4\" />\r\n            <span>Your Photos</span>\r\n          </span>\r\n          <span\r\n            className=\"flex-1 p-1 md:py-2 bg-white hover:bg-gray-100 active:bg-gray-200 dark:bg-dark-secondary dark:hover:bg-dark-third dark:active:bg-dark-hover rounded-lg transition-base text-sm md:text-base\"\r\n            onClick={() => setIsOpen(true)}\r\n          >\r\n            <i className=\"far fa-smile-beam mr-2 md:text-xl align-middle text-green-500 dark:text-green-400\"></i>\r\n            Your Feeling\r\n          </span>\r\n        </div>\r\n      </div>\r\n      {isOpen && (\r\n        <div\r\n          className=\"overlay px-4 py-10 z-30 grid place-items-center\"\r\n          style={{ margin: 0 }}\r\n        >\r\n          <div\r\n            className=\"flex-center flex-col bg-white dark:bg-dark-secondary dark:border-dark-third rounded-xl shadow-xl border border-gray-300 w-full md:w-5/6 lg:w-2/5 transition-all duration-300 ease-in-out max-h-full animate-swipeDown overflow-x-auto \"\r\n            ref={ref}\r\n          >\r\n            {popup.isOpen && (\r\n              <Popup\r\n                title=\"Notification\"\r\n                isOpen={popup.isOpen}\r\n                content={popup.content}\r\n                onClick={() => setPopup({ isOpen: false })}\r\n              />\r\n            )}\r\n            <div className=\"relative font-bold text-center text-lg md:text-xl py-4 border-b dark:border-gray-600 w-full\">\r\n              Create post\r\n              <ClickableIcon\r\n                onClick={() => setIsOpen(false)}\r\n                iconClass=\"bx bx-x\"\r\n                className=\"absolute bg-white right-3 top-3 animate-swipeUp\"\r\n              />\r\n            </div>\r\n            <form\r\n              onSubmit={onSubmit}\r\n              className=\"flex flex-col items-start w-full px-6 space-y-4 py-4\"\r\n            >\r\n              <div className=\"flex space-x-2\">\r\n                <Link\r\n                  className=\"font-semibold text-sm cursor-pointer\"\r\n                  to={`/profile/${currentUser.userName}`}\r\n                >\r\n                  <ImageCircle\r\n                    src={currentUser.avatarUrl}\r\n                    userName={currentUser.userName}\r\n                  />\r\n                </Link>\r\n                <div className=\"flex flex-col justify-between space-y-1\">\r\n                  <Link\r\n                    className=\"font-semibold text-sm cursor-pointer hover:underline\"\r\n                    to={`/profile/${currentUser.userName}`}\r\n                  >\r\n                    {currentUser.fullName}\r\n                  </Link>\r\n                  <div className=\"relative select-none\">\r\n                    <div\r\n                      className=\"p-1 px-2 w-24 flex justify-between items-center text-xs bg-gray-200 dark:bg-dark-hover rounded cursor-pointer \"\r\n                      onClick={() => setIsOpenPrivacyList(true)}\r\n                    >\r\n                      <div className=\"flex items-center space-x-2\">\r\n                        <i className={PrivacyIcon[privacy]}></i>\r\n                        <span>{PrivacyName[privacy]}</span>\r\n                      </div>\r\n                      <i className=\"bx bx-caret-down ml-1\"></i>\r\n                    </div>\r\n                    {isOpenPrivacyList && (\r\n                      <div\r\n                        className=\"animate-fadeIn absolute w-28 top-full left-0 bg-gray-100 dark:bg-dark-third rounded p-1 text-sm\"\r\n                        ref={privacyRef}\r\n                      >\r\n                        {Object.values(PrivacyType).map((privacy) => (\r\n                          <div\r\n                            onClick={() => {\r\n                              setPrivacy(privacy);\r\n                              setIsOpenPrivacyList(false);\r\n                            }}\r\n                            className=\"cursor-pointer hover:bg-gray-200 flex items-center dark:hover:bg-dark-hover p-1 px-2 rounded duration-150 w-full space-x-2\"\r\n                          >\r\n                            <i className={PrivacyIcon[privacy]}></i>\r\n                            <span>{PrivacyName[privacy]}</span>\r\n                          </div>\r\n                        ))}\r\n                      </div>\r\n                    )}\r\n                  </div>\r\n                </div>\r\n              </div>\r\n              <textarea\r\n                value={content}\r\n                onChange={(e) => setContent(e.target.value)}\r\n                rows=\"3\"\r\n                className=\"w-full text-lg md:text-2xl placeholder-gray-500 dark:placeholder-dark-txt focus:placeholder-gray-300 dark:focus:placeholder-dark-hover outline-none transition-base bg-white dark:bg-dark-secondary resize-none\"\r\n                placeholder={`What's on your mind${\r\n                  currentUser.firstName ? \", \" + currentUser.firstName : \"\"\r\n                }?`}\r\n              ></textarea>\r\n              <div ref={emojiRef} className=\"relative w-full flex justify-end\">\r\n                <ClickableIcon\r\n                  secondMode\r\n                  iconClass=\"bx bxs-smile\"\r\n                  colorIconClass=\"text-green-500\"\r\n                  onClick={() => setIsOpenEmoji(!isOpenEmoji)}\r\n                />\r\n                {isOpenEmoji && (\r\n                  <div className=\"animate-fadeIn absolute right-0 bottom-full\">\r\n                    <EmojiPicker disableAutoFocus onEmojiClick={onEmojiClick} />\r\n                  </div>\r\n                )}\r\n              </div>\r\n              <div className=\"w-full max-w-xs md:max-w-max overflow-x-auto flex space-x-2 select-none pb-2\">\r\n                <input\r\n                  hidden\r\n                  id=\"imageFiles\"\r\n                  type=\"file\"\r\n                  multiple\r\n                  onChange={(e) => addFiles(e.target.files)}\r\n                  accept=\"image/png, image/jpg, image/tiff, image/tif, image/jpeg\"\r\n                />\r\n                <label\r\n                  htmlFor=\"imageFiles\"\r\n                  className=\"cursor-pointer h-24 w-20 md:h-28 md:w-28 bg-gray-100 hover:bg-gray-200 active:bg-gray-300 dark:bg-dark-third dark:hover:bg-dark-hover dark:active:bg-gray-700 rounded-xl flex-center transition-base flex-shrink-0\"\r\n                >\r\n                  <i className=\"bx bxs-image-add text-4xl\"></i>\r\n                </label>\r\n                {imageFiles.length > 0 &&\r\n                  imageFiles.map((imageFile, index) => (\r\n                    <div\r\n                      key={\"imageFiles\" + index}\r\n                      className=\"relative cursor-pointer h-24 w-20 md:h-28 md:w-28 bg-gray-100 dark:bg-dark-third rounded-xl flex-center transition-base overflow-hidden flex-shrink-0 \"\r\n                    >\r\n                      <img src={URL.createObjectURL(imageFile)} alt=\"Preview\" />\r\n                      <ClickableIcon\r\n                        onClick={() => removeImage(index)}\r\n                        iconClass=\"bx bx-x\"\r\n                        reverse\r\n                        className=\"absolute right-1 top-1 animate-swipeUp w-6 h-6 object-cover\"\r\n                      />\r\n                    </div>\r\n                  ))}\r\n              </div>\r\n              <Button\r\n                disabled={!isValidButton}\r\n                className=\"w-full font-semibold\"\r\n              >\r\n                Post\r\n              </Button>\r\n            </form>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </>\r\n  );\r\n}\r\n\r\nexport default CreatePost;\r\n","import Button from \"components/Button\";\r\nimport { useDisableBodyScroll } from \"hooks/utils/useDisableBodyScroll\";\r\nimport PropTypes from \"prop-types\";\r\nimport React from \"react\";\r\n\r\nConfirmModal.propTypes = {\r\n  title: PropTypes.string,\r\n  isOpen: PropTypes.bool,\r\n  confirmButtonTitle: PropTypes.string,\r\n  confirmButtonAction: PropTypes.func,\r\n};\r\n\r\nfunction ConfirmModal({\r\n  title,\r\n  isOpen,\r\n  content = \"Are you sure?\",\r\n  closeAction,\r\n  confirmButtonTitle,\r\n  confirmButtonAction,\r\n}) {\r\n  useDisableBodyScroll(isOpen);\r\n  return (\r\n    isOpen && (\r\n      <div className=\"px-4 overlay flex-center \" style={{ margin: 0 }}>\r\n        <div className=\"animate-swipeDown bg-white dark:bg-dark-secondary dark:border-dark-third md:py-8 md:px-8 py-4 px-5 w-full md:w-2/3 lg:w-1/2 flex flex-col justify-between items-start rounded-xl space-y-8 shadow-2xl border border-gray-300 md:max-w-700\">\r\n          <h3 className=\"font-semibold text-2xl break-words dark:text-dark-txt\">\r\n            {title !== \"\" ? title : \"Notification\"}\r\n          </h3>\r\n          <span className=\"break-words dark:text-dark-txt\">{content}</span>\r\n          <div className=\"w-full flex justify-end space-x-2\">\r\n            <Button outline content=\"No\" onClick={closeAction} />\r\n            <Button\r\n              content={confirmButtonTitle ?? \"Ok\"}\r\n              onClick={() => {\r\n                confirmButtonAction();\r\n                closeAction();\r\n              }}\r\n            />\r\n          </div>\r\n        </div>\r\n      </div>\r\n    )\r\n  );\r\n}\r\n\r\nexport default ConfirmModal;\r\n","import moment from \"moment\";\r\n\r\nexport function formatDate(d) {\r\n  let date = new Date(d);\r\n  if (isValidDate(date)) {\r\n    let now = moment(new Date());\r\n    let dateToFormat = moment(date);\r\n    let diff = now.diff(dateToFormat, \"days\");\r\n    if (diff < 1) {\r\n      return dateToFormat.fromNow();\r\n    } else if (diff < 7) {\r\n      return dateToFormat.format(\"dddd, h:mm A\");\r\n    } else {\r\n      return dateToFormat.format(\"MMM D, YYYY, h:mm A\");\r\n    }\r\n  } else {\r\n    return \"--\";\r\n  }\r\n}\r\n\r\nfunction isValidDate(d) {\r\n  return d instanceof Date && !isNaN(d);\r\n}\r\n\r\nexport const groupBy = function (xs, key) {\r\n  return xs.reduce(function (rv, x) {\r\n    (rv[x[key]] = rv[x[key]] || []).push(x);\r\n    return rv;\r\n  }, {});\r\n};\r\n","export default __webpack_public_path__ + \"static/media/send-icon.666dadc9.svg\";","import SendIconNormal from \"assets/icons/send-icon.svg\";\r\nimport ClickableIcon from \"components/ClickableIcon\";\r\nimport ImageCircle from \"components/ImageCircle\";\r\nimport EmojiPicker from \"emoji-picker-react\";\r\nimport usePostApi from \"hooks/api/usePostApi\";\r\nimport { useCloseOnClickOutside } from \"hooks/utils/useCloseOnClickOutside\";\r\nimport React, { useRef, useState } from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\n\r\nfunction CommentInput({ postId, currentUser = {} }) {\r\n  const [content, setContent] = useState(\"\");\r\n  const [isOpenEmoji, setIsOpenEmoji] = useState(false);\r\n\r\n  const ref = useRef();\r\n\r\n  const postApi = usePostApi();\r\n\r\n  useCloseOnClickOutside(isOpenEmoji, setIsOpenEmoji, ref);\r\n\r\n  async function onSendMessage(e) {\r\n    e.preventDefault();\r\n    if (!content) {\r\n      return;\r\n    }\r\n    setContent(\"\");\r\n    var request = { content };\r\n    await postApi.addComment(postId, request);\r\n  }\r\n\r\n  const onEmojiClick = (event, emojiObject) => {\r\n    if (emojiObject?.emoji) {\r\n      setContent(content + emojiObject?.emoji);\r\n    }\r\n  };\r\n  return (\r\n    <div className=\"flex space-x-2 w-full items-center\">\r\n      <Link\r\n        className=\"font-semibold text-sm cursor-pointer flex-shrink-0\"\r\n        to={`/profile/${currentUser?.userName}`}\r\n      >\r\n        <ImageCircle size=\"sm\" src={currentUser?.avatarUrl} />\r\n      </Link>\r\n      <form\r\n        onSubmit={(e) => onSendMessage(e)}\r\n        className=\"flex justify-between items-center space-x-1 z-0 w-full\"\r\n      >\r\n        <div className=\"relative w-full flex\">\r\n          <input\r\n            value={content}\r\n            onChange={(e) => setContent(e.target.value)}\r\n            type=\"text\"\r\n            placeholder=\"Write a comment\"\r\n            className=\"bg-gray-100 dark:bg-dark-third rounded-3xl w-full py-2 px-4 pr-12 focus:ring-2 focus:ring-green-500 focus:ring-opacity-50 outline-none transition-all duration-200 relative\"\r\n          />\r\n          <div ref={ref} className=\"relative\">\r\n            <ClickableIcon\r\n              className=\"absolute h-10 w-10 right-1\"\r\n              iconClass=\"bx bxs-smile\"\r\n              colorIconClass=\"text-green-500\"\r\n              onClick={() => setIsOpenEmoji(!isOpenEmoji)}\r\n            />\r\n            {isOpenEmoji && (\r\n              <div className=\"animate-fadeIn absolute right-0 bottom-full\">\r\n                <EmojiPicker disableAutoFocus onEmojiClick={onEmojiClick} />\r\n              </div>\r\n            )}\r\n          </div>\r\n        </div>\r\n        <button>\r\n          <ClickableIcon\r\n            icon={SendIconNormal}\r\n            className=\"w-10 h-10 p-2\"\r\n            colorClass=\"bg-white hover:bg-gray-100 active:bg-gray-200 dark:bg-dark-secondary hover:dark:bg-dark-third active:dark:bg-dark-hover\"\r\n          />\r\n        </button>\r\n      </form>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default CommentInput;\r\n","import ClickableIcon from \"components/ClickableIcon\";\r\nimport ConfirmModal from \"components/ConfirmModal\";\r\nimport ImageCircle from \"components/ImageCircle\";\r\nimport { useCloseOnClickOutside } from \"hooks/utils/useCloseOnClickOutside\";\r\nimport { useEscToClose } from \"hooks/utils/useEscToClose\";\r\nimport usePostApi from \"hooks/api/usePostApi\";\r\nimport moment from \"moment\";\r\nimport React, { useEffect, useRef, useState } from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { formatDate } from \"utils/UtilityMethods\";\r\n\r\nexport default function CommentList({\r\n  comments = [],\r\n  isOpen,\r\n  currentUser = {},\r\n  postId,\r\n}) {\r\n  const myCommentList = [...comments]\r\n    .filter((x) => x.creator?.userName === currentUser.userName)\r\n    .sort((a, b) => (a.dateCreated < b.dateCreated ? 1 : -1));\r\n\r\n  const otherCommentList = [...comments]\r\n    .filter((x) => x.creator?.userName !== currentUser.userName)\r\n    .sort((a, b) => (a.dateCreated < b.dateCreated ? 1 : -1));\r\n\r\n  return (\r\n    <>\r\n      {myCommentList.map((comment, index) => (\r\n        <Comment\r\n          key={comment.id}\r\n          comment={comment}\r\n          postId={postId}\r\n          isMyComment\r\n        />\r\n      ))}\r\n      {isOpen &&\r\n        otherCommentList.map((comment, index) => (\r\n          <Comment key={comment.id} comment={comment} postId={postId} />\r\n        ))}\r\n    </>\r\n  );\r\n}\r\n\r\nconst Comment = React.memo(({ comment, postId, isMyComment }) => {\r\n  const postApi = usePostApi();\r\n  const [isOpenMenu, setIsOpenMenu] = useState(false);\r\n  const [isOpenConfirm, setIsOpenConfirm] = useState(false);\r\n\r\n  const [isEditMode, setIsEditMode] = useState(false);\r\n  const [editContent, setEditContent] = useState(comment.content);\r\n\r\n  const ref = useRef();\r\n  const editInputRef = useRef();\r\n\r\n  useCloseOnClickOutside(isOpenMenu, setIsOpenMenu, ref);\r\n  useEscToClose(setIsEditMode);\r\n\r\n  const deleteComment = () => {\r\n    if (postId && comment?.id) {\r\n      postApi.deleteComment(postId, comment.id);\r\n    }\r\n  };\r\n  const onUpdateComment = (e) => {\r\n    e.preventDefault();\r\n    if (editContent !== comment.content) {\r\n      postApi.updateComment(postId, comment.id, { content: editContent });\r\n    }\r\n    setIsEditMode(false);\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (isEditMode) {\r\n      editInputRef?.current?.focus();\r\n    }\r\n  }, [isEditMode]);\r\n\r\n  return (\r\n    <>\r\n      {isOpenConfirm && (\r\n        <ConfirmModal\r\n          isOpen={isOpenConfirm}\r\n          closeAction={() => setIsOpenConfirm(false)}\r\n          title=\"Are you sure?\"\r\n          content=\"Do you want to delete this comment?\"\r\n          confirmButtonTitle=\"Yes\"\r\n          confirmButtonAction={() => deleteComment()}\r\n        />\r\n      )}\r\n      <div className={\"flex space-x-2 max-w-full \" + (isEditMode && \"w-full\")}>\r\n        <Link\r\n          className=\"font-semibold text-sm cursor-pointer flex-shrink-0 mt-2\"\r\n          to={`/profile/${comment?.creator?.userName}`}\r\n        >\r\n          <ImageCircle\r\n            size=\"sm\"\r\n            src={comment?.creator?.avatarUrl}\r\n            userName={comment?.creator?.userName}\r\n          />\r\n        </Link>\r\n        <div className=\"flex flex-col w-full\">\r\n          <div className=\"flex flex-col justify-evenly w-full bg-gray-100 dark:bg-dark-third rounded-2xl px-3 py-2\">\r\n            <div className=\"w-full flex justify-between items-center mr-9\">\r\n              <Link\r\n                className=\"font-semibold text-xs md:text-sm cursor-pointer hover:underline\"\r\n                to={`/profile/${comment?.creator?.userName}`}\r\n              >\r\n                {comment?.creator?.fullName}\r\n              </Link>\r\n            </div>\r\n            {isEditMode ? (\r\n              <form onSubmit={onUpdateComment} className=\"flex flex-col\">\r\n                <input\r\n                  type=\"text\"\r\n                  placeholder=\"Write a comment\"\r\n                  ref={editInputRef}\r\n                  className=\"bg-gray-100 dark:bg-dark-third outline-none \"\r\n                  onChange={(e) => setEditContent(e.target.value)}\r\n                  value={editContent}\r\n                />\r\n                <span\r\n                  className=\"text-xs self-end\"\r\n                  onClick={() => setIsEditMode(false)}\r\n                >\r\n                  Press Esc to{\" \"}\r\n                  <span className=\"font-semibold text-green-500 cursor-pointer\">\r\n                    Cancel\r\n                  </span>\r\n                </span>\r\n              </form>\r\n            ) : (\r\n              <div className=\"break-words overflow-x-auto text-xs md:text-sm max-w-350 md:max-w-450\">\r\n                {comment?.content}\r\n              </div>\r\n            )}\r\n          </div>\r\n          <span className=\"ml-2 text-tiny md:text-xs text-gray-500 dark:text-dark-txt\">\r\n            {formatDate(comment?.dateCreated)}\r\n          </span>\r\n        </div>\r\n        <div ref={ref} className=\"relative self-center mb-5\">\r\n          {isMyComment && (\r\n            <>\r\n              <ClickableIcon\r\n                iconClass=\"bx bx-dots-horizontal-rounded\"\r\n                secondMode\r\n                onClick={() => {\r\n                  setIsOpenMenu(!isOpenMenu);\r\n                }}\r\n              />\r\n              {isOpenMenu && (\r\n                <div className=\"animate-fadeIn transition-base absolute top-5 p-1 w-48 right-3 border border-gray-200 bg-white rounded-lg shadow-lg overflow-hidden dark:bg-dark-secondary dark:border-dark-hover mt-2 select-none z-10\">\r\n                  <button\r\n                    className=\"flex items-center space-x-3 w-full pl-2 pr-4 py-1 rounded-md text-left hover:bg-gray-100 active:bg-gray-200 transition-base transform active:scale-95 dark:hover:bg-dark-hover text-sm\"\r\n                    onClick={() => {\r\n                      setIsEditMode(true);\r\n                      setIsOpenMenu(false);\r\n                    }}\r\n                  >\r\n                    <i className=\"bx bx-edit-alt text-center text-xl align-middle text-black dark:text-dark-txt w-7 h-7 mr-2\"></i>\r\n                    <span className=\"text-sm\">Edit comment</span>\r\n                  </button>\r\n                  <button\r\n                    className=\"flex items-center space-x-3 w-full pl-2 pr-4 py-1 rounded-md text-left hover:bg-gray-100 active:bg-gray-200 transition-base transform active:scale-95 dark:hover:bg-dark-hover text-sm\"\r\n                    onClick={() => {\r\n                      setIsOpenConfirm(true);\r\n                      setIsOpenMenu(false);\r\n                    }}\r\n                  >\r\n                    <i className=\"bx bx-trash text-center text-xl align-middle text-black dark:text-dark-txt w-7 h-7 mr-2\"></i>\r\n                    <span className=\"text-sm\">Delete comment</span>\r\n                  </button>\r\n                </div>\r\n              )}\r\n            </>\r\n          )}\r\n        </div>\r\n      </div>\r\n    </>\r\n  );\r\n});\r\n","import Button from \"components/Button\";\r\nimport ClickableIcon from \"components/ClickableIcon\";\r\nimport ImageCircle from \"components/ImageCircle\";\r\nimport Popup from \"components/Popup\";\r\nimport EmojiPicker from \"emoji-picker-react\";\r\nimport usePostApi from \"hooks/api/usePostApi\";\r\nimport { useCloseOnClickOutside } from \"hooks/utils/useCloseOnClickOutside\";\r\nimport { useDisableBodyScroll } from \"hooks/utils/useDisableBodyScroll\";\r\nimport { useEscToClose } from \"hooks/utils/useEscToClose\";\r\nimport React, { useEffect, useRef, useState } from \"react\";\r\nimport { useSelector } from \"react-redux\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { MAX_IMAGE_SIZE, MAX_IMAGE_SIZE_NUMBER } from \"utils/Constants\";\r\nimport { PrivacyIcon, PrivacyName, PrivacyType } from \"utils/Enums\";\r\n\r\nfunction EditPost({ post, isOpen, setIsOpen }) {\r\n  const currentUser = useSelector((state) => state.users.currentUser);\r\n\r\n  const [content, setContent] = useState(post.content);\r\n  const [privacy, setPrivacy] = useState(post.privacy);\r\n  const [imageFiles, setImageFiles] = useState([]);\r\n  const [oldPhotoIds, setOldPhotoIds] = useState([]);\r\n\r\n  const [popup, setPopup] = useState({});\r\n  const [isOpenPrivacyList, setIsOpenPrivacyList] = useState(false);\r\n  const [isValidButton, setIsValidButton] = useState(false);\r\n  const [isOpenEmoji, setIsOpenEmoji] = useState(false);\r\n\r\n  const ref = useRef();\r\n  const emojiRef = useRef();\r\n  const privacyRef = useRef();\r\n  const postApi = usePostApi();\r\n\r\n  useDisableBodyScroll(isOpen);\r\n\r\n  // Check click outside emoji\r\n  useCloseOnClickOutside(isOpenEmoji, setIsOpenEmoji, emojiRef);\r\n  // Check click outside create post\r\n  useCloseOnClickOutside(isOpen, setIsOpen, ref);\r\n  // Check click outside privacy\r\n  useCloseOnClickOutside(isOpenPrivacyList, setIsOpenPrivacyList, privacyRef);\r\n\r\n  // Check click esc to close\r\n  useEscToClose(setIsOpen);\r\n\r\n  const onEmojiClick = (event, emojiObject) => {\r\n    if (emojiObject?.emoji) {\r\n      setContent(content + emojiObject?.emoji);\r\n    }\r\n  };\r\n\r\n  function addFiles(files) {\r\n    var isValid = true;\r\n    const newImageFiles = [...imageFiles, ...files];\r\n    if (newImageFiles.length > 10) {\r\n      setPopup({\r\n        content: \"Please select maximum 10 images!\",\r\n        isOpen: true,\r\n      });\r\n      isValid = false;\r\n    }\r\n    newImageFiles.forEach((file) => {\r\n      if (file.size > MAX_IMAGE_SIZE) {\r\n        setPopup({\r\n          content: `Please upload less than ${MAX_IMAGE_SIZE_NUMBER}MB for each file!`,\r\n          isOpen: true,\r\n        });\r\n        isValid = false;\r\n      }\r\n    });\r\n    if (isValid) {\r\n      setImageFiles(newImageFiles);\r\n    }\r\n  }\r\n  function removeOldPhoto(photoId) {\r\n    const result = [...oldPhotoIds];\r\n    result.push(photoId);\r\n    setOldPhotoIds(result);\r\n  }\r\n  function removeImage(index) {\r\n    if (index >= 0 && index < imageFiles.length) {\r\n      const newImageFiles = [...imageFiles];\r\n      newImageFiles.splice(index, 1);\r\n      setImageFiles(newImageFiles);\r\n    }\r\n  }\r\n  useEffect(() => {\r\n    if (content.trim() || imageFiles.length > 0) {\r\n      setIsValidButton(true);\r\n    } else {\r\n      setIsValidButton(false);\r\n    }\r\n  }, [content, imageFiles]);\r\n\r\n  async function onSubmit(e) {\r\n    e.preventDefault();\r\n    await postApi.updatePost(post.id, { content, privacy });\r\n    if (post.id) {\r\n      imageFiles.forEach(async (image) => {\r\n        const request = new FormData();\r\n        request.append(\"Image\", image);\r\n        request.append(\"Caption\", \"Post photo\");\r\n        await postApi.addPhoto(post.id, request);\r\n      });\r\n      oldPhotoIds.forEach(async (photoId) => {\r\n        await postApi.deletePhoto(post.id, photoId);\r\n      });\r\n    }\r\n    setIsOpen(false);\r\n    setImageFiles([]);\r\n    setOldPhotoIds([]);\r\n  }\r\n  return (\r\n    <>\r\n      {isOpen && (\r\n        <div\r\n          className=\"overlay px-4 py-10 z-30 grid place-items-center\"\r\n          style={{ margin: 0 }}\r\n        >\r\n          <div\r\n            className=\"flex-center flex-col bg-white dark:bg-dark-secondary dark:border-dark-third rounded-xl shadow-xl border border-gray-300 w-full md:w-5/6 lg:w-2/5 transition-all duration-300 ease-in-out max-h-full animate-swipeDown overflow-x-auto\"\r\n            ref={ref}\r\n          >\r\n            {popup.isOpen && (\r\n              <Popup\r\n                title=\"Notification\"\r\n                isOpen={popup.isOpen}\r\n                content={popup.content}\r\n                onClick={() => setPopup({ isOpen: false })}\r\n              />\r\n            )}\r\n            <div className=\"relative font-bold text-center text-lg md:text-xl py-4 border-b dark:border-gray-600 w-full\">\r\n              Edit post\r\n              <ClickableIcon\r\n                onClick={() => setIsOpen(false)}\r\n                iconClass=\"bx bx-x\"\r\n                className=\"absolute bg-white right-3 top-3 animate-swipeUp\"\r\n              />\r\n            </div>\r\n            <form\r\n              onSubmit={onSubmit}\r\n              className=\"flex flex-col items-start w-full px-6 space-y-4 py-4\"\r\n            >\r\n              <div className=\"flex space-x-2\">\r\n                <Link\r\n                  className=\"font-semibold text-sm cursor-pointer\"\r\n                  to={`/profile/${currentUser.userName}`}\r\n                >\r\n                  <ImageCircle\r\n                    src={currentUser.avatarUrl}\r\n                    userName={currentUser.userName}\r\n                  />\r\n                </Link>\r\n                <div className=\"flex flex-col justify-between space-y-1\">\r\n                  <Link\r\n                    className=\"font-semibold text-sm cursor-pointer hover:underline\"\r\n                    to={`/profile/${currentUser.userName}`}\r\n                  >\r\n                    {currentUser.fullName}\r\n                  </Link>\r\n                  <div className=\"relative select-none\">\r\n                    <div\r\n                      className=\"p-1 px-2 w-24 flex justify-between items-center text-xs bg-gray-200 dark:bg-dark-hover rounded cursor-pointer \"\r\n                      onClick={() => setIsOpenPrivacyList(true)}\r\n                    >\r\n                      <div className=\"flex items-center space-x-2\">\r\n                        <i className={PrivacyIcon[privacy]}></i>\r\n                        <span>{PrivacyName[privacy]}</span>\r\n                      </div>\r\n                      <i className=\"bx bx-caret-down ml-1\"></i>\r\n                    </div>\r\n                    {isOpenPrivacyList && (\r\n                      <div\r\n                        className=\"animate-fadeIn absolute top-full w-28 left-0 bg-gray-100 dark:bg-dark-third rounded p-1 text-sm\"\r\n                        ref={privacyRef}\r\n                      >\r\n                        {Object.values(PrivacyType).map((privacy) => (\r\n                          <div\r\n                            onClick={() => {\r\n                              setPrivacy(privacy);\r\n                              setIsOpenPrivacyList(false);\r\n                            }}\r\n                            className=\"cursor-pointer hover:bg-gray-200 flex items-center dark:hover:bg-dark-hover p-1 px-2 rounded duration-150 w-full space-x-2\"\r\n                          >\r\n                            <i className={PrivacyIcon[privacy]}></i>\r\n                            <span>{PrivacyName[privacy]}</span>\r\n                          </div>\r\n                        ))}\r\n                      </div>\r\n                    )}\r\n                  </div>\r\n                </div>\r\n              </div>\r\n              <textarea\r\n                value={content}\r\n                onChange={(e) => setContent(e.target.value)}\r\n                rows=\"3\"\r\n                className=\"w-full text-lg md:text-2xl placeholder-gray-500 dark:placeholder-dark-txt focus:placeholder-gray-300 dark:focus:placeholder-dark-hover outline-none transition-base bg-white dark:bg-dark-secondary resize-none\"\r\n                placeholder={`What's on your mind${\r\n                  currentUser.firstName ? \", \" + currentUser.firstName : \"\"\r\n                }?`}\r\n              ></textarea>\r\n              <div ref={emojiRef} className=\"relative w-full flex justify-end\">\r\n                <ClickableIcon\r\n                  secondMode\r\n                  iconClass=\"bx bxs-smile\"\r\n                  colorIconClass=\"text-green-500\"\r\n                  onClick={() => setIsOpenEmoji(!isOpenEmoji)}\r\n                />\r\n                {isOpenEmoji && (\r\n                  <div className=\"animate-fadeIn absolute right-0 bottom-full\">\r\n                    <EmojiPicker disableAutoFocus onEmojiClick={onEmojiClick} />\r\n                  </div>\r\n                )}\r\n              </div>\r\n              <div className=\"w-full max-w-xs md:max-w-max overflow-x-auto flex space-x-2 select-none pb-2\">\r\n                <input\r\n                  hidden\r\n                  id=\"imageFiles\"\r\n                  type=\"file\"\r\n                  multiple\r\n                  onChange={(e) => addFiles(e.target.files)}\r\n                  accept=\"image/png, image/jpg, image/tiff, image/tif, image/jpeg\"\r\n                />\r\n                <label\r\n                  htmlFor=\"imageFiles\"\r\n                  className=\"cursor-pointer h-24 w-20 md:h-28 md:w-28 bg-gray-100 hover:bg-gray-200 active:bg-gray-300 dark:bg-dark-third dark:hover:bg-dark-hover dark:active:bg-gray-700 rounded-xl flex-center transition-base flex-shrink-0\"\r\n                >\r\n                  <i className=\"bx bxs-image-add text-4xl\"></i>\r\n                </label>\r\n                {post?.photos?.length > 0 &&\r\n                  post?.photos\r\n                    ?.filter((x) => !oldPhotoIds.includes(x.id))\r\n                    ?.map((photo, index) => (\r\n                      <div\r\n                        key={\"oldPhotos\" + index}\r\n                        className=\"relative cursor-pointer h-24 w-20 md:h-28 md:w-28 bg-gray-100 dark:bg-dark-third rounded-xl flex-center transition-base overflow-hidden flex-shrink-0 \"\r\n                      >\r\n                        <img src={photo.imageUrl} alt=\"Preview\" />\r\n                        <ClickableIcon\r\n                          onClick={() => removeOldPhoto(photo.id)}\r\n                          iconClass=\"bx bx-x\"\r\n                          reverse\r\n                          className=\"absolute right-1 top-1 animate-swipeUp w-6 h-6 object-cover\"\r\n                        />\r\n                      </div>\r\n                    ))}\r\n                {imageFiles.length > 0 &&\r\n                  imageFiles.map((imageFile, index) => (\r\n                    <div\r\n                      key={\"imageFiles\" + index}\r\n                      className=\"relative cursor-pointer h-24 w-20 md:h-28 md:w-28 bg-gray-100 dark:bg-dark-third rounded-xl flex-center transition-base overflow-hidden flex-shrink-0 \"\r\n                    >\r\n                      <img\r\n                        src={imageFile ? URL.createObjectURL(imageFile) : \"\"}\r\n                        alt=\"Preview\"\r\n                      />\r\n                      <ClickableIcon\r\n                        onClick={() => removeImage(index)}\r\n                        iconClass=\"bx bx-x\"\r\n                        reverse\r\n                        className=\"absolute right-1 top-1 animate-swipeUp w-6 h-6 object-cover\"\r\n                      />\r\n                    </div>\r\n                  ))}\r\n              </div>\r\n              <Button\r\n                disabled={!isValidButton}\r\n                className=\"w-full font-semibold\"\r\n              >\r\n                Save\r\n              </Button>\r\n            </form>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </>\r\n  );\r\n}\r\n\r\nexport default EditPost;\r\n","import ClickableIcon from \"components/ClickableIcon\";\r\nimport DefaultImage from \"assets/img/default-image.jpg\";\r\nimport { useDisableBodyScroll } from \"hooks/utils/useDisableBodyScroll\";\r\nimport { useEscToClose } from \"hooks/utils/useEscToClose\";\r\nimport React, { useEffect, useRef, useState } from \"react\";\r\n\r\nfunction ImageView({ photos = [], startIndex = 0, setIsOpen, isOpen }) {\r\n  const [index, setIndex] = useState(startIndex);\r\n  const imageRef = useRef();\r\n  const closeRef = useRef();\r\n  const leftRef = useRef();\r\n  const rightRef = useRef();\r\n\r\n  useDisableBodyScroll(isOpen);\r\n  useEscToClose(setIsOpen);\r\n\r\n  function nextImage() {\r\n    if (index < photos.length - 1) {\r\n      setIndex(index + 1);\r\n    }\r\n  }\r\n  function previousImage() {\r\n    if (index > 0) {\r\n      setIndex(index - 1);\r\n    }\r\n  }\r\n\r\n  useEffect(() => {\r\n    const checkIfClickedOutside = (e) => {\r\n      if (\r\n        isOpen &&\r\n        imageRef.current &&\r\n        !imageRef.current.contains(e.target) &&\r\n        closeRef.current &&\r\n        !closeRef.current.contains(e.target) &&\r\n        rightRef.current &&\r\n        !rightRef.current.contains(e.target) &&\r\n        leftRef.current &&\r\n        !leftRef.current.contains(e.target)\r\n      ) {\r\n        setIsOpen(false);\r\n      }\r\n    };\r\n    document.addEventListener(\"mousedown\", checkIfClickedOutside);\r\n    return () => {\r\n      document.removeEventListener(\"mousedown\", checkIfClickedOutside);\r\n    };\r\n  }, [isOpen]);\r\n  return (\r\n    <>\r\n      <div\r\n        className=\"px-4 flex-center overlay cursor-default select-none\"\r\n        style={{ margin: 0 }}\r\n      >\r\n        <ClickableIcon\r\n          innerRef={closeRef}\r\n          reverse\r\n          onClick={() => setIsOpen(false)}\r\n          iconClass=\"bx bx-x\"\r\n          className=\"absolute bg-white md:right-10 right-8 top-8 animate-swipeUp\"\r\n        />\r\n\r\n        <ClickableIcon\r\n          innerRef={leftRef}\r\n          reverse\r\n          onClick={previousImage}\r\n          iconClass=\"bx bxs-chevron-left\"\r\n          className={\r\n            \"absolute md:left-10 left-5 animate-swipeUp \" +\r\n            (index > 0 ? \"\" : \"hidden\")\r\n          }\r\n        />\r\n\r\n        <ClickableIcon\r\n          innerRef={rightRef}\r\n          reverse\r\n          onClick={nextImage}\r\n          iconClass=\"bx bxs-chevron-right\"\r\n          className={\r\n            \"absolute md:right-10 right-5 animate-swipeUp \" +\r\n            (index < photos.length - 1 ? \"\" : \"hidden\")\r\n          }\r\n        />\r\n\r\n        <img\r\n          ref={imageRef}\r\n          src={photos[index]?.imageUrl ?? DefaultImage}\r\n          alt={photos[index]?.caption ?? `Post photo ${index}`}\r\n          className=\"animate-swipeDown max-h-11/12 max-w-full md:max-w-3/4 min-w-2/12 object-contain rounded\"\r\n        />\r\n      </div>\r\n    </>\r\n  );\r\n}\r\n\r\nexport default ImageView;\r\n","export default \"data:image/jpeg;base64,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\"","import ImageView from \"components/ImageView\";\r\nimport React, { useState } from \"react\";\r\n\r\nexport default function PhotoList({ photos = [] }) {\r\n  const [isOpen, setIsOpen] = useState(false);\r\n  const [startIndex, setStartIndex] = useState(0);\r\n  if (photos.length < 1) {\r\n    return;\r\n  }\r\n  let list;\r\n  switch (photos.length) {\r\n    case 1:\r\n      list = (\r\n        <OnePhotoList\r\n          setStartIndex={setStartIndex}\r\n          setIsOpen={setIsOpen}\r\n          photos={photos}\r\n        />\r\n      );\r\n      break;\r\n    case 2:\r\n      list = (\r\n        <TwoPhotosList\r\n          setStartIndex={setStartIndex}\r\n          setIsOpen={setIsOpen}\r\n          photos={photos}\r\n        />\r\n      );\r\n      break;\r\n    case 3:\r\n      list = (\r\n        <ThreePhotosList\r\n          setStartIndex={setStartIndex}\r\n          setIsOpen={setIsOpen}\r\n          photos={photos}\r\n        />\r\n      );\r\n      break;\r\n    case 4:\r\n      list = (\r\n        <FourPhotosList\r\n          setStartIndex={setStartIndex}\r\n          setIsOpen={setIsOpen}\r\n          photos={photos}\r\n        />\r\n      );\r\n      break;\r\n    default:\r\n      list = (\r\n        <List\r\n          setStartIndex={setStartIndex}\r\n          setIsOpen={setIsOpen}\r\n          photos={photos}\r\n        />\r\n      );\r\n  }\r\n  return (\r\n    <>\r\n      {isOpen && (\r\n        <ImageView\r\n          isOpen={isOpen}\r\n          photos={photos}\r\n          startIndex={startIndex}\r\n          setIsOpen={setIsOpen}\r\n        />\r\n      )}\r\n      {list}\r\n    </>\r\n  );\r\n}\r\n\r\nconst OnePhotoList = ({ photos = [], setIsOpen, setStartIndex }) => (\r\n  <>\r\n    <div\r\n      className=\"w-full max-h-128 bg-gray-100 dark:bg-dark-third rounded-xl shadow overflow-hidden\"\r\n      onClick={() => {\r\n        setIsOpen(true);\r\n        setStartIndex(0);\r\n      }}\r\n    >\r\n      <img\r\n        className=\"object-contain md:max-h-128 max-h-112 w-full\"\r\n        src={photos[0].imageUrl}\r\n        alt={photos[0].caption ?? `Post photo ${1}`}\r\n      />\r\n    </div>\r\n  </>\r\n);\r\n\r\nconst TwoPhotosList = ({ photos = [], setIsOpen, setStartIndex }) => (\r\n  <>\r\n    <div className=\"grid grid-cols-2 gap-2 overflow-hidden\">\r\n      {photos.map((photo, index) => (\r\n        <div\r\n          key={photo.id}\r\n          className=\"col-span-1 w-full flex justify-center max-h-128 bg-gray-100 dark:bg-dark-third rounded-xl shadow overflow-hidden\"\r\n          onClick={() => {\r\n            setIsOpen(true);\r\n            setStartIndex(index);\r\n          }}\r\n        >\r\n          <img\r\n            className=\"object-contain md:max-h-128 max-h-112 h-full w-full\"\r\n            src={photo.imageUrl}\r\n            alt={photo.caption ?? `Post photo ${index}`}\r\n          />\r\n        </div>\r\n      ))}\r\n    </div>\r\n  </>\r\n);\r\nconst ThreePhotosList = ({ photos = [], setIsOpen, setStartIndex }) => (\r\n  <>\r\n    <div className=\"grid grid-cols-2 md:grid-cols-3 grid-rows-2 gap-2 h-112 md:h-128 overflow-hidden\">\r\n      <div\r\n        className=\"col-span-2 row-span-1 md:row-span-2 w-full flex justify-center max-h-128 bg-gray-100 dark:bg-dark-third rounded-xl shadow overflow-hidden\"\r\n        onClick={() => {\r\n          setIsOpen(true);\r\n          setStartIndex(0);\r\n        }}\r\n      >\r\n        <img\r\n          className=\"object-contain max-h-128 w-full h-full\"\r\n          src={photos[0]?.imageUrl}\r\n          alt={photos[0]?.caption ?? `Post photo 1`}\r\n        />\r\n      </div>\r\n      <div\r\n        className=\"w-full flex justify-center max-h-128 bg-gray-100 dark:bg-dark-third rounded-xl shadow overflow-hidden\"\r\n        onClick={() => {\r\n          setIsOpen(true);\r\n          setStartIndex(1);\r\n        }}\r\n      >\r\n        <img\r\n          className=\"object-cover h-full w-full\"\r\n          src={photos[1]?.imageUrl}\r\n          alt={photos[1]?.caption ?? `Post photo 2`}\r\n        />\r\n      </div>\r\n      <div\r\n        className=\"w-full flex justify-center max-h-128 bg-gray-100 dark:bg-dark-secondary rounded-xl shadow overflow-hidden\"\r\n        onClick={() => {\r\n          setIsOpen(true);\r\n          setStartIndex(2);\r\n        }}\r\n      >\r\n        <img\r\n          className=\"object-cover h-full w-full\"\r\n          src={photos[2]?.imageUrl}\r\n          alt={photos[2]?.caption ?? `Post photo 3`}\r\n        />\r\n      </div>\r\n    </div>\r\n  </>\r\n);\r\nconst FourPhotosList = ({ photos = [], setIsOpen, setStartIndex }) => (\r\n  <>\r\n    <div className=\"grid grid-cols-2 grid-rows-2 gap-2 overflow-hidden h-112 md:h-128\">\r\n      <div\r\n        className=\"w-full flex justify-center max-h-128 bg-gray-100 dark:bg-dark-third rounded-xl shadow overflow-hidden\"\r\n        onClick={() => {\r\n          setIsOpen(true);\r\n          setStartIndex(0);\r\n        }}\r\n      >\r\n        <img\r\n          className=\"object-cover h-full w-full\"\r\n          src={photos[0]?.imageUrl}\r\n          alt={photos[0]?.caption ?? `Post photo 1`}\r\n        />\r\n      </div>\r\n      <div\r\n        className=\"w-full flex justify-center max-h-128 bg-gray-100 dark:bg-dark-third rounded-xl shadow overflow-hidden\"\r\n        onClick={() => {\r\n          setIsOpen(true);\r\n          setStartIndex(1);\r\n        }}\r\n      >\r\n        <img\r\n          className=\"object-cover h-full w-full\"\r\n          src={photos[1]?.imageUrl}\r\n          alt={photos[1]?.caption ?? `Post photo 2`}\r\n        />\r\n      </div>\r\n      <div\r\n        className=\"w-full flex justify-center max-h-128 bg-gray-100 dark:bg-dark-third rounded-xl shadow overflow-hidden\"\r\n        onClick={() => {\r\n          setIsOpen(true);\r\n          setStartIndex(2);\r\n        }}\r\n      >\r\n        <img\r\n          className=\"object-cover h-full w-full\"\r\n          src={photos[2]?.imageUrl}\r\n          alt={photos[2]?.caption ?? `Post photo 3`}\r\n        />\r\n      </div>\r\n      <div\r\n        className=\"w-full flex justify-center max-h-128 bg-gray-100 dark:bg-dark-third rounded-xl shadow overflow-hidden\"\r\n        onClick={() => {\r\n          setIsOpen(true);\r\n          setStartIndex(3);\r\n        }}\r\n      >\r\n        <img\r\n          className=\"object-cover h-full w-full\"\r\n          src={photos[3]?.imageUrl}\r\n          alt={photos[3]?.caption ?? `Post photo 4`}\r\n        />\r\n      </div>\r\n    </div>\r\n  </>\r\n);\r\nconst List = ({ photos = [], setIsOpen, setStartIndex }) => {\r\n  const remainingPhotos = photos.length - 5 > 0 ? photos.length - 5 : 0;\r\n  return (\r\n    <>\r\n      <div className=\"grid grid-cols-6 grid-rows-2 gap-2 h-112 md:h-128 overflow-hidden\">\r\n        <div\r\n          className=\"col-span-3 w-full flex justify-center max-h-128 bg-gray-100 dark:bg-dark-third rounded-xl shadow overflow-hidden\"\r\n          onClick={() => {\r\n            setIsOpen(true);\r\n            setStartIndex(0);\r\n          }}\r\n        >\r\n          <img\r\n            className=\"object-cover h-full w-full\"\r\n            src={photos[0]?.imageUrl}\r\n            alt={photos[0]?.caption ?? `Post photo 1`}\r\n          />\r\n        </div>\r\n        <div\r\n          className=\"col-span-3 w-full flex justify-center max-h-128 bg-gray-100 dark:bg-dark-third rounded-xl shadow overflow-hidden\"\r\n          onClick={() => {\r\n            setIsOpen(true);\r\n            setStartIndex(1);\r\n          }}\r\n        >\r\n          <img\r\n            className=\"object-cover h-full w-full\"\r\n            src={photos[1]?.imageUrl}\r\n            alt={photos[1]?.caption ?? `Post photo 2`}\r\n          />\r\n        </div>\r\n        <div\r\n          className=\"col-span-2 w-full flex justify-center max-h-128 bg-gray-100 dark:bg-dark-third rounded-xl shadow overflow-hidden\"\r\n          onClick={() => {\r\n            setIsOpen(true);\r\n            setStartIndex(2);\r\n          }}\r\n        >\r\n          <img\r\n            className=\"object-cover h-full w-full\"\r\n            src={photos[2]?.imageUrl}\r\n            alt={photos[2]?.caption ?? `Post photo 3`}\r\n          />\r\n        </div>\r\n        <div\r\n          className=\"col-span-2 w-full flex justify-center max-h-128 bg-gray-100 dark:bg-dark-third rounded-xl shadow overflow-hidden\"\r\n          onClick={() => {\r\n            setIsOpen(true);\r\n            setStartIndex(3);\r\n          }}\r\n        >\r\n          <img\r\n            className=\"object-cover h-full w-full\"\r\n            src={photos[3]?.imageUrl}\r\n            alt={photos[3]?.caption ?? `Post photo 4`}\r\n          />\r\n        </div>\r\n        <div\r\n          className=\"relative col-span-2 w-full flex justify-center max-h-128 bg-gray-100 dark:bg-dark-third rounded-xl shadow overflow-hidden\"\r\n          onClick={() => {\r\n            setIsOpen(true);\r\n            setStartIndex(4);\r\n          }}\r\n        >\r\n          <img\r\n            className=\"object-cover h-full w-full\"\r\n            src={photos[4]?.imageUrl}\r\n            alt={photos[4]?.caption ?? `Post photo 5`}\r\n          />\r\n          {remainingPhotos > 0 && (\r\n            <div className=\"absolute inset-0 text-white dark:text-white bg-black bg-opacity-40 flex-center text-xl md:text-2xl font-bold\">\r\n              +{remainingPhotos}\r\n            </div>\r\n          )}\r\n        </div>\r\n      </div>\r\n    </>\r\n  );\r\n};\r\n","import usePostApi from \"hooks/api/usePostApi\";\r\nimport React from \"react\";\r\nimport { ReactionIcon, ReactionName, ReactionType } from \"utils/Enums\";\r\n\r\nfunction ReactionInput({ className = \"\", reacted, postId, setIsOpen }) {\r\n  const postApi = usePostApi();\r\n\r\n  const addReaction = (type) => {\r\n    if (!reacted) {\r\n      postApi.addReaction(postId, { type });\r\n    } else if (reacted && reacted.type !== type) {\r\n      postApi.updateReaction(postId, { type });\r\n    }\r\n    setIsOpen(false);\r\n  };\r\n  return (\r\n    <>\r\n      <div\r\n        className={\r\n          className +\r\n          \" \" +\r\n          \"flex animate-swipeUp space-x-2 rounded-3xl bg-white dark:bg-dark-secondary shadow border-2 border-gray-100 dark:border-dark-third p-1 transition-base z-10\"\r\n        }\r\n      >\r\n        {Object.values(ReactionType).map((type) => (\r\n          <Reaction\r\n            key={\"Reaction \" + type}\r\n            addReaction={addReaction}\r\n            type={type}\r\n            src={ReactionIcon[type]}\r\n            alt={ReactionName[type]}\r\n          />\r\n        ))}\r\n      </div>\r\n    </>\r\n  );\r\n}\r\n\r\nconst Reaction = ({ type, src, alt, addReaction }) => (\r\n  <div\r\n    onClick={() => addReaction(type)}\r\n    className=\"group relative w-10 hover:scale-125 hover:-translate-y-2 hover:transform origin-bottom transition-all duration-300 ease-in-out\"\r\n  >\r\n    <div className=\"animate-fadeIn group-hover:block absolute bottom-full left-1/2 hidden bg-black dark:bg-white dark:bg-opacity-80 bg-opacity-60 px-1 rounded-xl transform -translate-y-1 -translate-x-1/2 text-white dark:text-black text-tiny\">\r\n      {alt}\r\n    </div>\r\n    <img src={src} alt={alt} className=\"w-full h-full\" />\r\n  </div>\r\n);\r\n\r\nexport default ReactionInput;\r\n","import ClickableIcon from \"components/ClickableIcon\";\r\nimport ConfirmModal from \"components/ConfirmModal\";\r\nimport ImageCircle from \"components/ImageCircle\";\r\nimport usePostApi from \"hooks/api/usePostApi\";\r\nimport { useCloseOnClickOutside } from \"hooks/utils/useCloseOnClickOutside\";\r\nimport moment from \"moment\";\r\nimport React, { useEffect, useRef, useState } from \"react\";\r\nimport { useSelector } from \"react-redux\";\r\nimport { Link } from \"react-router-dom\";\r\nimport {\r\n  PrivacyIcon,\r\n  ReactionColor,\r\n  ReactionIcon,\r\n  ReactionName,\r\n  ReactionType,\r\n} from \"utils/Enums\";\r\nimport { formatDate, groupBy } from \"utils/UtilityMethods\";\r\nimport CommentInput from \"../CommentInput\";\r\nimport CommentList from \"../CommentList\";\r\nimport EditPost from \"../EditPost\";\r\nimport PhotoList from \"../PhotoList\";\r\nimport ReactionInput from \"../ReactionInput\";\r\n\r\nfunction Post({ post, isOpenComment = false }) {\r\n  const currentUser = useSelector((state) => state.users.currentUser);\r\n  const [isOpenEdit, setIsOpenEdit] = useState(false);\r\n  const [isOpenReaction, setIsOpenReaction] = useState(false);\r\n  const [isOpenCommentList, setIsOpenCommentList] = useState(isOpenComment);\r\n  const [isOpenMenu, setIsOpenMenu] = useState(false);\r\n  const [isOpenConfirm, setIsOpenConfirm] = useState(false);\r\n  const [topThreeType, setTopThreeType] = useState();\r\n  const postApi = usePostApi();\r\n  const ref = useRef();\r\n  const reactionRef = useRef();\r\n\r\n  const reacted = post?.reactions?.find(\r\n    (x) => x.creator?.userName === currentUser?.userName,\r\n  );\r\n\r\n  const addLike = () => {\r\n    if (!reacted) {\r\n      postApi.addReaction(post.id, { type: ReactionType.LIKE });\r\n    } else if (reacted && reacted.type !== ReactionType.LIKE) {\r\n      postApi.updateReaction(post.id, { type: ReactionType.LIKE });\r\n    }\r\n    setIsOpenReaction(false);\r\n  };\r\n  const deleteReaction = () => {\r\n    if (reacted) {\r\n      postApi.deleteReaction(post.id);\r\n    }\r\n    setIsOpenReaction(false);\r\n  };\r\n  const topThreeReaction = (post) => {\r\n    if (post?.reactions) {\r\n      const group = groupBy(post.reactions, [\"type\"]);\r\n      var topThree = [];\r\n      for (const key in group) {\r\n        topThree.push({ type: key, total: group[key].length });\r\n      }\r\n      return topThree\r\n        .sort((a, b) => (a.total < b.total ? 1 : -1))\r\n        .slice(0, 3)\r\n        .map((x) => x.type);\r\n    }\r\n    return [];\r\n  };\r\n  useEffect(() => {\r\n    setTopThreeType(topThreeReaction(post));\r\n  }, [post]);\r\n\r\n  useCloseOnClickOutside(isOpenMenu, setIsOpenMenu, ref);\r\n\r\n  const deletePost = () => {\r\n    if (post.id) {\r\n      postApi.deletePost(post.id);\r\n    }\r\n  };\r\n  return (\r\n    <>\r\n      {isOpenConfirm && (\r\n        <ConfirmModal\r\n          isOpen={isOpenConfirm}\r\n          closeAction={() => setIsOpenConfirm(false)}\r\n          title=\"Are you sure?\"\r\n          content=\"Do you want to delete this post?\"\r\n          confirmButtonTitle=\"Yes\"\r\n          confirmButtonAction={() => deletePost()}\r\n        />\r\n      )}\r\n      {isOpenEdit && (\r\n        <EditPost post={post} isOpen={isOpenEdit} setIsOpen={setIsOpenEdit} />\r\n      )}\r\n      <div className=\"py-4 px-5 max-w-xl md:min-w-500 min-w-200 w-full mx-auto bg-white dark:bg-dark-secondary flex flex-col justify-start items-start space-y-3 rounded-xl shadow\">\r\n        <div className=\"flex justify-between items-center w-full\">\r\n          <div className=\"flex space-x-2\">\r\n            <Link\r\n              className=\"font-semibold text-sm cursor-pointer\"\r\n              to={`/profile/${post?.creator?.userName}`}\r\n            >\r\n              <ImageCircle\r\n                src={post?.creator?.avatarUrl}\r\n                userName={post?.creator?.userName}\r\n              />\r\n            </Link>\r\n            <div className=\"flex flex-col justify-evenly\">\r\n              <Link\r\n                className=\"font-semibold text-sm cursor-pointer hover:underline\"\r\n                to={`/profile/${post?.creator?.userName}`}\r\n              >\r\n                {post?.creator?.fullName}\r\n              </Link>\r\n              <Link\r\n                className=\"text-xs text-gray-500 dark:text-dark-txt hover:underline space-x-2\"\r\n                to={`/posts/${post?.id}`}\r\n              >\r\n                <span>{formatDate(post?.dateCreated)}</span>\r\n                <i className={PrivacyIcon[post?.privacy]}></i>\r\n              </Link>\r\n            </div>\r\n          </div>\r\n          {post?.creator?.userName === currentUser?.userName && (\r\n            <div className=\"relative\" ref={ref}>\r\n              <ClickableIcon\r\n                iconClass=\"bx bx-dots-horizontal-rounded\"\r\n                secondMode\r\n                onClick={() => setIsOpenMenu(!isOpenMenu)}\r\n              />\r\n              {isOpenMenu && (\r\n                <div className=\"animate-fadeIn transition-base absolute top-5 right-0 border border-gray-200 bg-white w-48 rounded-lg shadow-lg overflow-hidden p-1 dark:bg-dark-secondary dark:border-dark-hover mt-2 select-none z-10\">\r\n                  <button\r\n                    className=\"flex items-center space-x-3 w-full pl-2 pr-4 py-1 rounded-md text-left hover:bg-gray-100 active:bg-gray-200 transition-base transform active:scale-95 dark:hover:bg-dark-third\"\r\n                    onClick={() => setIsOpenEdit(true)}\r\n                  >\r\n                    <i className=\"bx bx-edit-alt text-center text-xl align-middle text-black dark:text-dark-txt w-7 h-7\"></i>\r\n                    <span className=\"text-sm\">Edit post</span>\r\n                  </button>\r\n                  <button\r\n                    className=\"flex items-center space-x-3 w-full pl-2 pr-4 py-1 rounded-md text-left hover:bg-gray-100 active:bg-gray-200 transition-base transform active:scale-95 dark:hover:bg-dark-third\"\r\n                    onClick={() => setIsOpenConfirm(true)}\r\n                  >\r\n                    <i className=\"bx bx-trash text-center text-xl align-middle text-black dark:text-dark-txt w-7 h-7\"></i>\r\n                    <span className=\"text-sm\">Delete post</span>\r\n                  </button>\r\n                </div>\r\n              )}\r\n            </div>\r\n          )}\r\n        </div>\r\n        <span className=\"text-sm break-words overflow-ellipsis max-w-full\">\r\n          {post?.content}\r\n        </span>\r\n\r\n        {post?.photos?.length > 0 && (\r\n          <div className=\"w-full max-h-500 cursor-pointer\">\r\n            <PhotoList photos={post?.photos} />{\" \"}\r\n          </div>\r\n        )}\r\n\r\n        <div className=\"flex justify-between w-full text-xs text-gray-500 pt-2\">\r\n          <div className=\"cursor-pointer flex items-center space-x-1\">\r\n            <div className=\"flex items-center\">\r\n              {topThreeType &&\r\n                topThreeType.map((type, index) => (\r\n                  <div\r\n                    key={type}\r\n                    className={\r\n                      \"w-5 h-5 \" +\r\n                      (index === 0 ? \"z-3\" : index === 1 ? \"z-2\" : \"z-1\")\r\n                    }\r\n                  >\r\n                    <img\r\n                      src={ReactionIcon[type]}\r\n                      alt={ReactionName[type]}\r\n                      className={\r\n                        \"w-full h-full border-2 border-white dark:border-dark-secondary rounded-full\" +\r\n                        \" \" +\r\n                        (index === 1\r\n                          ? \"transform -translate-x-1\"\r\n                          : index === 2\r\n                          ? \"transform -translate-x-2\"\r\n                          : \"\")\r\n                      }\r\n                    />\r\n                  </div>\r\n                ))}\r\n            </div>\r\n            <span className=\"cursor-pointer text-gray-500 dark:text-dark-txt hover:underline\">\r\n              {post?.reactions?.length > 0 && post?.reactions?.length}\r\n            </span>\r\n          </div>\r\n          <span\r\n            className=\"cursor-pointer text-gray-500 dark:text-dark-txt hover:underline\"\r\n            onClick={() => setIsOpenCommentList((preState) => !preState)}\r\n          >\r\n            {post?.comments?.length > 0 &&\r\n              post?.comments?.length +\r\n                \" comment\" +\r\n                (post?.comments?.length > 1 ? \"s\" : \"\")}\r\n          </span>\r\n        </div>\r\n        <div className=\"w-full text-center flex justify-between items-center select-none cursor-pointer border-t border-b dark:border-dark-third space-x-1 text-gray-600 dark:text-dark-txt font-semibold text-sm p-1\">\r\n          <span\r\n            className=\"relative flex-1 transition-base\"\r\n            ref={reactionRef}\r\n            onMouseOver={() => setIsOpenReaction(true)}\r\n            onMouseLeave={() => setIsOpenReaction(false)}\r\n          >\r\n            {isOpenReaction && (\r\n              <ReactionInput\r\n                setIsOpen={setIsOpenReaction}\r\n                reactionRef={reactionRef}\r\n                postId={post.id}\r\n                reacted={reacted}\r\n                className=\"absolute bottom-full left-0\"\r\n              />\r\n            )}\r\n            {reacted ? (\r\n              <>\r\n                <div\r\n                  className=\"w-full h-full p-1 bg-white hover:bg-gray-100 active:bg-gray-200 dark:bg-dark-secondary dark:hover:bg-dark-third dark:active:bg-dark-hover rounded transition-base\"\r\n                  onClick={deleteReaction}\r\n                >\r\n                  <div className=\"flex-center space-x-2\">\r\n                    <img\r\n                      src={ReactionIcon[reacted.type]}\r\n                      alt={ReactionName[reacted.type]}\r\n                      className=\"animate-popup md:w-5 md:h-5 h-4 w-4\"\r\n                    />\r\n                    <span className={ReactionColor[reacted.type]}>\r\n                      {ReactionName[reacted.type]}\r\n                    </span>\r\n                  </div>\r\n                </div>\r\n              </>\r\n            ) : (\r\n              <div\r\n                className=\"w-full h-full p-1 bg-white hover:bg-gray-100 active:bg-gray-200 dark:bg-dark-secondary dark:hover:bg-dark-third dark:active:bg-dark-hover rounded transition-base\"\r\n                onClick={addLike}\r\n              >\r\n                <span>\r\n                  <i className=\"bx bx-like mr-2 text-lg align-middle\"></i>\r\n                  Like\r\n                </span>\r\n              </div>\r\n            )}\r\n          </span>\r\n          <span\r\n            className=\"flex-1 p-1 h-full w-full bg-white hover:bg-gray-100 active:bg-gray-200 dark:bg-dark-secondary dark:hover:bg-dark-third dark:active:bg-dark-hover rounded transition-base flex items-center justify-center\"\r\n            onClick={() => setIsOpenCommentList((preState) => !preState)}\r\n          >\r\n            <i className=\"bx bx-comment mr-2 text-lg align-middle \"></i>\r\n            Comment\r\n          </span>\r\n        </div>\r\n        {isOpenCommentList && (\r\n          <CommentInput postId={post?.id} currentUser={currentUser} />\r\n        )}\r\n        <CommentList\r\n          postId={post?.id}\r\n          comments={post?.comments}\r\n          isOpen={isOpenCommentList}\r\n          currentUser={currentUser}\r\n        />\r\n      </div>\r\n    </>\r\n  );\r\n}\r\n\r\nexport default React.memo(Post);\r\n","import { setIsLoading } from \"app/appSlice.js\";\r\nimport { useDispatch } from \"react-redux\";\r\nimport useApi from \"./useApi.js\";\r\n\r\nconst baseApiUrl = \"/chats\";\r\n\r\nexport default function useChatApi() {\r\n  const Api = useApi();\r\n  const dispatch = useDispatch();\r\n\r\n  const chatApi = {\r\n    getAll: () => {\r\n      dispatch(setIsLoading(true));\r\n      const url = `${baseApiUrl}`;\r\n      return Api.get(url);\r\n    },\r\n    getById: (chatId, params) => {\r\n      const url = `${baseApiUrl}/${chatId}`;\r\n      return Api.get(url, { params });\r\n    },\r\n    sendMessage: (chatId, content) => {\r\n      const url = `${baseApiUrl}/${chatId}/send`;\r\n      return Api.post(url, content);\r\n    },\r\n    readChat: (chatId) => {\r\n      const url = `${baseApiUrl}/${chatId}/read`;\r\n      return Api.patch(url);\r\n    },\r\n    sendImage: (chatId, content) => {\r\n      dispatch(setIsLoading(true));\r\n      const url = `${baseApiUrl}/${chatId}/sendImage`;\r\n\r\n      Api.interceptors.request.use(async (config) => {\r\n        var token = window.localStorage.getItem(\"token\");\r\n        var newConfig = {};\r\n        if (token) {\r\n          newConfig = {\r\n            ...config,\r\n            headers: {\r\n              \"content-type\": \"multipart/form-data\",\r\n              Authorization: `Bearer ${token}`,\r\n            },\r\n          };\r\n        }\r\n        return newConfig;\r\n      });\r\n      return Api.post(url, content);\r\n    },\r\n    updateGroupAvatar: (chatId, content) => {\r\n      dispatch(setIsLoading(true));\r\n      const url = `${baseApiUrl}/${chatId}/avatar`;\r\n\r\n      Api.interceptors.request.use(async (config) => {\r\n        var token = window.localStorage.getItem(\"token\");\r\n        var newConfig = {};\r\n        if (token) {\r\n          newConfig = {\r\n            ...config,\r\n            headers: {\r\n              \"content-type\": \"multipart/form-data\",\r\n              Authorization: `Bearer ${token}`,\r\n            },\r\n          };\r\n        }\r\n        return newConfig;\r\n      });\r\n      return Api.patch(url, content);\r\n    },\r\n    createGroupChat: (content) => {\r\n      content.groupName = content?.groupName?.substring(0, 99);\r\n\r\n      dispatch(setIsLoading(true));\r\n      const url = `${baseApiUrl}/group`;\r\n      return Api.post(url, content);\r\n    },\r\n    updateGroupChat: (chatId, content) => {\r\n      content.newGroupName = content?.newGroupName?.substring(0, 99);\r\n\r\n      dispatch(setIsLoading(true));\r\n      const url = `${baseApiUrl}/${chatId}`;\r\n      return Api.patch(url, content);\r\n    },\r\n    createPrivateChat: (content) => {\r\n      //dispatch(setIsLoading(true));\r\n      const url = `${baseApiUrl}/private`;\r\n      return Api.post(url, content);\r\n    },\r\n  };\r\n  return chatApi;\r\n}\r\n","import { setIsLoading } from \"app/appSlice.js\";\r\nimport { useDispatch } from \"react-redux\";\r\nimport { DefaultLimit } from \"utils/Constants.js\";\r\nimport useApi from \"./useApi.js\";\r\n\r\nconst baseApiUrl = \"/users\";\r\n\r\nexport default function useUserApi() {\r\n  const Api = useApi();\r\n  const dispatch = useDispatch();\r\n\r\n  const userApi = {\r\n    getUserList: (params) => {\r\n      if (!params?.limit) {\r\n        params = { ...params, limit: DefaultLimit.FRIEND };\r\n      }\r\n      const url = `${baseApiUrl}`;\r\n      return Api.get(url, { params });\r\n    },\r\n    getCurrentUser: () => {\r\n      const url = `${baseApiUrl}/current`;\r\n      return Api.get(url);\r\n    },\r\n    getByUserName: (userName) => {\r\n      const url = `${baseApiUrl}/${userName}`;\r\n      return Api.get(url);\r\n    },\r\n    updateInformation: (content) => {\r\n      dispatch(setIsLoading(true));\r\n      const url = `${baseApiUrl}`;\r\n      return Api.put(url, content);\r\n    },\r\n    updateAvatar: (content) => {\r\n      dispatch(setIsLoading(true));\r\n      const url = `${baseApiUrl}/avatar`;\r\n      Api.interceptors.request.use(async (config) => {\r\n        var token = window.localStorage.getItem(\"token\");\r\n        var newConfig = {};\r\n        if (token) {\r\n          newConfig = {\r\n            ...config,\r\n            headers: {\r\n              \"content-type\": \"multipart/form-data\",\r\n              Authorization: `Bearer ${token}`,\r\n            },\r\n          };\r\n        }\r\n        return newConfig;\r\n      });\r\n      return Api.patch(url, content);\r\n    },\r\n    updateCover: (content) => {\r\n      dispatch(setIsLoading(true));\r\n      const url = `${baseApiUrl}/cover`;\r\n      Api.interceptors.request.use(async (config) => {\r\n        var token = window.localStorage.getItem(\"token\");\r\n        var newConfig = {};\r\n        if (token) {\r\n          newConfig = {\r\n            ...config,\r\n            headers: {\r\n              \"content-type\": \"multipart/form-data\",\r\n              Authorization: `Bearer ${token}`,\r\n            },\r\n          };\r\n        }\r\n        return newConfig;\r\n      });\r\n      return Api.patch(url, content);\r\n    },\r\n  };\r\n  return userApi;\r\n}\r\n","import { addSelectedId } from \"app/chatSlice\";\r\nimport ImageCircle from \"components/ImageCircle\";\r\nimport useChatApi from \"hooks/api/useChatApi\";\r\nimport useUserApi from \"hooks/api/useUserApi\";\r\nimport React, { useEffect, useState } from \"react\";\r\nimport { useDispatch } from \"react-redux\";\r\nimport { useSelector } from \"react-redux\";\r\nimport { useLocation } from \"react-router\";\r\n\r\nexport default function OnlineUserList() {\r\n  const userApi = useUserApi();\r\n  const chatApi = useChatApi();\r\n  const location = useLocation();\r\n  const dispatch = useDispatch();\r\n  const [users, setUsers] = useState([]);\r\n  const [onlineUsers, setOnlineUsers] = useState([]);\r\n  const onlineUserNameList = useSelector(\r\n    (state) => state.users.onlineUserNameList,\r\n  );\r\n\r\n  useEffect(() => {\r\n    userApi.getUserList().then((response) => {\r\n      setUsers(response.items);\r\n    });\r\n  }, [location.pathname]);\r\n  useEffect(() => {\r\n    const online = users.filter((x) => onlineUserNameList.includes(x.userName));\r\n    setOnlineUsers(online);\r\n  }, [onlineUserNameList, users]);\r\n\r\n  async function handleCreateChat(userName) {\r\n    const request = {\r\n      participantUserName: userName,\r\n    };\r\n    chatApi.createPrivateChat(request).then((response) => {\r\n      if (response.id) {\r\n        dispatch(addSelectedId(response.id));\r\n      }\r\n    });\r\n  }\r\n  return (\r\n    <>\r\n      <div className=\"w-full h-full flex flex-col space-y-3 bg-white dark:bg-dark-secondary rounded-lg p-4 shadow\">\r\n        <span className=\"font-bold text-lg\">Online</span>\r\n        <div className=\"flex flex-col select-none\">\r\n          {onlineUsers.map((user) => (\r\n            <div\r\n              key={user.id}\r\n              onClick={() => handleCreateChat(user.userName)}\r\n              className=\"flex items-center space-x-2 px-1 rounded-lg py-2 clickable active:scale-95 active:transform transition-base\"\r\n            >\r\n              <ImageCircle\r\n                size=\"sm\"\r\n                userName={user.userName}\r\n                src={user.avatarUrl}\r\n              />\r\n              <span className=\"font-semibold text-sm truncate w-full\">\r\n                {user.fullName}\r\n              </span>\r\n            </div>\r\n          ))}\r\n        </div>\r\n      </div>\r\n    </>\r\n  );\r\n}\r\n","import ImageCircle from \"components/ImageCircle\";\r\nimport Pagination from \"components/Pagination\";\r\nimport DefaultCover from \"assets/img/default-cover.jpg\";\r\nimport usePostPagination from \"hooks/pagination/usePostPagination\";\r\nimport React, { useState } from \"react\";\r\nimport { useSelector } from \"react-redux\";\r\nimport CreatePost from \"./components/CreatePost\";\r\nimport Post from \"./components/Post\";\r\nimport { Link } from \"react-router-dom\";\r\nimport OnlineUserList from \"./components/OnlineUserList\";\r\n\r\nfunction Home() {\r\n  const [pagination, setPagination] = useState({ page: 1 });\r\n  const { posts, isHasMore, isLoading, error } = usePostPagination(pagination);\r\n  const user = useSelector((state) => state.users.currentUser);\r\n\r\n  function loadMore() {\r\n    if (isHasMore) {\r\n      setPagination({ ...pagination, page: pagination.page + 1 });\r\n    }\r\n  }\r\n  return (\r\n    <>\r\n      <div className=\"w-full flex flex-cols items-start justify-between animate-fadeIn md:space-x-2\">\r\n        <div className=\"sticky top-20 lg:block hidden w-full bg-white dark:bg-dark-secondary rounded-lg shadow max-w-350\">\r\n          <div className=\"flex flex-col items-center w-full\">\r\n            <Link\r\n              to={`/profile/${user.userName}`}\r\n              className=\"relative h-28 w-full flex mb-6 select-none\"\r\n            >\r\n              <img\r\n                src={user?.coverUrl ?? DefaultCover}\r\n                alt={`${user?.fullName} cover`}\r\n                className=\"w-full object-cover rounded-lg cursor-pointer\"\r\n              />\r\n              <div className=\"absolute rounded-full left-1/2 transform bottom-0 translate-y-5 -translate-x-1/2 border-2 border-white dark:border-dark-secondary ring-2 ring-green-400 dark:ring-green-500 cursor-pointer\">\r\n                <ImageCircle src={user?.avatarUrl} size=\"lg\" />\r\n              </div>\r\n            </Link>\r\n            <div className=\"w-full mx-4 dark:border-dark-hover pb-6 space-y-2\">\r\n              <Link to={`/profile/${user.userName}`}>\r\n                <div className=\"w-full text-center font-semibold hover:underline text-lg max-row-2\">\r\n                  {user.fullName}{\" \"}\r\n                </div>\r\n                {user.nickName && (\r\n                  <div className=\"font-normal text-center\">{`(${user.nickName})`}</div>\r\n                )}\r\n              </Link>\r\n              <div className=\"mx-3 text-center text-sm max-row-10\">\r\n                {user.aboutMe}\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div className=\"space-y-2 md:space-y-3 lg:min-w-600 md:min-w-500 w-full flex flex-col items-center\">\r\n          <CreatePost />\r\n          {[...posts?.items]\r\n            ?.sort((a, b) => (a.dateCreated < b.dateCreated ? 1 : -1))\r\n            ?.map((post) => (\r\n              <Post key={post.id} post={post} />\r\n            ))}\r\n          <Pagination\r\n            loadMoreClassName=\"bg-gray-200 hover:bg-gray-300\"\r\n            onClick={loadMore}\r\n            isLoading={isLoading}\r\n            error={error}\r\n            isHasMore={isHasMore}\r\n            loadMoreContent=\"Load more posts...\"\r\n          />\r\n          {posts?.totalRecords <= 0 && (\r\n            <div className=\"text-center py-3 font-semibold\">\r\n              Not found any posts\r\n              <br /> You should create first post or add more friends\r\n            </div>\r\n          )}\r\n        </div>\r\n        <div className=\"sticky top-20 md:block hidden w-full\">\r\n          <OnlineUserList />\r\n        </div>\r\n      </div>\r\n    </>\r\n  );\r\n}\r\n\r\nexport default Home;\r\n","import { addSelectedId } from \"app/chatSlice\";\r\nimport Button from \"components/Button\";\r\nimport ImageCircle from \"components/ImageCircle\";\r\nimport useChatApi from \"hooks/api/useChatApi\";\r\nimport { useCloseOnClickOutside } from \"hooks/utils/useCloseOnClickOutside\";\r\nimport { useDisableBodyScroll } from \"hooks/utils/useDisableBodyScroll\";\r\nimport { useEscToClose } from \"hooks/utils/useEscToClose\";\r\nimport useUserApi from \"hooks/api/useUserApi\";\r\nimport React, { useEffect, useRef, useState } from \"react\";\r\nimport { useDispatch } from \"react-redux\";\r\nimport { DefaultName } from \"utils/Constants\";\r\nimport { ChatType } from \"utils/Enums\";\r\nimport { setIsLoading } from \"app/appSlice\";\r\n\r\nfunction CreateChat({ isOpen, setIsOpen }) {\r\n  const [selectedMode, setSelectedMode] = useState(ChatType.PRIVATE);\r\n  const [isOpenUserList, setIsOpenUserList] = useState(false);\r\n  const [isValidButton, setIsValidButton] = useState(false);\r\n  const [groupName, setGroupName] = useState(\"\");\r\n  const [keyword, setKeyword] = useState(\"\");\r\n  const [userList, setUserList] = useState([]);\r\n  const [selectedUsers, setSelectedUsers] = useState([]);\r\n\r\n  const ref = useRef();\r\n  const userListRef = useRef();\r\n\r\n  const dispatch = useDispatch();\r\n\r\n  const chatApi = useChatApi();\r\n  const userApi = useUserApi();\r\n\r\n  useDisableBodyScroll(isOpen);\r\n  useEscToClose(setIsOpen);\r\n  useCloseOnClickOutside(isOpen, setIsOpen, ref);\r\n  useCloseOnClickOutside(isOpenUserList, setIsOpenUserList, userListRef);\r\n\r\n  useEffect(() => {\r\n    userApi.getUserList().then((response) => {\r\n      if (response) {\r\n        setUserList(response.items);\r\n      }\r\n    });\r\n    return () => {\r\n      setSelectedUsers([]);\r\n      setGroupName(\"\");\r\n    };\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    if (selectedMode === ChatType.GROUP) {\r\n      var result = selectedUsers?.length >= 2 && groupName?.trim();\r\n      setIsValidButton(result);\r\n    } else if (selectedMode === ChatType.PRIVATE) {\r\n      setIsValidButton(selectedUsers?.length !== 0 ? true : false);\r\n    }\r\n  }, [selectedUsers, groupName, selectedMode]);\r\n\r\n  async function handleCreateGroup() {\r\n    if (isValidButton) {\r\n      if (selectedMode === ChatType.GROUP) {\r\n        const request = {\r\n          participantUserNames: selectedUsers.map((x) => x.userName),\r\n          name: groupName,\r\n        };\r\n        chatApi.createGroupChat(request).then((response) => {\r\n          if (response.id) {\r\n            dispatch(addSelectedId(response.id));\r\n          }\r\n          setSelectedUsers([]);\r\n          setGroupName(\"\");\r\n          setIsOpen(false);\r\n        });\r\n      } else if (selectedMode === ChatType.PRIVATE) {\r\n        const request = {\r\n          participantUserName: selectedUsers.map((x) => x.userName).shift(),\r\n        };\r\n        dispatch(setIsLoading(true));\r\n        chatApi.createPrivateChat(request).then((response) => {\r\n          if (response.id) {\r\n            dispatch(addSelectedId(response.id));\r\n          }\r\n          setSelectedUsers([]);\r\n          setGroupName(\"\");\r\n          setIsOpen(false);\r\n        });\r\n      }\r\n    }\r\n  }\r\n\r\n  return isOpen ? (\r\n    <div\r\n      className=\"overlay grid place-items-center px-4 py-10 z-30\"\r\n      style={{ margin: 0 }}\r\n    >\r\n      <div\r\n        ref={ref}\r\n        className={\r\n          \"animate-swipeDown px-6 md:px-14 md:py-6 flex flex-col bg-white dark:bg-dark-secondary dark:border-dark-third rounded-xl shadow-xl border border-gray-300 w-full md:w-5/6 lg:w-2/5 transition-all duration-300 ease-in-out max-h-full overflow-y-auto md:overflow-visible\" +\r\n          \" \" +\r\n          (isOpenUserList ? \"mb-16\" : \"\")\r\n        }\r\n      >\r\n        <div className=\"flex pt-6 pb-5 justify-between h-full items-center\">\r\n          <h3 className=\"font-semibold text-lg md:text-2xl text-green-600 dark:text-green-400\">\r\n            New chat!\r\n          </h3>\r\n\r\n          <div className=\"relative flex rounded-lg items-center border border-green-500 cursor-pointer overflow-hidden\">\r\n            <div\r\n              className={\r\n                \"absolute bg-gradient-to-br from-green-400 to-green-600 w-1/2 h-full rounded transition-base z-0\" +\r\n                \" \" +\r\n                (selectedMode === ChatType.GROUP\r\n                  ? \"transform translate-x-full left-0\"\r\n                  : \"left-0 \")\r\n              }\r\n            ></div>\r\n            <span\r\n              className={\r\n                \" px-3 py-2 z-10 text-xs md:text-sm select-none \" +\r\n                \" \" +\r\n                (selectedMode === ChatType.PRIVATE\r\n                  ? \"text-white\"\r\n                  : \" text-green-600 dark:text-green-400\")\r\n              }\r\n              onClick={() => setSelectedMode(ChatType.PRIVATE)}\r\n            >\r\n              Private\r\n            </span>\r\n            <span\r\n              className={\r\n                \" px-3 py-2 z-10 text-xs md:text-sm select-none \" +\r\n                \" \" +\r\n                (selectedMode === ChatType.GROUP\r\n                  ? \"text-white\"\r\n                  : \" text-green-600 dark:text-green-400\")\r\n              }\r\n              onClick={() => setSelectedMode(ChatType.GROUP)}\r\n            >\r\n              Group\r\n            </span>\r\n          </div>\r\n        </div>\r\n        <div className=\"space-y-2 md:space-y-4\">\r\n          {selectedMode === ChatType.GROUP ? (\r\n            <>\r\n              <div className=\"space-y-2\">\r\n                <label\r\n                  htmlFor=\"groupName\"\r\n                  className=\"font-semibold text-base md:text-lg dark:text-gray-200\"\r\n                >\r\n                  Group name <span className=\"text-red-500\">*</span>\r\n                </label>\r\n                <input\r\n                  id=\"groupName\"\r\n                  value={groupName}\r\n                  onChange={(e) => setGroupName(e.target.value)}\r\n                  type=\"text\"\r\n                  className=\"dark:bg-dark-third bg-gray-100 rounded-lg w-full py-2 px-3 focus:ring-2 focus:ring-green-500 focus:ring-opacity-50 outline-none transition-base mb-2 \"\r\n                />\r\n              </div>\r\n              <div ref={userListRef} className=\"space-y-2\">\r\n                <label\r\n                  htmlFor=\"search\"\r\n                  className=\"font-semibold text-base md:text-lg dark:text-gray-200\"\r\n                >\r\n                  Find Friends\r\n                </label>\r\n                <div className=\"relative\">\r\n                  <input\r\n                    id=\"search\"\r\n                    type=\"search\"\r\n                    onFocus={() => setIsOpenUserList(true)}\r\n                    value={keyword}\r\n                    autoComplete=\"off\"\r\n                    onChange={(e) => setKeyword(e.target.value)}\r\n                    className=\"dark:bg-dark-third bg-gray-100 rounded-lg w-full py-2 px-3 focus:ring-2 focus:ring-green-500 focus:ring-opacity-50 outline-none transition-base mb-2 \"\r\n                  />\r\n                  {isOpenUserList && (\r\n                    <>\r\n                      <div className=\"animate-fadeIn absolute top-full bg-white dark:bg-dark-secondary dark:border-dark-hover border border-gray-300 border-opacity-50 rounded-lg w-full py-2 md:py-4 md:px-8 px-6 space-y-1 max-h-36 md:max-h-72 overflow-y-auto select-none z-10 shadow-2xl\">\r\n                        <h4 className=\"font-semibold mb-2 dark:text-gray-200\">\r\n                          Friend list\r\n                        </h4>\r\n                        {userList\r\n                          .filter(\r\n                            (x) =>\r\n                              (x.fullName\r\n                                ?.toLowerCase()\r\n                                .includes(keyword?.toLowerCase()) ||\r\n                                x.userName\r\n                                  ?.toLowerCase()\r\n                                  .includes(keyword?.toLowerCase())) &&\r\n                              !selectedUsers.some(\r\n                                (selected) => selected.userName === x.userName,\r\n                              ),\r\n                          )\r\n                          .sort((a, b) => a.fullName.localeCompare(b.fullName))\r\n                          .map((friend, index) => (\r\n                            <div\r\n                              onClick={() => {\r\n                                var result = [...selectedUsers];\r\n                                if (\r\n                                  !result.some(\r\n                                    (x) => x.userName === friend.userName,\r\n                                  )\r\n                                ) {\r\n                                  result.push(friend);\r\n                                  setSelectedUsers(result);\r\n                                }\r\n                              }}\r\n                              key={index + friend?.userName}\r\n                              className=\"h-full w-full rounded-lg px-3 py-2 flex items-center space-x-2  dark:bg-dark-third bg-gray-100 hover:bg-green-200 dark:hover:bg-green-600 cursor-pointer transform active:scale-100 hover:scale-105 hover:shadow-xl transition-all duration-300 ease-in-out\"\r\n                            >\r\n                              <ImageCircle\r\n                                size=\"xs\"\r\n                                src={friend.avatarUrl}\r\n                                userName={friend?.userName}\r\n                              />\r\n                              <span className=\"break-full w-full overflow-ellipsis truncate md:text-base text-sm\">\r\n                                {friend.fullName ?? DefaultName.NO_NAME_USER}\r\n                              </span>\r\n                            </div>\r\n                          ))}\r\n                      </div>\r\n                    </>\r\n                  )}\r\n                </div>\r\n              </div>\r\n              <div className=\"space-y-2\">\r\n                <label\r\n                  htmlFor=\"search\"\r\n                  className=\"font-semibold text-base md:text-lg dark:text-gray-200\"\r\n                >\r\n                  Selected <span className=\"text-red-500\">*</span>{\" \"}\r\n                  <span className=\"text-sm text-gray-400\">\r\n                    {\"(At least 2 people. Click to remove)\"}\r\n                  </span>\r\n                </label>\r\n                <div className=\"bg-white dark:bg-dark-secondary border dark:border-dark-hover border-gray-400 border-opacity-50 rounded-lg w-full py-4 md:px-8 px-6 space-y-1 max-h-48 md:max-h-72 overflow-y-auto select-none\">\r\n                  {selectedUsers\r\n                    .sort((a, b) => a.fullName.localeCompare(b.fullName))\r\n                    .map((friend, index) => (\r\n                      <div\r\n                        onClick={() => {\r\n                          var result = [...selectedUsers];\r\n                          var i = result.findIndex(\r\n                            (x) => x.userName === friend.userName,\r\n                          );\r\n                          if (i >= 0) {\r\n                            result.splice(i, 1);\r\n                            setSelectedUsers(result);\r\n                          }\r\n                        }}\r\n                        key={index + friend?.userName}\r\n                        className=\"h-full w-full rounded-lg px-3 py-2 flex items-center space-x-2  dark:bg-dark-third bg-gray-100 hover:bg-red-200 dark:hover:bg-red-500 cursor-pointer transform active:scale-100 hover:scale-105 hover:shadow-xl transition-all duration-300 ease-in-out\"\r\n                      >\r\n                        <ImageCircle\r\n                          size=\"xs\"\r\n                          src={friend.avatarUrl}\r\n                          userName={friend?.userName}\r\n                        />\r\n                        <span className=\"break-full w-full overflow-ellipsis truncate md:text-base text-sm\">\r\n                          {friend.fullName ?? DefaultName.NO_NAME_USER}\r\n                        </span>\r\n                      </div>\r\n                    ))}\r\n                </div>\r\n              </div>\r\n            </>\r\n          ) : (\r\n            <div ref={userListRef} className=\"space-y-2\">\r\n              <label\r\n                htmlFor=\"selectFriend\"\r\n                className=\"font-semibold md:text-lg dark:text-gray-200\"\r\n              >\r\n                Select Friends\r\n              </label>\r\n              <div className=\"relative\">\r\n                <input\r\n                  id=\"selectFriend\"\r\n                  type=\"search\"\r\n                  onFocus={() => setIsOpenUserList(true)}\r\n                  value={keyword}\r\n                  autoComplete=\"off\"\r\n                  onChange={(e) => setKeyword(e.target.value)}\r\n                  className=\"dark:bg-dark-third bg-gray-100 rounded-lg w-full py-2 px-3 focus:ring-2 focus:ring-green-500 focus:ring-opacity-50 outline-none transition-base mb-2 \"\r\n                />\r\n                {isOpenUserList && (\r\n                  <>\r\n                    <div className=\"animate-fadeIn absolute top-full bg-white dark:bg-dark-secondary border border-gray-400 border-opacity-50 rounded-lg w-full space-y-1 max-h-36 md:max-h-72 overflow-y-auto select-none z-10 shadow-2xl py-2 md:py-4 md:px-8 px-6\">\r\n                      <h4 className=\"font-semibold mb-2 text-start dark:text-gray-200\">\r\n                        Friend list\r\n                      </h4>\r\n                      {userList\r\n                        ?.sort((a, b) => a.fullName.localeCompare(b.fullName))\r\n                        ?.filter(\r\n                          (x) =>\r\n                            (x.fullName\r\n                              ?.toLowerCase()\r\n                              .includes(keyword?.toLowerCase()) ||\r\n                              x.userName\r\n                                ?.toLowerCase()\r\n                                .includes(keyword?.toLowerCase())) &&\r\n                            !selectedUsers.some(\r\n                              (selected) => selected.userName === x.userName,\r\n                            ),\r\n                        )\r\n                        .map((friend, index) => (\r\n                          <div\r\n                            onClick={() => {\r\n                              var result = [];\r\n                              result.push(friend);\r\n                              setIsOpenUserList(false);\r\n                              setSelectedUsers(result);\r\n                            }}\r\n                            key={index + friend?.userName}\r\n                            className=\"h-full w-full rounded-lg px-3 py-2 flex items-center space-x-2  dark:bg-dark-third bg-gray-100 hover:bg-green-200 dark:hover:bg-green-600 cursor-pointer transform active:scale-100 hover:scale-105 hover:shadow-xl transition-all duration-300 ease-in-out\"\r\n                          >\r\n                            <ImageCircle\r\n                              size=\"xs\"\r\n                              src={friend.avatarUrl}\r\n                              userName={friend?.userName}\r\n                            />\r\n                            <span className=\"break-full w-full overflow-ellipsis truncate text-sm md:text-base\">\r\n                              {friend.fullName ?? DefaultName.NO_NAME_USER}\r\n                            </span>\r\n                          </div>\r\n                        ))}\r\n                    </div>\r\n                  </>\r\n                )}\r\n              </div>\r\n              <div className=\"space-y-2\">\r\n                <label\r\n                  htmlFor=\"search\"\r\n                  className=\"font-semibold md:text-lg dark:text-gray-200\"\r\n                >\r\n                  Selected <span className=\"text-red-500\">*</span>{\" \"}\r\n                  <span className=\"text-sm text-gray-400\">\r\n                    {\"(Click to remove)\"}\r\n                  </span>\r\n                </label>\r\n                <div className=\"bg-white dark:bg-dark-secondary border dark:border-dark-hover border-gray-400 border-opacity-50 rounded-lg w-full py-4 md:px-8 px-6 space-y-1 max-h-48 md:max-h-72 overflow-y-auto select-none \">\r\n                  {[...selectedUsers].map((friend, index) => {\r\n                    if (index === 0) {\r\n                      return (\r\n                        <div\r\n                          onClick={() => {\r\n                            var result = [...selectedUsers];\r\n                            var i = result.findIndex(\r\n                              (x) => x.userName === friend.userName,\r\n                            );\r\n                            if (i >= 0) {\r\n                              result.splice(i, 1);\r\n                              setSelectedUsers(result);\r\n                            }\r\n                          }}\r\n                          key={index + friend?.userName}\r\n                          className=\"h-full w-full rounded-lg px-3 py-2 flex items-center space-x-2  dark:bg-dark-third bg-gray-100 hover:bg-red-200 cursor-pointer transform active:scale-100 hover:scale-105 hover:shadow-xl transition-all duration-300 ease-in-out dark:hover:bg-red-500\"\r\n                        >\r\n                          <ImageCircle\r\n                            size=\"xs\"\r\n                            src={friend.avatarUrl}\r\n                            userName={friend?.userName}\r\n                          />\r\n                          <span className=\"break-full w-full overflow-ellipsis truncate md:text-base text-sm\">\r\n                            {friend.fullName ?? DefaultName.NO_NAME_USER}\r\n                          </span>\r\n                        </div>\r\n                      );\r\n                    } else {\r\n                      return <></>;\r\n                    }\r\n                  })}\r\n                </div>\r\n              </div>\r\n            </div>\r\n          )}\r\n        </div>\r\n        <div className=\"flex justify-end py-6 space-x-4\">\r\n          <div className=\"space-x-2 flex items-center\">\r\n            <Button outline content=\"Close\" onClick={() => setIsOpen(false)} />\r\n            <Button\r\n              disabled={!isValidButton}\r\n              content=\"Create\"\r\n              onClick={() => handleCreateGroup()}\r\n            />\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  ) : (\r\n    \"\"\r\n  );\r\n}\r\n\r\nexport default CreateChat;\r\n","import { addSelectedId } from \"app/chatSlice\";\r\nimport ClickableIcon from \"components/ClickableIcon\";\r\nimport ImageCircle from \"components/ImageCircle\";\r\nimport moment from \"moment\";\r\nimport React, { useEffect, useState } from \"react\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { DefaultName } from \"utils/Constants\";\r\nimport { ChatType } from \"utils/Enums\";\r\nimport { formatDate } from \"utils/UtilityMethods\";\r\nimport CreateChat from \"../CreateChat\";\r\n\r\nfunction ChatList({ className, setChatNotificationNumber, setIsOpen }) {\r\n  const currentUser = useSelector((state) => state.users.currentUser);\r\n  const chats = useSelector((state) => state.chats.chats);\r\n\r\n  const [keyword, setKeyword] = useState(\"\");\r\n  const [isOpenCreateChat, setIsOpenCreateChat] = useState(false);\r\n\r\n  const dispatch = useDispatch();\r\n\r\n  useEffect(() => {\r\n    if (chats) {\r\n      const num = chats.reduce((preNum, x) => {\r\n        return preNum + (x?.numOfUnreadMessages > 0 ? 1 : 0);\r\n      }, 0);\r\n      setChatNotificationNumber(num);\r\n    }\r\n  }, [chats]);\r\n\r\n  function handleClick(id) {\r\n    const action = addSelectedId(id);\r\n    dispatch(action);\r\n    setIsOpen(false);\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <CreateChat isOpen={isOpenCreateChat} setIsOpen={setIsOpenCreateChat} />\r\n      <div\r\n        className={\r\n          className +\r\n          \" \" +\r\n          \"bg-white dark:bg-dark-secondary shadow-lg rounded-xl px-2 md:px-4 pt-3 md:pt-4 pb-2 border dark:border-dark-hover\"\r\n        }\r\n      >\r\n        <div className=\"relative \">\r\n          <div className=\"flex space-x-2 justify-between items-center mb-3 \">\r\n            <input\r\n              type=\"search\"\r\n              className=\"rounded-3xl bg-gray-100 px-4 pl-10 pr-3 py-2 focus:ring-2 focus:ring-green-400 focus:ring-opacity-50 outline-none transition-base w-full dark:bg-dark-third dark:text-white\"\r\n              placeholder=\"Search TeeChat!\"\r\n              onChange={(e) => setKeyword(e.target.value)}\r\n            />\r\n            <ClickableIcon\r\n              iconClass=\"bx bxs-edit\"\r\n              onClick={() => setIsOpenCreateChat(true)}\r\n              className=\"dark:bg-dark-third bg-gray-100\"\r\n            />\r\n          </div>\r\n          <i className=\"bx bx-search absolute text-xl top-1/2 left-3 transform -translate-y-1/2 text-gray-400 cursor-pointer\"></i>\r\n        </div>\r\n\r\n        <div className=\"max-h-450 overflow-y-auto pr-2 md:pb-0\">\r\n          {chats &&\r\n            getCurrentChats(chats, keyword).map((chat, index) => {\r\n              const currentUserName = currentUser.userName;\r\n\r\n              // check current user still exist in chat (remove participant case)\r\n              var isValid = chat?.participants.some(\r\n                (x) => x.userName === currentUserName,\r\n              );\r\n              if (!isValid) {\r\n                return;\r\n              }\r\n\r\n              const friend =\r\n                chat?.participants.length > 1\r\n                  ? chat?.participants\r\n                      ?.filter((x) => x.userName !== currentUserName)\r\n                      .shift()\r\n                  : currentUser;\r\n              let lastMessage = {};\r\n              if (chat.messages?.length !== 0) {\r\n                lastMessage = chat.messages?.reduce((a, b) =>\r\n                  a?.dateCreated > b?.dateCreated ? a : b,\r\n                );\r\n              }\r\n              return (\r\n                <div\r\n                  key={chat.id}\r\n                  className=\"relative select-none w-full h-16 flex flex-start items-center cursor-pointer hover:bg-gray-100 p-2 rounded-lg transition-base dark:hover:bg-dark-third dark:text-dark-txt\"\r\n                  onClick={() => handleClick(chat.id)}\r\n                >\r\n                  {chat.numOfUnreadMessages > 0 && (\r\n                    <span className=\"w-6 h-6 absolute right-2 top-1/2 text-xs font-bold p-1 bg-green-500 dark:bg-green-600 text-white rounded-full text-center align-middle\">\r\n                      {chat.numOfUnreadMessages > 9\r\n                        ? \"9+\"\r\n                        : chat.numOfUnreadMessages}\r\n                    </span>\r\n                  )}\r\n                  <ImageCircle\r\n                    src={\r\n                      chat?.type === ChatType.PRIVATE\r\n                        ? friend?.avatarUrl\r\n                        : chat?.groupAvatarUrl\r\n                    }\r\n                    participants={chat?.participants}\r\n                  />\r\n\r\n                  <div className=\"font-primary flex flex-col pl-3 justify-between items-start h-full truncate w-full\">\r\n                    <div className=\"flex justify-between items-center w-full min-w-0 space-x-3\">\r\n                      <span\r\n                        className={\r\n                          \"text-gray-800 truncate dark:text-dark-txt\" +\r\n                          \" \" +\r\n                          (chat.numOfUnreadMessages > 0 ? \"font-bold\" : \"\")\r\n                        }\r\n                      >\r\n                        {chat?.type === ChatType.PRIVATE\r\n                          ? friend?.fullName\r\n                          : chat?.name ?? DefaultName.NO_NAME_GROUP}\r\n                      </span>\r\n                      <span className=\"text-sm text-gray-500 truncate flex-shrink-0\">\r\n                        {formatDate(\r\n                          lastMessage?.dateCreated ?? chat?.dateCreated,\r\n                        )}\r\n                      </span>\r\n                    </div>\r\n                    <div className=\"flex\">\r\n                      <span\r\n                        className={\r\n                          \"mr-2 text-sm text-gray-500 truncate overflow-hidden flex-grow\" +\r\n                          \" \" +\r\n                          (chat.numOfUnreadMessages > 0\r\n                            ? \"font-bold mr-10\"\r\n                            : \"\")\r\n                        }\r\n                      >\r\n                        {lastMessage.content\r\n                          ? lastMessage.content\r\n                          : lastMessage.imageUrl\r\n                          ? \"Sent an image\"\r\n                          : \"\"}\r\n                      </span>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              );\r\n            })}\r\n          {chats.length < 1 && (\r\n            <div className=\"pt-3 pb-4 w-full text-center font-semibold\">\r\n              Not found any chats. Start a chat now!\r\n            </div>\r\n          )}\r\n        </div>\r\n        <a\r\n          href={process.env.REACT_APP_CHAT_APP_URL}\r\n          target=\"_blank\"\r\n          rel=\"noreferrer\"\r\n          className=\"font-semibold text-center text-sm text-green-500 hover:text-green-600 cursor-pointer block px-2 pt-2 mt-2 border-t-2 border-gray-100 dark:border-dark-third transition-base\"\r\n        >\r\n          See all in TeeChat!\r\n        </a>\r\n      </div>\r\n    </>\r\n  );\r\n}\r\n\r\nexport default ChatList;\r\n\r\nfunction getCurrentChats(chats, keyword) {\r\n  var result = sortChat(chats);\r\n  result = searchChat(result, keyword);\r\n  return result;\r\n}\r\n\r\nfunction sortChat(chats) {\r\n  if (chats) {\r\n    return [...chats].sort((chatA, chatB) => {\r\n      let lastMessageA = {};\r\n      let lastMessageB = {};\r\n      // check if chat no message => return date created of chat\r\n      if (chatA.messages?.length !== 0) {\r\n        lastMessageA = chatA.messages?.reduce((a, b) => {\r\n          return a?.dateCreated > b?.dateCreated ? a : b;\r\n        });\r\n      } else {\r\n        lastMessageA.dateCreated = chatA?.dateCreated;\r\n      }\r\n      if (chatB.messages?.length !== 0) {\r\n        lastMessageB = chatB.messages?.reduce((a, b) =>\r\n          a?.dateCreated > b?.dateCreated ? a : b,\r\n        );\r\n      } else {\r\n        lastMessageB.dateCreated = chatB?.dateCreated;\r\n      }\r\n\r\n      return lastMessageA?.dateCreated < lastMessageB?.dateCreated ? 1 : -1;\r\n    });\r\n  }\r\n}\r\n\r\nfunction searchChat(chats, keyword) {\r\n  if (chats) {\r\n    return chats.filter((chat) => {\r\n      let isValid = chat?.participants.some((x) => {\r\n        if (\r\n          x.fullName.toLowerCase().includes(keyword.toLowerCase()) ||\r\n          x?.userName.toLowerCase().includes(keyword.toLowerCase())\r\n        ) {\r\n          return true;\r\n        }\r\n        return false;\r\n      });\r\n      return (\r\n        isValid || chat?.name?.toLowerCase().includes(keyword.toLowerCase())\r\n      );\r\n    });\r\n  }\r\n}\r\n","import { DefaultLimit } from \"utils/Constants.js\";\r\nimport useApi from \"./useApi.js\";\r\n\r\nconst baseApiUrl = \"/notifications\";\r\n\r\nexport default function useNotificationApi() {\r\n  const Api = useApi();\r\n\r\n  const notificationApi = {\r\n    getAll: (params) => {\r\n      if (!params?.limit) {\r\n        params = { ...params, limit: DefaultLimit.NOTIFICATION };\r\n      }\r\n      const url = `${baseApiUrl}`;\r\n      return Api.get(url, { params });\r\n    },\r\n    readAll: () => {\r\n      const url = `${baseApiUrl}/read`;\r\n      return Api.patch(url);\r\n    },\r\n    readById: (id) => {\r\n      const url = `${baseApiUrl}/${id}/read`;\r\n      return Api.patch(url);\r\n    },\r\n  };\r\n  return notificationApi;\r\n}\r\n","import React from \"react\";\r\nimport ImageCircle from \"components/ImageCircle\";\r\nimport moment from \"moment\";\r\nimport { NotificationType, ReactionIcon, ReactionName } from \"utils/Enums\";\r\nimport { formatDate } from \"utils/UtilityMethods\";\r\n\r\nfunction Notification({ notification, onClick }) {\r\n  return (\r\n    <>\r\n      <div\r\n        className=\"relative select-none w-full flex flex-start items-center cursor-pointer hover:bg-gray-100 p-2  rounded-lg transition-base dark:hover:bg-dark-third dark:text-dark-txt\"\r\n        onClick={() => onClick(notification)}\r\n      >\r\n        {!notification?.isRead && (\r\n          <span className=\"w-3 h-3 absolute right-2 top-1/2 transform -translate-y-1/2 text-xs font-bold p-1 bg-green-500 dark:bg-green-600 text-white rounded-full text-center align-middle\"></span>\r\n        )}\r\n        <div className=\"relative flex-shrink-0\">\r\n          <ImageCircle src={notification?.creator?.avatarUrl} />\r\n          {notification?.type === NotificationType.REACTION && (\r\n            <div className=\"h-5 w-5 absolute -right-1 top-full transform -translate-y-4\">\r\n              <img\r\n                src={ReactionIcon[notification.reactionType]}\r\n                alt={ReactionName[notification.reactionType]}\r\n                className=\"w-full h-full\"\r\n              />\r\n            </div>\r\n          )}\r\n        </div>\r\n        <div className=\"font-primary flex flex-col pl-3 justify-between w-full max-w-lg\">\r\n          <div className=\"flex flex-col justify-between items-start w-full min-w-0\">\r\n            <span\r\n              className={\r\n                \"text-sm md:text-base text-gray-800 dark:text-dark-txt max-w-full overflow-ellipsis break-word max-row-2\" +\r\n                \" \" +\r\n                (!notification?.isRead ? \"font-bold pr-3\" : \"\")\r\n              }\r\n            >\r\n              {notification?.content}\r\n            </span>\r\n            <span\r\n              className={\r\n                \"text-xs md:text-sm text-gray-500 truncate flex-shrink-0\" +\r\n                \" \" +\r\n                (!notification?.isRead ? \"font-bold\" : \"\")\r\n              }\r\n            >\r\n              {formatDate(notification?.dateCreated)}\r\n            </span>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </>\r\n  );\r\n}\r\n\r\nexport default Notification;\r\n","import { readAllNotification, readNotificationById } from \"app/appSlice\";\r\nimport Pagination from \"components/Pagination\";\r\nimport useNotificationApi from \"hooks/api/useNotificationApi\";\r\nimport useNotificationPagination from \"hooks/pagination/useNotificationPagination\";\r\nimport React, { useEffect, useState } from \"react\";\r\nimport { useDispatch } from \"react-redux\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport { NotificationType } from \"utils/Enums\";\r\nimport Notification from \"../Notification\";\r\n\r\nfunction NotificationList({ className, setIsOpen, setNotificationNumber }) {\r\n  const [page, setPage] = useState(1);\r\n  const dispatch = useDispatch();\r\n  const history = useHistory();\r\n  const { notifications, isHasMore, isLoading, error } =\r\n    useNotificationPagination(page);\r\n  const notificationApi = useNotificationApi();\r\n\r\n  function handleClick(notification = {}) {\r\n    if (!notification.isRead) {\r\n      dispatch(readNotificationById(notification.id));\r\n      notificationApi.readById(notification.id);\r\n    }\r\n    switch (notification.type) {\r\n      case NotificationType.COMMENT:\r\n      case NotificationType.REACTION:\r\n        if (notification?.postId) {\r\n          history.push(\"/posts/\" + notification?.postId);\r\n        }\r\n        break;\r\n      case NotificationType.FRIEND_REQUEST:\r\n      case NotificationType.ACCEPTED_FRIEND_REQUEST:\r\n      case NotificationType.FOLLOW:\r\n        history.push(\"/friends\");\r\n        break;\r\n      default:\r\n    }\r\n    setIsOpen(false);\r\n  }\r\n\r\n  useEffect(() => {\r\n    if (notifications.items) {\r\n      var num = notifications.items.reduce((preNum, x) => {\r\n        return preNum + (x?.isRead ? 0 : 1);\r\n      }, 0);\r\n      setNotificationNumber(num);\r\n    }\r\n  }, [notifications]);\r\n\r\n  function loadMore() {\r\n    if (isHasMore) {\r\n      setPage((prevPage) => prevPage + 1);\r\n    }\r\n  }\r\n  function readAll() {\r\n    dispatch(readAllNotification());\r\n    notificationApi.readAll();\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <div\r\n        className={\r\n          className +\r\n          \" \" +\r\n          \"flex flex-col bg-white dark:bg-dark-secondary shadow-lg rounded-xl px-5 py-4 pb-3 border dark:border-dark-hover \"\r\n        }\r\n      >\r\n        <div className=\"flex justify-between items-baseline border-b dark:border-dark-hover pb-1 mb-2\">\r\n          <span className=\"text-2xl font-bold\">Notifications</span>\r\n          <span\r\n            className=\"text-green-600 hover:text-green-700 active:text-green-800 dark:text-green-400 dark:hover:text-green-300 dark:active:text-green-200 cursor-pointer select-none transition-base text-sm\"\r\n            onClick={readAll}\r\n          >\r\n            Mark all as read\r\n          </span>\r\n        </div>\r\n        <div className=\"overflow-y-auto md:max-h-500 max-h-400\">\r\n          {notifications &&\r\n            [...notifications?.items]\r\n              .filter((x) => !x.isRead)\r\n              .sort((a, b) => (a?.dateCreated < b?.dateCreated ? 1 : -1))\r\n              ?.map((notification, index) => (\r\n                <Notification\r\n                  onClick={handleClick}\r\n                  key={notification.id}\r\n                  notification={notification}\r\n                />\r\n              ))}\r\n          {notifications &&\r\n            [...notifications?.items]\r\n              .filter((x) => x.isRead)\r\n              .sort((a, b) => (a?.dateCreated < b?.dateCreated ? 1 : -1))\r\n              ?.map((notification, index) => (\r\n                <Notification\r\n                  onClick={handleClick}\r\n                  key={notification.id}\r\n                  notification={notification}\r\n                />\r\n              ))}\r\n          <Pagination\r\n            className=\"mt-2\"\r\n            onClick={loadMore}\r\n            isLoading={isLoading}\r\n            error={error}\r\n            isHasMore={isHasMore}\r\n            loadMoreContent=\"Load more notifications...\"\r\n          />\r\n        </div>\r\n        {notifications?.items?.length < 1 && (\r\n          <span className=\"my-2 pb-2 text-center w-full font-semibold\">\r\n            Do not have any notifications\r\n          </span>\r\n        )}\r\n      </div>\r\n    </>\r\n  );\r\n}\r\n\r\nexport default NotificationList;\r\n","import { useEffect, useState } from \"react\";\r\nimport useNotificationApi from \"hooks/api/useNotificationApi\";\r\nimport { loadNotification, refreshNotification } from \"app/appSlice\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\n\r\nexport default function useNotificationPagination(page = 1) {\r\n  const [isLoading, setIsLoading] = useState(false);\r\n  const [error, setError] = useState(\"\");\r\n  const notifications = useSelector((state) => state.app.notifications);\r\n  const [isHasMore, setIsHasMore] = useState(true);\r\n\r\n  const notificationApi = useNotificationApi();\r\n  const dispatch = useDispatch();\r\n\r\n  useEffect(() => {\r\n    if (isHasMore) {\r\n      setIsLoading(true);\r\n      setError(false);\r\n      const request = { page };\r\n      notificationApi\r\n        .getAll(request)\r\n        .then((response) => {\r\n          if (page > 1) {\r\n            dispatch(loadNotification(response));\r\n          } else {\r\n            dispatch(refreshNotification(response));\r\n          }\r\n          setIsHasMore(page < response.pageCount);\r\n          setIsLoading(false);\r\n        })\r\n        .catch((e) => {\r\n          setError(e);\r\n        });\r\n    }\r\n  }, [page]);\r\n\r\n  return { notifications, isLoading, error, isHasMore };\r\n}\r\n","export const NavList = [\r\n  {\r\n    name: \"Home\",\r\n    icon: \"bx bxs-home\",\r\n    inactiveIcon: \"bx bx-home\",\r\n    route: \"/\",\r\n  },\r\n  {\r\n    name: \"Friends\",\r\n    icon: \"bx bxs-group\",\r\n    inactiveIcon: \"bx bx-group\",\r\n    route: \"/friends\",\r\n  },\r\n  {\r\n    name: \"Search\",\r\n    icon: \"bx bxs-search\",\r\n    inactiveIcon: \"bx bx-search\",\r\n    route: \"/search\",\r\n    isMobile: true,\r\n  },\r\n];\r\n","import { setIsLoading } from \"app/appSlice.js\";\r\nimport { useDispatch } from \"react-redux\";\r\nimport useApi from \"./useApi.js\";\r\n\r\nconst baseApiUrl = \"/accounts\";\r\n\r\nexport default function useAccountApi() {\r\n  const Api = useApi();\r\n  const dispatch = useDispatch();\r\n\r\n  const accountApi = {\r\n    login: (content) => {\r\n      dispatch(setIsLoading(true));\r\n      const url = `${baseApiUrl}/login`;\r\n      return Api.post(url, content);\r\n    },\r\n    changePassword: (content) => {\r\n      dispatch(setIsLoading(true));\r\n      const url = `${baseApiUrl}/changePassword`;\r\n      return Api.post(url, content);\r\n    },\r\n    logout: () => {\r\n      dispatch(setIsLoading(true));\r\n      const url = `${baseApiUrl}/logout`;\r\n      return Api.post(url);\r\n    },\r\n    register: (content) => {\r\n      content.firstName = content?.firstName?.substring(0, 49);\r\n      content.lastName = content?.lastName?.substring(0, 49);\r\n\r\n      dispatch(setIsLoading(true));\r\n      const url = `${baseApiUrl}/register`;\r\n      return Api.post(url, content);\r\n    },\r\n    checkUserNameExists: (userName) => {\r\n      if (userName) {\r\n        const url = `${baseApiUrl}/${userName}/isExists`;\r\n        return Api.get(url);\r\n      }\r\n      return Promise.reject();\r\n    },\r\n  };\r\n  return accountApi;\r\n}\r\n","import { useEffect, useState } from \"react\";\r\n\r\nfunction useDarkMode() {\r\n  const [darkMode, setDarkMode] = useState(false);\r\n\r\n  useEffect(() => {\r\n    var mode = window.localStorage.getItem(\"theme\");\r\n\r\n    if (mode === \"dark\") {\r\n      window.document.documentElement.classList.add(\"dark\");\r\n      setDarkMode(true);\r\n    }\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    if (darkMode) {\r\n      window.document.documentElement.classList.add(\"dark\");\r\n      window.localStorage.setItem(\"theme\", \"dark\");\r\n    } else {\r\n      window.document.documentElement.classList.remove(\"dark\");\r\n      window.localStorage.setItem(\"theme\", \"light\");\r\n    }\r\n  }, [darkMode]);\r\n\r\n  return { darkMode, setDarkMode };\r\n}\r\n\r\nexport default useDarkMode;\r\n","export default __webpack_public_path__ + \"static/media/logo-circle.97246462.png\";","import { refreshPost, resetNewPost } from \"app/postSlice\";\r\nimport { setCurrentUser } from \"app/userSlice\";\r\nimport ClickableIcon from \"components/ClickableIcon\";\r\nimport ConfirmModal from \"components/ConfirmModal\";\r\nimport ImageCircle from \"components/ImageCircle\";\r\nimport ChatList from \"features/Chat/components/ChatList\";\r\nimport NotificationList from \"features/Header/components/NotificationList\";\r\nimport { NavList } from \"features/Header/utils/config\";\r\nimport useAccountApi from \"hooks/api/useAccountApi\";\r\nimport usePostApi from \"hooks/api/usePostApi\";\r\nimport useUserApi from \"hooks/api/useUserApi\";\r\nimport { useCloseOnClickOutside } from \"hooks/utils/useCloseOnClickOutside\";\r\nimport useDarkMode from \"hooks/utils/useDarkMode\";\r\nimport { useDisableBodyScroll } from \"hooks/utils/useDisableBodyScroll\";\r\nimport { useEscToClose } from \"hooks/utils/useEscToClose\";\r\nimport Logo from \"logo-circle.png\";\r\nimport React, { useEffect, useRef, useState } from \"react\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { useHistory, useLocation } from \"react-router-dom\";\r\n\r\nfunction Header({ className }) {\r\n  const history = useHistory();\r\n  const dispatch = useDispatch();\r\n  const location = useLocation();\r\n\r\n  const user = useSelector((state) => state.users.currentUser);\r\n  const newPostTotal = useSelector((state) => state.posts.newPostTotal);\r\n  const userApi = useUserApi();\r\n  const accountApi = useAccountApi();\r\n  const postApi = usePostApi();\r\n\r\n  const [chatNotificationNumber, setChatNotificationNumber] = useState(0);\r\n  const [notificationNumber, setNotificationNumber] = useState(0);\r\n\r\n  const { darkMode, setDarkMode } = useDarkMode();\r\n  const [keyword, setKeyword] = useState(\"\");\r\n\r\n  const [isOpenNavBar, setIsOpenNavBar] = useState(false);\r\n  const [isOpenChatList, setIsOpenChatList] = useState(false);\r\n  const [isOpenNotificationList, setIsOpenNotificationList] = useState(false);\r\n  const [isOpenMenu, setIsOpenMenu] = useState(false);\r\n\r\n  const [confirmModal, setConfirmModal] = useState({\r\n    isOpen: false,\r\n    title: \"\",\r\n    content: \"\",\r\n    confirmButtonTitle: \"\",\r\n  });\r\n\r\n  const ref = useRef();\r\n  const navBarRef = useRef();\r\n\r\n  useEffect(() => {\r\n    userApi.getCurrentUser().then((response) => {\r\n      dispatch(setCurrentUser(response));\r\n    });\r\n  }, []);\r\n\r\n  useCloseOnClickOutside(isOpenMenu, setIsOpenMenu, ref);\r\n  useCloseOnClickOutside(isOpenChatList, setIsOpenChatList, ref);\r\n  useCloseOnClickOutside(\r\n    isOpenNotificationList,\r\n    setIsOpenNotificationList,\r\n    ref,\r\n  );\r\n\r\n  useEscToClose(setIsOpenNavBar);\r\n  useDisableBodyScroll(isOpenNavBar);\r\n\r\n  const search = (e) => {\r\n    e.preventDefault();\r\n    history.push(\"/search/\" + keyword);\r\n  };\r\n\r\n  const goToProfile = (userName) => {\r\n    history.push(\"/profile/\" + userName);\r\n    setKeyword(\"\");\r\n  };\r\n  async function logout() {\r\n    await accountApi.logout();\r\n    window.localStorage.removeItem(\"token\");\r\n    window.location.href = process.env.PUBLIC_URL + \"/\";\r\n  }\r\n\r\n  function openConfirmModal(\r\n    content,\r\n    confirmButtonAction,\r\n    confirmButtonTitle = \"Yes\",\r\n    title,\r\n  ) {\r\n    const confirmModal = {\r\n      isOpen: true,\r\n      title: title,\r\n      content: content,\r\n      confirmButtonTitle: confirmButtonTitle,\r\n      confirmButtonAction: confirmButtonAction,\r\n    };\r\n    setConfirmModal(confirmModal);\r\n  }\r\n\r\n  function goTo(route, isCurrentRoute) {\r\n    if (isCurrentRoute) {\r\n      window.scrollTo({\r\n        top: 0,\r\n        left: 0,\r\n        behavior: \"smooth\",\r\n      });\r\n      dispatch(resetNewPost());\r\n      postApi.getNewsFeed().then((response) => {\r\n        dispatch(refreshPost(response));\r\n      });\r\n    } else {\r\n      history.push(route);\r\n    }\r\n    setIsOpenNavBar(false);\r\n    setKeyword(\"\");\r\n  }\r\n\r\n  return (\r\n    <>\r\n      {confirmModal.isOpen && (\r\n        <ConfirmModal\r\n          isOpen={confirmModal.isOpen}\r\n          closeAction={() => setConfirmModal({ isOpen: false })}\r\n          title=\"Are you sure?\"\r\n          content={confirmModal.content}\r\n          confirmButtonTitle={confirmModal.confirmButtonTitle}\r\n          confirmButtonAction={confirmModal.confirmButtonAction}\r\n        />\r\n      )}\r\n      {/* Dark mode toggle */}\r\n      <div\r\n        className=\"fixed bottom-4 left-4 items-center cursor-pointer z-50 hidden md:flex\"\r\n        onClick={() => setDarkMode(!darkMode)}\r\n      >\r\n        <i\r\n          className={\r\n            \"bx p-2 dark:text-dark-txt text-gray-500 \" +\r\n            (darkMode ? \"bx-moon\" : \"bx-sun\")\r\n          }\r\n        ></i>\r\n        <div className=\"relative\">\r\n          <div className=\"block bg-gray-600 w-10 h-6 rounded-full\"></div>\r\n          <div\r\n            className={\r\n              \"absolute left-1 top-1 bg-white w-4 h-4 rounded-full transition-base transform \" +\r\n              (darkMode ? \"translate-x-full bg-green600 dark:bg-green-400\" : \"\")\r\n            }\r\n          ></div>\r\n        </div>\r\n      </div>\r\n      <div\r\n        className={\r\n          \"bg-white dark:bg-dark-secondary dark:text-white p-2 shadow border-b border-transparent dark:border-dark-hover z-20\" +\r\n          \" \" +\r\n          className\r\n        }\r\n      >\r\n        <div\r\n          ref={ref}\r\n          className=\"relative max-w-full md:max-w-screen-xl mx-auto flex justify-between items-center\"\r\n        >\r\n          <div className=\"flex space-x-4 flex-shrink-0\">\r\n            <span onClick={() => goTo(\"/\", location.pathname === \"/\")}>\r\n              <img src={Logo} alt=\"Logo\" className=\"h-10 w-10 cursor-pointer\" />\r\n            </span>\r\n            <form\r\n              onSubmit={(e) => search(e)}\r\n              className=\"relative md:inline-block hidden\"\r\n            >\r\n              <input\r\n                type=\"search\"\r\n                className=\"bg-gray-100 dark:bg-dark-third dark:text-white rounded-full outline-none pl-10 pr-3 py-2 focus:ring-2 ring-green-400 ring-opacity-50 transition-base select-none\"\r\n                placeholder=\"Search TeeApp!\"\r\n                value={keyword}\r\n                onChange={(e) => setKeyword(e.target.value)}\r\n              />\r\n              <i className=\"bx bx-search absolute text-xl top-1/2 left-3 transform text-gray-400 -translate-y-1/2 cursor-pointer\"></i>\r\n            </form>\r\n          </div>\r\n          <div className=\"text-3xl text-green-500 md:flex hidden\">\r\n            {NavList.map((nav) => {\r\n              const currentRoute = location.pathname;\r\n              const isCurrentRoute = nav.route === currentRoute;\r\n              const icon = isCurrentRoute ? nav.icon : nav.inactiveIcon;\r\n              return (\r\n                <div\r\n                  key={nav.route}\r\n                  className={\r\n                    \"relative group border-b-4 border-transparent\" +\r\n                    \" \" +\r\n                    (nav.isMobile ? \"block md:hidden\" : \"\") +\r\n                    \" \" +\r\n                    (isCurrentRoute ? \" border-green-500\" : \"\")\r\n                  }\r\n                  onClick={() => goTo(nav.route, isCurrentRoute)}\r\n                >\r\n                  <i\r\n                    className={`select-none py-1 px-4 md:py-2 md:px-6 rounded-lg hover:bg-gray-100 active:bg-gray-200 dark:hover:bg-dark-third dark:active:bg-dark-hover transition-base cursor-pointer  ${icon}`}\r\n                  ></i>\r\n                  <div className=\"select-none animate-fadeIn group-hover:block absolute top-full left-1/2 hidden bg-black dark:bg-white dark:bg-opacity-80 bg-opacity-60 px-1 rounded transform -translate-x-1/2 translate-y-2 text-white dark:text-black text-sm font-title p-1\">\r\n                    {nav.name}\r\n                  </div>\r\n                  {nav.name.toLowerCase() === \"home\" && newPostTotal > 0 && (\r\n                    <span className=\"animate-fadeIn absolute top-1 right-1 bg-green-500 dark:bg-green-600 text-white rounded-full select-none text-xs font-bold w-3 h-3\"></span>\r\n                  )}\r\n                </div>\r\n              );\r\n            })}\r\n          </div>\r\n          <ul className=\"flex items-center space-x-2\">\r\n            <li\r\n              className={\r\n                \"active:transform active:scale-95 p-1 h-full rounded-full flex items-center  transition-base cursor-pointer select-none mr-3 \" +\r\n                (location.pathname === `/profile/${user.userName}`\r\n                  ? \"dark:bg-green-600 dark:bg-opacity-40 bg-green-100 text-green-600 dark:text-green-400 \"\r\n                  : \"dark:hover:bg-dark-third hover:bg-gray-200\")\r\n              }\r\n              onClick={() => goToProfile(user.userName)}\r\n            >\r\n              <ImageCircle src={user.avatarUrl} size=\"sm\" />\r\n              <span className=\"px-2 font-semibold truncate w-full\">\r\n                {user.firstName}\r\n              </span>\r\n            </li>\r\n            <li className=\"relative\">\r\n              <ClickableIcon\r\n                className={\r\n                  \"p-2 \" +\r\n                  \" \" +\r\n                  (isOpenChatList\r\n                    ? \"bg-green-100 hover:bg-green-200 active:bg-green-300 dark:bg-green-100\"\r\n                    : \"\")\r\n                }\r\n                iconClass=\"bx bxs-message-rounded-dots\"\r\n                colorClass={\r\n                  isOpenChatList\r\n                    ? \"bg-green-100 hover:bg-green-200 active:bg-green-300 dark:bg-green-900 dark:hover:bg-green-800 dark:active:bg-green-700 \"\r\n                    : \"\"\r\n                }\r\n                colorIconClass={\r\n                  isOpenChatList ? \"text-green-600 dark:text-green-400\" : \"\"\r\n                }\r\n                onClick={() => {\r\n                  setIsOpenChatList(!isOpenChatList);\r\n                  setIsOpenMenu(false);\r\n                  setIsOpenNotificationList(false);\r\n                }}\r\n              />\r\n              {chatNotificationNumber > 0 && !isOpenChatList && (\r\n                <span className=\"animate-fadeIn w-4 h-4 absolute right-0 top-full transform -translate-y-3/4 text-tiny font-bold bg-green-500 dark:bg-green-600 text-white rounded-full text-center align-middle select-none\">\r\n                  {chatNotificationNumber > 9 ? \"9+\" : chatNotificationNumber}\r\n                </span>\r\n              )}\r\n            </li>\r\n            <li className=\"relative\">\r\n              <span className=\"dark:bg-green-600\"></span>\r\n              <ClickableIcon\r\n                className=\"p-2\"\r\n                colorClass={\r\n                  isOpenNotificationList\r\n                    ? \"bg-green-100 hover:bg-green-200 active:bg-green-300 dark:bg-green-900 dark:hover:bg-green-800 dark:active:bg-green-700 \"\r\n                    : \"\"\r\n                }\r\n                iconClass=\"bx bxs-bell\"\r\n                colorIconClass={\r\n                  isOpenNotificationList\r\n                    ? \"text-green-600 dark:text-green-400\"\r\n                    : \"\"\r\n                }\r\n                onClick={() => {\r\n                  setIsOpenChatList(false);\r\n                  setIsOpenMenu(false);\r\n                  setIsOpenNotificationList(!isOpenNotificationList);\r\n                }}\r\n              />\r\n              {notificationNumber > 0 && !isOpenNotificationList && (\r\n                <span className=\"animate-fadeIn w-4 h-4 absolute right-0 top-full transform -translate-y-3/4 text-tiny font-bold bg-green-500 dark:bg-green-600 text-white rounded-full text-center align-middle select-none\">\r\n                  {notificationNumber > 9 ? \"9+\" : notificationNumber}\r\n                </span>\r\n              )}\r\n            </li>\r\n\r\n            <li className=\"md:inline hidden\">\r\n              <div className=\"relative\">\r\n                <ClickableIcon\r\n                  className=\"p-2\"\r\n                  iconClass=\"bx bx-caret-down\"\r\n                  colorClass={\r\n                    isOpenMenu\r\n                      ? \"bg-green-100 hover:bg-green-200 active:bg-green-300 dark:bg-green-900 dark:hover:bg-green-800 dark:active:bg-green-700 \"\r\n                      : \"\"\r\n                  }\r\n                  colorIconClass={\r\n                    isOpenMenu ? \"text-green-600 dark:text-green-400\" : \"\"\r\n                  }\r\n                  onClick={() => {\r\n                    setIsOpenMenu(!isOpenMenu);\r\n                    setIsOpenChatList(false);\r\n                    setIsOpenNotificationList(false);\r\n                  }}\r\n                />\r\n                {isOpenMenu && (\r\n                  <div className=\"animate-fadeIn transition-base absolute top-full transform translate-y-1 right-0 border border-gray-200 bg-white w-60 rounded-lg shadow-lg overflow-hidden p-1 dark:bg-dark-secondary dark:border-dark-hover mt-2 select-none z-30\">\r\n                    <button\r\n                      className=\"flex items-center space-x-3 w-full pl-2 pr-4 py-2 rounded-md text-left hover:bg-gray-100 active:bg-gray-200 transition-base transform active:scale-95 dark:hover:bg-dark-third\"\r\n                      onClick={() => setDarkMode(!darkMode)}\r\n                    >\r\n                      <i\r\n                        className={\r\n                          \"text-center text-xl align-middle text-black dark:text-dark-txt w-7 h-7 bx \" +\r\n                          \" \" +\r\n                          (darkMode ? \" bx-sun\" : \" bx-moon\")\r\n                        }\r\n                      ></i>\r\n                      <span>{darkMode ? \"Light Mode\" : \"Dark Mode\"}</span>\r\n                    </button>\r\n                    <button\r\n                      className=\"flex items-center space-x-3 w-full pl-2 pr-4 py-2 rounded-md text-left hover:bg-gray-100 active:bg-gray-200 transition-base transform active:scale-95 dark:hover:bg-dark-third\"\r\n                      onClick={() => {\r\n                        openConfirmModal(\"Do you want to log out?\", logout);\r\n                      }}\r\n                    >\r\n                      <i className=\"bx bx-log-in-circle text-center text-xl align-middle text-black dark:text-dark-txt w-7 h-7\"></i>\r\n                      <span>Log Out</span>\r\n                    </button>\r\n                  </div>\r\n                )}\r\n              </div>\r\n            </li>\r\n            <li className=\"md:hidden\">\r\n              <ClickableIcon\r\n                className=\"p-2\"\r\n                iconClass=\"bx bx-menu\"\r\n                colorClass={\r\n                  isOpenNavBar\r\n                    ? \"bg-green-100 hover:bg-green-200 active:bg-green-300 dark:bg-green-900 dark:hover:bg-green-800 dark:active:bg-green-700 \"\r\n                    : \"\"\r\n                }\r\n                colorIconClass={\r\n                  isOpenNavBar ? \"text-green-600 dark:text-green-400\" : \"\"\r\n                }\r\n                onClick={() => {\r\n                  setIsOpenNavBar(!isOpenNavBar);\r\n                }}\r\n              />\r\n            </li>\r\n          </ul>\r\n          <ChatList\r\n            setIsOpen={setIsOpenChatList}\r\n            setChatNotificationNumber={setChatNotificationNumber}\r\n            className={\r\n              \"absolute animate-fadeIn top-full transform translate-y-2 right-0 lg:w-112 md:w-96 w-full max-h-600 \" +\r\n              \" \" +\r\n              (isOpenChatList ? \"\" : \"hidden\")\r\n            }\r\n          />\r\n          <NotificationList\r\n            setIsOpen={setIsOpenNotificationList}\r\n            className={\r\n              \"absolute animate-fadeIn top-full transform translate-y-2 right-0 lg:w-112 md:w-96 w-full max-h-600 overflow-y-auto \" +\r\n              \" \" +\r\n              (isOpenNotificationList ? \"\" : \"hidden\")\r\n            }\r\n            setNotificationNumber={setNotificationNumber}\r\n          />\r\n        </div>\r\n      </div>\r\n      {isOpenNavBar && (\r\n        <>\r\n          <div\r\n            ref={navBarRef}\r\n            className=\"text-gray-500 dark:text-dark-txt md:hidden w-screen fixed animate-swipeRight inset-0 bg-white dark:bg-dark-primary z-40 px-4 py-4 pt-5 flex flex-col space-y-3 outline-none cursor-pointer\"\r\n          >\r\n            <div className=\"flex justify-end space-x-4\">\r\n              <div\r\n                className=\"fixed bottom-8 left-8 flex items-center cursor-pointer \"\r\n                onClick={() => setDarkMode(!darkMode)}\r\n              >\r\n                <div className=\"relative\">\r\n                  <div className=\"block bg-gray-600 w-14 h-8 rounded-full\"></div>\r\n                  <div\r\n                    class={\r\n                      \"absolute left-1 top-1 bg-white w-6 h-6 rounded-full transition-base transform \" +\r\n                      (darkMode\r\n                        ? \"translate-x-full bg-green600 dark:bg-green-400\"\r\n                        : \"\")\r\n                    }\r\n                  ></div>\r\n                </div>\r\n                <i\r\n                  className={\"bx p-2 \" + (darkMode ? \"bx-moon\" : \"bx-sun\")}\r\n                ></i>\r\n              </div>\r\n              <ClickableIcon\r\n                className=\"p-2 w-10 h-10\"\r\n                iconClass=\"bx bx-x\"\r\n                onClick={() => setIsOpenNavBar(false)}\r\n              />{\" \"}\r\n            </div>\r\n            <div className=\"flex flex-col w-full\">\r\n              {NavList.map((nav) => {\r\n                const currentRoute = location.pathname;\r\n                const isCurrentRoute = nav.route === currentRoute;\r\n                const icon = isCurrentRoute ? nav.icon : nav.inactiveIcon;\r\n                return (\r\n                  <div\r\n                    key={nav.route}\r\n                    className={\r\n                      \"animate-swipeRight relative group w-full hover:bg-gray-200 active:bg-gray-200 dark:hover:bg-dark-third dark:active:bg-dark-hover rounded-lg \" +\r\n                      (isCurrentRoute\r\n                        ? \"bg-gray-100 dark:bg-dark-secondary\"\r\n                        : \"\")\r\n                    }\r\n                    onClick={() => goTo(nav.route, isCurrentRoute)}\r\n                  >\r\n                    <div\r\n                      className={\r\n                        \"flex space-x-4 text-2xl py-2 px-4 rounded-lg items-center \" +\r\n                        (isCurrentRoute\r\n                          ? \"font-bold text-green-500\"\r\n                          : \"font-medium\")\r\n                      }\r\n                    >\r\n                      <i\r\n                        className={`select-none py-1 px-2 text-3xl align-middle ${icon}`}\r\n                      ></i>\r\n                      <span className=\"\">{nav.name}</span>\r\n                    </div>\r\n                    {nav.name.toLowerCase() === \"home\" && newPostTotal > 0 && (\r\n                      <span className=\"animate-fadeIn absolute top-1 left-1 bg-green-500 dark:bg-green-600 text-white rounded-full select-none text-xs font-bold w-3 h-3\"></span>\r\n                    )}\r\n                    {isCurrentRoute && (\r\n                      <span className=\"animate-fadeIn absolute top-1/2 right-3 transform -translate-y-1/2 bg-green-500 dark:bg-green-600 text-white rounded-full select-none text-xs font-bold w-3 h-3\"></span>\r\n                    )}\r\n                  </div>\r\n                );\r\n              })}\r\n              <div\r\n                className={\r\n                  \"animate-swipeRight w-full hover:bg-gray-100 active:bg-gray-200 dark:hover:bg-dark-third dark:active:bg-dark-hover \"\r\n                }\r\n              >\r\n                <div\r\n                  className=\"flex space-x-4 text-2xl py-2 px-4 rounded-lg items-center font-medium\"\r\n                  onClick={() => {\r\n                    openConfirmModal(\"Do you want to log out?\", logout);\r\n                  }}\r\n                >\r\n                  <i\r\n                    className={`select-none py-1 px-2 text-3xl align-middle bx bx-log-in-circle`}\r\n                  ></i>\r\n                  <span>Log out</span>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>{\" \"}\r\n        </>\r\n      )}\r\n    </>\r\n  );\r\n}\r\n\r\nexport default Header;\r\n","import { DefaultLimit } from \"utils/Constants.js\";\r\nimport useApi from \"./useApi.js\";\r\n\r\nconst baseApiUrl = \"/friends\";\r\n\r\nexport default function useFriendApi() {\r\n  const Api = useApi();\r\n\r\n  const friendApi = {\r\n    getFriends: (params) => {\r\n      if (!params?.limit) {\r\n        params = { ...params, limit: DefaultLimit.FRIEND };\r\n      }\r\n      const url = `${baseApiUrl}`;\r\n      return Api.get(url, { params });\r\n    },\r\n    getFriendRequests: (params) => {\r\n      if (!params?.limit) {\r\n        params = { ...params, limit: DefaultLimit.FRIEND };\r\n      }\r\n      const url = `${baseApiUrl}/friendRequests`;\r\n      return Api.get(url, { params });\r\n    },\r\n    getMyRequests: (params) => {\r\n      if (!params?.limit) {\r\n        params = { ...params, limit: DefaultLimit.FRIEND };\r\n      }\r\n      const url = `${baseApiUrl}/myRequests`;\r\n      return Api.get(url, { params });\r\n    },\r\n    getFollowers: (params) => {\r\n      if (!params?.limit) {\r\n        params = { ...params, limit: DefaultLimit.FRIEND };\r\n      }\r\n      const url = `${baseApiUrl}/followers`;\r\n      return Api.get(url, { params });\r\n    },\r\n    getFollowing: (params) => {\r\n      if (!params?.limit) {\r\n        params = { ...params, limit: DefaultLimit.FRIEND };\r\n      }\r\n      const url = `${baseApiUrl}/following`;\r\n      return Api.get(url, { params });\r\n    },\r\n    getBlocked: (params) => {\r\n      if (!params?.limit) {\r\n        params = { ...params, limit: DefaultLimit.FRIEND };\r\n      }\r\n      const url = `${baseApiUrl}/blocked`;\r\n      return Api.get(url, { params });\r\n    },\r\n    getRelationByUserName: (userName) => {\r\n      const url = `${baseApiUrl}/${userName}`;\r\n      return Api.get(url);\r\n    },\r\n    addFriend: (userName) => {\r\n      const url = `${baseApiUrl}/${userName}/addFriend`;\r\n      return Api.patch(url);\r\n    },\r\n    unfriend: (userName) => {\r\n      const url = `${baseApiUrl}/${userName}/unfriend`;\r\n      return Api.patch(url);\r\n    },\r\n    accept: (userName) => {\r\n      const url = `${baseApiUrl}/${userName}/accept`;\r\n      return Api.patch(url);\r\n    },\r\n    block: (userName) => {\r\n      const url = `${baseApiUrl}/${userName}/block`;\r\n      return Api.patch(url);\r\n    },\r\n    unblock: (userName) => {\r\n      const url = `${baseApiUrl}/${userName}/unblock`;\r\n      return Api.patch(url);\r\n    },\r\n    follow: (userName) => {\r\n      const url = `${baseApiUrl}/${userName}/follow`;\r\n      return Api.patch(url);\r\n    },\r\n    unfollow: (userName) => {\r\n      const url = `${baseApiUrl}/${userName}/unfollow`;\r\n      return Api.patch(url);\r\n    },\r\n  };\r\n  return friendApi;\r\n}\r\n","import { yupResolver } from \"@hookform/resolvers/yup\";\r\nimport { setPopup } from \"app/appSlice\";\r\nimport Button from \"components/Button\";\r\nimport useAccountApi from \"hooks/api/useAccountApi\";\r\nimport { useCloseOnClickOutside } from \"hooks/utils/useCloseOnClickOutside\";\r\nimport { useEscToClose } from \"hooks/utils/useEscToClose\";\r\nimport React, { useEffect, useRef, useState } from \"react\";\r\nimport { useForm, useWatch } from \"react-hook-form\";\r\nimport { useDispatch } from \"react-redux\";\r\nimport * as yup from \"yup\";\r\n\r\nexport default function ChangePassword({ isOpen, setIsOpen }) {\r\n  const [isChanged, setIsChanged] = useState(false);\r\n  const accountApi = useAccountApi();\r\n  const ref = useRef();\r\n  const dispatch = useDispatch();\r\n  useCloseOnClickOutside(isOpen, setIsOpen, ref);\r\n  useEscToClose(setIsOpen);\r\n\r\n  const INPUT_CLASS =\r\n    \"bg-gray-100 dark:bg-dark-hover dark:text-white rounded-lg w-full py-2 px-3 focus:ring-2 focus:ring-green-500 dark:focus:ring-green-400 focus:ring-opacity-80 dark:focus:ring-opacity-80 outline-none transition-base\";\r\n\r\n  function openPopup(title, content) {\r\n    const popup = {\r\n      isOpen: true,\r\n      title: title,\r\n      content: content,\r\n    };\r\n    dispatch(setPopup(popup));\r\n  }\r\n\r\n  const schema = yup.object().shape({\r\n    currentPassword: yup.string().required(\"Current Password is required\"),\r\n    newPassword: yup\r\n      .string()\r\n      .required(\"Current Password is required\")\r\n      .test(\r\n        \"checkPassword\",\r\n        \"Password must be at least 8 characters with an uppercase letter and a number\",\r\n        (value) => {\r\n          return checkRegex(\r\n            value,\r\n            \"^(?=.*[a-z])(?=.*[A-Z])(?=.*\\\\d)[A-Za-z\\\\d@$!%*?&]{8,}$\",\r\n          );\r\n        },\r\n      ),\r\n    confirmPassword: yup\r\n      .string()\r\n      .required(\"Confirm Password is required\")\r\n      .test(\r\n        \"ConfirmPasswordMatch\",\r\n        \"Password and Confirmation Password must match\",\r\n        (confirmPassword) => {\r\n          return confirmPassword === watch.newPassword;\r\n        },\r\n      ),\r\n  });\r\n\r\n  // react hook form\r\n  const {\r\n    register,\r\n    handleSubmit,\r\n    control,\r\n    reset,\r\n    formState: { errors },\r\n  } = useForm({\r\n    resolver: yupResolver(schema),\r\n    defaultValues: {},\r\n  });\r\n  const watch = useWatch({\r\n    control,\r\n  });\r\n\r\n  useEffect(() => {\r\n    const onChange = () => {\r\n      var isValid =\r\n        watch.currentPassword && watch.newPassword && watch.confirmPassword;\r\n\r\n      if (isValid) {\r\n        setIsChanged(true);\r\n        return;\r\n      }\r\n      setIsChanged(false);\r\n    };\r\n    onChange();\r\n  }, [watch]);\r\n\r\n  // handle submit\r\n  const onSubmit = async (content) => {\r\n    await accountApi.changePassword(content).then((response) => {\r\n      openPopup(\"Success\", \"Change password successfully!\");\r\n      reset({});\r\n    });\r\n  };\r\n  return (\r\n    <>\r\n      <div\r\n        className=\"overlay grid place-items-center px-4 py-10 z-30\"\r\n        style={{ margin: 0 }}\r\n      >\r\n        <div\r\n          ref={ref}\r\n          className={\r\n            \"animate-swipeDown px-6 py-3 pb-6 md:px-14 md:py-6 flex flex-col bg-white dark:bg-dark-secondary dark:border-dark-third rounded-xl shadow-xl border border-gray-300 w-full md:w-5/6 lg:w-2/5 transition-all duration-300 ease-in-out max-h-full overflow-y-auto md:overflow-visible dark:text-white\"\r\n          }\r\n        >\r\n          <div className=\"flex justify-between h-full flex-col space-y-5\">\r\n            <h3 className=\"font-semibold mt-3 text-lg md:text-2xl text-green-600 dark:text-green-400\">\r\n              Change Password\r\n            </h3>\r\n            <form\r\n              onSubmit={handleSubmit(onSubmit)}\r\n              className=\"flex flex-col space-y-2\"\r\n            >\r\n              <div className=\"space-y-2\">\r\n                <label\r\n                  htmlFor=\"currentPassword\"\r\n                  className=\"md:text-lg font-medium \"\r\n                >\r\n                  Current Password <span className=\"text-red-500\">*</span>\r\n                </label>\r\n                <input\r\n                  type=\"password\"\r\n                  {...register(\"currentPassword\")}\r\n                  className={INPUT_CLASS}\r\n                />\r\n                <div className=\"text-red-500 text-sm\">\r\n                  {errors.currentPassword?.message}\r\n                </div>\r\n              </div>\r\n              <div className=\"space-y-2\">\r\n                <label\r\n                  htmlFor=\"newPassword\"\r\n                  className=\"md:text-lg font-medium \"\r\n                >\r\n                  New Password <span className=\"text-red-500\">*</span>\r\n                </label>\r\n                <input\r\n                  type=\"password\"\r\n                  {...register(\"newPassword\")}\r\n                  className={INPUT_CLASS}\r\n                />\r\n                <div className=\"text-red-500 text-sm\">\r\n                  {errors.newPassword?.message}\r\n                </div>\r\n              </div>\r\n              <div className=\"space-y-2\">\r\n                <label\r\n                  htmlFor=\"confirmPassword\"\r\n                  className=\"md:text-lg font-medium \"\r\n                >\r\n                  Confirm Password <span className=\"text-red-500\">*</span>\r\n                </label>\r\n                <input\r\n                  type=\"password\"\r\n                  {...register(\"confirmPassword\")}\r\n                  className={INPUT_CLASS}\r\n                />\r\n                <div className=\"text-red-500 text-sm\">\r\n                  {errors.confirmPassword?.message}\r\n                </div>\r\n              </div>\r\n              <div className=\"flex md:flex-row flex-col-reverse justify-end md:space-x-2\">\r\n                <Button\r\n                  outline\r\n                  onClick={(e) => {\r\n                    e.preventDefault();\r\n                    setIsOpen(false);\r\n                  }}\r\n                  content=\"Close\"\r\n                  className=\"font-bold w-full md:w-auto mt-2 md:mt-0 \"\r\n                />\r\n                <Button\r\n                  disabled={!isChanged}\r\n                  content=\"Save\"\r\n                  className=\"font-bold w-full md:w-auto\"\r\n                />\r\n              </div>\r\n            </form>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </>\r\n  );\r\n}\r\n\r\nfunction checkRegex(value, regex) {\r\n  if (value && regex) {\r\n    var pattern = new RegExp(regex);\r\n    var res = pattern.test(value);\r\n    return res;\r\n  }\r\n}\r\n","import React from \"react\";\r\n\r\nfunction Input({\r\n  value = \"\",\r\n  onChange,\r\n  id,\r\n  type = \"text\",\r\n  className,\r\n  disabled,\r\n  small,\r\n}) {\r\n  return (\r\n    <>\r\n      <input\r\n        disabled={disabled}\r\n        value={value}\r\n        onChange={onChange}\r\n        id={id}\r\n        type={type}\r\n        className={\r\n          \"bg-gray-100 dark:bg-dark-hover dark:text-white rounded-lg w-full focus:ring-2 focus:ring-green-500 dark:focus:ring-green-400 focus:ring-opacity-60 dark:focus:ring-opacity-80 outline-none transition-base\" +\r\n          \" \" +\r\n          (disabled ? \"select-none text-gray-500 dark:text-black\" : \"\") +\r\n          \" \" +\r\n          (small ? \"py-1 px-2 \" : \"py-2 px-3\") +\r\n          \" \" +\r\n          className\r\n        }\r\n      />\r\n    </>\r\n  );\r\n}\r\n\r\nexport default Input;\r\n","import { setCurrentUser } from \"app/userSlice\";\r\nimport Button from \"components/Button\";\r\nimport Input from \"components/Input\";\r\nimport useUserApi from \"hooks/api/useUserApi\";\r\nimport React, { useEffect, useState } from \"react\";\r\nimport { useDispatch } from \"react-redux\";\r\nimport { Gender } from \"utils/Enums\";\r\n\r\nfunction EditUser({ isOpen, setIsOpen, user, className }) {\r\n  const [firstName, setFirstName] = useState(user.firstName ?? \"\");\r\n  const [lastName, setLastName] = useState(user.lastName ?? \"\");\r\n  const [phoneNumber, setPhoneNumber] = useState(user.phoneNumber ?? \"\");\r\n  const [email, setEmail] = useState(user.email ?? \"\");\r\n  const [nickName, setNickName] = useState(user.nickName ?? \"\");\r\n  const [aboutMe, setAboutMe] = useState(user.aboutMe ?? \"\");\r\n  const [gender, setGender] = useState(user.gender);\r\n  const [dateOfBirth, setDateOfBirth] = useState(user.dateOfBirth);\r\n  const [isValidButton, setIsValidButton] = useState(false);\r\n\r\n  const userApi = useUserApi();\r\n  const dispatch = useDispatch();\r\n\r\n  useEffect(() => {\r\n    if (user) {\r\n      setFirstName(user.firstName ?? \"\");\r\n      setLastName(user.lastName ?? \"\");\r\n      setPhoneNumber(user.phoneNumber ?? \"\");\r\n      setEmail(user.email ?? \"\");\r\n      setNickName(user.nickName ?? \"\");\r\n      setAboutMe(user.aboutMe ?? \"\");\r\n      setGender(user.gender);\r\n      setDateOfBirth(user.dateOfBirth);\r\n    }\r\n  }, [user]);\r\n  async function submit() {\r\n    const request = {\r\n      firstName: firstName.substring(0, 30),\r\n      lastName: lastName.substring(0, 30),\r\n      email,\r\n      nickName: nickName?.substring(0, 20),\r\n      aboutMe: aboutMe?.substring(0, 149),\r\n      gender,\r\n      dateOfBirth,\r\n      phoneNumber,\r\n    };\r\n    userApi.updateInformation(request).then((response) => {\r\n      dispatch(setCurrentUser(response));\r\n      setIsOpen(false);\r\n    });\r\n  }\r\n  useEffect(() => {\r\n    if (firstName.trim() && lastName.trim() && email.trim()) {\r\n      setIsValidButton(true);\r\n    } else {\r\n      setIsValidButton(false);\r\n    }\r\n  }, [firstName, lastName, email]);\r\n  return isOpen ? (\r\n    <div\r\n      className={\r\n        \"py-4 px-5 max-w-xl min-w-200 bg-white dark:bg-dark-secondary flex flex-col justify-start items-start space-y-3 rounded-xl shadow\" +\r\n        \" \" +\r\n        className\r\n      }\r\n    >\r\n      <h3 className=\"text-lg font-semibold w-full border-b dark:border-dark-hover pb-2 text-green-600 dark:text-green-400\">\r\n        Edit Personal Detail\r\n      </h3>\r\n      <div className=\"space-y-2 md:space-y-4 md:pt-3 pt-1 w-full\">\r\n        <div className=\"mb-3 flex flex-col md:grid md:grid-cols-2 md:place-items-start space-y-2 md:space-y-0\">\r\n          <div className=\"w-full md:col-span-1 md:mr-2 space-y-2 flex flex-col\">\r\n            <label\r\n              htmlFor=\"fistName\"\r\n              className=\"md:text-base text-sm font-semibold dark:text-dark-txt\"\r\n            >\r\n              First Name <span className=\"text-red-500\">*</span>\r\n            </label>\r\n            <Input\r\n              id=\"firstName\"\r\n              value={firstName}\r\n              onChange={(e) => setFirstName(e.target.value)}\r\n            />\r\n          </div>\r\n          <div className=\"w-full md:col-span-1 md:ml-2 space-y-2 flex flex-col\">\r\n            <label\r\n              htmlFor=\"lastName\"\r\n              className=\"md:text-base text-sm font-semibold dark:text-dark-txt\"\r\n            >\r\n              Last Name <span className=\"text-red-500\">*</span>\r\n            </label>\r\n            <Input\r\n              id=\"lastName\"\r\n              value={lastName}\r\n              onChange={(e) => setLastName(e.target.value)}\r\n            />\r\n          </div>\r\n        </div>\r\n        <div className=\"w-full space-y-2 flex flex-col\">\r\n          <label\r\n            htmlFor=\"nickName\"\r\n            className=\"md:text-base text-sm font-semibold dark:text-dark-txt\"\r\n          >\r\n            Nickname\r\n          </label>\r\n          <Input\r\n            id=\"nickName\"\r\n            value={nickName}\r\n            onChange={(e) => setNickName(e.target.value)}\r\n          />\r\n        </div>\r\n        <div className=\"w-full space-y-2 flex flex-col\">\r\n          <label\r\n            htmlFor=\"gender\"\r\n            className=\"md:text-base text-sm font-semibold dark:text-dark-txt\"\r\n          >\r\n            Gender <span className=\"text-red-500\">*</span>\r\n          </label>\r\n          <div className=\"flex justify-evenly items-center text-center space-x-1 px-5 select-none relative h-full z-0\">\r\n            <label\r\n              className={\r\n                \"w-16 flex flex-col py-1 text-sm cursor-pointer z-20 rounded-lg px-3 transition-base space-y-1\" +\r\n                \" \" +\r\n                (gender === Gender.MALE ? \"bg-green-500 text-white\" : \"\")\r\n              }\r\n              htmlFor=\"male\"\r\n            >\r\n              <i className=\"bx bx-male-sign pt-1 text-lg\"></i>\r\n              <span>Male</span>\r\n            </label>\r\n            <label\r\n              className={\r\n                \"w-16 flex flex-col py-1 text-sm cursor-pointer z-20 rounded-lg px-1 transition-base space-y-1\" +\r\n                \" \" +\r\n                (gender === Gender.FEMALE ? \"bg-green-500 text-white\" : \"\")\r\n              }\r\n              htmlFor=\"female\"\r\n            >\r\n              <i className=\"bx bx-female-sign pt-1 text-lg\"></i>\r\n              <span>Female</span>\r\n            </label>\r\n            <label\r\n              className={\r\n                \"w-16 flex flex-col py-1 text-sm cursor-pointer z-20 rounded-lg px-3 transition-base space-y-1\" +\r\n                \" \" +\r\n                (gender === Gender.OTHER ? \"bg-green-500 text-white\" : \"\")\r\n              }\r\n              htmlFor=\"other\"\r\n            >\r\n              <span className=\"text-lg\">⚥</span>\r\n              <span>Other</span>\r\n            </label>\r\n            <input\r\n              hidden\r\n              id=\"male\"\r\n              name=\"gender\"\r\n              type=\"radio\"\r\n              onChange={() => setGender(Gender.MALE)}\r\n            />\r\n            <input\r\n              hidden\r\n              id=\"female\"\r\n              name=\"gender\"\r\n              type=\"radio\"\r\n              onChange={() => setGender(Gender.FEMALE)}\r\n            />\r\n            <input\r\n              hidden\r\n              id=\"other\"\r\n              name=\"gender\"\r\n              type=\"radio\"\r\n              onChange={() => setGender(Gender.OTHER)}\r\n            />\r\n          </div>\r\n        </div>\r\n        <div className=\"w-full space-y-2 flex flex-col\">\r\n          <label\r\n            htmlFor=\"dateOfBirth\"\r\n            className=\"md:text-base text-sm font-semibold dark:text-dark-txt\"\r\n          >\r\n            Date of Birth <span className=\"text-red-500\">*</span>\r\n          </label>\r\n          <Input\r\n            id=\"dateOfBirth\"\r\n            value={new Date(dateOfBirth).toDateInputValue()}\r\n            onChange={(e) => setDateOfBirth(e.target.value)}\r\n            type=\"date\"\r\n          />\r\n        </div>\r\n\r\n        <div className=\"w-full space-y-2 flex flex-col\">\r\n          <label\r\n            htmlFor=\"email\"\r\n            className=\"md:text-base text-sm font-semibold dark:text-dark-txt\"\r\n          >\r\n            Email <span className=\"text-red-500\">*</span>\r\n          </label>\r\n          <Input\r\n            id=\"email\"\r\n            value={email}\r\n            onChange={(e) => setEmail(e.target.value)}\r\n          />\r\n        </div>\r\n        <div className=\"w-full space-y-2 flex flex-col\">\r\n          <label\r\n            htmlFor=\"phoneNumber\"\r\n            className=\"md:text-base text-sm font-semibold dark:text-dark-txt\"\r\n          >\r\n            Phone Number\r\n          </label>\r\n          <Input\r\n            type=\"number\"\r\n            id=\"phoneNumber\"\r\n            value={phoneNumber}\r\n            onChange={(e) => setPhoneNumber(e.target.value)}\r\n          />\r\n        </div>\r\n        <div className=\"w-full space-y-2 flex flex-col\">\r\n          <label\r\n            htmlFor=\"aboutMe\"\r\n            className=\"md:text-base text-sm font-semibold dark:text-dark-txt\"\r\n          >\r\n            About Me{\" \"}\r\n            <span className=\"font-normal text-sm\">\r\n              ({`${aboutMe?.length ?? 0}/150`})\r\n            </span>\r\n          </label>\r\n          <textarea\r\n            rows=\"3\"\r\n            className=\"bg-gray-100 dark:bg-dark-hover dark:text-white rounded-lg w-full focus:ring-2 focus:ring-green-500 dark:focus:ring-green-400 focus:ring-opacity-60 dark:focus:ring-opacity-80 outline-none transition-base py-2 px-3\"\r\n            id=\"aboutMe\"\r\n            value={aboutMe}\r\n            onChange={(e) => {\r\n              if (aboutMe.length < 150) {\r\n                setAboutMe(e.target.value);\r\n              }\r\n            }}\r\n          ></textarea>\r\n        </div>\r\n        <div className=\"flex flex-col md:flex-row-reverse justify-end space-y-2 md:space-y-0 items-center pt-2\">\r\n          <Button\r\n            disabled={!isValidButton}\r\n            className=\"w-full\"\r\n            content=\"Save\"\r\n            onClick={() => submit()}\r\n          />\r\n          <Button\r\n            className=\"w-full md:mr-2\"\r\n            outline\r\n            content=\"Close\"\r\n            onClick={() => setIsOpen(false)}\r\n          />\r\n        </div>\r\n      </div>\r\n    </div>\r\n  ) : (\r\n    \"\"\r\n  );\r\n}\r\nexport default EditUser;\r\n\r\nDate.prototype.toDateInputValue = function () {\r\n  var local = new Date(this);\r\n  local.setMinutes(this.getMinutes() - this.getTimezoneOffset());\r\n  return local.toJSON()?.slice(0, 10);\r\n};\r\n","import moment from \"moment\";\r\nimport React from \"react\";\r\nimport { GenderName } from \"utils/Enums\";\r\nimport { formatDate } from \"utils/UtilityMethods\";\r\n\r\nfunction UserInfo({ user, className }) {\r\n  return (\r\n    <>\r\n      <div\r\n        className={\r\n          \"md:max-w-xs max-w-xl min-w-0 bg-white dark:bg-dark-secondary w-full rounded-xl shadow px-5 py-4 space-y-3\" +\r\n          \" \" +\r\n          className\r\n        }\r\n      >\r\n        <div className=\"text-lg font-semibold w-full border-b dark:border-dark-hover pb-2 text-green-600 dark:text-green-400\">\r\n          Personal Detail\r\n        </div>\r\n        <div className=\"flex flex-col space-y-2\">\r\n          <div className=\"flex flex-col\">\r\n            <span className=\"text-sm text-gray-500 dark:text-dark-txt\">\r\n              Name{\" \"}\r\n            </span>\r\n            <span className=\"font-medium max-row-2\">{user.fullName}</span>\r\n          </div>\r\n          <div className=\"flex flex-col\">\r\n            <span className=\"text-sm text-gray-500 dark:text-dark-txt\">\r\n              Nickname{\" \"}\r\n            </span>\r\n            <span className=\"font-medium max-row-2\">\r\n              {user.nickName ? user.nickName : \"--\"}\r\n            </span>\r\n          </div>\r\n          <div className=\"flex flex-col\">\r\n            <span className=\"text-sm text-gray-500 dark:text-dark-txt\">\r\n              Gender{\" \"}\r\n            </span>\r\n            <span className=\"font-medium max-row-2\">\r\n              {GenderName[user.gender]}\r\n            </span>\r\n          </div>\r\n          <div className=\"flex flex-col\">\r\n            <span className=\"text-sm text-gray-500 dark:text-dark-txt\">\r\n              Birthday{\" \"}\r\n            </span>\r\n            <span className=\"font-medium max-row-2\">\r\n              {new Date(user.dateOfBirth).getFullYear() > 1\r\n                ? formatDate(user.dateOfBirth)\r\n                : \"--\"}\r\n            </span>\r\n          </div>\r\n          <div className=\"flex flex-col\">\r\n            <span className=\"text-sm text-gray-500 dark:text-dark-txt\">\r\n              Phone{\" \"}\r\n            </span>\r\n            <span className=\"font-medium max-row-2\">\r\n              {user.phoneNumber ? user.phoneNumber : \"--\"}\r\n            </span>\r\n          </div>\r\n          <div className=\"flex flex-col\">\r\n            <span className=\"text-sm text-gray-500 dark:text-dark-txt\">\r\n              Email{\" \"}\r\n            </span>\r\n            <span className=\"font-medium max-row-2 break-all\">\r\n              {user.email ? user.email : \"--\"}\r\n            </span>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </>\r\n  );\r\n}\r\n\r\nexport default UserInfo;\r\n","import { setCurrentUser } from \"app/userSlice\";\r\nimport DefaultCover from \"assets/img/default-cover.jpg\";\r\nimport Button from \"components/Button\";\r\nimport ClickableIcon from \"components/ClickableIcon\";\r\nimport ImageCircle from \"components/ImageCircle\";\r\nimport ImageView from \"components/ImageView\";\r\nimport Pagination from \"components/Pagination\";\r\nimport CreatePost from \"features/Home/components/CreatePost\";\r\nimport Post from \"features/Home/components/Post\";\r\nimport useFriendApi from \"hooks/api/useFriendApi\";\r\nimport useUserApi from \"hooks/api/useUserApi\";\r\nimport usePostPagination from \"hooks/pagination/usePostPagination\";\r\nimport React, { useEffect, useRef, useState } from \"react\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { useParams } from \"react-router-dom\";\r\nimport { RelationType } from \"utils/Enums\";\r\nimport ChangePassword from \"./components/ChangePassword\";\r\nimport EditUser from \"./components/EditUser\";\r\nimport UserInfo from \"./components/UserInfo\";\r\nimport ConfirmModal from \"components/ConfirmModal\";\r\nimport { useCloseOnClickOutside } from \"hooks/utils/useCloseOnClickOutside\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport { addSelectedId } from \"app/chatSlice\";\r\nimport useChatApi from \"hooks/api/useChatApi\";\r\n\r\nfunction Profile() {\r\n  const { userName } = useParams();\r\n  const userApi = useUserApi();\r\n  const friendApi = useFriendApi();\r\n  const chatApi = useChatApi();\r\n  const [user, setUser] = useState({});\r\n  const [isOpenChangePassword, setIsOpenChangePassword] = useState(false);\r\n  const [isOpenEdit, setIsOpenEdit] = useState(false);\r\n  const [isOpenMenu, setIsOpenMenu] = useState(false);\r\n  const [confirmModal, setConfirmModal] = useState({});\r\n  const [relation, setRelation] = useState({});\r\n  const [relationButton, setRelationButton] = useState(<></>);\r\n  const [photoView, setPhotoView] = useState({ isOpen: false });\r\n\r\n  const history = useHistory();\r\n  const dispatch = useDispatch();\r\n  const currentUser = useSelector((state) => state.users.currentUser);\r\n  const isCurrentUser = currentUser.userName === userName;\r\n\r\n  const menuRef = useRef();\r\n  useCloseOnClickOutside(isOpenMenu, setIsOpenMenu, menuRef);\r\n\r\n  const [pagination, setPagination] = useState(1);\r\n  const { posts, isHasMore, isLoading, error } = usePostPagination(\r\n    pagination,\r\n    userName,\r\n  );\r\n\r\n  async function handleCreateChat(userName) {\r\n    const request = {\r\n      participantUserName: userName,\r\n    };\r\n    chatApi.createPrivateChat(request).then((response) => {\r\n      if (response.id) {\r\n        dispatch(addSelectedId(response.id));\r\n      }\r\n    });\r\n  }\r\n\r\n  useEffect(() => {\r\n    if (isCurrentUser) {\r\n      setUser(currentUser);\r\n    } else {\r\n      if (userApi && userName) {\r\n        userApi\r\n          .getByUserName(userName)\r\n          .then((response) => {\r\n            setUser(response);\r\n          })\r\n          .catch(() => {\r\n            history.push(\"/NotFound\");\r\n          });\r\n      }\r\n      if (friendApi && userName) {\r\n        fetchRelation();\r\n      }\r\n    }\r\n    setPagination({ page: 1 });\r\n    window.scrollTo(0, 0);\r\n  }, [userName, currentUser]);\r\n\r\n  function openPhotoView(photos) {\r\n    setPhotoView({ isOpen: true, photos });\r\n  }\r\n  function loadMore() {\r\n    if (isHasMore) {\r\n      setPagination({ page: pagination.page + 1 });\r\n    }\r\n  }\r\n  async function updateCover(e) {\r\n    var file = e.target.files[0];\r\n    const formData = new FormData();\r\n    formData.append(\"File\", file);\r\n    await userApi.updateCover(formData).then((response) => {\r\n      dispatch(setCurrentUser(response));\r\n    });\r\n  }\r\n  async function updateAvatar(e) {\r\n    var file = e.target.files[0];\r\n    const formData = new FormData();\r\n    formData.append(\"File\", file);\r\n    await userApi.updateAvatar(formData).then((response) => {\r\n      dispatch(setCurrentUser(response));\r\n    });\r\n  }\r\n  function fetchRelation() {\r\n    friendApi\r\n      .getRelationByUserName(userName)\r\n      .then((response) => {\r\n        setRelation(response);\r\n      })\r\n      .catch(() => {\r\n        history.push(\"/NotFound\");\r\n      });\r\n  }\r\n  function addFriend() {\r\n    if (friendApi) {\r\n      friendApi.addFriend(userName).then((response) => {\r\n        fetchRelation();\r\n      });\r\n    }\r\n  }\r\n  function unfriend() {\r\n    if (friendApi) {\r\n      friendApi.unfriend(userName).then((response) => {\r\n        setRelation({\r\n          ...relation,\r\n          relationType: RelationType.NOT_FRIEND,\r\n          isFollowing: false,\r\n        });\r\n      });\r\n    }\r\n  }\r\n  function accept() {\r\n    if (friendApi) {\r\n      friendApi.accept(userName).then((response) => {\r\n        fetchRelation();\r\n      });\r\n    }\r\n  }\r\n  function follow() {\r\n    if (friendApi) {\r\n      friendApi.follow(userName).then((response) => {\r\n        fetchRelation();\r\n      });\r\n    }\r\n  }\r\n  function unfollow() {\r\n    if (friendApi) {\r\n      friendApi.unfollow(userName).then((response) => {\r\n        fetchRelation();\r\n      });\r\n    }\r\n  }\r\n  function block() {\r\n    if (friendApi) {\r\n      friendApi.block(userName).then((response) => {\r\n        history.push(\"/friends\");\r\n      });\r\n    }\r\n  }\r\n  function openBlockModal() {\r\n    setConfirmModal({\r\n      isOpen: true,\r\n      content: `Do you want to block ${user.fullName ?? \"this user\"}?`,\r\n      action: block,\r\n    });\r\n  }\r\n  function openUnfriendModal() {\r\n    setConfirmModal({\r\n      isOpen: true,\r\n      content: `Do you want to unfriend ${user.fullName ?? \"this user\"}?`,\r\n      action: unfriend,\r\n    });\r\n  }\r\n  function openDeclineModal() {\r\n    setConfirmModal({\r\n      isOpen: true,\r\n      content: `Do you want to decline friend request from ${\r\n        user.fullName ?? \"this user\"\r\n      }?`,\r\n      action: unfriend,\r\n    });\r\n  }\r\n  useEffect(() => {\r\n    if (relation) {\r\n      switch (relation.relationType) {\r\n        case RelationType.FRIEND: {\r\n          setRelationButton(\r\n            <Button\r\n              className=\"relative flex items-center space-x-1\"\r\n              onClick={openUnfriendModal}\r\n            >\r\n              <i className=\"bx bxs-user-check text-xl\"></i>\r\n              <span>Friend</span>\r\n            </Button>,\r\n          );\r\n          break;\r\n        }\r\n        case RelationType.NOT_FRIEND: {\r\n          setRelationButton(\r\n            <Button className=\"flex items-center space-x-1\" onClick={addFriend}>\r\n              <i className=\"bx bxs-user-plus text-xl\"></i>\r\n              <span>Add friend</span>\r\n            </Button>,\r\n          );\r\n          break;\r\n        }\r\n        case RelationType.FRIEND_REQUEST_BY_ME: {\r\n          setRelationButton(\r\n            <Button className=\"flex items-center space-x-1\" onClick={unfriend}>\r\n              <i className=\"bx bxs-user-x text-xl\"></i>\r\n              <span>Cancel request</span>\r\n            </Button>,\r\n          );\r\n          break;\r\n        }\r\n        case RelationType.FRIEND_REQUEST_TO_ME: {\r\n          setRelationButton(\r\n            <>\r\n              <Button\r\n                secondary\r\n                className=\"flex items-center space-x-1\"\r\n                onClick={openDeclineModal}\r\n              >\r\n                <i className=\"bx bxs-user-x text-xl\"></i>\r\n                <span>Decline</span>\r\n              </Button>\r\n              <Button className=\"flex items-center space-x-1\" onClick={accept}>\r\n                <i className=\"bx bxs-user-check text-xl\"></i>\r\n                <span>Confirm</span>\r\n              </Button>\r\n            </>,\r\n          );\r\n          break;\r\n        }\r\n      }\r\n    }\r\n  }, [relation]);\r\n\r\n  return (\r\n    <>\r\n      {isOpenChangePassword && (\r\n        <ChangePassword\r\n          isOpen={isOpenChangePassword}\r\n          setIsOpen={setIsOpenChangePassword}\r\n        />\r\n      )}\r\n      {confirmModal?.isOpen && (\r\n        <ConfirmModal\r\n          isOpen={confirmModal.isOpen}\r\n          closeAction={() => setConfirmModal({ isOpen: false })}\r\n          title=\"Are you sure?\"\r\n          content={confirmModal.content}\r\n          confirmButtonTitle=\"Yes\"\r\n          confirmButtonAction={confirmModal.action}\r\n        />\r\n      )}\r\n      {photoView.isOpen && (\r\n        <ImageView\r\n          isOpen={photoView.isOpen}\r\n          photos={photoView.photos}\r\n          startIndex={photoView.startIndex}\r\n          setIsOpen={(isOpen) => setPhotoView({ isOpen: isOpen })}\r\n        />\r\n      )}\r\n      <input\r\n        id=\"avatar\"\r\n        type=\"file\"\r\n        hidden\r\n        accept=\"image/png, image/jpg, image/tiff, image/tif, image/jpeg\"\r\n        onChange={updateAvatar}\r\n      />\r\n      <input\r\n        id=\"cover\"\r\n        type=\"file\"\r\n        hidden\r\n        accept=\"image/png, image/jpg, image/tiff, image/tif, image/jpeg\"\r\n        onChange={updateCover}\r\n      />\r\n      <div className=\"absolute top-5 left-0 right-0 bg-gray-100 dark:bg-dark-primary\">\r\n        <div className=\"mt-5 md:mt-10 shadow bg-white dark:bg-dark-secondary \">\r\n          <div className=\" flex flex-col items-center max-w-screen-lg md:px-10 mx-auto z-10\">\r\n            <div className=\"relative h-60 md:h-80 w-full flex mb-6 select-none\">\r\n              <img\r\n                src={user?.coverUrl ?? DefaultCover}\r\n                alt={`${user?.fullName} cover`}\r\n                className=\"w-full object-cover rounded-xl cursor-pointer\"\r\n                onClick={() =>\r\n                  openPhotoView([{ imageUrl: user?.coverUrl ?? DefaultCover }])\r\n                }\r\n              />\r\n              {isCurrentUser && (\r\n                <label\r\n                  htmlFor=\"cover\"\r\n                  className=\"absolute right-3 bottom-3 flex items-center space-x-2 bg-white bg-opacity-95 rounded-lg md:p-2 md:px-3 p-1 px-2 text-black hover:bg-gray-200 active:bg-gray-300 active:transform active:scale-95 cursor-pointer transition-base text-sm md:text-base\"\r\n                >\r\n                  <i className=\"bx bxs-camera md:text-base text-xl\"></i>\r\n                  <span className=\"font-semibold hidden md:inline\">\r\n                    Edit Cover Photo\r\n                  </span>\r\n                </label>\r\n              )}\r\n              <div className=\"absolute md:h-44 md:w-44 h-36 w-36 rounded-full left-1/2 transform bottom-0 translate-y-5 -translate-x-1/2 border-4 border-white dark:border-dark-secondary ring-4 ring-green-400 dark:ring-green-500 cursor-pointer\">\r\n                <ImageCircle\r\n                  parentClassName=\"w-full h-full\"\r\n                  className=\"filter hover:brightness-110\"\r\n                  src={user?.avatarUrl}\r\n                  userName={isCurrentUser ? \"\" : user?.userName}\r\n                  size=\"full\"\r\n                  onClick={() => openPhotoView([{ imageUrl: user?.avatarUrl }])}\r\n                />\r\n                {isCurrentUser && (\r\n                  <label htmlFor=\"avatar\">\r\n                    <ClickableIcon\r\n                      reverse\r\n                      className=\"absolute right-0 bottom-0\"\r\n                      iconClass=\"bx bxs-camera\"\r\n                    />\r\n                  </label>\r\n                )}\r\n              </div>\r\n            </div>\r\n            <div className=\"w-full mx-4 border-b border-gray-400 dark:border-dark-hover pb-6\">\r\n              <div className=\"w-full text-center font-bold text-2xl md:text-4xl md:py-2 py-1 max-row-2\">\r\n                {user.fullName}{\" \"}\r\n                {user.nickName && (\r\n                  <span className=\"font-normal text-xl md:text-3xl\">\r\n                    {`(${user.nickName})`}\r\n                  </span>\r\n                )}\r\n              </div>\r\n              <div className=\"md:max-w-2/3 max-w-11/12 mx-auto text-center max-row-3 text-sm md:text-base\">\r\n                {user.aboutMe}\r\n              </div>\r\n            </div>\r\n            <div className=\"flex self-end justify-end mt-1 mb-3 md:px-2 px-5 space-x-2\">\r\n              {isCurrentUser ? (\r\n                <>\r\n                  <Button\r\n                    onClick={() => setIsOpenChangePassword((pre) => !pre)}\r\n                    secondary\r\n                    className=\"flex items-center space-x-1\"\r\n                  >\r\n                    <i className=\"bx bxs-check-shield md:text-2xl text-lg\"></i>\r\n                    <span>Change password</span>\r\n                  </Button>\r\n                  <Button\r\n                    onClick={() => setIsOpenEdit((pre) => !pre)}\r\n                    secondary\r\n                    className=\"flex items-center space-x-1\"\r\n                  >\r\n                    <i className=\"bx bxs-edit-alt md:text-2xl text-lg\"></i>\r\n                    <span>Edit profile</span>\r\n                  </Button>\r\n                </>\r\n              ) : (\r\n                <div\r\n                  ref={menuRef}\r\n                  className=\"relative flex space-x-2 space-y-2 flex-wrap justify-end items-end\"\r\n                >\r\n                  {relationButton}\r\n                  <Button\r\n                    className=\"flex items-center space-x-1\"\r\n                    onClick={() => handleCreateChat(user.userName)}\r\n                  >\r\n                    <i className=\"bx bxs-message-rounded-dots text-xl align-middle\"></i>\r\n                    <span>Message</span>\r\n                  </Button>\r\n                  <Button\r\n                    className=\"self-stretch\"\r\n                    secondary\r\n                    small\r\n                    onClick={() => setIsOpenMenu((pre) => !pre)}\r\n                  >\r\n                    <i className=\"bx bx-dots-horizontal-rounded text-2xl align-middle\"></i>\r\n                  </Button>\r\n                  {isOpenMenu && (\r\n                    <div className=\"animate-fadeIn transition-base absolute top-7 p-1 w-44 right-0 border border-gray-200 bg-white rounded-lg shadow-lg overflow-hidden dark:bg-dark-secondary dark:border-dark-hover mt-3 select-none z-10\">\r\n                      <button\r\n                        className=\"flex items-center space-x-3 w-full pl-2 pr-4 py-1 rounded-md text-left hover:bg-gray-100 active:bg-gray-200 transition-base transform active:scale-95 dark:hover:bg-dark-hover text-sm\"\r\n                        onClick={() => {\r\n                          if (relation.isFollowing) {\r\n                            unfollow();\r\n                          } else {\r\n                            follow();\r\n                          }\r\n                        }}\r\n                      >\r\n                        <i\r\n                          className={\r\n                            \"text-center text-xl align-middle text-black dark:text-dark-txt w-7 h-7 \" +\r\n                            (relation.isFollowing\r\n                              ? \"bx bx-x-circle\"\r\n                              : \"bx bx-check-circle\")\r\n                          }\r\n                        ></i>\r\n                        <span>\r\n                          {relation.isFollowing ? \"Unfollow\" : \"Follow\"}\r\n                        </span>\r\n                      </button>\r\n                      <button\r\n                        className=\"flex items-center space-x-3 w-full pl-2 pr-4 py-1 rounded-md text-left hover:bg-gray-100 active:bg-gray-200 transition-base transform active:scale-95 dark:hover:bg-dark-hover text-sm\"\r\n                        onClick={openBlockModal}\r\n                      >\r\n                        <i className=\"bx bx-block text-lg text-black dark:text-dark-txt w-7 h-7 text-center align-middle\"></i>\r\n                        <span>Block</span>\r\n                      </button>\r\n                    </div>\r\n                  )}\r\n                </div>\r\n              )}\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div className=\"md:max-w-4xl pt-2 px-2 pb-10 lg:px-0 mx-auto flex flex-col md:flex-row md:items-start items-center justify-between md:space-x-3\">\r\n          <UserInfo\r\n            className={\r\n              \"md:sticky top-20 left-0 space-y-2 md:space-y-3 mb-2\" +\r\n              \" \" +\r\n              (isOpenEdit ? \"hidden md:block\" : \"\")\r\n            }\r\n            user={user}\r\n          />\r\n          <div className=\"max-w-xl w-full mx-auto space-y-2 md:space-y-3\">\r\n            {isOpenEdit && (\r\n              <EditUser\r\n                isOpen={isOpenEdit}\r\n                setIsOpen={setIsOpenEdit}\r\n                user={user}\r\n              />\r\n            )}\r\n            {isCurrentUser && <CreatePost />}\r\n            {[...posts?.items]\r\n              ?.sort((a, b) => (a.dateCreated < b.dateCreated ? 1 : -1))\r\n              ?.map((post) => (\r\n                <Post key={post.id} post={post} />\r\n              ))}\r\n            <Pagination\r\n              loadMoreClassName=\"bg-gray-200 hover:bg-gray-300\"\r\n              onClick={loadMore}\r\n              isLoading={isLoading}\r\n              error={error}\r\n              isHasMore={isHasMore}\r\n              loadMoreContent=\"Load more posts...\"\r\n            />\r\n            {posts?.totalRecords <= 0 && (\r\n              <div className=\"text-center py-3 font-semibold\">\r\n                Not found any posts\r\n              </div>\r\n            )}\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </>\r\n  );\r\n}\r\n\r\nexport default Profile;\r\n","export default __webpack_public_path__ + \"static/media/emoji-icon.21d0cbf4.svg\";","import EmojiIcon from \"assets/icons/emoji-icon.svg\";\r\nimport ImageIcon from \"assets/icons/image-icon.svg\";\r\nimport SendIconNormal from \"assets/icons/send-icon.svg\";\r\nimport ClickableIcon from \"components/ClickableIcon\";\r\nimport Picker from \"emoji-picker-react\";\r\nimport useChatApi from \"hooks/api/useChatApi\";\r\nimport { useCloseOnClickOutside } from \"hooks/utils/useCloseOnClickOutside\";\r\nimport PropTypes from \"prop-types\";\r\nimport React, { useRef, useState } from \"react\";\r\n\r\nChatInput.propTypes = {\r\n  chatId: PropTypes.number,\r\n};\r\n\r\nfunction ChatInput({ chatId }) {\r\n  const [content, setContent] = useState(\"\");\r\n  const [isOpenEmoji, setIsOpenEmoji] = useState(false);\r\n  const ref = useRef();\r\n\r\n  const chatApi = useChatApi();\r\n  useCloseOnClickOutside(isOpenEmoji, setIsOpenEmoji, ref);\r\n\r\n  async function onSendMessage(e) {\r\n    e.preventDefault();\r\n    if (!content) {\r\n      return;\r\n    }\r\n    setContent(\"\");\r\n\r\n    var request = { content };\r\n    await chatApi.sendMessage(chatId, request);\r\n  }\r\n\r\n  const onEmojiClick = (event, emojiObject) => {\r\n    if (emojiObject?.emoji) {\r\n      setContent(content + emojiObject?.emoji);\r\n    }\r\n  };\r\n\r\n  async function sendImage(e) {\r\n    var file = e.target.files[0];\r\n    const formData = new FormData();\r\n    formData.append(\"Image\", file);\r\n\r\n    await chatApi.sendImage(chatId, formData);\r\n  }\r\n  return (\r\n    <div>\r\n      <form\r\n        onSubmit={(e) => onSendMessage(e)}\r\n        className=\"flex justify-between items-center space-x-1\"\r\n      >\r\n        <div className=\"relative w-full flex\">\r\n          <input\r\n            id=\"imageFile\"\r\n            type=\"file\"\r\n            hidden\r\n            accept=\"image/png, image/jpg, image/tiff, image/tif, image/jpeg\"\r\n            onChange={sendImage}\r\n          />\r\n          <label htmlFor=\"imageFile\">\r\n            <ClickableIcon\r\n              secondMode\r\n              className=\"h-9 w-9 p-2 mr-2\"\r\n              icon={ImageIcon}\r\n            />\r\n          </label>\r\n          <input\r\n            value={content}\r\n            onChange={(e) => setContent(e.target.value)}\r\n            type=\"text\"\r\n            placeholder=\"Aa\"\r\n            className=\"bg-gray-200 dark:bg-dark-third rounded-3xl w-full py-1 px-4 pr-12 focus:ring-2 focus:ring-green-500 focus:ring-opacity-50 outline-none transition-base relative text-sm\"\r\n          />\r\n          <div ref={ref} className=\"relative\">\r\n            <ClickableIcon\r\n              secondMode\r\n              className=\"absolute h-9 w-9 p-2 right-1 top-0\"\r\n              icon={EmojiIcon}\r\n              onClick={() => setIsOpenEmoji(!isOpenEmoji)}\r\n            />\r\n            <div\r\n              className={\r\n                \"animate-fadeIn absolute right-0 bottom-full \" +\r\n                \" \" +\r\n                (isOpenEmoji ? \"visible\" : \"invisible\")\r\n              }\r\n            >\r\n              <Picker onEmojiClick={onEmojiClick} />\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        <button>\r\n          <ClickableIcon\r\n            disableAutoFocus\r\n            secondMode\r\n            icon={SendIconNormal}\r\n            className=\"w-9 h-9 p-2\"\r\n          />\r\n        </button>\r\n      </form>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default ChatInput;\r\n","import { addSelectedId } from \"app/chatSlice\";\r\nimport Button from \"components/Button\";\r\nimport ConfirmModal from \"components/ConfirmModal\";\r\nimport ImageCircle from \"components/ImageCircle\";\r\nimport Popup from \"components/Popup\";\r\nimport useChatApi from \"hooks/api/useChatApi\";\r\nimport useUserApi from \"hooks/api/useUserApi\";\r\nimport { useCloseOnClickOutside } from \"hooks/utils/useCloseOnClickOutside\";\r\nimport { useDisableBodyScroll } from \"hooks/utils/useDisableBodyScroll\";\r\nimport { useEscToClose } from \"hooks/utils/useEscToClose\";\r\nimport moment from \"moment\";\r\nimport React, { useEffect, useRef, useState } from \"react\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { DefaultName } from \"utils/Constants\";\r\nimport { ChatType } from \"utils/Enums\";\r\nimport { formatDate } from \"utils/UtilityMethods\";\r\n\r\nfunction EditChat({ isOpen, setIsOpen, chat }) {\r\n  const [isOpenModal, setIsOpenModal] = useState(false);\r\n  const [modalContent, setModalContent] = useState(\"\");\r\n\r\n  const [groupName, setGroupName] = useState(chat?.name);\r\n  const [keyword, setKeyword] = useState(\"\");\r\n  const [avatar, setAvatar] = useState(false);\r\n\r\n  const [isValidButton, setIsValidButton] = useState(false);\r\n  const [friendList, setFriendList] = useState([]);\r\n  const [isOpenFriendList, setIsOpenFriendList] = useState(false);\r\n  const [selectedFriendList, setSelectedFriendList] = useState(\r\n    chat?.participants,\r\n  );\r\n\r\n  const chatApi = useChatApi();\r\n  const userApi = useUserApi();\r\n\r\n  const [popup, setPopup] = useState({\r\n    isOpen: false,\r\n    content: \"\",\r\n    title: \"Notification\",\r\n  });\r\n\r\n  const currentUser = useSelector((state) => state.users.currentUser);\r\n  const dispatch = useDispatch();\r\n  const ref = useRef();\r\n  const friendListRef = useRef();\r\n\r\n  useEffect(() => {\r\n    setIsValidButton(groupName?.trim() ? true : false);\r\n  }, [groupName]);\r\n\r\n  useEscToClose(setIsOpen);\r\n  useCloseOnClickOutside(isOpen, setIsOpen, ref);\r\n  useCloseOnClickOutside(isOpenFriendList, setIsOpenFriendList, friendListRef);\r\n  useDisableBodyScroll(isOpen);\r\n\r\n  useEffect(() => {\r\n    userApi.getUserList().then((response) => {\r\n      if (response) {\r\n        setFriendList(response.items ?? response);\r\n      }\r\n    });\r\n  }, []);\r\n  useEffect(() => {\r\n    setSelectedFriendList(chat?.participants);\r\n    setGroupName(chat?.name);\r\n  }, [chat]);\r\n\r\n  async function handleEditChat() {\r\n    var currentParticipantUserNames = chat?.participants.map((x) => x.userName);\r\n    var selectedParticipantUserNames = selectedFriendList.map(\r\n      (x) => x.userName,\r\n    );\r\n    var participantFullNamesToAdd = [];\r\n    var participantFullNamesToRemove = [];\r\n    var participantUserNamesToRemove = [];\r\n\r\n    // create request with added username and removed username\r\n    selectedFriendList.forEach((user) => {\r\n      if (!currentParticipantUserNames.some((x) => x === user.userName)) {\r\n        participantFullNamesToAdd.push(user.fullName);\r\n      }\r\n    });\r\n    chat?.participants.forEach((user) => {\r\n      if (!selectedParticipantUserNames.some((x) => x === user.userName)) {\r\n        participantFullNamesToRemove.push(user.fullName);\r\n        participantUserNamesToRemove.push(user.userName);\r\n      }\r\n    });\r\n\r\n    if (participantFullNamesToRemove.length > 0) {\r\n      var content = \"\";\r\n\r\n      if (\r\n        participantUserNamesToRemove.some((x) => x === currentUser.userName)\r\n      ) {\r\n        if (participantFullNamesToRemove.length === 1) {\r\n          content = \"Do you want to leave this group?\";\r\n          openModal(content);\r\n          return <></>;\r\n        } else {\r\n          content = \"Do you want to leave this group and remove \";\r\n        }\r\n      } else {\r\n        content = \"Do you want to remove \";\r\n      }\r\n\r\n      participantFullNamesToRemove.forEach((fullName, index) => {\r\n        if (participantUserNamesToRemove[index] !== currentUser.userName) {\r\n          content += `'${fullName}'`;\r\n          if (index !== participantFullNamesToRemove.length - 1) {\r\n            content += \", \";\r\n          }\r\n        }\r\n      });\r\n\r\n      content += \" from this chat?\";\r\n      openModal(content);\r\n    } else {\r\n      await submitEditChat();\r\n    }\r\n  }\r\n  async function submitEditChat() {\r\n    var currentParticipantUserNames = chat?.participants.map((x) => x.userName);\r\n    var selectedParticipantUserNames = selectedFriendList.map(\r\n      (x) => x.userName,\r\n    );\r\n    var participantUserNamesToAdd = [];\r\n    var participantUserNamesToRemove = [];\r\n\r\n    // create request with added username and removed username\r\n    selectedParticipantUserNames.forEach((userName) => {\r\n      if (!currentParticipantUserNames.includes(userName)) {\r\n        participantUserNamesToAdd.push(userName);\r\n      }\r\n    });\r\n    currentParticipantUserNames.forEach((userName) => {\r\n      if (!selectedParticipantUserNames.includes(userName)) {\r\n        participantUserNamesToRemove.push(userName);\r\n      }\r\n    });\r\n\r\n    const request = {\r\n      newGroupName: groupName,\r\n      participantUserNamesToAdd,\r\n      participantUserNamesToRemove,\r\n    };\r\n\r\n    chatApi.updateGroupChat(chat?.id, request).then(async (response) => {\r\n      if (avatar) {\r\n        await updateGroupAvatar();\r\n      }\r\n      openPopup(\"Success\", \"Update info successfully!\");\r\n    });\r\n\r\n    const isLeaveGroup = participantUserNamesToRemove.some(\r\n      (x) => x === currentUser.userName,\r\n    );\r\n    if (isLeaveGroup) {\r\n      dispatch(addSelectedId(0));\r\n    }\r\n    closeModal();\r\n  }\r\n\r\n  async function updateGroupAvatar(e) {\r\n    const formData = new FormData();\r\n    formData.append(\"Avatar\", avatar);\r\n    await chatApi.updateGroupAvatar(chat?.id, formData);\r\n    setAvatar(false);\r\n  }\r\n\r\n  function openPopup(title, content) {\r\n    const popup = {\r\n      isOpen: true,\r\n      title: title,\r\n      content: content,\r\n    };\r\n    setPopup(popup);\r\n  }\r\n  function openModal(content) {\r\n    setIsOpenModal(true);\r\n    setModalContent(content);\r\n  }\r\n  function closeModal() {\r\n    setIsOpenModal(false);\r\n    setModalContent(\"\");\r\n  }\r\n\r\n  return isOpen ? (\r\n    <div\r\n      className=\"overlay grid place-items-center px-4 py-10 z-30\"\r\n      style={{ margin: 0 }}\r\n    >\r\n      <div\r\n        ref={ref}\r\n        className={\r\n          \"animate-swipeDown px-6 md:px-14 md:py-6 flex flex-col bg-white dark:bg-dark-secondary dark:border-dark-third rounded-xl shadow-xl border border-gray-300 w-full md:w-5/6 lg:w-2/5 transition-all duration-300 ease-in-out max-h-full overflow-y-auto md:overflow-visible dark:text-white\" +\r\n          \" \" +\r\n          (isOpenFriendList ? \"mb-16\" : \"\")\r\n        }\r\n      >\r\n        <Popup\r\n          title={popup.title}\r\n          isOpen={popup.isOpen}\r\n          content={popup.content}\r\n          onClick={() => setPopup({ isOpen: false })}\r\n        />\r\n        <ConfirmModal\r\n          isOpen={isOpenModal}\r\n          closeAction={() => setIsOpenModal(false)}\r\n          title=\"Are you sure?\"\r\n          content={modalContent}\r\n          confirmButtonTitle=\"Yes\"\r\n          confirmButtonAction={submitEditChat}\r\n        />\r\n        <div className=\"flex pt-6 pb-5 h-full\">\r\n          <h3 className=\"font-semibold text-lg md:text-2xl text-green-600 dark:text-green-400\">\r\n            Chat info!\r\n          </h3>\r\n        </div>\r\n        <div className=\"space-y-2 md:space-y-4\">\r\n          {chat?.type === ChatType.GROUP ? (\r\n            <>\r\n              <div className=\"space-y-2\">\r\n                <label\r\n                  htmlFor=\"groupName\"\r\n                  className=\"font-semibold dark:text-dark-txt text-base md:text-lg\"\r\n                >\r\n                  Group name <span className=\"text-red-500\">*</span>\r\n                </label>\r\n                <input\r\n                  id=\"groupName\"\r\n                  value={groupName}\r\n                  onChange={(e) => setGroupName(e.target.value)}\r\n                  type=\"text\"\r\n                  className=\"dark:bg-dark-third bg-gray-100 rounded-lg w-full py-2 px-3 focus:ring-2 focus:ring-green-500 focus:ring-opacity-50 outline-none transition-all duration-200 mb-2 dark:text-white\"\r\n                />\r\n              </div>\r\n              <div ref={friendListRef} className=\"space-y-2\">\r\n                <label\r\n                  htmlFor=\"search\"\r\n                  className=\"font-semibold dark:text-dark-txt text-base md:text-lg\"\r\n                >\r\n                  Add Members\r\n                </label>\r\n                <div className=\"relative\">\r\n                  <input\r\n                    id=\"search\"\r\n                    type=\"search\"\r\n                    onFocus={() => setIsOpenFriendList(true)}\r\n                    value={keyword}\r\n                    autoComplete=\"off\"\r\n                    onChange={(e) => setKeyword(e.target.value)}\r\n                    className=\"dark:bg-dark-third bg-gray-100 rounded-lg w-full py-2 px-3 focus:ring-2 focus:ring-green-500 focus:ring-opacity-50 outline-none transition-all duration-200 mb-2 \"\r\n                  />\r\n                  {isOpenFriendList && (\r\n                    <>\r\n                      <div className=\"animate-fadeIn absolute top-full bg-white dark:bg-dark-third border border-gray-400 border-opacity-50 rounded-lg w-full md:py-4 py-2 md:px-8 px-6 space-y-1 max-h-48 md:max-h-72 overflow-y-auto select-none z-10 shadow-2xl \">\r\n                        <h4 className=\"font-semibold dark:text-gray-200 mb-2\">\r\n                          Friend list\r\n                        </h4>\r\n                        {friendList\r\n                          .filter(\r\n                            (x) =>\r\n                              (x.fullName\r\n                                ?.toLowerCase()\r\n                                .includes(keyword?.toLowerCase()) ||\r\n                                x.userName\r\n                                  ?.toLowerCase()\r\n                                  .includes(keyword?.toLowerCase())) &&\r\n                              !selectedFriendList.some(\r\n                                (selected) => selected.userName === x.userName,\r\n                              ),\r\n                          )\r\n                          .sort((a, b) => a.fullName.localeCompare(b.fullName))\r\n                          .map((friend, index) => (\r\n                            <div\r\n                              onClick={() => {\r\n                                var result = [...selectedFriendList];\r\n                                if (\r\n                                  !result.some(\r\n                                    (x) => x.userName === friend.userName,\r\n                                  )\r\n                                ) {\r\n                                  result.push(friend);\r\n                                  setSelectedFriendList(result);\r\n                                }\r\n                              }}\r\n                              key={friend?.id ?? \"friend\" + index}\r\n                              className=\"h-full w-full rounded-lg px-3 py-2 flex items-center space-x-2  dark:bg-dark-hover bg-gray-100 hover:bg-green-200 dark:hover:bg-green-600 cursor-pointer transform active:scale-100 hover:scale-105 hover:shadow-xl transition-all duration-300\"\r\n                            >\r\n                              <ImageCircle\r\n                                size=\"xs\"\r\n                                src={friend.avatarUrl}\r\n                                userName={friend?.userName}\r\n                              />\r\n                              <span className=\"break-full w-full overflow-ellipsis truncate md:text-base text-sm\">\r\n                                {friend.fullName ?? DefaultName.NO_NAME_USER}\r\n                              </span>\r\n                            </div>\r\n                          ))}\r\n                      </div>\r\n                    </>\r\n                  )}\r\n                </div>\r\n              </div>\r\n              <div className=\"space-y-2\">\r\n                <label\r\n                  htmlFor=\"search\"\r\n                  className=\"font-semibold text-base md:text-lg dark:text-dark-txt\"\r\n                >\r\n                  Members <span className=\"text-red-500\">*</span>{\" \"}\r\n                  <span className=\"text-sm text-gray-400\">\r\n                    {\"(Click to remove)\"}\r\n                  </span>\r\n                </label>\r\n                <div className=\"bg-white border dark:bg-dark-third dark:border-dark-third border-gray-400 border-opacity-50 rounded-lg w-full py-4 md:px-8 px-6 space-y-1 max-h-48 md:max-h-72 overflow-y-auto select-none\">\r\n                  {[...selectedFriendList]\r\n                    .sort((a, b) => a.fullName.localeCompare(b.fullName))\r\n                    .map((friend, index) => (\r\n                      <div\r\n                        onClick={() => {\r\n                          var result = [...selectedFriendList];\r\n                          var i = result.findIndex(\r\n                            (x) => x.userName === friend.userName,\r\n                          );\r\n                          if (i >= 0) {\r\n                            result.splice(i, 1);\r\n                            setSelectedFriendList(result);\r\n                          }\r\n                        }}\r\n                        key={friend?.id ?? \"friend\" + index}\r\n                        className=\"h-full w-full rounded-lg px-3 py-2 flex items-center space-x-2 dark:hover:bg-red-500 dark:bg-dark-hover bg-gray-100 hover:bg-red-200 cursor-pointer transform active:scale-100 hover:scale-105 hover:shadow-xl transition-all duration-300\"\r\n                      >\r\n                        <ImageCircle\r\n                          size=\"xs\"\r\n                          src={friend.avatarUrl}\r\n                          userName={friend?.userName}\r\n                        />\r\n                        <span className=\"break-full w-full overflow-ellipsis truncate md:text-base text-sm\">\r\n                          {friend.fullName ?? DefaultName.NO_NAME_USER}\r\n                        </span>\r\n                      </div>\r\n                    ))}\r\n                </div>\r\n              </div>\r\n              <div className=\"space-y-2 mr-2 flex flex-col\">\r\n                <label\r\n                  htmlFor=\"avatar\"\r\n                  className=\"dark:text-dark-txt text-base md:text-lg font-semibold \"\r\n                >\r\n                  Group Avatar\r\n                </label>\r\n                <input\r\n                  id=\"avatar\"\r\n                  onChange={(e) => setAvatar(e.target.files[0])}\r\n                  type=\"file\"\r\n                  className=\"w-full\"\r\n                  accept=\"image/png, image/jpg, image/tiff, image/tif, image/jpeg\"\r\n                />\r\n              </div>\r\n            </>\r\n          ) : (\r\n            <div ref={friendListRef} className=\"space-y-2\">\r\n              <div className=\"font-bold dark:text-dark-txt\">\r\n                Creator:{\" \"}\r\n                <span className=\"font-normal\">{chat?.creatorFullName}</span>\r\n              </div>\r\n              <div className=\"font-bold dark:text-dark-txt\">\r\n                Created at:{\" \"}\r\n                <span className=\"font-normal\">\r\n                  {formatDate(chat?.dateCreated)}\r\n                </span>\r\n              </div>\r\n              <div className=\"font-bold dark:text-dark-txt\">\r\n                Total messages:{\" \"}\r\n                <span className=\"font-normal\">{chat?.totalRecords}</span>\r\n              </div>\r\n            </div>\r\n          )}\r\n        </div>\r\n        <div className=\"flex justify-end py-6 space-x-4\">\r\n          <div className=\"space-x-2 flex items-center\">\r\n            <Button outline content=\"Close\" onClick={() => setIsOpen(false)} />\r\n            {chat?.type === ChatType.GROUP ? (\r\n              <Button\r\n                disabled={!isValidButton}\r\n                content=\"Save\"\r\n                onClick={() => handleEditChat()}\r\n              />\r\n            ) : (\r\n              \"\"\r\n            )}\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  ) : (\r\n    \"\"\r\n  );\r\n}\r\n\r\nexport default EditChat;\r\n","import { appendMessageToChat, readChat, removeSelectedId } from \"app/chatSlice\";\r\nimport ClickableIcon from \"components/ClickableIcon\";\r\nimport ImageCircle from \"components/ImageCircle\";\r\nimport Pagination from \"components/Pagination\";\r\nimport useChatApi from \"hooks/api/useChatApi\";\r\nimport useMessagePagination from \"hooks/pagination/useMessagePagination\";\r\nimport moment from \"moment\";\r\nimport React, { useEffect, useRef, useState } from \"react\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { Link, useHistory } from \"react-router-dom\";\r\nimport { DefaultName } from \"utils/Constants\";\r\nimport { ChatType } from \"utils/Enums\";\r\nimport { formatDate } from \"utils/UtilityMethods\";\r\nimport ChatInput from \"../ChatInput\";\r\nimport EditChat from \"../EditChat\";\r\n\r\nfunction ChatWindow({ chat }) {\r\n  const dispatch = useDispatch();\r\n  const history = useHistory();\r\n  const currentUser = useSelector((state) => state.users.currentUser);\r\n  const chatApi = useChatApi();\r\n\r\n  const [showTimeIndexes, setShowTimeIndexes] = useState([]);\r\n  const [isOpenInfoPopup, setIsOpenInfoPopup] = useState(false);\r\n  const [friend, setFriend] = useState({});\r\n  const [seenBy, setSeenBy] = useState(\"\");\r\n\r\n  function handleMessageClick(index) {\r\n    var result = [...showTimeIndexes];\r\n    const i = result.findIndex((x) => x === index);\r\n    if (i >= 0) {\r\n      result = result.filter((x) => x !== index);\r\n    } else {\r\n      result.push(index);\r\n    }\r\n    setShowTimeIndexes(result);\r\n  }\r\n\r\n  // infinity scrolling\r\n  const [page, setPage] = useState(1);\r\n  const { appendChat, isHasMore, isLoading, error } = useMessagePagination(\r\n    chat,\r\n    page,\r\n  );\r\n  const endMessageRef = useRef();\r\n\r\n  useEffect(() => {\r\n    if (chat?.numOfUnreadMessages > 0) {\r\n      chatApi.readChat(chat?.id).then((res) => {\r\n        dispatch(readChat(chat?.id));\r\n      });\r\n    }\r\n    if (chat?.participants.length > 0) {\r\n      let newFriend = chat?.participants\r\n        ?.filter((x) => x.userName !== currentUser?.userName)\r\n        .shift();\r\n      setFriend(newFriend ?? currentUser);\r\n\r\n      if (chat?.readByUserNames?.length > 1) {\r\n        let newSeenBy = \"\";\r\n        let firstNameList = chat?.readByUserNames\r\n          ?.filter((userName) => userName !== currentUser?.userName)\r\n          ?.map((userName) => {\r\n            let firstName = chat.participants\r\n              .filter((x) => x.userName === userName)\r\n              ?.shift()?.firstName;\r\n            return firstName;\r\n          });\r\n\r\n        if (firstNameList?.length > 1) {\r\n          newSeenBy = \"Seen by \" + firstNameList.filter((x) => x).join(\", \");\r\n          setSeenBy(newSeenBy);\r\n        } else {\r\n          setSeenBy(\"\");\r\n        }\r\n      }\r\n    }\r\n  }, [chat]);\r\n\r\n  useEffect(() => {\r\n    dispatch(appendMessageToChat(appendChat));\r\n  }, [appendChat]);\r\n\r\n  const scrollToBottom = () => {\r\n    if (endMessageRef) {\r\n      endMessageRef?.current?.scrollIntoView();\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (chat?.page < 2) {\r\n      scrollToBottom();\r\n    }\r\n  }, [chat]);\r\n\r\n  function loadMore() {\r\n    if (page < chat?.pageCount) {\r\n      setPage((prevPage) => prevPage + 1);\r\n    }\r\n  }\r\n  return (\r\n    <>\r\n      <EditChat\r\n        isOpen={isOpenInfoPopup}\r\n        setIsOpen={setIsOpenInfoPopup}\r\n        chat={chat}\r\n      />\r\n      <div className=\"flex flex-col w-full h-full pb-2 flex-shrink-0 min-w-0 bg-white dark:bg-dark-secondary rounded-lg text-black dark:text-white shadow max-w-350\">\r\n        {/* Header chat window */}\r\n        <div className=\"w-full border-b border-gray-300 dark:border-dark-third flex justify-between items-center py-1 pl-2 flex-shrink-0 overflow-hidden \">\r\n          <div\r\n            onClick={() => {\r\n              if (chat.type === ChatType.GROUP) {\r\n                setIsOpenInfoPopup(!isOpenInfoPopup);\r\n              } else {\r\n                history.push(\"/profile/\" + friend?.userName);\r\n              }\r\n            }}\r\n            className=\"flex min-w-0 justify-start clickable cursor-pointer items-center space-x-3 p-2 transition-base rounded-lg\"\r\n          >\r\n            <ImageCircle\r\n              src={\r\n                chat?.groupAvatarUrl !== \"\"\r\n                  ? chat?.groupAvatarUrl\r\n                  : friend?.avatarUrl\r\n              }\r\n              size=\"xs\"\r\n              participants={chat?.participants}\r\n            />\r\n            <span className=\"font-semibold truncate overflow-hidden\">\r\n              {chat?.type === ChatType.PRIVATE\r\n                ? friend?.fullName\r\n                : chat?.name ?? DefaultName.NO_NAME_GROUP}\r\n            </span>\r\n          </div>\r\n          <div className=\"flex items-center mr-2\">\r\n            <ClickableIcon\r\n              iconClass=\"bx bx-x-circle\"\r\n              secondMode\r\n              colorIconClass=\"text-green-500 dark:text-green-500\"\r\n              onClick={() => dispatch(removeSelectedId(chat.id))}\r\n            />\r\n          </div>\r\n        </div>\r\n        {/* End header chat window */}\r\n\r\n        {/* Chat content */}\r\n        {chat?.messages ? (\r\n          <div className=\"flex-grow overflow-y-auto overflow-x-hidden px-4 pb-4 pt-1 space-y-1 flex flex-col min-w-0\">\r\n            <Pagination\r\n              loadMoreClassName=\"bg-gray-200 hover:bg-gray-300\"\r\n              onClick={loadMore}\r\n              isLoading={isLoading}\r\n              error={error}\r\n              isHasMore={isHasMore}\r\n              loadMoreContent=\"Load more messages...\"\r\n            />\r\n            {!isHasMore && (\r\n              <div className=\"text-gray-500 text-xs text-center pb-2\">\r\n                {formatDate(chat?.dateCreated)}\r\n              </div>\r\n            )}\r\n            {[...chat?.messages]\r\n              ?.sort((messageA, messageB) => {\r\n                return messageA?.dateCreated > messageB?.dateCreated ? 1 : -1;\r\n              })\r\n              .map((message, index) =>\r\n                message.senderUserName === currentUser.userName ? (\r\n                  <div\r\n                    className=\"flex-shrink-0\"\r\n                    key={message.id ?? \"message\" + index}\r\n                  >\r\n                    <div className=\"flex flex-col items-end w-full flex-shrink-0\">\r\n                      {showTimeIndexes.includes(index) && (\r\n                        <span className=\"transition-all animate-fadeIn text-xs text-gray-400 left-0 bottom-full mb-1 ml-1 space-x-2 w-60 truncate overflow-ellipsis text-right\">\r\n                          {formatDate(message?.dateCreated) ?? \"\"}\r\n                        </span>\r\n                      )}\r\n                      {message.imageUrl ? (\r\n                        <img\r\n                          onClick={() => handleMessageClick(index)}\r\n                          className=\"max-w-200 rounded-lg shadow transition-all duration-200 cursor-pointer\"\r\n                          src={message.imageUrl}\r\n                          alt=\"Message\"\r\n                        />\r\n                      ) : (\r\n                        <span\r\n                          onClick={() => handleMessageClick(index)}\r\n                          className={\r\n                            \"text-white rounded-3xl px-3 py-2 break-word rounded-br-none cursor-pointer overflow-x-auto max-w-3/4 text-sm\" +\r\n                            \" \" +\r\n                            (showTimeIndexes.includes(index)\r\n                              ? \"bg-green-600 dark:bg-green-800\"\r\n                              : \"bg-gradient-to-br from-green-400 to-green-600 dark:from-green-500 dark:to-green-800 shadow-md\")\r\n                          }\r\n                        >\r\n                          {message.content}\r\n                        </span>\r\n                      )}\r\n                    </div>\r\n                    {chat?.type === ChatType.PRIVATE &&\r\n                      chat?.messages?.length === index + 1 && (\r\n                        <>\r\n                          <div className=\"text-xs font-semibold text-right text-gray-600 dark:text-dark-txt mr-2 select-none\">\r\n                            {chat?.readByUserNames?.includes(friend?.userName)\r\n                              ? \"Seen\"\r\n                              : \"\"}\r\n                          </div>\r\n                        </>\r\n                      )}\r\n                  </div>\r\n                ) : (\r\n                  <div\r\n                    key={message.id ?? \"message\" + index}\r\n                    className=\"flex flex-shrink-0 items-end space-x-2\"\r\n                  >\r\n                    <Link\r\n                      to={\r\n                        \"/profile/\" +\r\n                        chat?.participants\r\n                          .filter((x) => x.userName === message.senderUserName)\r\n                          .shift()?.userName\r\n                      }\r\n                    >\r\n                      <ImageCircle\r\n                        src={\r\n                          chat?.participants\r\n                            .filter(\r\n                              (x) => x.userName === message.senderUserName,\r\n                            )\r\n                            .shift()?.avatarUrl\r\n                        }\r\n                        size=\"sm\"\r\n                        userName={message.senderUserName}\r\n                      />\r\n                    </Link>\r\n                    <div className=\"flex flex-col w-full items-start\">\r\n                      {showTimeIndexes.includes(index) && (\r\n                        <span className=\"transition-all animate-fadeIn text-xs text-gray-400 bottom-full mb-1 ml-1 space-x-2 w-60 truncate overflow-ellipsis text-left\">\r\n                          {message.senderFullName +\r\n                            \" - \" +\r\n                            formatDate(message?.dateCreated) ?? \"\"}\r\n                        </span>\r\n                      )}\r\n                      {message.imageUrl ? (\r\n                        <img\r\n                          onClick={() => handleMessageClick(index)}\r\n                          className=\"max-w-200 rounded-lg shadow cursor-pointer\"\r\n                          src={message.imageUrl}\r\n                          alt=\"Message\"\r\n                        />\r\n                      ) : (\r\n                        <span\r\n                          className={\r\n                            \" rounded-3xl px-3 py-2 break-word rounded-bl-none shadow-sm cursor-pointer overflow-x-auto max-w-3/4 text-sm \" +\r\n                            \" \" +\r\n                            (showTimeIndexes.includes(index)\r\n                              ? \"bg-gray-300 dark:bg-dark-third\"\r\n                              : \"bg-gradient-to-br from-gray-100 to-gray-300 dark:from-gray-500 dark:to-gray-600 \")\r\n                          }\r\n                          onClick={() => handleMessageClick(index)}\r\n                        >\r\n                          {message.content}\r\n                        </span>\r\n                      )}\r\n                    </div>\r\n                  </div>\r\n                ),\r\n              )}\r\n            {chat?.type === ChatType.GROUP && (\r\n              <>\r\n                <div className=\"text-xs font-semibold text-right text-gray-600 dark:text-dark-txt mr-2 select-none\">\r\n                  {seenBy}\r\n                </div>\r\n              </>\r\n            )}\r\n            <div ref={endMessageRef}></div>\r\n          </div>\r\n        ) : (\r\n          <div className=\"flex-grow flex-center  mx-4 my-2 text-center text-sm\">\r\n            No message\r\n          </div>\r\n        )}\r\n        {/* End chat content */}\r\n\r\n        <div className=\"px-2\">\r\n          <ChatInput chatId={chat?.id} />\r\n        </div>\r\n      </div>\r\n    </>\r\n  );\r\n}\r\n\r\nexport default ChatWindow;\r\n","import { appendMessageToChat } from \"app/chatSlice\";\r\nimport { useEffect, useState } from \"react\";\r\nimport { useDispatch } from \"react-redux\";\r\nimport useChatApi from \"../api/useChatApi\";\r\n\r\nexport default function useMessagePagination(currentChat = {}, page) {\r\n  const [isLoading, setIsLoading] = useState(false);\r\n  const [error, setError] = useState(\"\");\r\n  const [isHasMore, setIsHasMore] = useState(false);\r\n\r\n  const chatApi = useChatApi();\r\n  const dispatch = useDispatch();\r\n\r\n  useEffect(() => {\r\n    if (page > 1 && isHasMore) {\r\n      setIsLoading(true);\r\n      setError(false);\r\n\r\n      const request = { page };\r\n      chatApi\r\n        .getById(currentChat.id, request)\r\n        .then((response) => {\r\n          dispatch(appendMessageToChat(response));\r\n          setIsHasMore(page < response.pageCount);\r\n          setIsLoading(false);\r\n        })\r\n        .catch((e) => {\r\n          setError(e);\r\n        });\r\n    }\r\n  }, [page]);\r\n\r\n  useEffect(() => {\r\n    setIsHasMore(page < currentChat.pageCount);\r\n  }, [currentChat]);\r\n\r\n  return { isLoading, error, isHasMore };\r\n}\r\n","import { HubConnectionBuilder } from \"@microsoft/signalr\";\r\nimport {\r\n  addChat,\r\n  addMessage,\r\n  addNotification,\r\n  addReadByUserName,\r\n  addSelectedId,\r\n  editChat,\r\n  editGroupAvatar,\r\n  refreshChats,\r\n} from \"app/chatSlice\";\r\nimport { updateOnlineUserNameList } from \"app/userSlice\";\r\nimport useChatApi from \"hooks/api/useChatApi\";\r\nimport React, { useEffect, useState } from \"react\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { ChatClient } from \"utils/Constants\";\r\nimport ChatWindow from \"./components/ChatWindow\";\r\n\r\nfunction Chat() {\r\n  const dispatch = useDispatch();\r\n  const chatApi = useChatApi();\r\n\r\n  const [connection, setConnection] = useState(null);\r\n  const [selectedChats, setSelectedChats] = useState([]);\r\n\r\n  const currentUser = useSelector((state) => state.users.currentUser);\r\n  const selectedIds = useSelector((state) => state.chats.selectedIds);\r\n  const chats = useSelector((state) => state.chats.chats);\r\n\r\n  useEffect(() => {\r\n    const selected = chats.filter((x) => selectedIds.includes(x.id));\r\n    setSelectedChats(selected ?? []);\r\n  }, [selectedIds, chats]);\r\n  useEffect(() => {\r\n    async function fetchData() {\r\n      chatApi\r\n        .getAll()\r\n        .then((response) => {\r\n          dispatch(refreshChats(response.data));\r\n        })\r\n        .catch((error) => {\r\n          console.error(\"Connection failed: \", error);\r\n        });\r\n    }\r\n    fetchData();\r\n  }, []);\r\n  // for realtime\r\n  useEffect(() => {\r\n    const newConnection = new HubConnectionBuilder()\r\n      .withUrl(process.env.REACT_APP_CHAT_HUB_URL, {\r\n        accessTokenFactory: () => localStorage.getItem(\"token\"),\r\n      })\r\n      .withAutomaticReconnect()\r\n      .build();\r\n\r\n    setConnection(newConnection);\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    if (connection && !connection.connectionStarted) {\r\n      connection.start().then((result) => {\r\n        connection.on(ChatClient.RECEIVE_MESSAGE, (response) => {\r\n          const action = addMessage(response);\r\n          dispatch(action);\r\n          if (response.chatId && selectedIds !== response.chatId) {\r\n            dispatch(addNotification(response.chatId));\r\n          }\r\n        });\r\n        connection.on(ChatClient.RECEIVE_CHAT, (chat) => {\r\n          const action = addChat(chat);\r\n          dispatch(action);\r\n          if (chat.creatorUserName === currentUser.userName) {\r\n            dispatch(addSelectedId(chat.id));\r\n          }\r\n        });\r\n        connection.on(ChatClient.RECEIVE_UPDATED_CHAT, (chat) => {\r\n          const action = editChat(chat);\r\n          dispatch(action);\r\n        });\r\n        connection.on(ChatClient.RECEIVE_UPDATED_GROUP_AVATAR, (response) => {\r\n          const action = editGroupAvatar(response);\r\n          dispatch(action);\r\n        });\r\n        connection.on(ChatClient.RECEIVE_ADD_READ_BY_USERNAME, (response) => {\r\n          const action = addReadByUserName(response);\r\n          dispatch(action);\r\n        });\r\n        connection.on(\r\n          ChatClient.RECEIVE_UPDATED_ONLINE_USERNAME_LIST,\r\n          (response) => {\r\n            const action = updateOnlineUserNameList(response);\r\n            dispatch(action);\r\n          },\r\n        );\r\n      });\r\n    }\r\n    return () => {\r\n      if (connection && connection.connectionStarted) {\r\n        connection.stop();\r\n      }\r\n    };\r\n  }, [connection]);\r\n\r\n  return (\r\n    <>\r\n      <div className=\"fixed right-2 md:right-10 bottom-1 flex space-x-2 z-20\">\r\n        {selectedChats.map((chat, index) => (\r\n          <div\r\n            className={\r\n              \"md:h-112 md:w-400 h-128 max-w-xs flex-shrink-0 \" +\r\n              (index > 0 ? \"hidden md:inline\" : \"\")\r\n            }\r\n            key={chat.id}\r\n          >\r\n            <ChatWindow chat={chat} />\r\n          </div>\r\n        ))}\r\n      </div>\r\n    </>\r\n  );\r\n}\r\n\r\nexport default Chat;\r\n","import { addPost } from \"app/postSlice\";\r\nimport Post from \"features/Home/components/Post\";\r\nimport usePostApi from \"hooks/api/usePostApi\";\r\nimport React, { useEffect, useState } from \"react\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { useHistory, useParams } from \"react-router\";\r\n\r\nfunction PostDetail() {\r\n  const { postId } = useParams();\r\n  const posts = useSelector((state) => state.posts.posts);\r\n  const [post, setPost] = useState({ reactions: [], comments: [], photos: [] });\r\n  const postApi = usePostApi();\r\n  const dispatch = useDispatch();\r\n  const history = useHistory();\r\n\r\n  useEffect(() => {\r\n    if (postId && posts) {\r\n      const findPost = posts?.items?.find(\r\n        (post) => post.id.toString() === postId,\r\n      );\r\n      if (findPost) {\r\n        setPost(findPost);\r\n      } else {\r\n        postApi\r\n          .getById(postId)\r\n          .then((response) => {\r\n            setPost(response);\r\n            dispatch(addPost(response));\r\n          })\r\n          .catch((response) => {\r\n            history.push(\"/NotFound\");\r\n          });\r\n      }\r\n    }\r\n  }, [postId, posts]);\r\n  return <>{post?.dateCreated && <Post post={post} isOpenComment={true} />}</>;\r\n}\r\n\r\nexport default PostDetail;\r\n","export const FriendOptionType = {\r\n  FRIENDS: 1,\r\n  FRIEND_REQUESTS: 2,\r\n  BIRTHDAYS: 3,\r\n  FOLLOWING: 4,\r\n  FOLLOWERS: 5,\r\n  BLOCKED: 6,\r\n  ALL: 7,\r\n};\r\n\r\nexport const FriendOption = [\r\n  {\r\n    name: \"All\",\r\n    type: FriendOptionType.ALL,\r\n  },\r\n  {\r\n    name: \"Friends\",\r\n    type: FriendOptionType.FRIENDS,\r\n  },\r\n  {\r\n    name: \"Requests\",\r\n    type: FriendOptionType.FRIEND_REQUESTS,\r\n  },\r\n  {\r\n    name: \"Following\",\r\n    type: FriendOptionType.FOLLOWING,\r\n  },\r\n  {\r\n    name: \"Followers\",\r\n    type: FriendOptionType.FOLLOWERS,\r\n  },\r\n  {\r\n    name: \"Blocked\",\r\n    type: FriendOptionType.BLOCKED,\r\n  },\r\n];\r\n","import Button from \"components/Button\";\r\nimport ConfirmModal from \"components/ConfirmModal\";\r\nimport ImageCircle from \"components/ImageCircle\";\r\nimport Pagination from \"components/Pagination\";\r\nimport useFriendApi from \"hooks/api/useFriendApi.js\";\r\nimport React, { useEffect, useState } from \"react\";\r\n\r\nexport default function BlockedList({ keyword }) {\r\n  const [list, setList] = useState({ items: [] });\r\n  const [confirmModal, setConfirmModal] = useState({});\r\n  const friendApi = useFriendApi();\r\n  const [isLoading, setIsLoading] = useState(false);\r\n  const [pagination, setPagination] = useState({ page: 1 });\r\n  const [error, setError] = useState(\"\");\r\n  const [isHasMore, setIsHasMore] = useState(true);\r\n\r\n  useEffect(() => {\r\n    setPagination({ ...pagination, page: 1, keyword: keyword });\r\n  }, [keyword]);\r\n  useEffect(() => {\r\n    // auto fetch data when page = 1\r\n    if ((isHasMore && pagination) || pagination.page === 1) {\r\n      setIsLoading(true);\r\n      setError(false);\r\n      friendApi\r\n        .getBlocked(pagination)\r\n        .then((response) => {\r\n          if (pagination.page > 1) {\r\n            setList({\r\n              ...response,\r\n              items: list.items.concat(response.items),\r\n            });\r\n          } else {\r\n            setList(response);\r\n          }\r\n          setIsHasMore(pagination.page < response.pageCount);\r\n          setIsLoading(false);\r\n        })\r\n        .catch((e) => {\r\n          setError(e);\r\n        });\r\n    }\r\n  }, [pagination]);\r\n\r\n  function loadMore() {\r\n    if (isHasMore) {\r\n      setPagination({ ...pagination, page: pagination.page + 1 });\r\n    }\r\n  }\r\n  return (\r\n    <>\r\n      {confirmModal?.isOpen && (\r\n        <ConfirmModal\r\n          isOpen={confirmModal.isOpen}\r\n          closeAction={() => setConfirmModal({ isOpen: false })}\r\n          title=\"Are you sure?\"\r\n          content={confirmModal.content}\r\n          confirmButtonTitle=\"Yes\"\r\n          confirmButtonAction={confirmModal.action}\r\n        />\r\n      )}\r\n      <div className=\"grid md:grid-cols-5 grid-cols-2 gap-3\">\r\n        {list?.items.map((user) => (\r\n          <Friend\r\n            setConfirmModal={setConfirmModal}\r\n            user={user}\r\n            fetchData={() => {\r\n              setPagination({ page: 1 });\r\n            }}\r\n            key={user?.id}\r\n          />\r\n        ))}\r\n      </div>\r\n      <Pagination\r\n        loadMoreClassName=\"bg-gray-200 hover:bg-gray-300 mt-4\"\r\n        onClick={loadMore}\r\n        isLoading={isLoading}\r\n        error={error}\r\n        isHasMore={isHasMore}\r\n        loadMoreContent=\"Load more blocked friends...\"\r\n      />\r\n      {list?.totalRecords <= 0 && (\r\n        <div className=\"text-center py-3 font-semibold mt-4 text-sm md:text-base\">\r\n          You haven't blocked anyone yet\r\n        </div>\r\n      )}\r\n    </>\r\n  );\r\n}\r\n\r\nconst Friend = ({ user = {}, setConfirmModal, fetchData }) => {\r\n  const friendApi = useFriendApi();\r\n\r\n  function unblock() {\r\n    if (friendApi) {\r\n      friendApi.unblock(user.userName).then((response) => {\r\n        fetchData();\r\n      });\r\n    }\r\n  }\r\n\r\n  function openUnblockModal() {\r\n    setConfirmModal({\r\n      isOpen: true,\r\n      content: `Do you want to unblock ${user.fullName}?`,\r\n      action: unblock,\r\n    });\r\n  }\r\n  return (\r\n    <div className=\"flex-center flex-col w-full space-y-1\">\r\n      <div className=\"w-full p-3 flex-center flex-col space-y-3 rounded-lg select-none transition-base hover:bg-gray-100 dark:hover:bg-dark-third\">\r\n        <ImageCircle size=\"xl\" src={user.avatarUrl} userName={user.userName} />\r\n        <div className=\"w-full font-semibold truncate text-center\">\r\n          {user.fullName}\r\n        </div>\r\n      </div>\r\n      <div className=\"flex flex-col space-y-1 w-full\">\r\n        <Button small secondary onClick={openUnblockModal} className=\"w-full\">\r\n          Unblock\r\n        </Button>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n","import Button from \"components/Button\";\r\nimport ConfirmModal from \"components/ConfirmModal\";\r\nimport ImageCircle from \"components/ImageCircle\";\r\nimport Pagination from \"components/Pagination\";\r\nimport useFriendApi from \"hooks/api/useFriendApi.js\";\r\nimport React, { useEffect, useState } from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\n\r\nexport default function FollowerList({ keyword }) {\r\n  const [list, setList] = useState({ items: [] });\r\n  const [confirmModal, setConfirmModal] = useState({});\r\n  const friendApi = useFriendApi();\r\n  const [isLoading, setIsLoading] = useState(false);\r\n  const [pagination, setPagination] = useState({ page: 1 });\r\n  const [error, setError] = useState(\"\");\r\n  const [isHasMore, setIsHasMore] = useState(true);\r\n\r\n  useEffect(() => {\r\n    setPagination({ ...pagination, page: 1, keyword: keyword });\r\n  }, [keyword]);\r\n  useEffect(() => {\r\n    // auto fetch data when page = 1\r\n    if ((isHasMore && pagination) || pagination.page === 1) {\r\n      setIsLoading(true);\r\n      setError(false);\r\n      friendApi\r\n        .getFollowers(pagination)\r\n        .then((response) => {\r\n          if (pagination.page > 1) {\r\n            setList({\r\n              ...response,\r\n              items: list.items.concat(response.items),\r\n            });\r\n          } else {\r\n            setList(response);\r\n          }\r\n          setIsHasMore(pagination.page < response.pageCount);\r\n          setIsLoading(false);\r\n        })\r\n        .catch((e) => {\r\n          setError(e);\r\n        });\r\n    }\r\n  }, [pagination]);\r\n\r\n  function loadMore() {\r\n    if (isHasMore) {\r\n      setPagination({ ...pagination, page: pagination.page + 1 });\r\n    }\r\n  }\r\n  return (\r\n    <>\r\n      {confirmModal?.isOpen && (\r\n        <ConfirmModal\r\n          isOpen={confirmModal.isOpen}\r\n          closeAction={() => setConfirmModal({ isOpen: false })}\r\n          title=\"Are you sure?\"\r\n          content={confirmModal.content}\r\n          confirmButtonTitle=\"Yes\"\r\n          confirmButtonAction={confirmModal.action}\r\n        />\r\n      )}\r\n      <div className=\"grid md:grid-cols-5 grid-cols-2 gap-3\">\r\n        {list?.items.map((user) => (\r\n          <Friend\r\n            setConfirmModal={setConfirmModal}\r\n            user={user}\r\n            fetchData={() => {\r\n              setPagination({ page: 1 });\r\n            }}\r\n            key={user?.id}\r\n          />\r\n        ))}\r\n      </div>\r\n      <Pagination\r\n        loadMoreClassName=\"bg-gray-200 hover:bg-gray-300 mt-4\"\r\n        onClick={loadMore}\r\n        isLoading={isLoading}\r\n        error={error}\r\n        isHasMore={isHasMore}\r\n        loadMoreContent=\"Load more followers...\"\r\n      />\r\n      {list?.totalRecords <= 0 && (\r\n        <div className=\"text-center py-3 font-semibold mt-4 text-sm md:text-base\">\r\n          You have no followers\r\n        </div>\r\n      )}\r\n    </>\r\n  );\r\n}\r\n\r\nconst Friend = ({ user = {}, setConfirmModal, fetchData }) => {\r\n  const friendApi = useFriendApi();\r\n\r\n  function block() {\r\n    if (friendApi) {\r\n      friendApi.block(user.userName).then((response) => {\r\n        fetchData();\r\n      });\r\n    }\r\n  }\r\n\r\n  function openBlockModal() {\r\n    setConfirmModal({\r\n      isOpen: true,\r\n      content: `Do you want to block ${user.fullName}?`,\r\n      action: block,\r\n    });\r\n  }\r\n  return (\r\n    <div className=\"flex-center flex-col w-full space-y-1\">\r\n      <Link\r\n        to={`/profile/${user.userName}`}\r\n        className=\"w-full p-3 flex-center flex-col space-y-3 rounded-lg cursor-pointer select-none transition-base hover:bg-gray-100 dark:hover:bg-dark-third\"\r\n      >\r\n        <ImageCircle size=\"xl\" src={user.avatarUrl} userName={user.userName} />\r\n        <div className=\"w-full font-semibold truncate text-center\">\r\n          {user.fullName}\r\n        </div>\r\n      </Link>\r\n      <div className=\"flex flex-col space-y-1 w-full\">\r\n        <Button small secondary onClick={openBlockModal} className=\"w-full\">\r\n          Block\r\n        </Button>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n","import Button from \"components/Button\";\r\nimport ConfirmModal from \"components/ConfirmModal\";\r\nimport ImageCircle from \"components/ImageCircle\";\r\nimport Pagination from \"components/Pagination\";\r\nimport useFriendApi from \"hooks/api/useFriendApi.js\";\r\nimport React, { useEffect, useState } from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\n\r\nexport default function FollowingList({ keyword }) {\r\n  const [list, setList] = useState({ items: [] });\r\n  const [confirmModal, setConfirmModal] = useState({});\r\n  const friendApi = useFriendApi();\r\n  const [isLoading, setIsLoading] = useState(false);\r\n  const [pagination, setPagination] = useState({ page: 1 });\r\n  const [error, setError] = useState(\"\");\r\n  const [isHasMore, setIsHasMore] = useState(true);\r\n\r\n  useEffect(() => {\r\n    setPagination({ ...pagination, page: 1, keyword: keyword });\r\n  }, [keyword]);\r\n  useEffect(() => {\r\n    // auto fetch data when page = 1\r\n    if ((isHasMore && pagination) || pagination.page === 1) {\r\n      setIsLoading(true);\r\n      setError(false);\r\n      friendApi\r\n        .getFollowing(pagination)\r\n        .then((response) => {\r\n          if (pagination.page > 1) {\r\n            setList({\r\n              ...response,\r\n              items: list.items.concat(response.items),\r\n            });\r\n          } else {\r\n            setList(response);\r\n          }\r\n          setIsHasMore(pagination.page < response.pageCount);\r\n          setIsLoading(false);\r\n        })\r\n        .catch((e) => {\r\n          setError(e);\r\n        });\r\n    }\r\n  }, [pagination]);\r\n\r\n  function loadMore() {\r\n    if (isHasMore) {\r\n      setPagination({ ...pagination, page: pagination.page + 1 });\r\n    }\r\n  }\r\n  return (\r\n    <>\r\n      {confirmModal?.isOpen && (\r\n        <ConfirmModal\r\n          isOpen={confirmModal.isOpen}\r\n          closeAction={() => setConfirmModal({ isOpen: false })}\r\n          title=\"Are you sure?\"\r\n          content={confirmModal.content}\r\n          confirmButtonTitle=\"Yes\"\r\n          confirmButtonAction={confirmModal.action}\r\n        />\r\n      )}\r\n      <div className=\"grid md:grid-cols-5 grid-cols-2 gap-3\">\r\n        {list?.items.map((user) => (\r\n          <Friend user={user} key={user?.id} />\r\n        ))}\r\n      </div>\r\n      <Pagination\r\n        loadMoreClassName=\"bg-gray-200 hover:bg-gray-300 mt-4\"\r\n        onClick={loadMore}\r\n        isLoading={isLoading}\r\n        error={error}\r\n        isHasMore={isHasMore}\r\n        loadMoreContent=\"Load more following...\"\r\n      />\r\n      {list?.totalRecords <= 0 && (\r\n        <div className=\"text-center py-3 font-semibold mt-4 text-sm md:text-base\">\r\n          You aren't following anyone\r\n        </div>\r\n      )}\r\n    </>\r\n  );\r\n}\r\n\r\nconst Friend = ({ user = {} }) => {\r\n  const friendApi = useFriendApi();\r\n  const [isFollowing, setIsFollowing] = useState(true);\r\n\r\n  function handleFollow() {\r\n    if (friendApi) {\r\n      if (isFollowing) {\r\n        friendApi.unfollow(user.userName).then((response) => {\r\n          setIsFollowing(false);\r\n        });\r\n      } else {\r\n        friendApi.follow(user.userName).then((response) => {\r\n          setIsFollowing(true);\r\n        });\r\n      }\r\n    }\r\n  }\r\n  return (\r\n    <div className=\"flex-center flex-col w-full space-y-1\">\r\n      <Link\r\n        to={`/profile/${user.userName}`}\r\n        className=\"w-full p-3 flex-center flex-col space-y-3 rounded-lg cursor-pointer select-none transition-base hover:bg-gray-100 dark:hover:bg-dark-third\"\r\n      >\r\n        <ImageCircle size=\"xl\" src={user.avatarUrl} userName={user.userName} />\r\n        <div className=\"w-full font-semibold truncate text-center\">\r\n          {user.fullName}\r\n        </div>\r\n      </Link>\r\n      <div className=\"flex flex-col space-y-1 w-full\">\r\n        {isFollowing ? (\r\n          <Button small secondary onClick={handleFollow} className=\"w-full\">\r\n            Unfollow\r\n          </Button>\r\n        ) : (\r\n          <Button small onClick={handleFollow} className=\"w-full\">\r\n            Follow\r\n          </Button>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n","import ClickableIcon from \"components/ClickableIcon\";\r\nimport ConfirmModal from \"components/ConfirmModal\";\r\nimport ImageCircle from \"components/ImageCircle\";\r\nimport Pagination from \"components/Pagination\";\r\nimport useFriendApi from \"hooks/api/useFriendApi.js\";\r\nimport { useCloseOnClickOutside } from \"hooks/utils/useCloseOnClickOutside\";\r\nimport moment from \"moment\";\r\nimport React, { useEffect, useRef, useState } from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\n\r\nexport default function FriendList({ keyword }) {\r\n  const [list, setList] = useState({ items: [] });\r\n  const [confirmModal, setConfirmModal] = useState({});\r\n  const friendApi = useFriendApi();\r\n  const [isLoading, setIsLoading] = useState(false);\r\n  const [pagination, setPagination] = useState({ page: 1 });\r\n  const [error, setError] = useState(\"\");\r\n  const [isHasMore, setIsHasMore] = useState(true);\r\n\r\n  useEffect(() => {\r\n    setPagination({ ...pagination, page: 1, keyword: keyword });\r\n  }, [keyword]);\r\n  useEffect(() => {\r\n    // auto fetch data when page = 1\r\n    if ((isHasMore && pagination) || pagination.page === 1) {\r\n      setIsLoading(true);\r\n      setError(false);\r\n      friendApi\r\n        .getFriends(pagination)\r\n        .then((response) => {\r\n          if (pagination.page > 1) {\r\n            setList({\r\n              ...response,\r\n              items: list.items.concat(response.items),\r\n            });\r\n          } else {\r\n            setList(response);\r\n          }\r\n          setIsHasMore(pagination.page < response.pageCount);\r\n          setIsLoading(false);\r\n        })\r\n        .catch((e) => {\r\n          setError(e);\r\n        });\r\n    }\r\n  }, [pagination]);\r\n\r\n  function loadMore() {\r\n    if (isHasMore) {\r\n      setPagination({ ...pagination, page: pagination.page + 1 });\r\n    }\r\n  }\r\n  return (\r\n    <>\r\n      {confirmModal?.isOpen && (\r\n        <ConfirmModal\r\n          isOpen={confirmModal.isOpen}\r\n          closeAction={() => setConfirmModal({ isOpen: false })}\r\n          title=\"Are you sure?\"\r\n          content={confirmModal.content}\r\n          confirmButtonTitle=\"Yes\"\r\n          confirmButtonAction={confirmModal.action}\r\n        />\r\n      )}\r\n      <div className=\"flex flex-col md:grid md:grid-cols-2 md:gap-10\">\r\n        {list?.items.map((friendship) => (\r\n          <Friend\r\n            setConfirmModal={setConfirmModal}\r\n            friendship={friendship}\r\n            user={friendship.user}\r\n            fetchData={() => {\r\n              setPagination({ page: 1 });\r\n            }}\r\n            key={friendship?.user?.id}\r\n          />\r\n        ))}\r\n      </div>\r\n      <Pagination\r\n        loadMoreClassName=\"bg-gray-200 hover:bg-gray-300 mt-4\"\r\n        onClick={loadMore}\r\n        isLoading={isLoading}\r\n        error={error}\r\n        isHasMore={isHasMore}\r\n        loadMoreContent=\"Load more friends...\"\r\n      />\r\n      {list?.totalRecords <= 0 && (\r\n        <div className=\"text-center py-3 font-semibold mt-4 text-sm md:text-base\">\r\n          Not found any friends\r\n          <br /> You should make more friends\r\n        </div>\r\n      )}\r\n    </>\r\n  );\r\n}\r\n\r\nconst Friend = ({ friendship = {}, user = {}, setConfirmModal, fetchData }) => {\r\n  const [isOpenMenu, setIsOpenMenu] = useState(false);\r\n  const [isFriend, setIsFriend] = useState(true);\r\n  const [isFollowing, setIsFollowing] = useState(friendship.isFollowing);\r\n  const ref = useRef();\r\n  const friendApi = useFriendApi();\r\n\r\n  useCloseOnClickOutside(isOpenMenu, setIsOpenMenu, ref);\r\n\r\n  useEffect(() => {\r\n    setIsFollowing(friendship.isFollowing);\r\n  }, [friendship]);\r\n\r\n  function handleFriend() {\r\n    if (friendApi) {\r\n      if (isFriend) {\r\n        openUnfriendModal();\r\n      } else {\r\n        friendApi.addFriend(user.userName).then((response) => {\r\n          setIsFriend(true);\r\n        });\r\n      }\r\n      setIsOpenMenu(false);\r\n    }\r\n  }\r\n  function unfriend() {\r\n    if (friendApi) {\r\n      friendApi.unfriend(user.userName).then((response) => {\r\n        setIsFriend(false);\r\n      });\r\n    }\r\n  }\r\n  function handleFollow() {\r\n    if (friendApi) {\r\n      if (isFollowing) {\r\n        friendApi.unfollow(user.userName).then((response) => {\r\n          setIsFollowing(false);\r\n        });\r\n      } else {\r\n        friendApi.follow(user.userName).then((response) => {\r\n          setIsFollowing(true);\r\n        });\r\n      }\r\n    }\r\n    setIsOpenMenu(false);\r\n  }\r\n\r\n  function block() {\r\n    if (friendApi) {\r\n      friendApi.block(user.userName).then((response) => {\r\n        fetchData();\r\n      });\r\n    }\r\n  }\r\n  function openBlockModal() {\r\n    setConfirmModal({\r\n      isOpen: true,\r\n      content: `Do you want to block ${user.fullName}?`,\r\n      action: block,\r\n    });\r\n  }\r\n  function openUnfriendModal() {\r\n    setConfirmModal({\r\n      isOpen: true,\r\n      content: `Do you want to unfriend ${user.fullName}?`,\r\n      action: unfriend,\r\n    });\r\n  }\r\n  return (\r\n    <div className=\"flex items-center justify-between w-full space-x-2\">\r\n      <Link\r\n        to={`/profile/${user.userName}`}\r\n        className=\"w-full p-2 flex justify-start items-center space-x-2 rounded-lg cursor-pointer select-none transition-base hover:bg-gray-100 dark:hover:bg-dark-third\"\r\n      >\r\n        <ImageCircle src={user.avatarUrl} userName={user.userName} />\r\n        <div className=\"w-full flex flex-col justify-center items-start\">\r\n          <div className=\"w-11/12 font-semibold truncate\">{user.fullName}</div>\r\n          <div className=\"text-xs dark:text-dark-txt text-gray-500\">\r\n            Your friend since {moment(friendship.respondedDate).format(\"LL\")}\r\n          </div>\r\n        </div>\r\n      </Link>\r\n      <div ref={ref} className=\"relative\">\r\n        <ClickableIcon\r\n          iconClass=\"bx bx-dots-horizontal-rounded\"\r\n          secondMode\r\n          onClick={() => {\r\n            setIsOpenMenu(!isOpenMenu);\r\n          }}\r\n        />\r\n        {isOpenMenu && (\r\n          <div className=\"animate-fadeIn transition-base absolute top-5 p-1 w-48 right-0 border border-gray-200 bg-white rounded-lg shadow-lg overflow-hidden dark:bg-dark-secondary dark:border-dark-hover mt-2 select-none z-10\">\r\n            <button\r\n              className=\"flex items-center space-x-3 w-full pl-2 pr-4 py-1 rounded-md text-left hover:bg-gray-100 active:bg-gray-200 transition-base transform active:scale-95 dark:hover:bg-dark-hover text-sm\"\r\n              onClick={handleFollow}\r\n            >\r\n              <i\r\n                className={\r\n                  \"bx text-center text-xl align-middle text-black dark:text-dark-txt w-7 h-7 mr-2\" +\r\n                  \" \" +\r\n                  (isFollowing ? \"bx-x-circle\" : \"bx-check-circle\")\r\n                }\r\n              ></i>\r\n              <span className=\"text-sm\">\r\n                {isFollowing ? \"Unfollow\" : \"Follow\"}\r\n              </span>\r\n            </button>\r\n            <button\r\n              className=\"flex items-center space-x-3 w-full pl-2 pr-4 py-1 rounded-md text-left hover:bg-gray-100 active:bg-gray-200 transition-base transform active:scale-95 dark:hover:bg-dark-hover text-sm\"\r\n              onClick={handleFriend}\r\n            >\r\n              <i\r\n                className={\r\n                  \"bx text-center text-xl align-middle text-black dark:text-dark-txt w-7 h-7 mr-2\" +\r\n                  \" \" +\r\n                  (isFriend ? \"bx-user-x\" : \"bx-user-plus\")\r\n                }\r\n              ></i>\r\n              <span className=\"text-sm\">\r\n                {isFriend ? \"Unfriend\" : \"Add friend\"}\r\n              </span>\r\n            </button>\r\n            <button\r\n              className=\"flex items-center space-x-3 w-full pl-2 pr-4 py-1 rounded-md text-left hover:bg-gray-100 active:bg-gray-200 transition-base transform active:scale-95 dark:hover:bg-dark-hover text-sm\"\r\n              onClick={() => {\r\n                setIsOpenMenu(false);\r\n                openBlockModal();\r\n              }}\r\n            >\r\n              <i className=\"bx bx-block text-center text-xl align-middle text-black dark:text-dark-txt w-7 h-7 mr-2\"></i>\r\n              <span className=\"text-sm\">Block</span>\r\n            </button>\r\n          </div>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n","import Button from \"components/Button\";\r\nimport ConfirmModal from \"components/ConfirmModal\";\r\nimport ImageCircle from \"components/ImageCircle\";\r\nimport Pagination from \"components/Pagination\";\r\nimport useFriendApi from \"hooks/api/useFriendApi.js\";\r\nimport moment from \"moment\";\r\nimport React, { useEffect, useState } from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { formatDate } from \"utils/UtilityMethods\";\r\n\r\nexport default function FriendRequestList({ keyword }) {\r\n  const [list, setList] = useState({ items: [] });\r\n  const [confirmModal, setConfirmModal] = useState({});\r\n  const friendApi = useFriendApi();\r\n  const [isLoading, setIsLoading] = useState(false);\r\n  const [pagination, setPagination] = useState({ page: 1 });\r\n  const [error, setError] = useState(\"\");\r\n  const [isHasMore, setIsHasMore] = useState(true);\r\n\r\n  useEffect(() => {\r\n    setPagination({ ...pagination, page: 1, keyword: keyword });\r\n  }, [keyword]);\r\n  useEffect(() => {\r\n    // auto fetch data when page = 1\r\n    if ((isHasMore && pagination) || pagination.page === 1) {\r\n      setIsLoading(true);\r\n      setError(false);\r\n      friendApi\r\n        .getFriendRequests(pagination)\r\n        .then((response) => {\r\n          if (pagination.page > 1) {\r\n            setList({\r\n              ...response,\r\n              items: list.items.concat(response.items),\r\n            });\r\n          } else {\r\n            setList(response);\r\n          }\r\n          setIsHasMore(pagination.page < response.pageCount);\r\n          setIsLoading(false);\r\n        })\r\n        .catch((e) => {\r\n          setError(e);\r\n        });\r\n    }\r\n  }, [pagination]);\r\n\r\n  function loadMore() {\r\n    if (isHasMore) {\r\n      setPagination({ ...pagination, page: pagination.page + 1 });\r\n    }\r\n  }\r\n  return (\r\n    <>\r\n      {confirmModal?.isOpen && (\r\n        <ConfirmModal\r\n          isOpen={confirmModal.isOpen}\r\n          closeAction={() => setConfirmModal({ isOpen: false })}\r\n          title=\"Are you sure?\"\r\n          content={confirmModal.content}\r\n          confirmButtonTitle=\"Yes\"\r\n          confirmButtonAction={confirmModal.action}\r\n        />\r\n      )}\r\n      <div className=\"grid md:grid-cols-5 grid-cols-2 gap-3\">\r\n        {list?.items.map((friendship) => (\r\n          <Friend\r\n            setConfirmModal={setConfirmModal}\r\n            friendship={friendship}\r\n            user={friendship.user}\r\n            fetchData={() => {\r\n              setPagination({ page: 1 });\r\n            }}\r\n            key={friendship?.user?.id}\r\n          />\r\n        ))}\r\n      </div>\r\n      <Pagination\r\n        loadMoreClassName=\"bg-gray-200 hover:bg-gray-300 mt-4\"\r\n        onClick={loadMore}\r\n        isLoading={isLoading}\r\n        error={error}\r\n        isHasMore={isHasMore}\r\n        loadMoreContent=\"Load more friend requests...\"\r\n      />\r\n      {list?.totalRecords <= 0 && (\r\n        <div className=\"text-center py-3 font-semibold mt-4 text-sm md:text-base\">\r\n          You have no friend requests\r\n        </div>\r\n      )}\r\n    </>\r\n  );\r\n}\r\n\r\nconst Friend = ({ friendship = {}, user = {}, setConfirmModal, fetchData }) => {\r\n  const friendApi = useFriendApi();\r\n  const [isAccepted, setIsAccepted] = useState(false);\r\n\r\n  function handleAccept() {\r\n    if (friendApi) {\r\n      friendApi.accept(user.userName).then((response) => {\r\n        setIsAccepted(true);\r\n      });\r\n    }\r\n  }\r\n  function decline() {\r\n    if (friendApi) {\r\n      friendApi.unfriend(user.userName).then((response) => {\r\n        fetchData();\r\n      });\r\n    }\r\n  }\r\n\r\n  function openDeclineModal() {\r\n    setConfirmModal({\r\n      isOpen: true,\r\n      content: `Do you want to decline friend request from ${user.fullName}?`,\r\n      action: decline,\r\n    });\r\n  }\r\n  return (\r\n    <div className=\"flex-center flex-col w-full space-y-1\">\r\n      <Link\r\n        to={`/profile/${user.userName}`}\r\n        className=\"w-full p-3 flex-center flex-col space-y-3 rounded-lg cursor-pointer select-none transition-base hover:bg-gray-100 dark:hover:bg-dark-third\"\r\n      >\r\n        <ImageCircle size=\"xl\" src={user.avatarUrl} userName={user.userName} />\r\n        <div className=\"w-full flex flex-col justify-center items-start text-center\">\r\n          <div className=\"max-w-full font-semibold truncate text-center w-full\">\r\n            {user.fullName}\r\n          </div>\r\n          <div className=\"text-xs dark:text-dark-txt text-gray-500 text-center w-full\">\r\n            {formatDate(friendship.requestedDate)}\r\n          </div>\r\n        </div>\r\n      </Link>\r\n      <div className=\"flex flex-col space-y-1 w-full\">\r\n        {isAccepted ? (\r\n          <span className=\"font-semibold text-center align-middle w-full text-green-600 dark:text-green-400 select-none\">\r\n            Accepted\r\n          </span>\r\n        ) : (\r\n          <>\r\n            <Button small onClick={handleAccept} className=\"w-full\">\r\n              Accept\r\n            </Button>\r\n            <Button\r\n              small\r\n              secondary\r\n              onClick={openDeclineModal}\r\n              className=\"w-full\"\r\n            >\r\n              Decline\r\n            </Button>\r\n          </>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n","import ConfirmModal from \"components/ConfirmModal\";\r\nimport ImageCircle from \"components/ImageCircle\";\r\nimport Pagination from \"components/Pagination\";\r\nimport useUserApi from \"hooks/api/useUserApi\";\r\nimport React, { useEffect, useState } from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\n\r\nexport default function AllUserList({ keyword }) {\r\n  const [list, setList] = useState({ items: [] });\r\n  const [confirmModal, setConfirmModal] = useState({});\r\n  const userApi = useUserApi();\r\n  const [isLoading, setIsLoading] = useState(false);\r\n  const [pagination, setPagination] = useState({ page: 1 });\r\n  const [error, setError] = useState(\"\");\r\n  const [isHasMore, setIsHasMore] = useState(true);\r\n\r\n  useEffect(() => {\r\n    setPagination({ ...pagination, page: 1, keyword: keyword });\r\n  }, [keyword]);\r\n  useEffect(() => {\r\n    // auto fetch data when page = 1\r\n    if ((isHasMore && pagination) || pagination.page === 1) {\r\n      setIsLoading(true);\r\n      setError(false);\r\n      userApi\r\n        .getUserList(pagination)\r\n        .then((response) => {\r\n          if (pagination.page > 1) {\r\n            setList({\r\n              ...response,\r\n              items: list.items.concat(response.items),\r\n            });\r\n          } else {\r\n            setList(response);\r\n          }\r\n          setIsHasMore(pagination.page < response.pageCount);\r\n          setIsLoading(false);\r\n        })\r\n        .catch((e) => {\r\n          setError(e);\r\n        });\r\n    }\r\n  }, [pagination]);\r\n\r\n  function loadMore() {\r\n    if (isHasMore) {\r\n      setPagination({ ...pagination, page: pagination.page + 1 });\r\n    }\r\n  }\r\n  return (\r\n    <>\r\n      {confirmModal?.isOpen && (\r\n        <ConfirmModal\r\n          isOpen={confirmModal.isOpen}\r\n          closeAction={() => setConfirmModal({ isOpen: false })}\r\n          title=\"Are you sure?\"\r\n          content={confirmModal.content}\r\n          confirmButtonTitle=\"Yes\"\r\n          confirmButtonAction={confirmModal.action}\r\n        />\r\n      )}\r\n      <div className=\"grid md:grid-cols-5 grid-cols-2 gap-3\">\r\n        {list?.items.map((user) => (\r\n          <Friend user={user} key={user?.id} />\r\n        ))}\r\n      </div>\r\n      <Pagination\r\n        loadMoreClassName=\"bg-gray-200 hover:bg-gray-300 mt-4\"\r\n        onClick={loadMore}\r\n        isLoading={isLoading}\r\n        error={error}\r\n        isHasMore={isHasMore}\r\n        loadMoreContent=\"Load more users...\"\r\n      />\r\n      {list?.totalRecords <= 0 && (\r\n        <div className=\"text-center py-3 font-semibold mt-4 text-sm md:text-base\">\r\n          Not found any users\r\n        </div>\r\n      )}\r\n    </>\r\n  );\r\n}\r\n\r\nconst Friend = ({ user = {} }) => {\r\n  return (\r\n    <div className=\"flex-center flex-col w-full space-y-1\">\r\n      <Link\r\n        to={`/profile/${user.userName}`}\r\n        className=\"w-full p-3 flex-center flex-col space-y-3 rounded-lg cursor-pointer select-none transition-base hover:bg-gray-100 dark:hover:bg-dark-third\"\r\n      >\r\n        <ImageCircle size=\"xl\" src={user.avatarUrl} userName={user.userName} />\r\n        <div className=\"w-full font-semibold truncate text-center\">\r\n          {user.fullName}\r\n        </div>\r\n      </Link>\r\n    </div>\r\n  );\r\n};\r\n","import React, { useState } from \"react\";\r\nimport { FriendOption, FriendOptionType } from \"./utils/Constants\";\r\nimport BlockedList from \"./components/BlockedList\";\r\nimport FollowerList from \"./components/FollowerList\";\r\nimport FollowingList from \"./components/FollowingList\";\r\nimport FriendList from \"./components/FriendList\";\r\nimport FriendRequestList from \"./components/FriendRequestList\";\r\nimport AllUserList from \"./components/AllUserList\";\r\n\r\nfunction Friends() {\r\n  const [keyword, setKeyword] = useState(\"\");\r\n  const [activeTabType, setActiveTabType] = useState(FriendOptionType.FRIENDS);\r\n\r\n  return (\r\n    <>\r\n      <div className=\"w-full max-w-screen-lg mx-auto rounded-xl bg-white dark:bg-dark-secondary px-5 py-4 pb-6 flex flex-col space-y-4\">\r\n        <div className=\"flex justify-between items-center\">\r\n          <span className=\"font-bold md:text-2xl text-xl\">Friends</span>\r\n          <div className=\"relative\">\r\n            <input\r\n              type=\"search\"\r\n              className=\"bg-gray-100 dark:bg-dark-third dark:text-white rounded-full outline-none pl-10 pr-3 py-2 focus:ring-2 ring-green-400 ring-opacity-50 transition-base text-sm md:text-base\"\r\n              placeholder=\"Search friends!\"\r\n              value={keyword}\r\n              onChange={(e) => setKeyword(e.target.value)}\r\n            />\r\n            <i className=\"bx bx-search absolute text-xl top-1/2 left-3 transform text-gray-400 -translate-y-1/2 cursor-pointer\"></i>\r\n          </div>\r\n        </div>\r\n        <div className=\"flex overflow-x-auto w-full justify-start items-center flex-shrink-0\">\r\n          {FriendOption.map((tab) => (\r\n            <span\r\n              key={\"Friend option \" + tab.name}\r\n              onClick={() => setActiveTabType(tab.type)}\r\n              className={\r\n                \"text-sm md:text-base font-semibold px-4 py-4 cursor-pointer select-none transition-base border-b-4 \" +\r\n                \" \" +\r\n                (tab.type === activeTabType\r\n                  ? \"text-green-600 dark:text-green-400 border-green-500\"\r\n                  : \"hover:bg-gray-100 active:bg-gray-200 dark:hover:bg-dark-hover dark:active:bg-dark-third rounded-lg border-transparent active:transform active:scale-95\")\r\n              }\r\n            >\r\n              {tab.name}\r\n            </span>\r\n          ))}\r\n        </div>\r\n        <div className=\"pt-2\">\r\n          {activeTabType === FriendOptionType.FRIENDS && (\r\n            <FriendList keyword={keyword} />\r\n          )}\r\n          {activeTabType === FriendOptionType.FRIEND_REQUESTS && (\r\n            <FriendRequestList keyword={keyword} />\r\n          )}\r\n          {activeTabType === FriendOptionType.BLOCKED && (\r\n            <BlockedList keyword={keyword} />\r\n          )}\r\n          {activeTabType === FriendOptionType.FOLLOWERS && (\r\n            <FollowerList keyword={keyword} />\r\n          )}\r\n          {activeTabType === FriendOptionType.FOLLOWING && (\r\n            <FollowingList keyword={keyword} />\r\n          )}\r\n          {activeTabType === FriendOptionType.ALL && (\r\n            <AllUserList keyword={keyword} />\r\n          )}\r\n        </div>\r\n      </div>\r\n    </>\r\n  );\r\n}\r\n\r\nexport default Friends;\r\n","import Pagination from \"components/Pagination\";\r\nimport Post from \"features/Home/components/Post\";\r\nimport useAllPostPagination from \"hooks/pagination/useAllPostPagination\";\r\nimport React, { useEffect, useState } from \"react\";\r\nimport { useParams, useHistory } from \"react-router-dom\";\r\n\r\nfunction Search() {\r\n  const history = useHistory();\r\n  const { keyword } = useParams();\r\n  const [searchKeyword, setSearchKeyword] = useState(\"\");\r\n  const [pagination, setPagination] = useState({ page: -1 });\r\n  const { posts, isHasMore, isLoading, error } =\r\n    useAllPostPagination(pagination);\r\n\r\n  useEffect(() => {\r\n    if (keyword) {\r\n      setPagination({ keyword, page: 1 });\r\n    } else {\r\n      setPagination({ keyword, page: -1 });\r\n    }\r\n  }, [keyword]);\r\n  function loadMore() {\r\n    if (isHasMore) {\r\n      setPagination({ keyword, page: pagination.page + 1 });\r\n    }\r\n  }\r\n  const search = (e) => {\r\n    e.preventDefault();\r\n    history.push(\"/search/\" + searchKeyword);\r\n  };\r\n  return (\r\n    <>\r\n      <form\r\n        onSubmit={(e) => search(e)}\r\n        className=\"sticky top-16 md:hidden mb-4 z-20\"\r\n      >\r\n        <input\r\n          type=\"search\"\r\n          className=\"bg-gray-200 dark:bg-dark-third dark:text-white rounded-full outline-none pl-10 pr-3 py-2 focus:ring-2 ring-green-400 ring-opacity-50 transition-base w-full\"\r\n          placeholder=\"Search TeeApp!\"\r\n          value={searchKeyword}\r\n          onChange={(e) => setSearchKeyword(e.target.value)}\r\n        />\r\n        <i className=\"bx bx-search absolute text-xl top-1/2 left-3 transform text-gray-400 -translate-y-1/2 cursor-pointer\"></i>\r\n      </form>\r\n      <div className=\"w-full flex flex-cols items-start justify-between animate-fadeIn space-x-2\">\r\n        <div className=\"space-y-2 md:space-y-3 lg:min-w-600 md:min-w-500 w-full flex flex-col items-center\">\r\n          {[...posts?.items]\r\n            ?.sort((a, b) => (a.dateCreated < b.dateCreated ? 1 : -1))\r\n            ?.map((post) => (\r\n              <Post key={post.id} post={post} />\r\n            ))}\r\n          {pagination.page !== -1 && (\r\n            <Pagination\r\n              loadMoreClassName=\"bg-gray-200 hover:bg-gray-300\"\r\n              onClick={loadMore}\r\n              isLoading={isLoading}\r\n              error={error}\r\n              isHasMore={isHasMore}\r\n              loadMoreContent=\"Load more posts...\"\r\n            />\r\n          )}\r\n          {pagination.page === -1 && (\r\n            <div className=\"text-center py-3 font-semibold\">\r\n              Please enter keywords to search\r\n            </div>\r\n          )}\r\n          {posts?.totalRecords <= 0 && (\r\n            <div className=\"text-center py-3 font-semibold\">\r\n              No posts found for: \"{keyword}\"\r\n            </div>\r\n          )}\r\n        </div>\r\n      </div>\r\n    </>\r\n  );\r\n}\r\n\r\nexport default Search;\r\n","import { useEffect, useState } from \"react\";\r\nimport usePostApi from \"hooks/api/usePostApi\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { loadPost, refreshPost } from \"app/postSlice\";\r\n\r\nexport default function useAllPostPagination(pagination) {\r\n  const [isLoading, setIsLoading] = useState(false);\r\n  const [error, setError] = useState(\"\");\r\n  const posts = useSelector((state) => state.posts.posts);\r\n  const [isHasMore, setIsHasMore] = useState(true);\r\n\r\n  const postApi = usePostApi();\r\n  const dispatch = useDispatch();\r\n\r\n  useEffect(() => {\r\n    // auto fetch data when page = 1\r\n    if (pagination.page === -1) {\r\n      dispatch(refreshPost({ items: [] }));\r\n    }\r\n    if (\r\n      ((isHasMore && pagination) || pagination.page === 1) &&\r\n      pagination.page !== -1\r\n    ) {\r\n      setIsLoading(true);\r\n      setError(false);\r\n      postApi\r\n        .getAll(pagination)\r\n        .then((response) => {\r\n          if (pagination.page > 1) {\r\n            dispatch(loadPost(response));\r\n          } else {\r\n            dispatch(refreshPost(response));\r\n          }\r\n          setIsHasMore(pagination.page < response.pageCount);\r\n          setIsLoading(false);\r\n        })\r\n        .catch((e) => {\r\n          setError(e);\r\n        });\r\n    }\r\n  }, [pagination]);\r\n\r\n  return { posts, isLoading, error, isHasMore };\r\n}\r\n","import React, { useEffect, useState } from \"react\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { HashRouter as BrowserRouter, Route, Switch } from \"react-router-dom\";\r\n\r\nimport { addNotification, setPopup } from \"app/appSlice\";\r\nimport Loader from \"components/Loader\";\r\nimport Popup from \"components/Popup\";\r\nimport Forbid from \"pages/Forbid\";\r\nimport NotFound from \"pages/NotFound\";\r\nimport ServerError from \"pages/ServerError\";\r\n\r\nimport Home from \"features/Home\";\r\nimport Header from \"features/Header\";\r\nimport Profile from \"features/Profile\";\r\n\r\nimport Chat from \"features/Chat\";\r\nimport { AppClient } from \"utils/Constants\";\r\nimport { HubConnectionBuilder } from \"@microsoft/signalr\";\r\nimport {\r\n  addComment,\r\n  updateComment,\r\n  deleteComment,\r\n  deleteReaction,\r\n  updateReaction,\r\n  addReaction,\r\n  updatePost,\r\n  deletePost,\r\n  addNewPost,\r\n} from \"app/postSlice\";\r\nimport PostDetail from \"pages/PostDetail\";\r\nimport Friends from \"features/Friends\";\r\nimport Search from \"pages/Search\";\r\n\r\nfunction App(props) {\r\n  const isLoading = useSelector((state) => state.app.isLoading);\r\n  const popup = useSelector((state) => state.app.popup);\r\n\r\n  const dispatch = useDispatch();\r\n\r\n  const [connection, setConnection] = useState(null);\r\n\r\n  function closePopup() {\r\n    dispatch(setPopup({ isOpen: false }));\r\n  }\r\n\r\n  // for realtime\r\n  useEffect(() => {\r\n    const newConnection = new HubConnectionBuilder()\r\n      .withUrl(process.env.REACT_APP_APP_HUB_URL, {\r\n        accessTokenFactory: () => localStorage.getItem(\"token\"),\r\n      })\r\n      .withAutomaticReconnect()\r\n      .build();\r\n\r\n    setConnection(newConnection);\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    if (connection && !connection.connectionStarted) {\r\n      connection.start().then((result) => {\r\n        connection.on(AppClient.RECEIVE_NOTIFICATION, (response) => {\r\n          dispatch(addNotification(response));\r\n        });\r\n        connection.on(AppClient.RECEIVE_POST, (response) => {\r\n          dispatch(addNewPost());\r\n        });\r\n        connection.on(AppClient.RECEIVE_UPDATED_POST, (response) => {\r\n          dispatch(updatePost(response));\r\n        });\r\n        connection.on(AppClient.DELETE_POST, (postId) => {\r\n          dispatch(deletePost(postId));\r\n        });\r\n        connection.on(AppClient.RECEIVE_REACTION, (response) => {\r\n          dispatch(addReaction(response));\r\n        });\r\n        connection.on(AppClient.RECEIVE_UPDATED_REACTION, (response) => {\r\n          dispatch(updateReaction(response));\r\n        });\r\n        connection.on(AppClient.DELETE_REACTION, (postId, reactionId) => {\r\n          dispatch(deleteReaction({ postId, reactionId }));\r\n        });\r\n        connection.on(AppClient.RECEIVE_COMMENT, (response) => {\r\n          dispatch(addComment(response));\r\n        });\r\n        connection.on(AppClient.RECEIVE_UPDATED_COMMENT, (response) => {\r\n          dispatch(updateComment(response));\r\n        });\r\n        connection.on(AppClient.DELETE_COMMENT, (postId, commentId) => {\r\n          dispatch(deleteComment({ postId, commentId }));\r\n        });\r\n      });\r\n    }\r\n    return () => {\r\n      if (connection && connection.connectionStarted) {\r\n        connection.stop();\r\n      }\r\n    };\r\n  }, [connection]);\r\n\r\n  return (\r\n    <>\r\n      <BrowserRouter basename={process.env.PUBLIC_URL}>\r\n        {isLoading && <Loader isOpen={isLoading} className=\"z-50\" />}\r\n        {popup.isOpen && (\r\n          <Popup\r\n            title={popup.title}\r\n            isOpen={popup.isOpen}\r\n            content={popup.content}\r\n            onClick={closePopup}\r\n          />\r\n        )}\r\n        <Chat />\r\n        <Header className=\"fixed top-0 w-screen\" />\r\n        <div className=\"p-2 bg-gray-100 dark:bg-dark-primary dark:text-white min-h-screen pt-16 pb-10\">\r\n          <div className=\"w-full md:max-w-screen-xl mx-auto pt-2 md:pt-4\">\r\n            <Switch>\r\n              <Route path=\"/search/:keyword?\" component={Search} />\r\n              <Route exact path=\"/Forbid\" component={Forbid} />\r\n              <Route exact path=\"/ServerError\" component={ServerError} />\r\n              <Route exact path=\"/friends\" component={Friends} />\r\n              <Route exact path=\"/profile/:userName\" component={Profile} />\r\n              <Route exact path=\"/posts/:postId\" component={PostDetail} />\r\n              <Route exact path=\"/\" component={Home} />\r\n              <Route path=\"*\" component={NotFound} />\r\n            </Switch>\r\n          </div>\r\n        </div>\r\n      </BrowserRouter>\r\n    </>\r\n  );\r\n}\r\n\r\nexport default App;\r\n","export default __webpack_public_path__ + \"static/media/login-page.0d15c2c6.svg\";","import LoginPageImage from \"assets/img/login-page.svg\";\r\nimport Button from \"components/Button\";\r\nimport Input from \"components/Input\";\r\nimport Loader from \"components/Loader\";\r\nimport useAccountApi from \"hooks/api/useAccountApi\";\r\nimport Logo from \"logo-shadow.png\";\r\nimport React, { useEffect, useState } from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\n\r\nfunction Login() {\r\n  const [username, setUsername] = useState(\"\");\r\n  const [error, setError] = useState(\"\");\r\n  const [password, setPassword] = useState(\"\");\r\n  const [isDirty, setIsDirty] = useState(false);\r\n  const [isLoading, setIsLoading] = useState(false);\r\n\r\n  const accountApi = useAccountApi();\r\n\r\n  useEffect(() => {\r\n    if (username && password) {\r\n      setIsDirty(true);\r\n    } else {\r\n      setIsDirty(false);\r\n    }\r\n  }, [username, password]);\r\n  async function login(e) {\r\n    e.preventDefault();\r\n    setIsLoading(true);\r\n    const request = { username, password };\r\n    setError(\"\");\r\n\r\n    await accountApi\r\n      .login(request)\r\n      .then((response) => {\r\n        window.localStorage.setItem(\"token\", response);\r\n        window.location.href = process.env.PUBLIC_URL + \"/\";\r\n      })\r\n      .catch((error) => {\r\n        var message =\r\n          typeof error === \"string\"\r\n            ? error\r\n            : \"Oops, something went wrong! Please contact administrator.\";\r\n        setError(message);\r\n      });\r\n    setIsLoading(false);\r\n  }\r\n  return (\r\n    <>\r\n      {isLoading && <Loader />}\r\n      <div className=\"animate-fadeIn fixed inset-0 bg-white dark:bg-dark-primary z-10 h-screen grid lg:grid-cols-2 place-items-center gap-32 md:px-32 px-6 overflow-auto\">\r\n        <img src={LoginPageImage} alt=\"login\" className=\"lg:block hidden\" />\r\n        <form\r\n          onSubmit={(e) => login(e)}\r\n          className=\"container rounded-2xl flex flex-col md:max-w-450\"\r\n        >\r\n          <img src={Logo} alt=\"login\" className=\"h-20 w-20 mx-auto mb-3\" />\r\n          <h1 className=\"text-3xl font-bold text-primary text-green-600 dark:text-green-400 text-center mb-8\">\r\n            Login to TeeApp!\r\n          </h1>\r\n\r\n          {error && (\r\n            <span className=\"bg-red-500 rounded-md text-white text-lg mb-2 py-2 text-center\">\r\n              {error ?? \"Username or password is incorrect\"}\r\n            </span>\r\n          )}\r\n          <div className=\"space-y-2 mb-3\">\r\n            <label htmlFor=\"username\" className=\"text-lg font-semibold px-1\">\r\n              Username or email address\r\n            </label>\r\n            <Input\r\n              value={username}\r\n              onChange={(e) => setUsername(e.target.value)}\r\n              id=\"username\"\r\n              type=\"text\"\r\n            />\r\n          </div>\r\n          <div className=\"space-y-2 mb-2\">\r\n            <label htmlFor=\"password\" className=\"text-lg font-semibold px-1\">\r\n              Password\r\n            </label>\r\n            <Input\r\n              value={password}\r\n              onChange={(e) => setPassword(e.target.value)}\r\n              type=\"password\"\r\n              id=\"password\"\r\n            />\r\n          </div>\r\n\r\n          <Button\r\n            disabled={!isDirty}\r\n            content=\"Login\"\r\n            className=\"mb-4 mt-2 font-bold\"\r\n          />\r\n          <div className=\"text-center\">\r\n            Not a member?{\" \"}\r\n            <Link\r\n              to=\"/register\"\r\n              className=\"text-green-600 dark:text-green-400 font-bold\"\r\n            >\r\n              Sign up now\r\n            </Link>\r\n          </div>\r\n        </form>\r\n      </div>\r\n    </>\r\n  );\r\n}\r\n\r\nexport default Login;\r\n","import { yupResolver } from \"@hookform/resolvers/yup\";\r\nimport LoginPageImage from \"assets/img/login-page.svg\";\r\nimport Button from \"components/Button\";\r\nimport Loader from \"components/Loader\";\r\nimport Popup from \"components/Popup\";\r\nimport useAccountApi from \"hooks/api/useAccountApi\";\r\nimport React, { useEffect, useState } from \"react\";\r\nimport { useForm, useWatch } from \"react-hook-form\";\r\nimport { Link, useHistory } from \"react-router-dom\";\r\nimport { Gender } from \"utils/Enums\";\r\nimport * as yup from \"yup\";\r\n\r\nfunction Register() {\r\n  const [isChanged, setIsChanged] = useState(false);\r\n  const [isLoading, setIsLoading] = useState(false);\r\n  const [isExistsUserName, setIsExistsUserName] = useState(true);\r\n  const [popup, setPopup] = useState({\r\n    isOpen: false,\r\n    content: \"\",\r\n    title: \"Notification\",\r\n  });\r\n\r\n  const history = useHistory();\r\n  const accountApi = useAccountApi();\r\n\r\n  const INPUT_CLASS =\r\n    \"bg-gray-100 dark:bg-dark-hover dark:text-white rounded-lg w-full py-2 px-3 focus:ring-2 focus:ring-green-500 dark:focus:ring-green-400 focus:ring-opacity-80 dark:focus:ring-opacity-80 outline-none transition-base\";\r\n\r\n  // yup validation\r\n  const schema = yup.object().shape({\r\n    firstName: yup.string().required(\"First Name is required\"),\r\n    lastName: yup.string().required(\"Last Name is required\"),\r\n    dateOfBirth: yup\r\n      .date()\r\n      .required(\"Date of Birth is required\")\r\n      .test(\"checkAge\", \"Must be smaller than today\", (value) => {\r\n        var today = new Date();\r\n        return value < today;\r\n      }),\r\n    userName: yup\r\n      .string()\r\n      .required(\"User Name is required\")\r\n      .min(6, \"Username must be 6-20 characters\")\r\n      .max(20, \"Username must be 6-20 characters\")\r\n      .test(\r\n        \"checkUsername\",\r\n        \"Username does not contain special characters\",\r\n        (value) => {\r\n          return checkRegex(value, \"^[a-zA-Z0-9!@#$%^&*)(+=._-]{6,}$\");\r\n        },\r\n      )\r\n      .test(\r\n        \"existsUsername\",\r\n        \"Username is already taken\",\r\n        (value) => !isExistsUserName,\r\n      ),\r\n    email: yup\r\n      .string()\r\n      .required(\"Email is required\")\r\n      .test(\"checkEmail\", \"Email is invalid\", (value) => {\r\n        return checkRegex(\r\n          value,\r\n          /^[a-zA-Z0-9_.+-]+@[a-zA-Z0-9-]+\\.[a-zA-Z0-9-.]+$/,\r\n        );\r\n      }),\r\n    password: yup\r\n      .string()\r\n      .required(\"Password is required\")\r\n      .test(\r\n        \"checkPassword\",\r\n        \"Password must be at least 8 characters with an uppercase letter and a number\",\r\n        (value) => {\r\n          return checkRegex(\r\n            value,\r\n            \"^(?=.*[a-z])(?=.*[A-Z])(?=.*\\\\d)[A-Za-z\\\\d@$!%*?&]{8,}$\",\r\n          );\r\n        },\r\n      ),\r\n    confirmPassword: yup\r\n      .string()\r\n      .required(\"Confirm Password is required\")\r\n      .test(\r\n        \"ConfirmPasswordMatch\",\r\n        \"Password and Confirmation Password must match\",\r\n        (confirmPassword) => {\r\n          return confirmPassword === watch.password;\r\n        },\r\n      ),\r\n  });\r\n\r\n  // react hook form\r\n  const {\r\n    register,\r\n    handleSubmit,\r\n    control,\r\n    setError,\r\n    clearErrors,\r\n    reset,\r\n    formState: { errors },\r\n  } = useForm({\r\n    resolver: yupResolver(schema),\r\n    defaultValues: {},\r\n  });\r\n  const watch = useWatch({\r\n    control,\r\n  });\r\n\r\n  useEffect(() => {\r\n    accountApi.checkUserNameExists(watch.userName).then((response) => {\r\n      if (response.isExists) {\r\n        setError(\r\n          \"userName\",\r\n          {\r\n            type: \"required\",\r\n            message: `Username '${watch.userName}' is already taken`,\r\n          },\r\n          { shouldFocus: true },\r\n        );\r\n        setIsExistsUserName(true);\r\n      } else {\r\n        clearErrors(\"userName\");\r\n        setIsExistsUserName(false);\r\n      }\r\n    });\r\n  }, [watch.userName]);\r\n\r\n  useEffect(() => {\r\n    const onChange = () => {\r\n      var isValid =\r\n        watch.firstName?.trim() &&\r\n        watch.lastName?.trim() &&\r\n        watch.userName?.trim() &&\r\n        watch.email &&\r\n        watch.gender &&\r\n        watch.dateOfBirth &&\r\n        watch.password &&\r\n        watch.confirmPassword;\r\n\r\n      if (isValid) {\r\n        setIsChanged(true);\r\n        return;\r\n      }\r\n      setIsChanged(false);\r\n    };\r\n    onChange();\r\n  }, [watch]);\r\n\r\n  // handle submit\r\n  const onSubmit = async (content) => {\r\n    setIsLoading(true);\r\n\r\n    // format date\r\n    content.dateOfBirth = new Date(content.dateOfBirth).toDateInputValue();\r\n    await accountApi\r\n      .register(content)\r\n      .then((response) => {\r\n        openPopup(\r\n          \"Success\",\r\n          <span>\r\n            \"Create account successfully! Please{\" \"}\r\n            <Link className=\"font-bold text-green-600\" to=\"/login\">\r\n              log in\r\n            </Link>\r\n            !\"\r\n          </span>,\r\n        );\r\n        reset({});\r\n      })\r\n      .catch((error) => {\r\n        setIsLoading(false);\r\n        let message = error?.errors ? objToString(error?.errors) : \"\";\r\n        openPopup(\"Notification\", message);\r\n      });\r\n    setIsLoading(false);\r\n  };\r\n\r\n  function openPopup(title, content) {\r\n    const popup = {\r\n      isOpen: true,\r\n      title: title,\r\n      content: content,\r\n    };\r\n    setPopup(popup);\r\n  }\r\n\r\n  return (\r\n    <>\r\n      {isLoading && <Loader />}\r\n      {popup.isOpen && (\r\n        <Popup\r\n          title={popup.title}\r\n          isOpen={popup.isOpen}\r\n          content={popup.content}\r\n          onClick={() => {\r\n            setPopup({ isOpen: false });\r\n          }}\r\n        />\r\n      )}\r\n      <div className=\"animate-fadeIn fixed inset-0 bg-white dark:bg-dark-primary z-10 h-screen grid lg:grid-cols-2 place-items-center gap-32 md:px-32 px-6 overflow-auto pt-10 pb-20 md:py-0\">\r\n        <img src={LoginPageImage} alt=\"login\" className=\"lg:block hidden\" />\r\n        <form\r\n          onSubmit={handleSubmit(onSubmit)}\r\n          className=\"container rounded-2xl flex flex-col md:max-w-500\"\r\n        >\r\n          <h1 className=\"text-3xl font-bold text-primary text-green-600 dark:text-green-400 text-center mb-8\">\r\n            Sign up to TeeApp!\r\n          </h1>\r\n          <div className=\"mb-3 grid md:grid-cols-4 md:col-span-5 place-items-start \">\r\n            <div className=\"col-span-2 space-y-2 md:mr-2 w-full\">\r\n              <label htmlFor=\"fistName\" className=\"text-lg font-semibold \">\r\n                First Name <span className=\"text-red-500\">*</span>\r\n              </label>\r\n              <input\r\n                {...register(\"firstName\")}\r\n                type=\"text\"\r\n                className={INPUT_CLASS}\r\n              />\r\n              <div className=\"text-red-500 text-sm\">\r\n                {errors.firstName?.message}\r\n              </div>\r\n            </div>\r\n            <div className=\"col-span-2 space-y-2 md:ml-2 mt-2 md:mt-0 w-full\">\r\n              <label htmlFor=\"lastName\" className=\"text-lg font-semibold \">\r\n                Last Name <span className=\"text-red-500\">*</span>\r\n              </label>\r\n              <input\r\n                {...register(\"lastName\")}\r\n                type=\"text\"\r\n                className={INPUT_CLASS}\r\n              />\r\n              <div className=\"text-red-500 text-sm\">\r\n                {errors.lastName?.message}\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div className=\"space-y-2 mb-3\">\r\n            <label htmlFor=\"userName\" className=\"text-lg font-semibold \">\r\n              Username <span className=\"text-red-500\">*</span>\r\n            </label>\r\n            <input\r\n              {...register(\"userName\")}\r\n              type=\"text\"\r\n              className={INPUT_CLASS}\r\n            />\r\n            <div className=\"text-red-500 text-sm\">\r\n              {errors.userName?.message}\r\n            </div>\r\n          </div>\r\n          <div className=\"space-y-2 mb-3\">\r\n            <label htmlFor=\"email\" className=\"text-lg font-semibold \">\r\n              Email <span className=\"text-red-500\">*</span>\r\n            </label>\r\n            <input {...register(\"email\")} type=\"text\" className={INPUT_CLASS} />\r\n            <div className=\"text-red-500 text-sm\">{errors.email?.message}</div>\r\n          </div>\r\n          <div className=\"mb-3 grid grid-cols-2 place-items-start \">\r\n            <div className=\"col-span-2 md:col-span-1 space-y-2 w-full\">\r\n              <label htmlFor=\"gender\" className=\"text-lg font-semibold \">\r\n                Gender <span className=\"text-red-500\">*</span>\r\n              </label>\r\n              <div className=\"flex justify-evenly items-center text-center space-x-1 px-5 select-none relative h-full\">\r\n                <label\r\n                  className={\r\n                    \"w-16 flex flex-col py-1 text-sm cursor-pointer z-20 rounded-lg px-3 transition-base space-y-1\" +\r\n                    \" \" +\r\n                    (watch.gender === Gender.MALE.toString()\r\n                      ? \"bg-green-500 text-white\"\r\n                      : \"\")\r\n                  }\r\n                  htmlFor=\"male\"\r\n                >\r\n                  <i className=\"bx bx-male-sign pt-1 text-lg\"></i>\r\n                  <span>Male</span>\r\n                </label>\r\n                <label\r\n                  className={\r\n                    \"w-16 flex flex-col py-1 text-sm cursor-pointer z-20 rounded-lg px-1 transition-base space-y-1\" +\r\n                    \" \" +\r\n                    (watch.gender === Gender.FEMALE.toString()\r\n                      ? \"bg-green-500 text-white\"\r\n                      : \"\")\r\n                  }\r\n                  htmlFor=\"female\"\r\n                >\r\n                  <i className=\"bx bx-female-sign pt-1 text-lg\"></i>\r\n                  <span>Female</span>\r\n                </label>\r\n                <label\r\n                  className={\r\n                    \"w-16 flex flex-col py-1 text-sm cursor-pointer z-20 rounded-lg px-3 transition-base space-y-1\" +\r\n                    \" \" +\r\n                    (watch.gender === Gender.OTHER.toString()\r\n                      ? \"bg-green-500 text-white\"\r\n                      : \"\")\r\n                  }\r\n                  htmlFor=\"other\"\r\n                >\r\n                  <span className=\"text-lg\">⚥</span>\r\n                  <span>Other</span>\r\n                </label>\r\n                <input\r\n                  hidden\r\n                  {...register(\"gender\")}\r\n                  id=\"male\"\r\n                  name=\"gender\"\r\n                  type=\"radio\"\r\n                  value={Gender.MALE}\r\n                />\r\n                <input\r\n                  hidden\r\n                  {...register(\"gender\")}\r\n                  id=\"female\"\r\n                  name=\"gender\"\r\n                  type=\"radio\"\r\n                  value={Gender.FEMALE}\r\n                />\r\n                <input\r\n                  hidden\r\n                  {...register(\"gender\")}\r\n                  id=\"other\"\r\n                  name=\"gender\"\r\n                  type=\"radio\"\r\n                  value={Gender.OTHER}\r\n                />\r\n              </div>\r\n              <div className=\"text-red-500 text-sm\">\r\n                {errors.gender?.message}\r\n              </div>\r\n            </div>\r\n            <div className=\"col-span-2 md:col-span-1 flex flex-col space-y-2 md:ml-2 mt-2 md:mt-0 w-full\">\r\n              <label htmlFor=\"lastName\" className=\"text-lg font-semibold\">\r\n                Date of Birth <span className=\"text-red-500\">*</span>\r\n              </label>\r\n              <input\r\n                {...register(\"dateOfBirth\")}\r\n                type=\"date\"\r\n                className={INPUT_CLASS + \" w-full\"}\r\n              />\r\n              <div className=\"text-red-500 text-sm\">\r\n                {errors.dateOfBirth?.message}\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div className=\"space-y-2 mb-2\">\r\n            <label htmlFor=\"password\" className=\"text-lg font-semibold \">\r\n              Password <span className=\"text-red-500\">*</span>\r\n            </label>\r\n            <input\r\n              type=\"password\"\r\n              {...register(\"password\")}\r\n              className={INPUT_CLASS}\r\n            />\r\n            <div className=\"text-red-500 text-sm\">\r\n              {errors.password?.message}\r\n            </div>\r\n          </div>\r\n          <div className=\"space-y-2 mb-2\">\r\n            <label htmlFor=\"confirmPassword\" className=\"text-lg font-semibold \">\r\n              Confirm Password <span className=\"text-red-500\">*</span>\r\n            </label>\r\n            <input\r\n              type=\"password\"\r\n              {...register(\"confirmPassword\")}\r\n              className={INPUT_CLASS}\r\n            />\r\n            <div className=\"text-red-500 text-sm\">\r\n              {errors.confirmPassword?.message}\r\n            </div>\r\n          </div>\r\n          <Button\r\n            disabled={!isChanged}\r\n            content=\"Sign Up\"\r\n            className=\"mb-4 mt-2 font-bold\"\r\n          />\r\n          <div className=\"text-center\">\r\n            Already a member?{\" \"}\r\n            <Link\r\n              to=\"/login\"\r\n              className=\"text-green-600 dark:text-green-400 font-bold\"\r\n            >\r\n              Log in\r\n            </Link>\r\n          </div>\r\n        </form>\r\n      </div>\r\n    </>\r\n  );\r\n}\r\n\r\nexport default Register;\r\n\r\nfunction checkRegex(value, regex) {\r\n  if (value && regex) {\r\n    var pattern = new RegExp(regex);\r\n    var res = pattern.test(value);\r\n    return res;\r\n  }\r\n}\r\n\r\nDate.prototype.toDateInputValue = function () {\r\n  var local = new Date(this);\r\n  local.setMinutes(this.getMinutes() - this.getTimezoneOffset());\r\n  return local.toJSON()?.slice(0, 10);\r\n};\r\n\r\nfunction objToString(obj) {\r\n  let str = \"\";\r\n  for (const val of Object.values(obj)) {\r\n    str += `${val.toString()}, `;\r\n  }\r\n  str = str.substring(0, str.length - 2);\r\n  return str;\r\n}\r\n","import React from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport {\r\n  Switch,\r\n  HashRouter as BrowserRouter,\r\n  Route,\r\n  Redirect,\r\n} from \"react-router-dom\";\r\nimport { Provider } from \"react-redux\";\r\nimport store from \"app/store\";\r\n\r\nimport App from \"./App\";\r\n\r\nimport Login from \"pages/Login\";\r\nimport Register from \"pages/Register\";\r\nimport \"./index.css\";\r\nimport \"boxicons/css/boxicons.min.css\";\r\nimport \"@fortawesome/fontawesome-free/css/all.min.css\";\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <Provider store={store}>\r\n      <BrowserRouter basename={process.env.PUBLIC_URL}>\r\n        <Switch>\r\n          <Route exact path=\"/login\" component={Login} />\r\n          <Route exact path=\"/register\" component={Register} />\r\n          <PrivateRoute path=\"*\" component={App} />\r\n        </Switch>\r\n      </BrowserRouter>\r\n    </Provider>\r\n  </React.StrictMode>,\r\n  document.getElementById(\"root\"),\r\n);\r\n\r\nfunction PrivateRoute({ component: Component, ...rest }) {\r\n  var isLogin = window.localStorage.getItem(\"token\") ? true : false;\r\n  return (\r\n    <Route\r\n      {...rest}\r\n      render={(props) =>\r\n        isLogin === true ? (\r\n          <Component {...props} />\r\n        ) : (\r\n          <Redirect\r\n            to={{ pathname: \"/login\", state: { from: props.location } }}\r\n          />\r\n        )\r\n      }\r\n    />\r\n  );\r\n}\r\n"],"sourceRoot":""}